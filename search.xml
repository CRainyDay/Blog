<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Ubuntu编程环境配置</title>
      <link href="/Ubuntu_008.html"/>
      <url>/Ubuntu_008.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Ubuntu下开发的编程环境配置:</p><p>1.Java环境配置.</p><p>2.python环境配置.</p><p>3.git环境配置.</p><p>4.NodeJS环境配置.</p><p>5.Jetbrains全家桶与Eclipse安装.</p><p>6.Android环境配置.</p><a id="more"></a><h2 id="一-Java环境配置">一.Java环境配置</h2><ul><li>1.在<a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank" rel="noopener">ORACLE官网</a>下载你需要的 JDK, 有点慢. 这里提供三个我用的版本:<ul><li>jdk-8u281-linux-x64.tar.gz</li><li>jdk-11.0.10_linux-x64_bin.tar.gz</li><li>jdk-15.0.2_linux-x64_bin.tar.gz</li><li><a href="https://pan.baidu.com/s/1zOVtDZ6Q9EmNdHOMkddJAg" target="_blank" rel="noopener">百度云</a> 提取码：<code>q8tb</code>.</li></ul></li><li>2.下载好你需要的 jdk 后统一放到一个目录, 并解压.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /opt/jdk</span><br><span class="line">sudo chown -R username /opt/jdk</span><br><span class="line">sudo chgrp -R username /opt/jdk</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##############################</span></span></span><br><span class="line">mv jdk-* /opt/jdk</span><br><span class="line">cd /opt/jdk</span><br><span class="line">tar -zxvf jdk-*</span><br><span class="line"></span><br><span class="line">rm -f jdk-*.tar.gz</span><br></pre></td></tr></table></figure><ul><li>3.配置环境变量<ul><li>这里直接修改所有用户的全局配置变量</li><li>编辑 <code>/etc/profile</code> 文件即可: <code>sudo vim /etc/profile</code>.</li><li>在该文件的最后添加如下内容:</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 配置环境变量</span></span><br><span class="line">export JAVA_HOME=/opt/jdk/jdk1.8.0_281</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> M2_HOME=/opt/apache/apache-maven-3.6.3</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$&#123;M2_HOME&#125;</span>/bin</span></span><br></pre></td></tr></table></figure><ul><li>4.使配置的环境变量生效: <code>source /etc/profile</code>.<ul><li>注意: 只有在当前打开的终端生效, 若想永久生效, 注销当前用户重新登录即可.</li></ul></li></ul><hr><h2 id="二-Python环境配置">二.Python环境配置</h2><blockquote><p>  Ubuntu 20.04有自带的 python3, 而将 python2 给遗弃了.</p><ul><li>若想安装 py2, 一条命令: <code>sudo apt-get install python2</code> 即可安装.</li><li>但是想安装其他版本怎么办呢, 建议最好编译安装, 具体步骤可参考 <a href="/Python.html#%E2%91%A1%E4%B8%8B%E8%BD%BD%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85">Ubuntu中py2与py3共存</a></li><li>需要注意的是: Ubuntu 20.04自带的 python 没安装 pip, 还需要手动安装 pip.</li></ul></blockquote><h3 id="pip安装">pip安装</h3><ul><li>一条命令即可安装: <code>sudo apt-get install python3-pip</code>，不过可能有点慢.</li><li>也可以用下列命令安装:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line">sudo python3 get-pip.py</span><br><span class="line">rm -f get-pip.py</span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级pip</span></span><br><span class="line">sudo pip3 install -U pip</span><br></pre></td></tr></table></figure><hr><h2 id="三-GIT环境配置">三.GIT环境配置</h2><h3 id="1-GIT安装">1.GIT安装</h3><blockquote><p>  按照 <a href="https://git-scm.com/download/linux" target="_blank" rel="noopener">GIT 官网介绍文档</a>, 添加 PPA 使用 apt 安装即可.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加 PPA</span></span><br><span class="line">sudo add-apt-repository ppa:git-core/ppa</span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新</span></span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><h3 id="2-基础配置">2.基础配置</h3><ul><li>GIT的全局用户配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name "用户名"</span><br><span class="line">git config --global user.email "邮箱地址"</span><br></pre></td></tr></table></figure><hr><h2 id="四-NodeJS环境配置">四.NodeJS环境配置</h2><h3 id="1-安装">1.安装</h3><ul><li>参考<a href="https://github.com/nodesource/distributions/blob/master/README.md#debinstall" target="_blank" rel="noopener">官方文档</a>, 使用下列命令安装即可.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><h3 id="2-npm换源">2.npm换源</h3><blockquote><p>将npm的模块下载仓库从默认的国外站点改为国内的站点, 这样下载模块的速度才能比较快, 只需要一个命令即可. 其中registry_url指的是国内提供的一些npm仓库地址, 常用的有:</p><ul><li><a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></li><li><a href="http://r.cnpmjs.org/" target="_blank" rel="noopener">http://r.cnpmjs.org/</a></li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g cnpm --registry=registry_url</span><br></pre></td></tr></table></figure><hr><h2 id="五-Jetbrains全家桶与Eclipse">五.Jetbrains全家桶与Eclipse</h2><h3 id="1-下载">1.下载</h3><blockquote><p>  进入 <a href="https://www.jetbrains.com/" target="_blank" rel="noopener">Jetbrains 官网</a>下载即可, 下载速度还行.</p><ul><li><a href="https://www.jetbrains.com/idea/download/#section=linux" target="_blank" rel="noopener">IntelliJ IDEA</a></li><li><a href="https://www.jetbrains.com/pycharm/download/#section=linux" target="_blank" rel="noopener">Pycharm</a></li><li><a href="https://www.jetbrains.com/clion/download/#section=linux" target="_blank" rel="noopener">CLion</a></li><li><a href="https://www.jetbrains.com/phpstorm/download/#section=linux" target="_blank" rel="noopener">PhpStorm</a></li><li><a href="https://www.jetbrains.com/webstorm/download/#section=linux" target="_blank" rel="noopener">WebStorm</a></li><li>当然, <a href="https://developer.android.google.cn/studio/#downloads" target="_blank" rel="noopener">Android Studio</a> 也是基于 IntelliJ IDEA 的, 这里先下载了不安装, 后面单独讲 <a href="#%E5%85%AD-Android%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">Android环境配置</a></li></ul><p>  进入 <a href="https://www.eclipse.org/downloads/packages/release" target="_blank" rel="noopener">Eclipse 官网</a>下载即可.</p></blockquote><h3 id="2-安装">2.安装</h3><ul><li>这里说的安装, 就是将下载的压缩文件全都移到同一个目录下, 并解压.</li><li>注意单独将 Eclipse 的压缩包 mv 到 <code>/opt/</code> 目录下, 并将加压出来的目录命名为: <code>/opt/eclipse</code>.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 新建目录</span></span><br><span class="line">sudo mkdir /opt/jetbrains</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 移动压缩包, 注意单独将 Eclipse 的压缩包 mv 到 /opt/ 目录下</span></span><br><span class="line">cd ~/下载</span><br><span class="line">sudo mv *.tar.gz /opt/jetbrains</span><br><span class="line">cd /opt/jetbrains</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">sudo tar -zxvf *.tar.gz</span><br><span class="line">sudo rm -f *.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将相应目录依次重命名为：idea、pycharm、phpstorm、webstorm、clion</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo mv 原目录 idea、pycharm、phpstorm、webstorm、clion</span></span><br></pre></td></tr></table></figure><h3 id="3-创建desktop">3.创建desktop</h3><ul><li>①可以直接下载我的 desktop 文件: <a href="https://pan.baidu.com/s/1U8519EfW4L__CwaOPQ0-XQ" target="_blank" rel="noopener">百度云</a> 提取码: <code>1m52</code>.</li><li>若是不想用的我, 可以参看 <a href="/Ubuntu_002.html">Ubuntu添加自定义图标</a> 自行创建.</li><li>②将下载的文件解压并移动到 <code>/usr/share/applications/</code> 目录下.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf desktop.tar.gz</span><br><span class="line">sudo mv *.desktop /usr/share/applitions/</span><br></pre></td></tr></table></figure><hr><h2 id="六-Android环境配置">六.Android环境配置</h2><h3 id="1-配置JDK">1.配置JDK</h3><blockquote><p>详细步骤见: <a href="#%E4%B8%80-Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">Java环境配置</a>.</p></blockquote><h3 id="2-配置Android环境变量">2.配置Android环境变量</h3><blockquote><ul><li>ANDROID_HOME 指定的目录: 为存放Android SDK的目录, 还有下载的Android虚拟机镜像、各个版本的 build-tools、platform-tools等.</li><li>ANDROID_SDK_HOME 指定的目录: 为存放你创建的 Android 虚拟机的目录.</li></ul></blockquote><ul><li>①创建相应目录:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /opt</span><br><span class="line">sudo mkdir /opt/sdk</span><br><span class="line">sudo chown -R username sdk</span><br><span class="line">sudo chgrp -R username sdk</span><br><span class="line"></span><br><span class="line">cd sdk</span><br><span class="line">mkdir avd</span><br></pre></td></tr></table></figure><ul><li>②编辑 <code>/etc/profile</code> 文件即可: <code>sudo vim /etc/profile</code>.</li><li>在该文件的最后添加如下内容:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 配置Android环境变量</span></span><br><span class="line">export ANDROID_HOME=/opt/sdk</span><br><span class="line">export ANDROID_SDK_HOME=$&#123;ANDROID_HOME&#125;/avd</span><br><span class="line">export PATH=$PATH:$&#123;ANDROID_HOME&#125;/tools</span><br><span class="line">export PATH=$PATH:$&#123;ANDROID_HOME&#125;/platform-tools</span><br></pre></td></tr></table></figure><ul><li><p>使配置的环境变量生效: <code>source /etc/profile</code>.</p></li><li><p>注意: 只有在当前打开的终端生效, 若想永久生效, 注销当前用户重新登录即可.</p></li></ul><h3 id="3-启动Android-Studio">3.启动Android Studio</h3><blockquote><ul><li>我之前安装JetBrains全家桶时, 都统一安装完了.</li><li>当然, 你可以新建个 <code>/opt/android</code> 目录将 Android Studio mv 过去. 别忘了修改 desktop 文件的启动路径.</li><li>再新建 <code>/opt/android/sdk</code> 和 <code>/opt/android/avd</code> 目录将重复一下上述配置Android环境变量的操作.</li><li>要注意的是: <code>/opt/android/sdk</code> 和 <code>/opt/android/avd</code> 这两个目录要修改成当前用户持有, 提权 755 即可.</li></ul></blockquote><ul><li>①点击启动器图标启动即可.</li><li>对于没有图标的人, 先用以下命令启动: <code>sudo 你的android-studio目录/bin/studio.sh</code> 进去后可以创建图标.</li><li>②设置代理, 用于下载 SDK:</li><li>有代理的自行设置即可, 没有的到这里先暂停一下, 去 <a href="https://www.androiddevtools.cn/" target="_blank" rel="noopener">这里</a>下载 SDK Tools、Plantform-Tools、Build-Tools、SDK System image、SDK等 根据下载处的提示 将下载的文件解压到相应目录 即可.</li><li>③选择自定义安装:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_05.png" alt="Ubuntu_008_05"></p><ul><li>④选择你的 JDK:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_06.png" alt="Ubuntu_008_06"></p><ul><li>⑤选择你要下载安装的 SDK 和 AVD, 若是你从别处下载并配置在了你的 ANDROID_HOME 里, 这里也会有提示, 直接下一步即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_07.png" alt="Ubuntu_008_07"></p><ul><li>有代理的等待下载结束即可:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_01.png" alt="Ubuntu_008_01"></p><ul><li>⑥如下图, SDK 安装成功:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_02.png" alt="Ubuntu_008_02"></p><ul><li>⑦对于没有图标的人, 可以在进入 Android Studio 后创建, 点击 <code>Configure → Creat Desktop Entry </code>即可:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_08.png" alt="Ubuntu_008_08"></p><ul><li>⑧对于之前没有安装 AVD 的用户, 可以 点击<code>Configure → AVD Manager </code> 下载即可:</li><li>选择你要下载的 System Image:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_03.png" alt="Ubuntu_008_03"></p><ul><li>等待安装结束即可:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_008_04.png" alt="Ubuntu_008_04"></p>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu之GNOME桌面美化</title>
      <link href="/Ubuntu_007.html"/>
      <url>/Ubuntu_007.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>GNOME桌面美化:</p><p>安装tweak.</p><p>安装gnome浏览器插件.</p><p>常用的gnome扩展.</p><p>下载系统主题、图标、Shell主题等资源.</p><p>更换系统主题、系统图标、Shell主题.</p><p>下面的都是基于Ubuntu20.04美化的.</p><a id="more"></a><h2 id="一-安装插件">一.安装插件</h2><h3 id="1-安装tweak">1.安装tweak</h3><ul><li>使用命令:<ul><li><code>sudo apt-get install gnome-tweak-tool</code></li><li><code>sudo apt-get install gnome-shell-extensions</code></li></ul></li><li>安装成功后, 即可看见多了两个图标, 如图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_01.png" alt="Ubuntu_007_01"></p><h3 id="2-安装gnome浏览器插件">2.安装gnome浏览器插件</h3><ul><li>①使用浏览器打开 <a href="https://extensions.gnome.org/" target="_blank" rel="noopener">GNOME 插件官网</a>.</li><li>注意: 在这里建议使用Firefox浏览器打开. 当然, 若你能科学上网的话, 用Chrome打开也可以, 需要从Chrome应用商店下载插件.</li><li>②点击安装浏览器插件即可.</li><li>打开插件官网后, 会出现下图中的提示, 让你安装插件. 点击安装插件即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_02.png" alt="Ubuntu_007_02"></p><ul><li>③安装成功后, 刷新网页即可下载扩展.</li></ul><hr><h2 id="二-安装常用扩展">二.安装常用扩展</h2><h3 id="1-Dash-to-Dock">1.Dash to Dock</h3><ul><li><p><a href="https://extensions.gnome.org/extension/307/dash-to-dock/" target="_blank" rel="noopener">Dash to Dock</a>.</p></li><li><p>可以更好的美化你的Dock、管理你的Dock.</p></li><li><p>注意: 更改完 <strong>Dash to Dock</strong> 的配置后, 注销当前用户并重新登录.</p></li><li><p>注意: 安装Dash-to-dock后Dcok会出现重叠问题, 卸载原来的Dock即可. <code>sudo apt-get purge gnome-shell-extension-ubuntu-dock</code></p></li><li><p>如图:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_03.png" alt="Ubuntu_007_03"></p><h3 id="2-User-Themes">2.User Themes</h3><ul><li><p><a href="https://extensions.gnome.org/extension/19/user-themes/" target="_blank" rel="noopener">User Themes</a>.</p></li><li><p>支持使用你的本地shell主题.</p></li><li><p>若是不安装则无法从本地载入Shell主题.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_04.png" alt="Ubuntu_007_04"></p><h3 id="3-Desktop-Icons">3.Desktop Icons</h3><ul><li><a href="https://extensions.gnome.org/extension/1465/desktop-icons/" target="_blank" rel="noopener">Desktop Icons</a>.</li><li>支持添加桌面icons.</li></ul><h3 id="4-Netspeed">4.Netspeed</h3><ul><li><p><a href="https://extensions.gnome.org/extension/104/netspeed/" target="_blank" rel="noopener">NetSpeed</a>.</p></li><li><p>显示各个网卡的实时网速.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_05.png" alt="Ubuntu_007_05"></p><h3 id="5-Topicons-Plus">5.Topicons Plus</h3><ul><li><p><a href="https://extensions.gnome.org/extension/1031/topicons/" target="_blank" rel="noopener">TopIcons Plus</a>.</p></li><li><p>更改 top panel 上应用图标的显示.</p></li></ul><h3 id="6-Removable-driver-menu">6.Removable driver menu</h3><ul><li><p><a href="https://extensions.gnome.org/extension/7/removable-drive-menu/" target="_blank" rel="noopener">Removable Drive Menu</a>.</p></li><li><p>top panel上显示移除挂载的设备.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_06.png" alt="Ubuntu_007_06"></p><h3 id="7-Clipboard-indicator">7.Clipboard indicator</h3><ul><li><p><a href="https://extensions.gnome.org/extension/779/clipboard-indicator/" target="_blank" rel="noopener">Clipboard Indicator</a>.</p></li><li><p>剪切板工具, 感觉还是用 CopyQ 更好一些.</p></li></ul><h3 id="8-Appfolders-Management-extension">8.Appfolders Management extension</h3><ul><li><p><a href="https://extensions.gnome.org/extension/1217/appfolders-manager/" target="_blank" rel="noopener">Appfolders Management extension</a>.</p></li><li><p>支持将你的应用存在到一个文件夹中.</p></li><li><p>用鼠标拖放即可.</p></li><li><p>可以修改文件夹的名字.</p></li><li><p>注意: ubuntu20.04 上默认支持将拖动启动器进一个文件夹, 不需要安装该扩展.</p></li></ul><h3 id="9-Ubuntu-appindicators">9.Ubuntu appindicators</h3><ul><li><p><a href="https://extensions.gnome.org/extension/1301/ubuntu-appindicators/" target="_blank" rel="noopener">Ubuntu AppIndicators</a>.</p></li><li><p>在top panel上显示应用的icons.</p></li><li><p>鼠标单击应用icon, 可以显示菜单.</p></li><li><p>双击应用icon, 打开应用主窗体,</p></li></ul><h3 id="10-Coverflow-Alt-Tab">10.Coverflow Alt-Tab</h3><ul><li><p><a href="https://extensions.gnome.org/extension/97/coverflow-alt-tab/" target="_blank" rel="noopener">Coverflow Alt-Tab</a>.</p></li><li><p>Alt-Tab切换窗口时的动态效果.</p></li><li><p>可安装 <a href="https://extensions.gnome.org/extension/1403/remove-alttab-delay/" target="_blank" rel="noopener">Remove Alt+Tab Dela</a> 来移除【Alt + Tab】的开启应用预览延迟.</p></li></ul><h3 id="11-由GDM过渡到桌面">11.由GDM过渡到桌面</h3><ul><li><a href="https://extensions.gnome.org/extension/3037/good-bye-gdm-flick/" target="_blank" rel="noopener">Good Bye GDM3 Login Screen to Desktop Flick for gnome-shell 3.36 Only!</a></li><li>No Flickering Between GDM3 Login Screen to Desktop Transition.</li><li>取消由GDM3登录屏幕到桌面之间的过渡闪烁.</li></ul><h3 id="12-Screenshot-Tool">12.Screenshot Tool</h3><ul><li><p><a href="https://extensions.gnome.org/extension/1112/screenshot-tool/" target="_blank" rel="noopener">Screenshot Tool</a>.</p></li><li><p>截图插件, 看自己喜好安装.</p></li><li><p>使用shutter和flameshot加系统自带的截图就足够了.</p></li></ul><h3 id="13-Applications-Menu">13.Applications Menu</h3><ul><li><a href="https://extensions.gnome.org/extension/6/applications-menu/" target="_blank" rel="noopener">Applications Menu</a>.</li><li>在Shell顶部状态栏添加应用程序入口.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_10.png" alt="Ubuntu_007_10"></p><h3 id="14-Lock-screen-background">14.Lock screen background</h3><ul><li><a href="https://extensions.gnome.org/extension/1476/unlock-dialog-background/" target="_blank" rel="noopener">Lock screen background</a>.</li><li>支持切换锁屏壁纸.</li></ul><h3 id="15-Places-Status-Indicator">15.Places Status Indicator</h3><ul><li><a href="https://extensions.gnome.org/extension/8/places-status-indicator/" target="_blank" rel="noopener">Places Status Indicator</a>.</li><li>在Shell顶部状态栏添加 <strong>快速导航系统中的位置</strong>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_11.png" alt="Ubuntu_007_11"></p><hr><h2 id="三-更改系统主题">三.更改系统主题</h2><ul><li>注意: 若是想删除那些默认的主题, 删除前请一定备份好.</li><li>注意: 在修改系统主题的过程中不要安装软件, 以免软件的desktop图标失效.</li><li>默认主题相关的目录如下:<ul><li>/usr/share/icons</li><li>/usr/share/themes</li><li>或</li><li>/usr/local/share/icons</li><li>/usr/lcoal/share/themes</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 若是想删除默认主题, 先做好备份, 一个个删</span></span><br><span class="line">sudo cp -R /usr/share/icons /opt/backup</span><br><span class="line">sudo cp -R /usr/share/themes /opt/backup</span><br></pre></td></tr></table></figure><h3 id="1-下载主题">1.下载主题</h3><ul><li><p>在<a href="https://www.gnome-look.org/browse/cat/" target="_blank" rel="noopener">GNOME主题官网</a>下载你喜欢的主题.</p></li><li><p>①GTK3 Themes, 下面的这两款都还可以:</p><ul><li><a href="https://www.gnome-look.org/p/1214931/" target="_blank" rel="noopener">Flat Remix Blue</a></li><li><a href="https://www.gnome-look.org/p/1275087/" target="_blank" rel="noopener">McMojave</a></li></ul></li><li><p>点击 <strong>Files</strong>, 再点击你喜欢的主题颜色下载即可.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_07.png" alt="Ubuntu_007_07"></p><ul><li>②Icon Themes:<ul><li><a href="https://www.gnome-look.org/p/1305429/" target="_blank" rel="noopener">McMojave-circle</a></li><li><a href="https://www.gnome-look.org/p/1102582/" target="_blank" rel="noopener">Cupertino iCons Collection</a></li></ul></li><li>③cursors Themes:<ul><li><a href="https://www.gnome-look.org/p/1355701/" target="_blank" rel="noopener">McMojave cursors</a></li><li><a href="https://www.gnome-look.org/p/1356095/" target="_blank" rel="noopener">Volantes Cursors</a></li></ul></li><li>④Shell Themes:<ul><li><a href="https://www.gnome-look.org/p/1013030/" target="_blank" rel="noopener">Flat Remix</a></li><li><a href="https://www.gnome-look.org/p/1394329/" target="_blank" rel="noopener">BaZik</a></li><li><a href="https://www.gnome-look.org/p/1201366/" target="_blank" rel="noopener">Black Maia</a></li></ul></li></ul><h3 id="2-安装主题">2.安装主题</h3><ul><li>实际上就是将你下载的主题解压后放到相应目录.<ul><li>GTK3 Themes: 解压后放到 <code>/usr/share/themes/</code> 或 `/usr/local/share/themes 目录下.</li><li>Icon Themes: 解压后放到 <code>/usr/share/icons/</code> 或 <code>/usr/local/share/icons</code> 目录下.</li><li>cursors Themes: 解压后放到 <code>/usr/share/icons/</code> 或 <code>/usr/local/share/icons</code> 目录下.</li><li>Shell Themes: 解压后放到 <code>/usr/share/themes/</code> 或 `/usr/local/share/themes 目录下.</li></ul></li></ul><h3 id="3-切换主题">3.切换主题</h3><ul><li>打开 <strong>优化</strong>, 点击 <strong>外观</strong>, 修改相应主题即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_007_09.png" alt="Ubuntu_007_09"></p><ul><li><p>有的Shell主题顶部状态栏不是透明的, 可参看 <a href="/Ubuntu_002.html#2-%E9%80%8F%E6%98%8E%E5%8C%96shell%E9%A1%B6%E9%83%A8%E7%8A%B6%E6%80%81%E6%A0%8F">透明化shell顶部状态栏</a></p></li><li><p>有的Shell主题AppFolder不是透明的, 可参看 <a href="/Ubuntu_002.html#3-%E9%80%8F%E6%98%8E%E5%8C%96AppFolderDialog">透明化AppFolderDialog</a></p></li><li><p>若是想更换登录背景, 可参看 <a href="/Ubuntu_001.html#3-Ubuntu20.04%E6%9B%B4%E6%8D%A2%E7%99%BB%E5%BD%95%E5%A3%81%E7%BA%B8">Ubuntu20.04更换登录壁纸</a></p></li><li><p>若是想修改 GRUB 主题和开关机界面主题, 可参看 <a href="/Ubuntu_003.html">Ubuntu修改GRUB2和开关机界面主题</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> GNOME </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记录一次Ubuntu痛苦的重装之旅</title>
      <link href="/Ubuntu_000.html"/>
      <url>/Ubuntu_000.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>本篇主要内容:</p><p>一定要看的安装前言, 非常值得一看.</p><p>安装ubuntu前的准备.</p><p>安装ubuntu系统.</p><p>ubuntu系统的一些基础配置.</p><p>搭建ubuntu常用的软件环境(安装ubuntu常用软件).</p><a id="more"></a><h2 id="一-安装前言">一.安装前言</h2><div class="danger"><p>  重装原因: 之前的 SSD 突然坏掉了, SSD 无法正常识别(掉盘).</p><p>之前的 SSD 是三星的 PM981(TLC颗粒), 才用了不到一年半😰, 然后生气换了个 MLC 颗粒的 SM961(不知道能用多久, 坏了后会在此记录).</p></div><p><font style='color:red;font-weight:bloder;'>重要的数据一定要备份!</font></p><div class="danger"><p>  数据恢复: 等到失去的时候, 真正了解了 <strong>“数据无价”</strong>. 找了个专业的数据恢复公司, 经过检测是 SSD 的主控坏了, 幸好存储颗粒没坏, 但也失去了近 400 RMB(我的 SSD 是 256 GB 的, 容量越大数据恢复约贵), 后来想想感觉被坑了点钱, 也无所谓了, 就当买了个教训.</p></div><p><font style='color:red;font-weight:bloder;'>重要的数据一定要备份!</font></p><div class="info"><p>  主控突然坏掉的猜测:</p><ul><li>NPY 打开电脑玩, 在 GRUB 引导界面敲打了一通键盘 “???”, 导致 SSD 主控中的程序乱了. (一种可能的怀疑, 因为数据恢复后, 我插上坏的 SSD, 又正常识别了三四次, 还以为被坑了呢, 之后再也无法识别)</li><li>坏的前几天, 笔记本上插 SSD 的附近好像有过静电(被电了好几次), 也有可能是 SSD 真的突然坏了.</li></ul></div><p><font style='color:red;font-weight:bloder;'>重要的数据一定要备份!</font></p><blockquote><p>  善意的提醒:</p><ul><li>不要太相信 SSD, 重要的数据一定要备份!</li><li>不要买太大的 SSD, 万一真的需要专业数据恢复, 容量越大约贵的.</li><li>买个机械盘存放重要数据, 不是很建议将重要数据同步到云端.</li></ul></blockquote><p><font style='color:red;font-weight:bloder;'>重要的数据一定要备份!</font></p><hr><h2 id="二-安装前准备">二.安装前准备</h2><h3 id="1-硬件-软件准备">1.硬件/软件准备</h3><ul><li>U 盘一个(16G 足够了), 用作 U盘启动盘, 提前保存好 U盘数据, 将 U 盘格式化.</li><li>启动盘制作软件, 我这里用的是 <a href="https://github.com/balena-io/etcher/releases" target="_blank" rel="noopener">balenaEtcher</a> 软件, 这是全平台的.</li><li><a href="https://ubuntu.com/download" target="_blank" rel="noopener">ubuntu官网</a>, 下载 ubuntu 桌面版 ISO 文件. (<a href="https://ubuntu.com/download/desktop/thank-you?version=20.04.1&amp;architecture=amd64" target="_blank" rel="noopener">ubuntu-20.04.1-desktop-amd64.iso</a>)</li></ul><h3 id="2-制作U盘启动盘">2.制作U盘启动盘</h3><ul><li><p>①打开安装好的 balenaEtcher.</p></li><li><p>②选择你下载好的 ISO 文件.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_01.png" alt="Ubuntu_000_01"></p><ul><li>③选择你要制作启动盘的U盘, 看好别选错了.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_02.png" alt="Ubuntu_000_02"></p><ul><li>④点击 Flash 写入即可, 需要等待几分钟, 最后的检验环节, 可以点击 Skip 跳过.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_03.png" alt="Ubuntu_000_03"></p><hr><h2 id="三-安装ubuntu">三.安装ubuntu</h2><h3 id="1-从U盘启动">1.从U盘启动</h3><ul><li>①查看你的主板的U盘启动快捷键(自行百度搜索).</li><li>②开机时按下相应按键, 然后从U盘启动, 进入 GRUB 引导界面.</li><li>③在 GRUB 界面选择第一项(默认选第一项), 按回车即可进入ubuntu安装界面.</li><li>如下图的硬盘检测界面可能会有点慢, 等待结束即可正式开始安装.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_04.png" alt="Ubuntu_000_04"></p><h3 id="2-正式安装">2.正式安装</h3><ul><li>①选择语言. 向下滚动找到中文简体, 然后点击 <strong>安装ubuntu</strong>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_05.png" alt="Ubuntu_000_05"></p><ul><li>②选择键盘布局. 默认即可, Chinese. 然后点击 <strong>继续</strong>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_06.png" alt="Ubuntu_000_06"></p><ul><li>③网络连接.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_16.png" alt="Ubuntu_000_16"></p><ul><li>④安装选项. 选择我这里选择了 <strong>最小安装</strong>, 取消 <strong>安装ubuntu时下载更新</strong>, 然后点击 <strong>继续</strong>.</li><li>当然, 日常用的话, 你可以选择正常安装. 这里本人不建议 <strong>安装时下载更新</strong>, 有点慢.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_07.png" alt="Ubuntu_000_07"></p><ul><li>⑤安装类型. 这里选择 <strong>其他选项</strong>, 多个系统并存, 自定义分区, 然后点击 <strong>继续</strong>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_08.png" alt="Ubuntu_000_08"></p><hr><h4 id="⑥自定义分区">⑥自定义分区</h4><ul><li>A.在你要安装ubuntu的设备上, 右键单击, <strong>新建分区表</strong>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_09.png" alt="Ubuntu_000_09"></p><ul><li><p>B.在空闲分区上右键单击, 再点击 <strong>添加</strong>, 添加一个分区.</p></li><li><p>C.添加Swap分区(交换分区, 相当于虚拟内存), 对于内存大的电脑, 可以不设置交换分区, 交换分区大小设置为真实内存大小即可. 我的内存是 16GB, SSD 是256GB的, Swap分区大小设置了 16000MB(16GB).</p></li><li><p>注意: 这里的 1000MB = 1GB.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_10.png" alt="Ubuntu_000_10"></p><ul><li>D.添加 Ext4 挂载 /home. 在这里我的分区大小: 64000 MB(64GB).</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_11.png" alt="Ubuntu_000_11"></p><ul><li>E.添加 Ext4 挂载 / . 将剩下的空间分给根目录即可. 在这里, 使用 SSD 安装的, 建议留个 几 GB 的空闲分区, 在这我剩了 6GB 左右.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_12.png" alt="Ubuntu_000_12"></p><ul><li>F. 记住一般都是最后挂载 根目录 <code>/</code> 的. 当然, 你可以按照自己的喜好自行分区.</li><li>最终的分区情况如图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_13.png" alt="Ubuntu_000_13"></p><hr><ul><li>⑦分区完后, 继续下一步, 会提示是否将改动写入磁盘, 点击 <strong>继续</strong> 即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_14.png" alt="Ubuntu_000_14"></p><ul><li>⑧选择时区. 默认 Shanghai 即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_15.png" alt="Ubuntu_000_15"></p><ul><li>⑨最后一步, 输入相应信息 <strong>继续</strong> 即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_17.png" alt="Ubuntu_000_17"></p><ul><li>⑩等待安装结束即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_18.png" alt="Ubuntu_000_18"></p><ul><li>⑪安装结束后, 重启系统, 拔掉启动盘即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_19.png" alt="Ubuntu_000_19"></p><hr><h2 id="四-ubuntu基础配置">四.ubuntu基础配置</h2><h3 id="1-安装更新">1.安装更新</h3><ul><li>注意: 建议先更换 apt 源. <a href="https://blog.csdn.net/wangyijieonline/article/details/105360138" target="_blank" rel="noopener">Ubuntu 20.04换阿里源</a>.</li><li>也可以在 <strong>软件更新器</strong> 中切换下载更新的服务器站点, 选择国内的即可.</li></ul><blockquote><p>  由于在之前的系统安装过程中, 取消了 <strong>安装ubuntu时下载更新</strong> 选项, 首次进入系统后, 需要先更新系统.</p><ul><li>注意: 安装更新非常慢, 需要联网下载很多东西, 期间尽量不要断网.</li></ul></blockquote><ul><li>①打开 <strong>软件更新器</strong> 进行更新.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_21.png" alt="Ubuntu_000_21"></p><ul><li>②使用命令: <code>sudo apt-get update</code> 进行更新.</li></ul><h3 id="2-切换英伟达驱动">2.切换英伟达驱动</h3><ul><li>点击附加驱动, 切换为英伟达闭源驱动.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_22.png" alt="Ubuntu_000_22"></p><h3 id="3-u-win10双系统时间不一致">3.u+win10双系统时间不一致</h3><ul><li>依次执行以下命令即可.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ntpdate</span><br><span class="line">sudo ntpdate time.windows.com</span><br><span class="line">sudo hwclock --localtime --systohc</span><br></pre></td></tr></table></figure><h3 id="4-插入鼠标自动禁用触摸板">4.插入鼠标自动禁用触摸板</h3><ul><li>使用 touchpad-indicator 软件实现.</li><li>依次执行以下命令安装 touchpad-indicator.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:atareao/atareao</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install touchpad-indicator</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载 touchpad-indicator</span></span><br><span class="line">sudo apt-get remove --purge touchpad-indicator</span><br></pre></td></tr></table></figure><h3 id="5-修改root密码">5.修改root密码</h3><ul><li>刚装完系统, 不知道root密码, 则无法通过 <code>su root</code> 切换root用户.</li><li>修改root密码, 在终端输入: <code>sudo passwd</code> 输入新密码即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_24.png" alt="Ubuntu_000_24"></p><hr><h2 id="五-安装ubuntu常用软件">五.安装ubuntu常用软件</h2><ul><li>注意: 使用 dpkg 安装 deb 包时, 若出现依赖问题, 执行命令: <code>sudo apt-get -f install</code> 修复安装即可.</li><li>若是仍有问题, 卸载相关出现问题的软件, 重新安装一遍即可.</li></ul><h3 id="1-搜狗输入法">1.搜狗输入法</h3><ul><li>可以参考<a href="https://pinyin.sogou.com/linux/help.php" target="_blank" rel="noopener">搜狗官网的指南</a>安装.</li><li>①安装 fcitx. 命令: <code>sudo apt-get install fcitx</code>.</li><li>②在系统的 <strong>语言支持</strong> 中, 将键盘输入法系统切换为 fcitx.</li><li>③点击 <strong>应用到整个系统</strong> , 之后重启系统即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_23.png" alt="Ubuntu_000_23"></p><ul><li>④在搜狗官网下载最新的deb包.</li><li>⑤使用命令: <code>sudo dpkg -i sogoupinyin_版本号_amd64.deb</code> 安装输入法.</li><li>注意: 若安装个过程出现依赖问题, 使用命令: <code>sudo apt -f install</code> 即可解决.</li><li>⑥安装完成后再次重启系统.</li><li>上述安装完毕后, 还可以直接安装 <a href="https://srf.baidu.com/site/guanwang_linux/index.html" target="_blank" rel="noopener">百度输入法</a>.</li><li>个人感觉Linux下还是搜狗好用一点.</li></ul><hr><h3 id="2-截图软件">2.截图软件</h3><blockquote><p>  <strong>flameshot</strong> 和 <strong>shutter</strong> 很好用的截图软件, 类似 QQ 截图.</p><p>这两个软件各有各的好处, 可以自行选择安装, shutter 的功能更强大一点, flameshot截图更有效率.</p><ul><li>flameshot软件方便复制/保存.</li><li>shutter软件方便编辑.</li><li>但是, flameshot与shutter软件都无法对打开的菜单项进行截图.</li><li>这时候就要用系统自带的 截图功能: <strong>“复制选区截图到粘贴板”</strong>. 默认快捷键为: <code>Shift+Ctrl+Print</code>.</li><li><strong>&quot;复制选区截图到粘贴板&quot;</strong> + Pinta 软件可以实现任何界面截图.</li></ul></blockquote><h4 id="flameshot">flameshot</h4><ul><li>使用命令: <code>sudo apt-get install flameshot</code> 安装.</li><li>设置启动快捷键, 启动命令: <code>flameshot gui</code>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_20.png" alt="Ubuntu_000_20"></p><h4 id="shutter">shutter</h4><ul><li>参照<a href="https://shutter-project.org/downloads/third-party-packages/" target="_blank" rel="noopener">shutter官网</a>介绍安装即可.</li><li>依次执行以下命令即可安装:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:linuxuprising/shutter</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt install shutter</span><br><span class="line"><span class="meta">#</span><span class="bash"> 网页长截图支持</span></span><br><span class="line">sudo apt install gnome-web-photo</span><br></pre></td></tr></table></figure><ul><li>安装完后, 可类比flameshot添加快捷键, 启动命令: <code>shutter -s</code>.</li></ul><h4 id="Pinta">Pinta</h4><ul><li>方便的的图片编辑器.</li><li>使用命令: <code>sudo apt-get install pinta</code>安装即可.</li></ul><hr><h3 id="3-typora">3.typora</h3><ul><li>最受欢迎的 MD 编辑器.</li><li>不要直接在ubuntu软件商店里安装, 有问题的.</li><li>按照官方提示, 使用命令安装即可.(可能速度有点慢, 可以科学上网)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE</span></span><br><span class="line">wget -qO - https://typora.io/linux/public-key.asc | sudo apt-key add -</span><br><span class="line"><span class="meta">#</span><span class="bash"> add Typora<span class="string">'s repository</span></span></span><br><span class="line">sudo add-apt-repository 'deb https://typora.io/linux ./'</span><br><span class="line">sudo apt-get update</span><br><span class="line"><span class="meta">#</span><span class="bash"> install typora</span></span><br><span class="line">sudo apt-get install typora</span><br></pre></td></tr></table></figure><h3 id="4-gnome-tweak-tool">4.gnome-tweak-tool</h3><ul><li>安装 tweak 进行 gnome 桌面美化.</li><li>执行命令: <code>sudo apt-get install gnome-tweak-tool</code>进行安装.</li><li>具体美化步骤见: <a href="/Ubuntu_007.html">ubuntu GNOME 美化</a>.</li></ul><h3 id="5-WPS套件">5.WPS套件</h3><ul><li>①进入<a href="https://www.wps.cn/product/wpslinux" target="_blank" rel="noopener">WPS官网</a>, 下载<a href="https://wdl1.cache.wps.cn/wps/download/ep/Linux2019/10161/wps-office_11.1.0.10161_amd64.deb" target="_blank" rel="noopener">deb文件</a>.</li><li>②使用dpkg命令安装WPS即可: <code>sudo dpkg -i wps-office_11.1.0.10161_amd64.deb</code>.</li><li>若有依赖问题, 使用 <code>sudo apt-get -f install</code> 命令修复即可.</li><li>还需要添加 wps 所需要的字体: <a href="https://pan.baidu.com/s/1msopqmA00XFo3wGcpSyHCw" target="_blank" rel="noopener">wps_symbol_fonts.zip</a>, 提取码：<code>kf2n</code></li><li>下载后将字体解压到 <code>/usr/share/fonts/wps-office</code> 目录下.</li></ul><h3 id="6-CopyQ">6.CopyQ</h3><ul><li>目前我觉得最好用的剪切板管理工具.</li><li>在<a href="https://github.com/hluk/CopyQ/releases" target="_blank" rel="noopener">GitHub下载安装包</a>, 使用dpkg命令安装即可.</li></ul><h3 id="7-Chrome浏览器">7.Chrome浏览器</h3><ul><li><p><a href="https://www.google.cn/chrome/" target="_blank" rel="noopener">Chrome官网</a>下载 deb 安装包.</p></li><li><p>使用命令安装 Chrome 即可.</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/下载</span><br><span class="line">sudo dpkg -i google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure><h3 id="8-网易云音乐">8.网易云音乐</h3><ul><li><a href="https://music.163.com/#/download" target="_blank" rel="noopener">网易云官网</a>下载 deb 包.</li><li>使用 dpkg 命令安装 deb 包即可.</li></ul><h3 id="9-VLC播放器">9.VLC播放器</h3><ul><li>视频播放器: VLC.</li><li>使用命令: <code>sudo apt-get install vls</code> 安装即可.</li><li>若是找不到 VLC 软件, 添加 PPA 即可.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:videolan/stable-daily</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install vlc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除 PPA</span></span><br><span class="line">sudo add-apt-repository --remove ppa:videolan/stable-daily</span><br></pre></td></tr></table></figure><h3 id="10-Virtual-Box">10.Virtual Box</h3><ul><li>进入<a href="https://www.virtualbox.org/wiki/Linux_Downloads" target="_blank" rel="noopener">Virtual Box官网</a>下载对应系统版本的最新 deb 安装包.</li><li>执行 <code>sudo dpkg -i virtualbox-6.1_6.1.18-142142_Ubuntu_eoan_amd64.deb </code>.</li><li>若是出现依赖问题, 输入命令 <code>sudo apt --fix-broken install</code> 进行修复.</li><li>若是修复安装仍然不行, 卸载残留的 Virtual Box 重新安装.</li></ul><h3 id="11-科学上网软件">11.科学上网软件</h3><h4 id="①v2ray">①v2ray</h4><ul><li>需要下载: <a href="https://github.com/v2fly/v2ray-core/releases" target="_blank" rel="noopener">v2ray-core</a> 和 <a href="https://github.com/Qv2ray/Qv2ray/releases" target="_blank" rel="noopener">Qv2ray</a>.</li><li>具体步骤可查看: <a href="/Ubuntu_006.html">ubuntu之v2ray科学上网</a>.</li></ul><h4 id="②electron-ssr">②electron-ssr</h4><ul><li>electron-ssr原作者已删除软件不再更新, 这里提供他的最后一个版本: <a href="https://pan.baidu.com/s/1fQ0YeWMRHFj9iDKO3GkKpA" target="_blank" rel="noopener">electron-ssr-0.2.6.deb</a> 提取码: <code>qfnf</code>.</li><li>下载 deb 后使用 dpkg 命令安装即可.</li></ul><h3 id="12-录屏软件">12.录屏软件</h3><blockquote><p>  这里推荐 深度录屏 和 simplescreenrecorder.</p><ul><li>深度录屏可以录制 GIF 图片, 也可以录制MP4, 但是没有声音.</li><li>simplescreenrecorder 可以录制功能强大, 可以录制系统声音和麦克风.</li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install deepin-screen-recorder</span><br><span class="line">sudo apt-get install simplescreenrecorder</span><br></pre></td></tr></table></figure><ul><li>深度录屏安装完后, 可类比flameshot添加快捷键, 启动命令: <code>deepin-screen-recorder</code>.</li></ul><h3 id="13-百度网盘">13.百度网盘</h3><blockquote><ul><li><a href="http://pan.baidu.com/download" target="_blank" rel="noopener">百度网盘官网</a>下载deb包.</li><li>使用dpkg命令安装即可.</li></ul></blockquote><h3 id="14-下载器">14.下载器</h3><h4 id="①Motrix">①Motrix</h4><blockquote><ul><li>多平台的多线程下载器: <a href="https://github.com/agalwood/Motrix/releases" target="_blank" rel="noopener">Motrix</a></li><li>下载 deb 安装包, 使用 dpkg 命令安装即可.</li></ul></blockquote><h4 id="②迅雷">②迅雷</h4><blockquote><ul><li>迅雷的Linux版本, 这里提供统信商店的 deb: <a href="https://pan.baidu.com/s/1en-TepGGHn29BxFmyOiw_w" target="_blank" rel="noopener">com.xunlei.download_1.0.0.1_amd64.deb</a> 提取码: <code>2fgf</code>.</li><li>下载 deb 包后, 使用 dpkg 命令安装即可.</li></ul></blockquote><h4 id="③uGet">③uGet</h4><blockquote><ul><li>使用命令: <code>sudo apt-get install uget</code>安装即可.</li></ul></blockquote><h4 id="④qBittorrent">④qBittorrent</h4><blockquote><ul><li>使用命令: <code>sudo apt-get install qbittorrent</code>安装即可.</li><li>可能需要 apt 换源才能下载.</li></ul></blockquote><hr><h3 id="15-远程控制软件">15.远程控制软件</h3><h4 id="①Remmina">①Remmina</h4><blockquote><ul><li>一个强大的远程桌面客户端, 一般用于 SSH 和 SFTP 协议 连接 远程服务器.</li><li>支持常用的很多协议, 见下图.</li><li>使用命令: <code>sudo apt-get install remmina</code> 安装即可.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_25.png" alt="Ubuntu_000_25"></p><h4 id="②向日葵">②向日葵</h4><blockquote><ul><li>国产软件, 可用于跨系统之间的电脑远程控制.</li><li>通过Linux远程控制macOS、Android、Windows、Linux设备.</li><li><a href="https://sunlogin.oray.com/download/" target="_blank" rel="noopener">向日葵官网</a>下载 deb 安装包, 使用 dpkg 命令安装即可.</li><li>支持语音等.</li><li>若出现依赖问题, 使用: <code>sudo apt-get install -f</code>修复.</li></ul></blockquote><h4 id="③TeamViewer">③TeamViewer</h4><blockquote><ul><li>外国软件, 可也用于跨系统之间的电脑远程控制.</li><li><a href="https://www.teamviewer.com/en/download/linux/" target="_blank" rel="noopener">TeamViewer官网</a>下载 deb 包, 使用 dpkg 命令安装即可.</li><li>若出现依赖问题, 使用: <code>sudo apt-get install -f</code>修复.</li></ul></blockquote><hr><h3 id="16-Baobab">16.Baobab</h3><blockquote><ul><li>突然发现之前一直使用的 <strong>磁盘使用情况分析</strong> 没了. Ubuntu 20.01没有自带.</li><li>使用命令: <code>sudo apt-get install baobab</code> 手动安装即可.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_000_26.png" alt="Ubuntu_000_26"></p><h3 id="17-XMind">17.XMind</h3><blockquote><ul><li>最受欢迎的思维导图软件---------XMind.</li><li>可以参看: <a href="/Ubuntu-XMind.html">Ubuntu中安装XMind</a> 进行安装.</li></ul></blockquote><h3 id="18-Sublime-text">18.Sublime-text</h3><blockquote><ul><li>一款强大的文本编辑器.</li><li>按照 <a href="http://www.sublimetext.cn/docs/3/linux_repositories.html" target="_blank" rel="noopener">Sublime-text 官网文档</a>, 一步步安装即可.</li><li>依次执行下列命令:</li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装GPG密钥</span></span><br><span class="line">wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -</span><br><span class="line"><span class="meta">#</span><span class="bash"> 确保apt已设置为使用https源</span></span><br><span class="line">sudo apt-get install apt-transport-https</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 选择要使用的频道: 执行下面两条的一个即可</span></span><br><span class="line">echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">echo "deb https://download.sublimetext.com/ apt/dev/" | sudo tee /etc/apt/sources.list.d/sublime-text.list</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新apt源并安装Sublime Text</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install sublime-text</span><br></pre></td></tr></table></figure><h3 id="19-pavucontrol">19.pavucontrol</h3><blockquote><ul><li>音量控制软件, 可以更好的设置你的电脑的声音输入输出设备.</li><li>使用命令: <code>sudo apt-get install pavucontrol</code> 安装即可.</li></ul></blockquote><h3 id="20-xDroid">20.xDroid</h3><blockquote><ul><li>非常好用的一个 Android 虚拟机.</li><li>从 <a href="https://www.linzhuotech.com/product/download" target="_blank" rel="noopener">xDroid</a> 官网下载压缩包, 使用命令安装即可.</li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -zxvf xDroidInstall-x86_64-v5.1508.tar.gz</span><br><span class="line">cd xDroidInstall-x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 提权</span></span><br><span class="line">chmod +x install.sh</span><br><span class="line">chmod +x uninstall.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line">./install.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 还可以卸载</span></span><br><span class="line">./uninstall.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载完成后重启计算机, 手动删除 /var/xdroid/ 目录即可</span></span><br><span class="line">sudo rm -rf /var/xdroid</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven下的SSM整合</title>
      <link href="/SSM.html"/>
      <url>/SSM.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在Eclipse下使用Maven创建和管理SSM项目.</p><a id="more"></a><h2 id="1-使用Maven搭建JavaWeb项目">1.使用Maven搭建JavaWeb项目</h2><blockquote><p>  具体搭建方法: <a href="maven_05.html#5-%E5%88%9B%E5%BB%BAMaven%E7%89%88%E7%9A%84Web%E5%B7%A5%E7%A8%8B">创建Maven版的Web工程</a></p></blockquote><h2 id="2-使用Maven导入SSM框架所需jar">2.使用Maven导入SSM框架所需jar</h2><blockquote><p>  项目的pom.xml如下:</p></blockquote><details><summary>SSM整合的pom文件：One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.crainyday.ssmr<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssmr<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglibs.version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">taglibs.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c3p0.version</span>&gt;</span>0.9.5.5<span class="tag">&lt;/<span class="name">c3p0.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jackson.version</span>&gt;</span>2.10.3<span class="tag">&lt;/<span class="name">jackson.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- junit 单元测试 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log4j 日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0-alpha1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring 及 SpringMVC 的 jar --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringAOP 相关依赖 jar --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- taglib 标签库jar --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>taglibs-standard-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;taglibs.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>taglibs-standard-spec<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;taglibs.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库相关 jar --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;c3p0.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis 及 mybatis-spring --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Json数据处理相关jackson包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h2 id="3-配置项目的web-xml">3.配置项目的web.xml</h2><h3 id="①关于整合">①关于整合</h3><blockquote><p>  我们有两种整合方法:</p><ul><li><p>①同时配置Spring IOC和Spring MVC IOC</p><blockquote><p>  通常情况下, 我们都是配置两个IOC容器的.</p><ul><li>将类似于数据源、事务、 整合其他框架的配置都是放在 Spring 的配置文件中, 还有 Service 和 Dao 对象等.</li><li>而 Spring MVC 的 IOC 只负责HandlerMapping 映射策略、各种 Controller 控制器、各种视图解析、拦截器、LocalResolver 国际化处理等的配置.</li></ul></blockquote></li><li><p>②只配置Spring MVC IOC: 将所有配置都放在 SpringMVC 的配置文件中. 也可以分多个 Spring 的配置文件, 然后使用 import 节点导入其他的配置文件.</p></li><li><p><font style="color:red;">在这里, 我们用第①种方法.</font></p></li></ul></blockquote><h3 id="②在web-xml中配置字符过滤器和RESTFUL风格API过滤器">②在web.xml中配置字符过滤器和RESTFUL风格API过滤器</h3><blockquote><ul><li><p>为了解决在项目运行过程中出现的乱码问题, 需要配置字符过滤器, 将所有的编码格式统一为 UTF-8.</p></li><li><p>为了支持 RESTFUL API开发, 需要配置 RESTFUL 风格 API 过滤器.</p></li></ul><p>在 web.xml 中加入如下配置:</p></blockquote><details><summary>One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 字符过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- RESTFUL 风格 API 过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h3 id="③在web-xml中配置-Spring-IOC">③在web.xml中配置 Spring IOC</h3><blockquote><p>  我们希望在WEB 应用服务器启动时就创建Spring IOC, 因此需要监听器.</p><p>通过监听器来监听 ServletContext 对象的创建, 监听到ServletContext对象被创建, 就创建SpringIOC容器.</p><p><font style="color:red;">这里不需要自定义 Listener 来创建 Spring IOC, 直接使用 SpringMVC 提供的 ContextLoaderListener 即可.</font></p><p>在 web.xml 中加入如下配置:</p><p>(注意: 需要在项目的 resources 目录下创建 spring.xml 文件)</p></blockquote><details><summary>One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 字符过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- RESTFUL 风格 API 过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载 Spring 容器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h3 id="④在web-xml中配置-SpringMVC-IOC">④在web.xml中配置 SpringMVC IOC</h3><blockquote><p>  在完成对 ContextLoaderListener 的初始化后, Web 容器开始初始化 DispatcherServlet(前端控制器). 其作为一个Servlet, 所有的 Web 请求都需要通过它来处理, 然后进行转发、匹配、数据处理后, 并转由页面进行展现, 它可以说是 SpringMVC 最核心的部分.</p><p>在 web.xml 中加入如下配置:</p><p><font style="color:red;">(注意: 这里的 web.xml 是项目的 web.xml 的基础最终配置)</font></p></blockquote><details><summary>web.xml文件：One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 字符过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>Encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- RESTFUL 风格 API 过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载 Spring 容器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加载 SpringMVC 容器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springDispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h2 id="4-配置各自IOC的xml">4.配置各自IOC的xml</h2><p><font style="color:red;font-weight:bolder;">注意: 以下所有的配置文件, 均在项目的 classpath 下.</font></p><blockquote><p>  这里我们是创建了两个 IOC, 需要配置两个 xml 文件: spring.xml 和 spring-mvc.xml.</p><p>首先, 他们两个所做的功能不同, 故需要扫描加载不同的 Class.</p><p>一个指定扫描包, 一个排除扫描包.</p><p>注意: 指定扫描时, 需要设置属性<code>use-default-filters=&quot;false&quot;</code>.</p><p>MyBatis相关配置见: <a href="#5.MyBatis%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">MyBatis相关配置</a>.</p></blockquote><h3 id="①配置spring-xml">①配置spring.xml</h3><details><summary>Spring容器的配置文件：One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:mybatis-spring</span>=<span class="string">"http://mybatis.org/schema/mybatis-spring"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:task</span>=<span class="string">"http://www.springframework.org/schema/task"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://mybatis.org/schema/mybatis-spring http://mybatis.org/schema/mybatis-spring-1.2.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 排除扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag"><span class="attr">base-package</span>=<span class="string">"ssm"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">"org.springframework.web.bind.annotation.RestControllerAdvice"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 载入 properties 配置文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span></span></span><br><span class="line"><span class="tag"><span class="attr">location</span>=<span class="string">"classpath:db.properties"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置数据源 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireRetryAttempts"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span> <span class="attr">value</span>=<span class="string">"3600"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 每隔固定时间, 需要用 select 1 语句检测数据库连接, 避免数据库连接超时 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"preferredTestQuery"</span> <span class="attr">value</span>=<span class="string">"select 1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"idleConnectionTestPeriod"</span> <span class="attr">value</span>=<span class="string">"18000"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testConnectionOnCheckout"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置事务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 基于注解使用事务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span></span></span><br><span class="line"><span class="tag"><span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置 MyBatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"classpath:mapping/*.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"ssm.model"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- MyBatis的扫描包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mybatis-spring:scan</span> <span class="attr">base-package</span>=<span class="string">"ssm.mapper"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>②配置spring-mvc.xml</p><details><summary>spring-mvc容器的配置文件：One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span></span></span><br><span class="line"><span class="tag"><span class="attr">base-package</span>=<span class="string">"ssm"</span> <span class="attr">use-default-filters</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span></span></span><br><span class="line"><span class="tag"><span class="attr">expression</span>=<span class="string">"org.springframework.web.bind.annotation.RestControllerAdvice"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 关于文件上传的配置操作 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"utf-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 最大上传文件大小: 10MB --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"10485760"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 拦截器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 令牌拦截器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 不需要拦截的路径 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/wxLogin"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/testLogin"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/qrcode/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.crainyday.sport.utils.TokenInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h3 id="5-MyBatis以及其他配置">5.MyBatis以及其他配置</h3><h3 id="①数据源配置">①数据源配置</h3><blockquote><p>  这里用的是MySQL数据库, db.properties:</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/javaee?useSSL=false</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><h3 id="②log4j配置">②log4j配置</h3><blockquote><p>  这里用的 slf4j+log4j 的方式做的日志处理, log4j.properties:</p><p>(可以参看这里的, <a href="https://my.oschina.net/u/3387320/blog/2875661" target="_blank" rel="noopener">SSM框架下log4j的配置和使用</a> .)</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">ERROR, stdout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m  (%F:%L) \n</span></span><br></pre></td></tr></table></figure><h3 id="③MyBatis配置">③MyBatis配置</h3><blockquote><p>  可以使用 MyBatisGenerator 来自动生成某些相关代码.</p></blockquote><details><summary>MyBatisGenerator 的配置文件 generatorConfig.xml: One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--数据库驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"DB2Tables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库链接地址账号密码--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.jdbc.Driver"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">connectionURL</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">userId</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">password</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成 Model 类存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"ssm.model"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成映射文件存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"mapping"</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">targetProject</span>=<span class="string">"src/main/resources"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成Dao类存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">targetPackage</span>=<span class="string">"ssm.mapper"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成对应表及类名--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        enableInsert="true": 生成 insert 和 insertSelective 语句</span></span><br><span class="line"><span class="comment">        enableDeleteByPrimaryKey="true": 生成 deleteByPrimaryKey 语句</span></span><br><span class="line"><span class="comment">        enableUpdateByPrimaryKey="true": 生成 updateByPrimaryKey 和 updateByPrimaryKeySelective 语句</span></span><br><span class="line"><span class="comment">        enableSelectByPrimaryKey="true": 生成 selectByPrimaryKey 语句</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>  <span class="attr">tableName</span>=<span class="string">"customer"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">domainObjectName</span>=<span class="string">"Customer"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">enableCountByExample</span>=<span class="string">"false"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">selectByExampleQueryId</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">selectByPrimaryKeyQueryId</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        </span></span><br><span class="line"><span class="tag">        <span class="attr">enableInsert</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">enableDeleteByPrimaryKey</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">enableUpdateByPrimaryKey</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">enableSelectByPrimaryKey</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure></details><details><summary>MyBatisGenerator 的使用: One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ssm;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MBGTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">            <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">            String cfile = <span class="string">"/generatorConfig.xml"</span>;</span><br><span class="line">            File configFile = <span class="keyword">new</span> File(MBGTest.class.getResource(cfile).getFile());</span><br><span class="line">            ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">            Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">            DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">            MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">            myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">for</span> (String warning : warnings) &#123;</span><br><span class="line">                System.err.println(warning);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"生成结束......"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>mybatis-config.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">  "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"jdbcTypeForNull"</span> <span class="attr">value</span>=<span class="string">"NULL"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
            <tag> MyBatis </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装Gitlab</title>
      <link href="/Git_GitHub_04.html"/>
      <url>/Git_GitHub_04.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在局域网环境下, 搭建局域网的代码托管中心------Gitlab.</p><p>这里我用Virtual Box虚拟机搭建的Gitlab.</p><p>系统是CentOS6.</p><p>注意, 一定要在安装前做一个系统的快照, 防止安装过程中出错.</p><a id="more"></a><h2 id="1-安装前准备">1.安装前准备</h2><h3 id="Gitlab安装环境搭建">Gitlab安装环境搭建</h3><ul><li>这里用的是Virtual Box虚拟机.</li><li>系统: CentOS6(干净的系统, 什么都没安装过).</li><li>内存: 2GB.</li><li>硬盘: 20GB. 硬盘是在SSD上的.</li><li><red>注意: 安装之前做一个系统快照.</red></li><li><red>注意: 安装完后Gitlab会开机自启, 和之前比会开机特别慢.</red></li></ul><h3 id="官网介绍">官网介绍</h3><blockquote><ul><li>官网: <a href="https://about.gitlab.com/" target="_blank" rel="noopener">Gitlab</a>.</li><li>可以按照官网的介绍安装Gitlab, 只不过可能会比较慢, 因为会下载一个大约八九百MB的文件(gitlab-ee或gitlab-ce).</li><li>官网的安装介绍: 安装<a href="https://about.gitlab.com/installation/" target="_blank" rel="noopener">gitlab</a>.</li></ul></blockquote><h3 id="下载gitlab-ce">下载gitlab-ce</h3><ul><li>下载地址: <a href="https://packages.gitlab.com/gitlab/gitlab-ce?page=1" target="_blank" rel="noopener">gitlab-ce</a>.</li><li>下载你需要的版本, 我这里下载的是最新版的.</li><li>注意: 最新版的不一定在上边, 要向下找一找, 如图(我安装时最新为12.9.1).</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_06.png" alt="Git_GitHub_04_06"></p><h3 id="上传文件">上传文件</h3><ul><li><p>将你下载的gitlab-ce上传到你的虚拟机系统的<code>/opt</code>目录下.</p></li><li><p>将下述shell命令复制到新建的<code>/opt/install.sh</code>文件中:</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh /opt/gitlab-ce-12.9.1-ce.0.el6.x86_64.rpm</span><br><span class="line">sudo yum install -y curl policycoreutils-python openssh-server cronie</span><br><span class="line">sudo lokkit -s http -s ssh</span><br><span class="line">sudo yum install postfix</span><br><span class="line">sudo service postfix start</span><br><span class="line">sudo chkconfig postfix on</span><br><span class="line">curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash</span><br><span class="line">sudo EXTERNAL_URL="http://gitlab.example.com" yum -y install gitlab-ce</span><br></pre></td></tr></table></figure><hr><h2 id="2-安装gitlab">2.安装gitlab</h2><ul><li>这里的新版本和旧版本指的是: 最新版本的gitlab-ce的gitlab, 和旧版本的gitlab-ce的gitlab.</li></ul><h3 id="安装新版本">安装新版本</h3><ul><li><p>注意: 要修改之前的<code>opt/install.sh</code>文件中第一行的rpm包名为最新版本的, 系统也要修改正确.</p></li><li><p>例如: /opt/gitlab-ce-版本号-ce.0.el系统版本.x86_64.rpm</p></li><li><p>之后, 执行:</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure><ul><li>等待安装完毕, 重启系统即可.</li></ul><h3 id="安装旧版本">安装旧版本</h3><ul><li>修改<code>opt/install.sh</code>文件:</li><li>注意: 要修改gitlab-ce的版本号, 和CentOS的系统版本号.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -ivh /opt/gitlab-ce-12.9.1-ce.0.el6.x86_64.rpm</span><br><span class="line">sudo yum install -y curl policycoreutils-python openssh-server cronie</span><br><span class="line">sudo lokkit -s http -s ssh</span><br><span class="line">sudo yum install postfix</span><br><span class="line">sudo service postfix start</span><br><span class="line">sudo chkconfig postfix on</span><br><span class="line">curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash</span><br><span class="line">sudo EXTERNAL_URL="http://gitlab.example.com" yum -y install gitlab-ce-12.9.1-ce.0.el6.x86_64</span><br></pre></td></tr></table></figure><ul><li>之后, 执行<code>install.sh</code>脚本安装即可, 成功后重启系统.</li></ul><hr><h2 id="3-gitlab服务操作">3.gitlab服务操作</h2><h3 id="初始化gitlab的配置">初始化gitlab的配置</h3><ul><li>执行命令:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><ul><li>注意: 初始化配置过程非常慢, 至少3~4分钟. 如图, 可能会停在<code>action run</code>:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_03.png" alt="Git_GitHub_04_03"></p><ul><li>耐心等待即可.</li></ul><h3 id="启动gitlab服务">启动gitlab服务</h3><ul><li>执行命令:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl start</span><br></pre></td></tr></table></figure><ul><li>注意: 之后执行<code>gitlab-ctl start</code>或<code>gitlab-ctl stop</code>等命令可能会出现下图情况, 没有权限:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_01.png" alt="Git_GitHub_04_01"></p><ul><li>以root权限执行命令即可:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_05.png" alt="Git_GitHub_04_05"></p><ul><li>可通过<code>gitlab-ctl help</code>查看命令帮助.</li></ul><hr><h2 id="4-浏览器访问">4.浏览器访问</h2><blockquote><p>直接访问Linux服务器的 IP 地址即可, 如果想访问 EXTERNAL_URL 指定的域名还需要配置服务器和本地的 hosts 文件.</p></blockquote><ul><li>初次登录时要为gitlab的root用户设置密码, 之后直接登录即可:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_02.png" alt="Git_GitHub_04_02"></p><ul><li>进入之后的操作, 和其他的远程代码托管中心类似.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_04_04.png" alt="Git_GitHub_04_04"></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eclipse中使用Git</title>
      <link href="/Git_GitHub_03.html"/>
      <url>/Git_GitHub_03.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在Eclipse中使用Git:</p><p>①将工程初始化为本地库.</p><p>②在Eclipse中忽略一些配置文件, 不让Git对其管理.</p><p>③推送本地库到远程库.</p><p>④克隆远程库到本地.</p><p>⑤在Eclipse中解决冲突.</p><a id="more"></a><h2 id="1-本地库初始化">1.本地库初始化</h2><h3 id="git-init">git init</h3><ul><li><p>在需要创建为Git管理的工程上→右键单击→Team→Share Project…</p></li><li><p>之后便会出现如下项目配置, 按步骤操作好即可将工程初始化为本地库:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_01.png" alt="Git_GitHub_03_01"></p><ul><li>初始化好之后, 便如图(问号表示还没跟踪的文件):</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_02.png" alt="Git_GitHub_03_02"></p><ul><li>查看在Eclipse中代表Git管理的文件状态的图标, 如下图:</li><li>Window→Preferences→Team→Git→Label Decorations:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_03.png" alt="Git_GitHub_03_03"></p><h3 id="git-add">git add</h3><ul><li><p>在需要添加Git跟踪的工程上→右键单击→Team→Add to Index, 即可添加跟踪.</p></li><li><p>或者使用拖拽的方式添加到暂存区:</p></li><li><p>①在需要添加Git跟踪的工程上→右键单击→Team→Commit …(可以使用快捷键 <code>Ctrl+Shift+3</code>即<code>Ctrl+#</code>).</p></li><li><p>②在显示出来的View中, 用鼠标拖动即可, 如下图.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_05.png" alt="Git_GitHub_03_05"></p><ul><li>新建的文件成功建立跟踪后, 如下图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_06.png" alt="Git_GitHub_03_06"></p><h3 id="git-commit">git commit</h3><ul><li>①在需要提交的工程上→右键单击→Team→Commit …(可以使用快捷键 <code>Ctrl+Shift+3</code>即<code>Ctrl+#</code>).</li><li>②在显示出来的View中, 添加日志信息, 点击 Commit 即可提交到本地库, 如下图.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_07.png" alt="Git_GitHub_03_07"></p><ul><li>跟踪未提交的文件, 提交后, 状态如图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_08.png" alt="Git_GitHub_03_08"></p><hr><h2 id="2-忽略文件">2.忽略文件</h2><ul><li><p>忽略一些Eclipse的配置文件, 这个与项目真正的代码逻辑无关.</p></li><li><p>忽略一些不想让Git管理的文件.</p></li><li><p>这是GitHub官网所有的样例文件: <a href="https://github.com/github/gitignore" target="_blank" rel="noopener">全部语言的忽略文件</a>.</p></li><li><p>Java语言的忽略文件: <a href="https://github.com/github/gitignore/blob/master/Java.gitignore" target="_blank" rel="noopener">Java.gitignore</a>.</p></li><li><p>具体步骤:</p></li><li><p>①将Java.gitignore文件内容复制.</p></li><li><p>②在本地当前用户家目录下新建<code>Java.gitignore</code>文件, 当然文件名任意.</p></li><li><p>③将复制的内容粘贴到你新建的文件中, 不要着急保存退出.</p></li><li><p>④在你复制的内容后添加:</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Compiled class file</span></span><br><span class="line">*.class</span><br><span class="line"><span class="meta">#</span><span class="bash"> Log file</span></span><br><span class="line">*.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> BlueJ files</span></span><br><span class="line">*.ctxt</span><br><span class="line"><span class="meta">#</span><span class="bash"> Mobile Tools <span class="keyword">for</span> Java (J2ME)</span></span><br><span class="line">.mtj.tmp/</span><br><span class="line"><span class="meta">#</span><span class="bash"> Package Files <span class="comment">#</span></span></span><br><span class="line">*.jar</span><br><span class="line">*.war</span><br><span class="line">*.nar</span><br><span class="line">*.ear</span><br><span class="line">*.zip</span><br><span class="line">*.tar.gz</span><br><span class="line">*.rar</span><br><span class="line"><span class="meta">#</span><span class="bash"> virtual machine crash logs, see http://www.java.com/en/download/<span class="built_in">help</span>/error_hotspot.xml</span></span><br><span class="line">hs_err_pid*</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加下述内容:</span></span><br><span class="line">.classpath</span><br><span class="line">.project</span><br><span class="line">.settings</span><br><span class="line">.springBeans</span><br><span class="line">target</span><br></pre></td></tr></table></figure><ul><li>⑤在~/.gitconfig文件中引入你新建的文件, 如下图:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[core]</span><br><span class="line">    excludesfile = 你的Java.gitignore文件目录</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_04.png" alt="Git_GitHub_03_04"></p><hr><h2 id="3-推送到远程库">3.推送到远程库</h2><ul><li>①保证你的修改添加已经提交到了本地库.</li><li>②得到你的远程库的HTTP地址.</li><li>③在需要推送的工程上→右键单击→Team→Remote→Push…</li><li>④在出现的窗口添加远程库信息, 如下图.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_09.png" alt="Git_GitHub_03_09"></p><ul><li>⑤点击<code>Add All Branches Spec</code>, 再点击下一步, 如下图.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_10.png" alt="Git_GitHub_03_10"></p><ul><li>⑥点击Finish, 即可成功将本地库Push到远程库.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_11.png" alt="Git_GitHub_03_11"></p><ul><li>⑦成功后, 如下图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_12.png" alt="Git_GitHub_03_12"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_13.png" alt="Git_GitHub_03_13"></p><hr><h2 id="4-Clone到本地并还原工程">4.Clone到本地并还原工程</h2><h3 id="Clone到本地">Clone到本地</h3><ul><li>①依次点击: File→Import …, 在弹出的窗口, 如下图操作:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_14.png" alt="Git_GitHub_03_14"></p><ul><li>②Clone URI, 如下图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_15.png" alt="Git_GitHub_03_15"></p><ul><li>③输入远程库信息, 如下图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_16.png" alt="Git_GitHub_03_16"></p><ul><li>④选择要Clone的分支:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_17.png" alt="Git_GitHub_03_17"></p><ul><li>⑤选择要保存的目录:</li><li><red>注意: 在一些低版本的Eclipse中, 不能直接将远程项目保存到当前Eclipse使用的工作区WorkSpace中.</red></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_18.png" alt="Git_GitHub_03_18"></p><ul><li>⑥选择<code>Inport as general project</code>.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_19.png" alt="Git_GitHub_03_19"></p><ul><li>⑦可以修改本地项目名称, 默认即可. 点击<code>Finish</code>完成导入.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_20.png" alt="Git_GitHub_03_20"></p><ul><li>⑧克隆下来以后, 可以看到, 克隆的项目和之前的项目结构不一样, 如图.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_21.png" alt="Git_GitHub_03_21"></p><h3 id="还原工程结构">还原工程结构</h3><ul><li><p>即, 转换工程类型.</p></li><li><p>在需要转换工程类型的工程上→右键单击→Configure→<code>Convert to Maven Project</code>.</p></li><li><p>我之前创建的是Maven工程,你要<code>Convert to 原来工程的类型</code>.转换之后, 如图:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_22.png" alt="Git_GitHub_03_22"></p><hr><h2 id="5-在Eclipse中解决冲突">5.在Eclipse中解决冲突</h2><ul><li>如下图, 本地工程test修改了代码并Push到了远程库, 本地工程test2修改了相同地方的代码也想Push到远程库, 会出现下述错误:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_23.png" alt="Git_GitHub_03_23"></p><ul><li>这时本地工程test2需要先将远程库的最新版Pull下来, 解决冲突, 再Push到远程库.</li></ul><h3 id="Pull远程库最新版">Pull远程库最新版</h3><ul><li><p>即, 拉取远程库的最新版.</p></li><li><p>①在工程上→右键单击→Team→Pull…</p></li><li><p>如下图所示:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_24.png" alt="Git_GitHub_03_24"></p><ul><li>②拉取成功后, 如下图, 有的文件会存在冲突:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_25.png" alt="Git_GitHub_03_25"></p><h3 id="解决冲突">解决冲突</h3><ul><li>①在工程上→右键单击→Team→Merge Tool, 打开Eclipse的代码合并工具.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_26.png" alt="Git_GitHub_03_26"></p><ul><li>②修改存在冲突文件到你满意的地步.</li><li>③在工程上→右键单击→Team→Commit …(可以使用快捷键 <code>Ctrl+Shift+3</code>即<code>Ctrl+#</code>).</li><li>④在显示出来的View中, 添加日志信息, 点击 Commit 即可提交到本地库, 如下图.</li><li>注意: 若是之前没有添加过作者信息, 必须添加作者信息<code>author &lt;author@example.mail.com&gt;</code>, 才能提交.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_03_27.png" alt="Git_GitHub_03_27"></p><ul><li>⑤之后, 便可以成功将test2工程修改的内容Push到远程库.</li></ul>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git的常用命令</title>
      <link href="/Git_GitHub_02.html"/>
      <url>/Git_GitHub_02.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Git的常用命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git config user.name xxx</span><br><span class="line">git config user.email xxx@qq.com</span><br><span class="line">git config  --global user.name xxx</span><br><span class="line">git config  --global user.email xxx@qq.com</span><br><span class="line">git status</span><br><span class="line">git add [filename]</span><br><span class="line">git commit -m "commit message" [file name]</span><br><span class="line">git log</span><br><span class="line">git log --pretty=oneline</span><br><span class="line">git log --oneline</span><br><span class="line">git reflog</span><br><span class="line">git reset --hard [局部索引值]</span><br><span class="line">git reset --hard HEAD^</span><br><span class="line">git reset --hard HEAD~1</span><br><span class="line">git diff [文件名]</span><br><span class="line">git diff [本地库中的历史版本] [文件名]</span><br><span class="line">git branch [新建的分支名]</span><br><span class="line">git branch -v</span><br><span class="line">git checkout [要切换的分支名]</span><br><span class="line">git merge [有新内容的分支名]</span><br><span class="line">git remote -v</span><br><span class="line">git remote add [别名] [远程地址]</span><br><span class="line">git push [别名] [本地分支名]</span><br><span class="line">git clone [远程地址]</span><br><span class="line">git fetch [远程库地址别名] [远程分支名]</span><br><span class="line">git merge [远程库地址别名/远程分支名]</span><br><span class="line">git pull [远程库地址别名] [远程分支名]</span><br><span class="line">ssh-keygen -t rsa -C GitHub用户的邮箱</span><br><span class="line">git remote add origin_ssh [远程仓库的ssh地址]</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="1-git-init">1.git init</h2><ul><li>使用<code>git init</code>命令, 初始化本地库.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_01.png" alt="Git_GitHub_02_01"></p><ul><li>注意: .git 目录中存放的是当前项目的本地库相关配置, 不要删除, 也不要胡乱修改.</li></ul><hr><h2 id="2-git-config">2.git config</h2><ul><li>设置签名.</li><li>设置当前项目的签名信息:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name crainyday</span><br><span class="line">git config user.email crainyday@qq.com</span><br></pre></td></tr></table></figure><ul><li>设置好后, 签名信息保存在当前项目的.git/config文件中:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_02.png" alt="Git_GitHub_02_02"></p><ul><li>设置全局签名, 使用: <code>git config --global</code>, 即可.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_03.png" alt="Git_GitHub_02_03"></p><hr><h2 id="3-查看状态、追踪、提交">3.查看状态、追踪、提交</h2><h3 id="git-status">git status</h3><ul><li>查看工作区、暂存区状态.</li><li>新建一个文件, 再使用<code>git status</code>命令:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch hello.txt</span><br><span class="line">ls</span><br><span class="line">git status</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_04.png" alt="Git_GitHub_02_04"></p><ul><li>状态信息: 检测到一个未跟踪的文件. 提示你使用<code>git add &lt;filename&gt;</code>建立跟踪.</li></ul><h3 id="git-add">git add</h3><ul><li>使用<code>git add [filename]</code>建立文件的跟踪.</li><li>将工作区的&quot;新建/修改&quot;添加到暂存区.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_05.png" alt="Git_GitHub_02_05"></p><h3 id="git-commit">git commit</h3><ul><li>使用<code>git commit -m &quot;提交的消息&quot; [filename]</code>, 将暂存区的内容提交到本地库.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_05.png" alt="Git_GitHub_02_05"></p><ul><li>同样, 可以直接使用<code>git commit</code>将文件提交到本地库并在暂存区建立跟踪.</li><li>这样做的前提是: 你之前已经对该文件用过了<code>git add</code>命令.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_06.png" alt="Git_GitHub_02_06"></p><hr><h2 id="4-查看文件历史">4.查看文件历史</h2><h3 id="git-log">git log</h3><h4 id="①不带参数">①不带参数</h4><ul><li>直接使用<code>git log</code>, 查询打印文件历史记录最详细的信息.</li><li>注意: 只会显示当前&quot;HEAD&quot;指针之前的历史记录, 可以对比后边的<code>git reflog</code>命令.</li><li>多屏控制:<ul><li><code>空格</code>向下翻一页.</li><li><code>b</code>向上翻一页.</li><li><code>q</code>退出查看历史.</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_07.png" alt="Git_GitHub_02_07"></p><h4 id="②带–pretty参数">②带–pretty参数</h4><ul><li>使用<code>git log --pretty=oneline</code>命令, 将一个历史显示为一行, 并显示全部索引值.</li><li>注意: 只会显示当前&quot;HEAD&quot;指针之前的历史记录, 可以对比后边的<code>git reflog</code>命令.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_08.png" alt="Git_GitHub_02_08"></p><h4 id="③带–oneline">③带–oneline</h4><ul><li>使用<code>git log --oneline</code>命令, 将一个历史显示为一行, 并显示局部索引值.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_09.png" alt="Git_GitHub_02_09"></p><h3 id="git-reflog">git reflog</h3><ul><li><p>显示当前本地库所有的文件历史记录, 只显示局部索引值、HEAD@{n}、提交时的消息.</p></li><li><p>其中: <code>xxxxxxx HEAD@{n}</code> 表示移动到xxxxxxx版本需要移动HEAD指针n步.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_10.png" alt="Git_GitHub_02_10"></p><hr><h2 id="5-git-reset">5.git reset</h2><h3 id="–hard参数">–hard参数</h3><ul><li><p>git可以在各个本地库版本之间穿梭的本质: &quot;HEAD&quot;指针的操作.</p></li><li><p>①使用局部索引值修改HEAD指针:</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard [局部索引值]</span><br></pre></td></tr></table></figure><ul><li>②使用<code>^</code>符号修改HEAD指针, 只能后退到之前的版本:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 一个^后退一步，n 个后退 n 步</span></span><br><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><ul><li>③使用<code>~</code>符号加数字修改HEAD指针, 只能后退到之前的版本:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~n</span><br></pre></td></tr></table></figure><h3 id="reset命令的三个参数">reset命令的三个参数</h3><ul><li><p>①–soft 参数</p></li><li><p>只会在本地库移动 HEAD 指针</p></li><li><p>不会改变暂存区和工作区内容.</p></li><li><p>②–mixed 参数</p></li><li><p>在本地库移动 HEAD 指针</p></li><li><p>并重置暂存区</p></li><li><p>但不会改变工作区内容.</p></li><li><p>③–hard 参数</p></li><li><p>在本地库移动 HEAD 指针</p></li><li><p>并重置暂存区</p></li><li><p>并重置工作区</p></li></ul><div class="success"><p>一般来说, 只会用到 --hard 参数.</p></div><h3 id="git-reset的应用">git reset的应用</h3><ul><li><p>找回已经删除了的文件.</p></li><li><p>前提: 删除该文件前, 文件存在时的状态提交到了本地库.</p></li><li><p>命令: <code>git reset --hard [指针位置]</code></p></li><li><p>①若删除操作已经提交到本地库, 指针位置为之前的历史记录的<code>局部索引值</code>.</p></li><li><p>②若删除操作尚未提交到本地库, 指针位置直接填入<code>HEAD</code>即可.</p></li></ul><hr><h2 id="6-git-diff">6.git diff</h2><ul><li><p>用于比较文件之间的差异.</p></li><li><p>①<code>git diff [文件名]</code></p></li><li><p>将工作区中的文件和暂存区进行比较.</p></li><li><p>②<code>git diff [本地库中历史版本的局部索引值] [文件名]</code></p></li><li><p>将工作区中的文件和本地库历史记录进行比较.</p></li></ul><div class="success"><p>不带文件名则比较多个文件.</p></div><hr><h2 id="7-分支管理">7.分支管理</h2><h3 id="分支操作">分支操作</h3><ul><li>①创建分支</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch [要创建的分支名]</span><br></pre></td></tr></table></figure><ul><li>②查看分支</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -v</span><br></pre></td></tr></table></figure><ul><li>③切换分支</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch checkout [要切换到的分支名]</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_11.png" alt="Git_GitHub_02_11"></p><ul><li>④强制删除分支</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D [要删除的分支]</span><br></pre></td></tr></table></figure><ul><li>⑤查看<code>git branch</code>的帮助</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -help</span><br></pre></td></tr></table></figure><h3 id="合并分支">合并分支</h3><ul><li>①切换到被合并分支(你要修改的分支)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [被合并分支名]</span><br></pre></td></tr></table></figure><ul><li>②使用merge命令合并分支(不会删除)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge [合并分支名]</span><br></pre></td></tr></table></figure><ul><li>③若无冲突, 则会成功合并; 否则, 需要解决冲突.如下图:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_12.png" alt="Git_GitHub_02_12"></p><h3 id="解决冲突">解决冲突</h3><ul><li>冲突的表现:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_13.png" alt="Git_GitHub_02_13"></p><ul><li><p>解决步骤:</p></li><li><p>①编辑有冲突的文件, 删除特殊符号.</p></li><li><p>②修改文件到你满意的程度, 保存退出.</p></li><li><p>③使用<code>git add [文件名]</code>命令, 添加冲突文件到暂存区.</p></li><li><p>④使用<code>git commit -m &quot;日志信息&quot;</code>命令, 提交冲突文件到本地库即可.</p></li></ul><div class="warning"><p>注意: 第④步中, commit 时一定不能带具体文件名.</p></div><hr><h2 id="8-和远程库相关操作">8.和远程库相关操作</h2><h3 id="创建远程库地址别名">创建远程库地址别名</h3><ul><li>前提: 确保你在代码托管中心申请了账号, 并创建了一个远程仓库, 得到了远程仓库的HTTP地址.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加远程库</span></span><br><span class="line">git remote add [远程库别名] [远程库地址]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前项目的远程库地址及别名</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_14.png" alt="Git_GitHub_02_14"></p><h3 id="Push">Push</h3><ul><li>即, 推送本地库到远程库.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push [要推送到的远程库别名] [要推送的本地分支]</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_15.png" alt="Git_GitHub_02_15"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_16.png" alt="Git_GitHub_02_16"></p><h3 id="Clone">Clone</h3><ul><li>即, 克隆远程库到本地库.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone [远程库地址]</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_17.png" alt="Git_GitHub_02_17"></p><ul><li>git clone的效果:</li><li>①完整的把远程库内容下载到本地.</li><li>②创建 origin 远程地址别名, 指向你克隆的地址.</li><li>③初始化本地库(相当于执行了<code>git init</code>命令).</li></ul><h3 id="Pull">Pull</h3><ul><li><p>即, 拉取远程库内容到本地.</p></li><li><p>若是多人协作开发的话, 你需要从远程库&quot;Pull&quot;别人更新的代码.</p></li><li><p><code>pull</code>命令, 其实可以拆分为: <code>fetch+merge</code>命令.</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch [远程库地址别名] [远程分支名]</span><br><span class="line">git merge [远程库地址别名/远程分支名]</span><br><span class="line">git pull [远程库地址别名] [远程分支名]</span><br></pre></td></tr></table></figure><ul><li>在<code>merge</code>的时候, 可能会产生冲突, 若产生冲突, 参照<a href="#%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81">解决冲突</a>即可.</li></ul><div class="danger"><p>注意: 有一些远程库, 若是本地库的修改不是基于远程库的最新版所做的修改, 不能Push, 必须先Pull. 解决冲突后, 再Push. 例如: GitHub远程库等.</p></div><hr><h2 id="9-使用SSH">9.使用SSH</h2><ul><li>①进入当前用户的家目录.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br></pre></td></tr></table></figure><ul><li>②删除之前的.ssh 目录.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf .ssh</span><br></pre></td></tr></table></figure><ul><li>③运行命令重新生成.ssh密钥目录. 注意: <code>大写-C</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C [你的代码托管中心的账户邮箱]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入完上面命令后, 一直按回车确认即可.</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_18.png" alt="Git_GitHub_02_18"></p><ul><li>④进入.ssh目录查看文件id_rsa.pub文件内容, 得到SSH密钥.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd .ssh</span><br><span class="line">ll</span><br><span class="line">cat id_rsa.pub</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_19.png" alt="Git_GitHub_02_19"></p><ul><li><p>⑤复制<code>id_rsa.pub文件</code>内容.</p></li><li><p>⑥登录你的代码托管中心, 新建一个SSH密钥, 添加上即可. 下面是Gitee的, 其他类似.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_20.png" alt="Git_GitHub_02_20"></p><ul><li>⑦得到你的远程库的SSH地址并复制, 不要HTTP的.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_21.png" alt="Git_GitHub_02_21"></p><ul><li>⑧添加远程库的SSH地址别名:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin_ssh git@gitee.com:CRainyDay/test.git</span><br></pre></td></tr></table></figure><ul><li>⑨Push文件进行测试.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_02_22.png" alt="Git_GitHub_02_22"></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>版本控制及Git简介</title>
      <link href="/Git_GitHub_01.html"/>
      <url>/Git_GitHub_01.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>版本控制思想及简单介绍.</p><p>版本控制工具: SVN、Git等.</p><p>Git的简单介绍.</p><a id="more"></a><h2 id="1-版本控制">1.版本控制</h2><h3 id="①为什么要进行版本控制">①为什么要进行版本控制</h3><blockquote><p>  对于个人来说:</p><ul><li>版本管理: 方便我们对代码版本的管理与维护.</li><li>数据备份: 能够保存整个项目所有的修改历史, 目录和文件的内容及状态. 当我们不小心<red>&quot;永久删除&quot;</red>了不该删除的文件时, 仍旧可以恢复.</li><li>分支管理: 可以根据正在开发管理的分支, 生成一个新的分支, 利用新的分支去完成一些新的功能, 而不影响主分支的运行, 就算是新分支开发失败, 直接删除就OK, 不会影响主分支. <red>你可以将分支理解为和原来一模一样的一个新的项目.</red></li><li>等等…</li></ul></blockquote><blockquote><p>  对于团队来说:</p><ul><li>上述对于个人开发者的好处不用再提.</li><li>协同开发: 支持多人同时修改服务器端的同一个文件. 当然, 你得先将服务器端的项目Pull一下, 才能向服务器Push你的代码.</li><li>权限控制: 可以严格的控制团队中的开发人员的权限. 其中Git工具支持, 对团队外开发者的代码进行审核并合并.</li><li>等等…</li></ul></blockquote><h3 id="②版本控制工具">②版本控制工具</h3><div class="success"><p>  版本控制工具分为: 集中式和分布式两种.</p><ul><li>集中式版本控制工具: SVN、CVS、VSS…一旦集中式的服务器单点故障, 一首《凉凉》吧.</li><li>分布式版本控制工具: Git、Bazaar、Darcs、Mercurial…</li></ul></div><p>现在为止, 最好用的, 也是最火的, 就是------<red>Git</red>.</p><hr><h2 id="2-Git">2.Git</h2><h3 id="Git的来历">Git的来历</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_01_01.png" alt="Git_GitHub_01_01"></p><h3 id="Git的优势">Git的优势</h3><blockquote><ul><li>大部分操作本地即可完成，无需联网.</li><li>完整性保证(hash运算).</li><li>尽可能添加数据而不是删除或修改数据.</li><li>分支操作非常快捷流畅.</li><li>与 Linux 命令全面兼容(因为它的出现, 一开始就是为了管理Linux代码).</li></ul></blockquote><h3 id="Git的安装">Git的安装</h3><blockquote><p>直接在<a href="https://git-scm.com/" target="_blank" rel="noopener">官网</a>下载安装包安装即可, <a href="https://git-scm.com/download/win" target="_blank" rel="noopener">Git For Windows</a>系统安装过程中注意:</p><ul><li>安装到无空格非中文目录.</li><li>建议使用Vim编辑器作为Git的默认编辑器.</li><li>Use Git From Git Bash Only, 无需修改系统Path变量仅在GitBash中使用Git即可.</li><li>剩下的就是无脑Next, 然后点击Install, 等待安装结束.</li></ul></blockquote><ul><li>这里我用的是Ubuntu客户端.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:git-core/ppa</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看git版本, 有输出即安装成功</span></span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="Git的结构">Git的结构</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_01_02.png" alt="Git_GitHub_01_02"></p><h3 id="Git与Git代码托管中心">Git与Git代码托管中心</h3><ul><li><p>局域网环境下:</p><ul><li>GitLab服务器------可以<a href="/Git_GitHub_04.html">自己搭建</a></li></ul></li><li><p>外网环境下:</p><ul><li><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></li><li><a href="https://gitee.com/" target="_blank" rel="noopener">码云</a></li><li><a href="http://git.oschina.net/" target="_blank" rel="noopener">开源中国</a></li><li><a href="https://about.gitlab.com/" target="_blank" rel="noopener">GitLab</a></li><li>…</li></ul></li></ul><h3 id="利用本地库和远程库完成团队内协作">利用本地库和远程库完成团队内协作</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_01_03.png" alt="Git_GitHub_01_03"></p><h3 id="利用本地库和远程库完成跨团队协作">利用本地库和远程库完成跨团队协作</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Git/Git_GitHub_01_04.png" alt="Git_GitHub_01_04"></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu安装v2ray</title>
      <link href="/Ubuntu_006.html"/>
      <url>/Ubuntu_006.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>v2ray简介。</p><p>配置v2ray服务端。</p><p>配置v2ray客户端：</p><ul><li>1.v2ray-core</li><li>2.v2ray客户端界面</li></ul><p>v2ray免费账号分享。</p><p>飞机场分享。</p><a id="more"></a><h2 id="1-简介">1.简介</h2><blockquote><p>  其实，v2ray是不区分客户端和服务端的。服务端与客户端的区别，只不过是<code>config.json</code>配置文件内容不一样。</p><p>  v2ray与另一个科学上网工具<code>Shadowsocks(r)</code>相比更好一点，支持自定义协议，被办的风险小。具体可百度查看。</p></blockquote><div class="danger"><p>注意：这里的所有服务器信息及机场均来自互联网，非盈利目的，仅供大家交流学习使用，出现一切问题本站作者概不负责。</p><p>这里不提供任何收费服务，不推荐任何收费机场（可能有的以后会收费，可以选择不用）。</p></div><div class="success"><p>这里提供科学上网的教程，只是用来学习用的，本人经常需要从Github、Ubuntu等这类技术网站下载东西，奈何不敢苟同国内和它们连接的速度啊。千万不要做一些违法的事情，天网恢恢。</p><p>另外，若科学上网成功，记得我们是中国人，要热爱祖国哦。不浏览不良信息，不要发表不利于祖国的不良言论。</p></div><hr><h2 id="2-服务端一键安装v2ray">2.服务端一键安装v2ray</h2><ul><li>注意：没有 curl 的需要用命令安装。</li><li>Ubuntu：<code>sudo apt-get install curl</code>。</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br></pre></td></tr></table></figure><ul><li>当然，我这里是先下载安装脚本：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://install.direct/go.sh</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_02.png" alt="Ubuntu_006_02"></p><ul><li>通过脚本下载并安装v2ray，成功后，会显示port和UUID：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_01.png" alt="Ubuntu_006_01"></p><ul><li>还可以通过下载下来的<code>go.sh</code>来做一些其他事：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_08.png" alt="Ubuntu_006_08"></p><ul><li>当然，port 和 UUID 都可以在<code>config.json</code>中查看并修改，在配置客户端时要用到。</li><li>这里的配置文件无需做修改，安装完即可正常使用。</li><li>最后，一定不要忘了，防火墙放行监听的端口，并设置开机自启v2ray：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Ubuntu系统：ufw</span></span><br><span class="line">ufw allow 30522/tcp # 30522 改为你的配置文件中的端口号</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> CentOS系统：firewall</span></span><br><span class="line">firewall-cmd --permanent --add-port=30522/tcp # 30522 改为你的配置文件中的端口号</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="meta">#</span><span class="bash"> CentOS系统：iptables</span></span><br><span class="line">iptables -I INPUT -p tcp --dport 30522 -j ACCEPT</span><br></pre></td></tr></table></figure><ul><li>v2ray服务相关命令：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable v2ray # 设置开机自启</span><br><span class="line">systemctl start v2ray # 运行v2ray</span><br><span class="line">systemctl stop v2ray # 停止v2ray</span><br><span class="line"><span class="meta">#</span><span class="bash"> ubuntu上述启动命令无效时：</span></span><br><span class="line">service v2ray start # 运行v2ray</span><br><span class="line">service v2ray stop # 停止v2ray</span><br></pre></td></tr></table></figure><ul><li>查看v2ray服务运行端口：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tunlp | grep v2ray</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">sudo ss -tunlp | grep v2ray</span><br></pre></td></tr></table></figure><ul><li>v2ray服务端设置多用户客户端：<a href="https://www.hijk.pw/v2ray-multiple-users/" target="_blank" rel="noopener">多用户</a></li></ul><hr><h2 id="3-安装v2ray客户端">3.安装v2ray客户端</h2><blockquote><p>  v2ray客户端分为：v2ray-core 和别人开发的 v2ray 界面程序。</p><p>这里我用的是ubuntu系统下的Qv2ray客户端。</p></blockquote><h3 id="v2ray-core">v2ray-core</h3><ul><li>可以使用：<code>bash &lt;(curl -L -s https://install.direct/go.sh)</code>命令一键安装。</li><li>也可以进官网下载：<a href="https://github.com/v2ray/v2ray-core/releases/" target="_blank" rel="noopener">v2ray核心</a>。</li><li>下载后解压到任意目录下即可，我这里下载解压到了：<code>~/.config/qv2ray/vcore</code>目录下，之后不用再修改qv2ray的v2ray-core配置😅。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_04.png" alt="Ubuntu_006_04"></p><h3 id="v2ray界面">v2ray界面</h3><blockquote><p>  这里我是用的ubuntu系统，用的 <a href="https://github.com/Qv2ray/Qv2ray/releases" target="_blank" rel="noopener">Qv2ray</a> 客户端，挺好用的。</p><ul><li>其他客户端可以在这里下载：<a href="https://tlanyan.me/v2ray-clients-download/" target="_blank" rel="noopener">客户端下载</a>。</li></ul></blockquote><ul><li>直接下载：<a href="https://github.com/Qv2ray/Qv2ray/releases/download/v2.2.3/Qv2ray.v2.2.3.linux-x64.AppImage" target="_blank" rel="noopener">Qv2ray.v2.2.3.linux-x64.AppImage</a>，AppImage文件可直接运行。</li><li>注意：下载后，若不能直接运行，需要赋予运行权限<code>右键</code>→<code>属性</code>→<code>权限</code>→<code>允许文件作为程序执行</code>。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_03.png" alt="Ubuntu_006_03"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通过命令提权并执行</span></span><br><span class="line">sudo chmod +x ./Qv2ray.v2.2.3.linux-x64.AppImage</span><br><span class="line"><span class="meta">#</span><span class="bash"> 若是sudo不能成功运行，请去掉sudo</span></span><br><span class="line">sudo ./Qv2ray.v2.2.3.linux-x64.AppImage</span><br></pre></td></tr></table></figure><ul><li>运行程序，如图：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_05.png" alt="Ubuntu_006_05"></p><h3 id="配置qv2ray">配置qv2ray</h3><ul><li>点击<code>首选项</code>，开始配置：<code>常规配置</code>。配置后，可点击<code>检查v2ray核心设置</code>来确定是否配置成功。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_06.png" alt="Ubuntu_006_06"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_07.png" alt="Ubuntu_006_07"></p><ul><li>至此，基本配置完毕。剩下的就是，订阅或直接添加你的服务器配置信息。</li></ul><hr><h2 id="4-订阅或添加服务器">4.订阅或添加服务器</h2><h3 id="获取订阅地址">获取订阅地址</h3><blockquote><p>  通过飞机场获取订阅地址，这里分享几个飞机场：<a href="#%E9%A3%9E%E6%9C%BA%E5%9C%BA">飞机场</a></p></blockquote><ul><li>例如：这里获取的是佚名机场的订阅地址。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_13.png" alt="Ubuntu_006_13"></p><h3 id="获取免费服务器">获取免费服务器</h3><div class="success"><p>免费账号：<a href="#error">xxxx-ss</a>。</p><p>但是，这个网站需要科学上网才能访问。这个速度还可以。</p><p>当然，你可以通过修改电脑的host文件实现。</p><p>注意：这个链接每天24:00会重置，需要每天再重新配置或重新下载<code>config.json</code>文件配置。</p></div><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_11.png" alt="Ubuntu_006_11"></p><div class="success"><p>免费账号：<a href="#error">Xxxx-Air</a>。(这个网站国内可以访问)</p><p>GitHub的地址：<a href="#error">v2ray免费账号</a>。</p></div><div class="success"><p>免费账号：<a href="#error">翻个墙网</a>。</p><p>但是，这个网站需要科学上网才能访问。</p><p>当然，你可以通过修改电脑的host文件实现。</p><p>注意：这个账号大约 3-5 天更新一次密码。</p></div><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_10.png" alt="Ubuntu_006_10"></p><h3 id="配置客户端">配置客户端</h3><blockquote><p>注意：这里使用的是ubuntu的Qv2ray客户端，其他系统客户端配置类似。</p></blockquote><ul><li>1）若是直接有订阅地址的话，就比较简单，直接添加就OK。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_12.png" alt="Ubuntu_006_12"></p><ul><li>2）没有订阅地址的话，可以使用免费的或自己搭建的v2ray服务器。</li><li>这里采用<a href="#error">Xxxx-Air网站</a>的服务器信息来说明如何配置。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_09.png" alt="Ubuntu_006_09"></p><ul><li>3）设置Q2ray客户端的代理设置：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_14.png" alt="Ubuntu_006_14"></p><ul><li>4）配置浏览器SwitchOmega插件：</li><li>规则列表网址：<code>https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_15.png" alt="Ubuntu_006_15"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_16.png" alt="Ubuntu_006_16"></p><ul><li>5）科学上网：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_006_17.png" alt="Ubuntu_006_17"></p><h3 id="飞机场">飞机场</h3><btns rounded grid4><a href='#error'><i class='fas fa-plane'></i>XX云</a><a href='#error'><i class='fas fa-plane'></i>XX飞机</a><a href='#error'><i class='fas fa-plane'></i>XX号机场</a><a href='#error'><i class='fas fa-plane'></i>XXXXXX闪电</a></btns><btns rounded grid4><a href='#error'><i class='fas fa-plane'></i>X飞机</a><a href='#error'><i class='fas fa-plane'></i>XX网络</a><a href='#error'><i class='fas fa-plane'></i>XXXX</a><a href='#error'><i class='fas fa-plane'></i>XX666</a></btns><hr><h3 id="error">error</h3><div class="danger"><p>不能传播，秘密😄，秘密😄，秘密😄。</p></div>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> v2ray </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改root密码</title>
      <link href="/Ubuntu_005.html"/>
      <url>/Ubuntu_005.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这里说的是，在忘记了root密码，无法进入系统时，如何修改root密码。</p><a id="more"></a><h2 id="1-修改Ubuntu的root密码">1.修改Ubuntu的root密码</h2><blockquote><p>  这里是在GRUB引导下的修改密码，其他的可能类似。毕竟没试过😅。</p><p>可以自己试一下。</p></blockquote><ul><li><p>开机按特定按键(长按<code>Shift</code>或F12、Enter等，自己试一下)进入GRUB引导界面。(多系统可能不需要，一开机就是引导界面)</p></li><li><p>选择&quot;Advanced options for Ubuntu&quot;，即Ubuntu高级选项。<code>“按回车”</code></p></li><li><p>找到&quot;Ubuntu, Linux x.x.x-x-generic (recovery mode)&quot;，即Linux内核恢复模式。(x.x.x-x为内核版本)</p></li><li><p>按<code>e</code>键，编辑引导文件。</p></li><li><p>可以找到下面的一行类似的代码：</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux&#x2F;vmlinuz-5.3.0-42-generic root&#x3D;UUID&#x3D;fce061a9-02c8-4e34-82c9-41eec4b9fc17 ro recovery nomodeset</span><br></pre></td></tr></table></figure><ul><li>将最后的<code>ro recovery nomodeset </code>，改为<code>rw single init=/bin/bash</code>。</li><li>按<code>F10</code>或<code>Ctrl+X</code>进入系统，此时进入的是Linux运行级别之单用户模式。</li><li>此时，在命令行输入<code>passwd root</code>，即可修改密码。连续输入两次新密码即可成功修改。</li></ul><blockquote><p>相关内核引导参数的介绍：<a href="https://ubuntuqa.com/article/1416.html" target="_blank" rel="noopener">nomodeset等引导参数</a></p></blockquote><h2 id="2-修改CentOS的root密码">2.修改CentOS的root密码</h2><ul><li>开机按<code>Enter</code>键，进入GRUB引导选项。如图：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_005_01.png" alt="Ubuntu_005_01"></p><ul><li>选择相应系统（别按回车），按<code>e</code>键编辑引导选项。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_005_02.png" alt="Ubuntu_005_02"></p><ul><li>选择内核Kernel，按<code>e</code>键编辑，输入<code>空格</code>和<code>1</code>：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_005_03.png" alt="Ubuntu_005_03"></p><ul><li><p>按<code>Enter</code>键保存，再按<code>b</code>键进入Linux系统的单用户模式。</p></li><li><p>此时，在命令行输入<code>passwd root</code>，即可修改密码。连续输入两次新密码即可成功修改。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu安装OpenGL</title>
      <link href="/Ubuntu_004.html"/>
      <url>/Ubuntu_004.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在Ubuntu上安装并使用OpenGL库。</p><a id="more"></a><h2 id="1-简介">1.简介</h2><blockquote><p>  OpenGL主要包括三个函数库，它们是核心库(gl)、实用函数库(glu)和编程辅助库(aux)。</p><p>目前AUX编程辅助库已经很大程度上被GLUT库取代了。</p></blockquote><h2 id="2-安装">2.安装</h2><blockquote><p>按照：<btn><a href="https://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Linux" target="_blank" rel="noopener">官网</a></btn><br>说明的步骤安装：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential libgl1-mesa-dev</span><br><span class="line">sudo apt-get install libglew-dev libsdl2-dev libsdl2-image-dev libglm-dev libfreetype6-dev</span><br><span class="line">sudo apt-get install libglfw3-dev libglfw3</span><br></pre></td></tr></table></figure><blockquote><p>这样安装完即可使用。但是，这里我安装了一些其他的库：</p></blockquote><h3 id="OpenGL核心库，GL">OpenGL核心库，GL</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgl1-mesa-dev</span><br></pre></td></tr></table></figure><h3 id="OpenGL实用函数库，GLU">OpenGL实用函数库，GLU</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libglu1-mesa-dev</span><br></pre></td></tr></table></figure><h3 id="OpenGL实用工具包，GLUT">OpenGL实用工具包，GLUT</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install freeglut3-dev</span><br><span class="line"><span class="meta">#</span><span class="bash"> 上面的命令若不行，就用如下命令：</span></span><br><span class="line">sudo apt-get install libglut-dev</span><br></pre></td></tr></table></figure><h3 id="查看OpenGL的安装情况">查看OpenGL的安装情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mesa-utils</span><br><span class="line">glxinfo | grep OpenGL</span><br></pre></td></tr></table></figure><h2 id="3-简单的CPP测试程序">3.简单的CPP测试程序</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;GL/glut.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">// 初始化材料属性、光源属性、光照模型，打开深度缓冲区</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    GLfloat mat_specular [] = &#123; <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span> &#125;;</span><br><span class="line">    GLfloat mat_shininess [] = &#123; <span class="number">50.0</span> &#125;;</span><br><span class="line">    GLfloat light_position [] = &#123; <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span> &#125;;</span><br><span class="line">    glClearColor(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>);</span><br><span class="line">    glShadeModel(GL_SMOOTH);</span><br><span class="line">    glMaterialfv(GL_FRONT, GL_SPECULAR, mat_specular);</span><br><span class="line">    glMaterialfv(GL_FRONT, GL_SHININESS, mat_shininess);</span><br><span class="line">    glLightfv(GL_LIGHT0, GL_POSITION, light_position);</span><br><span class="line">    glEnable(GL_LIGHTING);</span><br><span class="line">    glEnable(GL_LIGHT0);</span><br><span class="line">    glEnable(GL_DEPTH_TEST);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用GLUT函数，绘制一个球</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>&#123;</span><br><span class="line">    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</span><br><span class="line">    glutSolidSphere(<span class="number">1.0</span>, <span class="number">40</span>, <span class="number">50</span>);</span><br><span class="line">    glFlush();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span>&#123;</span><br><span class="line">    <span class="comment">// GLUT环境初始化</span></span><br><span class="line">    glutInit(&amp;argc, argv);</span><br><span class="line">    <span class="comment">// 显示模式初始化</span></span><br><span class="line">    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);</span><br><span class="line">    <span class="comment">// 定义窗口大小</span></span><br><span class="line">    glutInitWindowSize(<span class="number">300</span>, <span class="number">300</span>);</span><br><span class="line">    <span class="comment">// 定义窗口位置</span></span><br><span class="line">    glutInitWindowPosition(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="comment">// 显示窗口，窗口标题为执行函数名 */</span></span><br><span class="line">    glutCreateWindow(argv[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">// 调用OpenGL初始化函数</span></span><br><span class="line">    init();</span><br><span class="line">    <span class="comment">// 注册OpenGL绘图函数</span></span><br><span class="line">    glutDisplayFunc(display);</span><br><span class="line">    <span class="comment">// 进入GLUT消息循环，开始执行程序</span></span><br><span class="line">    glutMainLoop();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-测试执行">4.测试执行</h2><ul><li><p>编译并链接，生成可执行文件：</p></li><li><p><code>g++ -o test test.cpp -lGL -lGLU -lglut</code></p></li><li><p>执行可执行文件：</p></li><li><p><code>./test</code></p></li></ul><p>说明：</p><blockquote><p>  后面的-l命令之前很少用，因为没有用过动态库。-l+动态库名，表示链接时链接该库，相当于windows下的添加dll库文件。</p><ul><li>-lGL：就是链接到gl库</li><li>-lGLU：就是链接到glu库</li><li>-lglut：就是链接到glut库</li></ul><p>编译并链接，生成可执行文件，就可以执行了。</p></blockquote><div class="warning"><p>注意：这里的GL和GLU必须大写，glut必须小写。</p></div><p>执行结果如图：</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_004_01.png" alt="Ubuntu_004_01"></p><h2 id="5-在Sublime中配置OpenGL">5.在Sublime中配置OpenGL</h2><blockquote><p>在Sublime中依次选择：<code>Tools</code>→<code>Build System</code>→<code>New Build System</code>，之后输入下列配置并保存即可：</p><p>我这里是保存的文件名为<code>OpenGL.sublime-build</code>。</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"shell_cmd"</span>: <span class="string">"g++ \"$&#123;file&#125;\" -o \"$&#123;file_path&#125;/$&#123;file_base_name&#125;\" \"-lGL\" \"-lGLU\" \"-lglut\""</span>,</span><br><span class="line">    <span class="attr">"file_regex"</span>: <span class="string">"^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$"</span>,</span><br><span class="line">    <span class="attr">"working_dir"</span>: <span class="string">"$&#123;file_path&#125;"</span>,</span><br><span class="line">    <span class="attr">"selector"</span>: <span class="string">"source.c, source.c++"</span>,</span><br><span class="line">    <span class="attr">"variants"</span>:</span><br><span class="line">    [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Run"</span>,</span><br><span class="line">            <span class="attr">"shell_cmd"</span>: <span class="string">"./\"$&#123;file_base_name&#125;\""</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>之后，依次选择：<code>Tools</code>→<code>Build With...</code>→<code>OpenGL </code>即可编译并链接生成可执行文件。</li><li>依次选择：<code>Tools</code>→<code>Build With...</code>→<code>OpenGL  - Run</code>即可运行。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_004_02.png" alt="Ubuntu_004_02"></p>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> OpenGL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu修改GRUB2和开关机界面主题</title>
      <link href="/Ubuntu_003.html"/>
      <url>/Ubuntu_003.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1.修改Ubuntu的GRUB2引导界面主题</p><p>2.修改Ubuntu的开关机界面主题</p><p>3.这里注意，有的地方很坑很坑, 不仔细看打死你都找不到</p><p><font style="color:red;font-weight:bloder;">注意：GRUB主题可以一件换装了</font></p><a id="more"></a><h2 id="1-引言">1.引言</h2><blockquote><p>  我之前按照网上的教程修改GRUB和开关机界面主题, 一直不成功心态炸了. 突然想到可能是与默认主题有关。</p><p>  要知道GRUB2最后的主题配置文件是在执行<code>update-grub</code>命令之后动态生成的, 存放在/boot/grub/grub.cfg文件中.打开/boot/grub/grub.cfg文件由注释可知道, 此文件由/etc/grub.d目录下的文件和/etc/default/grub文件生成的。</p></blockquote><blockquote><p>  在/boot/grub/grub.cfg文件中查找themes关键字, 再看由注释可知此处代码所在的文件.<br>  找到/etc/grub.d/00_header和/etc/grub.d/05_debian_theme两个文件, 可知默认主题与这两个文件有关。<br>  经多次查探在/etc/grub.d/05_debian_theme找到设置默认主题的文件:</p><p><code>/usr/share/plymouth/themes/default.plymouth</code><br>  果不其然, 进去一看在/usr/share/plymouth/themes/中有两个默认配置文件: default.plymouth和default.grub。<br>  而这两个文件是/etc/alternatives/中文件的软连接.</p></blockquote><blockquote><p>  故而, 要想让你的配置成功, 必须删除这两个默认主题文件.<br>  当然, 你要是闲修改那些配置文件麻烦的话, 你可以将下载好的主题文件名直接修改为默认文件中的主题文件名.🙂</p></blockquote><h2 id="2-删除默认主题配置文件">2.删除默认主题配置文件</h2><ul><li>删除下列文件：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -f /usr/share/plymouth/themes/default.plymouth</span><br><span class="line">sudo rm -f /usr/share/plymouth/themes/default.grub</span><br><span class="line">sudo rm -f /etc/alternatives/default.plymouth</span><br><span class="line">sudo rm -f /etc/alternatives/default.grub</span><br></pre></td></tr></table></figure><h2 id="3-下载并安装主题">3.下载并安装主题</h2><h3 id="手动下载安装">手动下载安装</h3><blockquote><p>进入Gnome<btn><a href="https://www.gnome-look.org/" target="_blank" rel="noopener">主题官网</a></btn>下载主题文件。</p><ul><li>左侧的GRUB Themes即为GRUB的主题下载。推荐的 GRUB 主题：<ul><li><a href="https://www.pling.com/p/1009236/" target="_blank" rel="noopener">Grub-theme-vimix</a></li><li><a href="https://www.pling.com/p/1414997/" target="_blank" rel="noopener">Sleek GrubBootloader themes</a></li></ul></li><li>左侧的Plymouth Themes即为开关机界面的主题下载。</li></ul></blockquote><div class="success"><p>下载成功后，将主题文件分别移动到对应的目录下即可。</p><ul><li>GRUB Themes放在：<code>/boot/grub/themes</code>目录下。</li><li>Plymouth Themes放在：<code>/usr/share/plymouth/themes</code>目录下。</li></ul></div><h3 id="命令安转Plymouth主题">命令安转Plymouth主题</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安转默认的所有主题，不多一共十个左右吧</span></span><br><span class="line">sudo apt-get install plymouth-theme*</span><br><span class="line"><span class="meta">#</span><span class="bash"> 当然你可以选择性安装，这里提供一个还可以的</span></span><br><span class="line">sudo apt-get install plymouth-theme-ubuntu-logo</span><br></pre></td></tr></table></figure><h2 id="4-修改主题">4.修改主题</h2><h3 id="修改grub主题">修改grub主题</h3><h4 id="修改">修改</h4><blockquote><p>修改/etc/default/grub或/etc/grub.d/00_header文件：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">sudo vim /etc/grub.d/00_header</span><br></pre></td></tr></table></figure><blockquote><ul><li><p>若文件中有 GRUB_THEME 和 GRUB_GFXMODE 配置，修改即可。</p></li><li><p>若没有，则添加。</p></li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRUB_THEME="/boot/grub/themes/主题名/theme.txt"</span><br><span class="line">GRUB_GFXMODE="1920x1080x32"</span><br></pre></td></tr></table></figure><p>如图：</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_003_01.png" alt="Ubuntu_003_01"></p><h4 id="更新">更新</h4><blockquote><p>更新GRUB配置文件，最重要的一步。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">sudo update-grub2</span><br></pre></td></tr></table></figure><h3 id="修改Plymouth主题">修改Plymouth主题</h3><h4 id="用shell命令选择主题">用shell命令选择主题</h4><blockquote><p>当然，这个命令只能选择你通过<code>sudo apt-get install plymouth-theme*</code>安装过的主题。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo ln /etc/alternatives/default.plymouth /usr/share/plymouth/themes/default.plymouth</span><br><span class="line">sudo update-alternatives --config default.plymouth</span><br><span class="line"><span class="meta">#</span><span class="bash"> 更新：</span></span><br><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure><h4 id="通过配置文件选择主题">通过配置文件选择主题</h4><blockquote><p>修改plymouth配置文件指定主题位置信息。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/alternatives/default.plymouth</span><br></pre></td></tr></table></figure><p>内容如图：</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_003_02.png" alt="Ubuntu_003_02"></p><blockquote><p>原本没有此文件或已被删除的，可以直接新建，文件内容：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Plymouth Theme]</span><br><span class="line">Name=apple-mac-plymouth</span><br><span class="line">Description=A theme that features the Ubuntu logo.</span><br><span class="line">ModuleName=script</span><br><span class="line"></span><br><span class="line">[script]</span><br><span class="line">ImageDir=/usr/share/plymouth/themes/apple-mac-plymouth</span><br><span class="line">ScriptFile=/usr/share/plymouth/themes/apple-mac-plymouth/apple-mac-plymouth.script</span><br></pre></td></tr></table></figure><ul><li>千万不要忘记：更新配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ln /etc/alternatives/default.plymouth /usr/share/plymouth/themes/default.plymouth</span><br><span class="line">sudo update-initramfs -u</span><br></pre></td></tr></table></figure><h2 id="5-GRUB一键换装">5.GRUB一键换装</h2><blockquote><ul><li>①官网下载主题，我下的是<a href="https://www.gnome-look.org/p/1009236/" target="_blank" rel="noopener">Grub-theme-vimix</a></li><li>②下载后解压</li><li>③以 <code>sudo</code>执行主题里面的 <a href="http://install.sh" target="_blank" rel="noopener">install.sh</a> 等shell命令即可。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_003_03.gif" alt="Ubuntu_003_03"></p>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> GRUB </tag>
            
            <tag> plymouth </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu添加自定义图标和透明化shell顶部状态栏</title>
      <link href="/Ubuntu_002.html"/>
      <url>/Ubuntu_002.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1.ubuntu添加自定义图标到“显示所有应用程序”。</p><p>2.ubuntu透明化shell顶部状态栏</p><p>3.ubuntu透明化 AppFolder Dialog。</p><a id="more"></a><h2 id="1-添加自定义图标">1.添加自定义图标</h2><h3 id="找到与图标相关目录">找到与图标相关目录</h3><blockquote><p>与图标相关的目录：</p><ul><li>①全局：<code>/usr/share/applications</code></li><li>②个人：<code>~/.local/share/applications</code></li></ul><p>在上述目录中添加自定义的.desktop文件即可.</p></blockquote><h3 id="添加图标">添加图标</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/share/applications/xxx.desktop</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">vim ~/.local/share/applications/xxx.desktop</span><br></pre></td></tr></table></figure><p>xxx.desktop内容大体如下：</p><h3 id="xxx-desktop">xxx.desktop</h3><ul><li>例如：这是我的 idea.desktop 文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version=1.0# 版本</span><br><span class="line">Type=Application</span><br><span class="line">Name=IDEA</span><br><span class="line">Icon=/opt/idea/bin/idea.png# 图标图片位置</span><br><span class="line">Exec="/opt/idea/bin/idea.sh" %f# 启动命令</span><br><span class="line">Comment=The smartest JavaEE IDE</span><br><span class="line">Categories=Development;IDE;</span><br><span class="line">Terminal=false# 是否启动终端</span><br><span class="line">StartupWMClass=jetbrains-ideaIU</span><br><span class="line"><span class="meta">#</span><span class="bash">注意：每行最后一定不要留空格</span></span><br><span class="line"><span class="meta">#</span><span class="bash">=的两边不能有空格</span></span><br></pre></td></tr></table></figure><div class="success"><p>具体详见官方说明文档：<a href="https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html" target="_blank" rel="noopener">Desktop</a>。</p></div><div class="danger"><p>注意：Ubuntu19.04、Ubuntu19.10，好像不支持在桌面添加快捷方式了，我的试着不行。可以自行尝试一下，不要忘记给.desktop文件添加可执行的权限, 右击属性, 允许执行“allowing  launching”，就可以用桌面快捷方式了。</p></div><h3 id="添加桌面快捷方式">添加桌面快捷方式</h3><blockquote><ul><li>注意: Ubuntu20.04系统, 又支持添加桌面快捷方式了.</li><li>①首先, 将要添加的desktop文件复制到 <code>~/桌面</code> 目录下.</li><li>②设置文件权限. 右键属性, 然后勾上允许执行文件.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_04.png" alt="Ubuntu_002_04"></p><blockquote><ul><li>③允许启动. 在桌面上, 右键单击你的 desktop 文件, 然后点击 <strong>允许启动</strong> 即 <strong>allowing  launching</strong>.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_05.png" alt="Ubuntu_002_05"></p><h2 id="2-透明化shell顶部状态栏">2.透明化shell顶部状态栏</h2><h3 id="找到主题配置文件">找到主题配置文件</h3><blockquote><p>找到系统现在Shell主题的目录或默认目录，一般配置文件如下：</p><ul><li><code>/usr/local/share/themes/主题名/gnome-shell/gnome-shell.css</code></li><li><code>/usr/share/themes/主题名/gnome-shell/gnome-shell.css</code></li><li><code>/usr/share/gnome-shell/theme/主题名/gnome-shell.css</code></li><li><code>/usr/share/gnome-shell/theme/gnome-shell.css</code></li><li><code>/usr/share/gnome-shell/theme/ubuntu.css</code></li></ul><p>上述只有一个是生效的主题文件，当然也可能css文件名不一样.</p></blockquote><h3 id="修改css配置">修改css配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim gnome-shell.css</span><br></pre></td></tr></table></figure><blockquote><p>在Terminal使用vim打开css文件, 键入 /#panel 搜索字符串.如下图：</p><p>修改background 或 background-color属性为 rgba(0, 0, 0, 0);</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_01.png" alt="Ubuntu_002_01"></p><div class="warning"><p>注意：修改后，需要重新加载一下配置才会生效。</p><p>在<code>优化程序</code>的<code>外观选项</code>的<code>Shell</code>中，切换一下主题，在切换回你修改的主题即可。如下图：</p></div><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_02.png" alt="Ubuntu_002_02"></p><h3 id="效果图">效果图</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_03.png" alt="Ubuntu_002_03"></p><hr><h2 id="3-透明化AppFolderDialog">3.透明化AppFolderDialog</h2><h3 id="修改配置">修改配置</h3><blockquote><ul><li>透明化应用程序文件夹背景.（注意: 我这里用的是 Ubuntu20.04, 其他版本可能不太一样）</li><li>①找到你的生效的Shell主题配置文件(gnome-shell.css).</li><li>②修改gnome-shell.css, <code>sudo vim /usr/share/themes/主题名/gnome-shell/gnome-shell.css </code></li><li>在正常模式下, 键入<code>/.app-folder-dialog</code> （按n键查找下一个）查找</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_06.png" alt="Ubuntu_002_06"></p><blockquote><ul><li>③修改图中的 background 属性即可.</li></ul></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.3</span>);</span><br></pre></td></tr></table></figure><div class="warning"><p>注意：修改后，需要重新加载一下配置才会生效。</p><p>在<code>优化程序</code>的<code>外观选项</code>的<code>Shell</code>中，切换一下主题，在切换回你修改的主题即可。和上面透明化shell顶部状态栏时一样。</p></div><h3 id="效果图-2">效果图</h3><ul><li>之前</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_07.png" alt="Ubuntu_002_07"></p><ul><li>之后</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_002_08.png" alt="Ubuntu_002_08"></p>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> GNOME </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu更换登录界面壁纸</title>
      <link href="/Ubuntu_001.html"/>
      <url>/Ubuntu_001.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1.更换开机登录界面壁纸</p><p>2.更换开机锁屏后的登录界面壁纸</p><p>上面都是Ubuntu19的.</p><p>3.Ubuntu20.04更换登录壁纸.</p><a id="more"></a><h2 id="1-更换开机登录界面壁纸">1.更换开机登录界面壁纸</h2><div class="success"><p>直接修改 gdm3.css 文件即可.</p></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/alternatives/gdm3.css</span><br></pre></td></tr></table></figure><blockquote><p>  搜索找到 #lockDialogGroup 的样式定义, 对于vim可以直接输入 <code>/lockDialogGroup</code> 进行搜索.<br>大概在1800多行. 按 <code>i</code> 进行编辑。</p><p>  修改 background 的 url 属性即可. 修改完成后，按<code>ESC</code>退出编辑，输入<code>:wq</code>保存退出。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_001_01.png" alt="Ubuntu_001_01"></p><hr><h2 id="2-更换开机锁屏后的登录界面壁纸">2.更换开机锁屏后的登录界面壁纸</h2><blockquote><p>  修改对应主题的 gnome-shell.css 文件即可.(若没有此文件就修改 ubuntu.css)。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/share/gnome-shell/theme/某个主题目录/gnome-shell.css</span><br></pre></td></tr></table></figure><ul><li>或</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/share/gnome-shell/theme/gnome-shell.css</span><br></pre></td></tr></table></figure><ul><li>或</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /usr/share/gnome-shell/theme/ubuntu.css</span><br></pre></td></tr></table></figure><div class="success"><p>搜索找到 #lockDialogGroup 的样式定义, 对于vim可以直接输入 /lockDialogGroup.大概在1800多行.</p><p>修改 background 的 url 属性后，保存退出即可.</p></div><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/Ubuntu_001_02.png" alt="Ubuntu_001_02"></p><hr><h2 id="3-Ubuntu20-04更换登录壁纸">3.Ubuntu20.04更换登录壁纸</h2><blockquote><p>  Ubuntu20.04的GDM不再像之前的系统一样, 它不再直接使用 css 配置文件, 而是将相关配置文件生成了一个GDM主题文件 <code>/usr/share/gnome-shell/gdm3-theme.gresource</code>.</p><ul><li>打开该文件, 可以看见有乱码, 因此我们不能直接修改它来更换背景了.</li><li>可以使用一个工具: <a href="https://github.com/thiggy01/change-gdm-background" target="_blank" rel="noopener">change-gdm-background</a></li><li>该工具有命令行使用及GUI使用两种方法, <a href="https://github.com/thiggy01/gdm-background" target="_blank" rel="noopener">GUI使用见文档</a>, 需要自己编译安装.</li><li>下面使用的是命令行方式.</li></ul></blockquote><h3 id="A-更换开机登录界面壁纸">A.更换开机登录界面壁纸</h3><ul><li>下载好你的壁纸, 依次运行以下命令即可更换开机登录界面壁纸.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装需要的依赖</span></span><br><span class="line">sudo apt install libglib2.0-dev-bin</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载工具</span></span><br><span class="line">wget github.com/thiggy01/change-gdm-background/raw/master/change-gdm-background</span><br><span class="line"><span class="meta">#</span><span class="bash"> 提权</span></span><br><span class="line">chmod +x change-gdm-background</span><br><span class="line"><span class="meta">#</span><span class="bash"> 更换壁纸. 后面参数为要更换的壁纸路径</span></span><br><span class="line">sudo ./change-gdm-background /path/to/image</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不想使用壁纸了, 随时可以恢复成GDM原来的主题样式.</span></span><br><span class="line">sudo ./change-gdm-background --restore</span><br></pre></td></tr></table></figure><h3 id="B-更换开机锁屏后的登录界面壁纸">B.更换开机锁屏后的登录界面壁纸</h3><blockquote><p>  在Ubuntu 20.04的Gnome桌面设置中, 锁定屏幕背景已删除. 而是使用模糊的桌面墙纸作为锁定屏幕的背景.</p><ul><li>①下载一个依赖: <code>sudo apt-get install gir1.2-clutter-1.0</code>.</li><li>②安装gnome扩展: <a href="https://extensions.gnome.org/extension/1476/unlock-dialog-background/" target="_blank" rel="noopener">Lock screen background</a>.</li><li>③使用该扩展切换锁屏登录背景即可.</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> GNOME </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS中UTF-8与汉字互转</title>
      <link href="/JS_tools_01.html"/>
      <url>/JS_tools_01.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JavaScript简介</p><p>JS中UTF-8与汉字互转</p><a id="more"></a><blockquote><p>  关于在 JS 中UTF-8与汉字互转问题，搜到了很多方法，但就是这个方法最6。</p><p>利用正则匹配，代码少、效率较高。</p></blockquote><h2 id="函数定义">函数定义</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//UTF字符转换</span></span><br><span class="line"><span class="keyword">let</span> UTFTranslate = &#123;</span><br><span class="line">    Change : <span class="function"><span class="keyword">function</span>(<span class="params">pValue</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pValue.replace(<span class="regexp">/[^\u0000-\u00FF]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$<span class="number">0</span></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">escape</span>($<span class="number">0</span>).replace(<span class="regexp">/(%u)(\w&#123;4&#125;)/gi</span>, <span class="string">"&amp;#x$2;"</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    ReChange : <span class="function"><span class="keyword">function</span>(<span class="params">pValue</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">unescape</span>(pValue.replace(<span class="regexp">/&amp;#x/g</span>, <span class="string">'%u'</span>).replace(<span class="regexp">/\\u/g</span>, <span class="string">'%u'</span>)</span><br><span class="line">                .replace(<span class="regexp">/;/g</span>, <span class="string">''</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="使用">使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UTFTranslate.ReChange(<span class="string">'&amp;#x4E2D;&amp;#x6587;sdfdf'</span>); <span class="comment">//"中文sdfdf"</span></span><br><span class="line">UTFTranslate.Change(<span class="string">'中文sdfsf'</span>); <span class="comment">// "&amp;#x4E2D;&amp;#x6587;sdfsf"</span></span><br></pre></td></tr></table></figure><div class="success"><p>引用自这篇文章： <a href="https://www.cnblogs.com/if404/archive/2012/05/13/2498111.html" target="_blank" rel="noopener">JS中UTF编码与中文的互转</a>。</p></div>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu中py2与py3共存</title>
      <link href="/Python.html"/>
      <url>/Python.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  在一些常见的 Linux 发行版本中, py2 都是系统默认自带的. 但我们往往需要py3, 有时也会用到 py2, 就像 宝塔面板和 yum 包管理器都是用的 py2.</p><p>  如何安装 py3, 并使其与 py2 共存?</p><a id="more"></a><h2 id="1-安装python3">1.安装python3</h2><h3 id="①直接安装">①直接安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ubuntu中利用 apt 包管理器</span></span><br><span class="line">sudo apt-get install python3.7 # 或其他版本</span><br><span class="line"><span class="meta">#</span><span class="bash"> CentOS中利用 yum 包管理器: 安装python3.7，pip3</span></span><br><span class="line">yum -y install python37u</span><br><span class="line">yum -y install python37u-pip</span><br></pre></td></tr></table></figure><blockquote><p>个人来说, 我不喜欢这样 😄. 更喜欢利用 wget 下载编译安装, 这样适用于大多 Linux 发行版本.</p></blockquote><hr><h3 id="②下载编译安装">②下载编译安装</h3><p><strong>步骤1：在python官网找到 python-3.7.1.tgz 的地址</strong>：</p> <btns rounded grid5><a href='https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tgz' target="_blank" rel="noopener"><i class='fas fa-download'></i>下载源码</a></btns> <p><strong>步骤2：利用 wget 下载安装包.</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.7.1/Python-3.7.1.tgz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载后的文件默认会在当前所在文件夹</span></span><br><span class="line">ls # 查看下载的文件</span><br></pre></td></tr></table></figure><p><strong>步骤3：解压安装包.</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 针对不同类型的文件利用不中的命令解压即可.</span></span><br><span class="line">tar -zxvf Python-3.7.1.tgz</span><br></pre></td></tr></table></figure><p><strong>步骤4：切换到解压后的目录下, configure.</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd Python-3.7.1</span><br><span class="line">./configure</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者 利用 prefix 参数指定编译的时候用来存放程序的路径</span></span><br><span class="line">./configure --prefix=/usr/local/python3.7.1</span><br></pre></td></tr></table></figure><p><strong>步骤5：编译安装.</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><hr><h2 id="2-将python3配置为全局命令">2.将python3配置为全局命令</h2><blockquote><p>  先请测试一下, python3当前是否已经是全局命令, 任意目录下: <code>python3 -V</code>.</p><p>若已经是全局命令, 只需进行 步骤③建立软连接 即可.</p></blockquote><h3 id="①找到python3的安装目录">①找到python3的安装目录</h3><blockquote><p>  一般可能会在 <code>/usr/local/python3.x.x</code> 中.</p><p>真不知道的用命令查找:</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -name python3*</span><br><span class="line"><span class="meta">#</span><span class="bash"> 自己判断出python3的安装路径</span></span><br></pre></td></tr></table></figure><h3 id="②配置环境变量">②配置环境变量</h3><blockquote><p>  添加python3的安装目录(bin目录)到系统的 PATH 变量.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash"> 在文件的最下方添加:</span></span><br><span class="line">export PYTHON3_HOME = /usr/local/python3.7.1</span><br><span class="line">export PATH = $PATH:$PYTHON3_HOME/bin</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或直接</span></span><br><span class="line">export PATH = $PATH:/usr/local/python3.7.1/bin</span><br></pre></td></tr></table></figure><blockquote><p>  保存编辑, 再次测试此时 python3 是否为全局变量.</p></blockquote><h3 id="③建立python3和pip3的软连接">③建立python3和pip3的软连接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python3.7.1/bin/python3.7 /usr/bin/python3</span><br><span class="line">ln -s /usr/local/python3.7.1/bin/pip3 /usr/bin/pip3</span><br></pre></td></tr></table></figure><hr><h2 id="3-将python3改为系统默认-可以不改">3.将python3改为系统默认(可以不改)</h2><blockquote><p>  注意: 有些软件默认使用了 python 命令, 而该命令默认为 python2. 若改变了系统默认的py, 可能有些软件不可用. 就像: 宝塔和 yum 等(需要修改它们的配置文件).</p><p>若想改, 只需改变 /usr/bin/python 的软链接即可.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -f /usr/bin/python</span><br><span class="line">ln -s /usr/local/python3.7.1/bin/python3.7 /usr/bin/python</span><br><span class="line"><span class="meta">#</span><span class="bash"> 即可</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> CentOS </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7上部署Flash应用</title>
      <link href="/Flask.html"/>
      <url>/Flask.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>①安装python3(可以更改系统默认的python为python3)</p><p>②创建python虚拟环境(当然也可以直接用系统的python环境)</p><p>③部署项目到服务器</p><p>④以development WSGI server方式直接运行项目</p><p>⑤结合Nginx服务器用uWSGI部署 Flask</p><a id="more"></a><h2 id="1-在CentOS7上安装python3">1.在CentOS7上安装python3</h2><blockquote><p>详见: <btn><a href="./Python.html">python2与python3共存文档</a></btn>。</p></blockquote><h2 id="2-不使用python虚拟环境">2.不使用python虚拟环境</h2><blockquote><p>  若想使用python虚拟环境, 请看之后的内容.</p></blockquote><h3 id="①得到开发环境需要的依赖">①得到开发环境需要的依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在本地的 Flask 开发环境中 env 下执行:</span></span><br><span class="line">pip freeze</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">requirements.txt</span></span><br></pre></td></tr></table></figure><h3 id="②pip3安装依赖">②pip3安装依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将 requirements.txt 上传到服务器, 执行:</span></span><br><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><h3 id="③上传项目并运行-确保端口开放">③上传项目并运行(确保端口开放)</h3><blockquote><p>  将 Flask 项目上传到 服务器, 测试运行. 这里直接在 /opt/project/hello.py 简单测试.</p></blockquote><br><p>第一步: 新建 <code>hello.py</code> 文件, 注意: app.run(host=‘0.0.0.0’), 否则外网无法访问.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>)</span><br><span class="line"><span class="comment"># 默认为 0.0.0.0:5000</span></span><br></pre></td></tr></table></figure><br><p>第二步: 运行 Flask 应用, <code>hello.py</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 hello.py</span><br></pre></td></tr></table></figure><br><p>第三步: 浏览器访问 <code>http://你的服务器IP:端口号</code>测试结果.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/hello.py.png" alt="hello.py"></p><br><hr><h2 id="3-创建python虚拟环境">3.创建python虚拟环境</h2><blockquote><p>虚拟环境:</p><p>  建议在开发环境和生产环境下都使用虚拟环境来管理项目的依赖。</p><p>  为什么要使用虚拟环境？随着你的 Python 项目越来越多，你会发现不同的项目会需要 不同的版本的 Python 库。同一个 Python 库的不同版本可能不兼容。</p></blockquote><h3 id="①安装python虚拟环境">①安装python虚拟环境</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install virtualenv</span><br><span class="line">pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure><h3 id="②配置虚拟环境">②配置虚拟环境</h3><blockquote><p>  一般用 pip 安装完后都是OK的, 可以直接使用. 若不能使用, 再来配置 python 虚拟环境.</p></blockquote><ul><li>编辑文件 <code>vim ~/.bashrc</code>, 在最后添加:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export WORKON_HOME=$HOME/.virtualenvs</span><br><span class="line">export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以使用find命令找出virtualenvwrapper.sh的路径</span></span><br><span class="line">source /usr/local/python3.7.1/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure><ul><li>执行 <code>source ~/.bashrc</code> 生效.</li><li>利用 find 找出 virtualenv 的路径, 一般会在 /usr/local/python3.x.x/bin/ 中.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find / -name "virtualenv"</span><br></pre></td></tr></table></figure><ul><li>建立 virtualenv 的软连接</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python3.7.1/bin/virtualenv /usr/bin/virtualenv</span><br></pre></td></tr></table></figure><h3 id="③创建-python-虚拟环境">③创建 python 虚拟环境</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> --python 指定python版本, wpwl-env为虚拟环境的名字.</span></span><br><span class="line">mkvirtualenv --python=/usr/bin/python3 wpwl-env</span><br></pre></td></tr></table></figure><hr><h2 id="4-在虚拟环境中运行Flask">4.在虚拟环境中运行Flask</h2><h3 id="①虚拟环境简单命令">①虚拟环境简单命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进入虚拟环境</span></span><br><span class="line">workon wpwl-env</span><br><span class="line"><span class="meta">#</span><span class="bash"> 退出虚拟环境</span></span><br><span class="line">deactivate</span><br></pre></td></tr></table></figure><h3 id="②将项目打包放到服务器">②将项目打包放到服务器</h3><blockquote><p>  这里直接在 /opt/project/hello.py 简单测试.</p></blockquote><br><p>第一步: 新建 <code>hello.py</code> 文件, 注意: app.run(host=‘0.0.0.0’), 否则外网无法访问.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World!'</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>)</span><br><span class="line"><span class="comment"># 默认为 0.0.0.0:5000</span></span><br></pre></td></tr></table></figure><br><p>第二步: 进入虚拟环境运行 Flask 应用, <code>hello.py</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">workon wpwl-env</span><br><span class="line">python hello.py</span><br></pre></td></tr></table></figure><br><p>第三步: 浏览器访问 <code>http://你的服务器IP:端口号</code>测试结果.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/hello.py.png" alt="hello.py"></p><br><hr><h2 id="5-结合Nginx服务器用uWSGI部署-Flask">5.结合Nginx服务器用uWSGI部署 Flask</h2><blockquote><p>  将 uWSGI 和 Nginx Web 服务器结合使用，实现更高的并发性能。</p></blockquote><h3 id="①python安装uwsgi">①python安装uwsgi</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install uwsgi</span><br></pre></td></tr></table></figure><br><h3 id="②uwsgi启动Flask应用">②uwsgi启动Flask应用</h3><p>第一种启动方式: 命令行参数启动.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uwsgi --http 0.0.0.0:5000 --wsgi-file /opt/project/hello.py --callable app -H /root/.virtualenvs/wpwl-env</span><br><span class="line"><span class="meta">#</span><span class="bash"> --http: 指定通过 HTTP 请求访问</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --wsgi-file: 指定 Flask 应用文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -H 指定要使用的python虚拟环境</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 当然, 还有其他参数, 可到 uwsgi 的 API 中查看.</span></span><br></pre></td></tr></table></figure><p>之后, 可通过浏览器访问 <code>http://你的服务器IP:端口号</code>测试结果.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/hello.py.png" alt="hello.py"></p><br><p>第二种启动方式: .ini 配置文件启动.</p><blockquote><p>  先在项目根目录下创建 .ini 配置文件. 这里的是: /opt/project/hello.ini</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">master</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">http</span>=:<span class="number">5000</span></span><br><span class="line"><span class="attr">chdir</span> = /opt/project</span><br><span class="line"><span class="attr">wsgi-file</span>=/opt/project/hello.py</span><br><span class="line"><span class="attr">callable</span>=app</span><br><span class="line"><span class="attr">processes</span>=<span class="number">4</span></span><br><span class="line"><span class="attr">threads</span>=<span class="number">2</span></span><br><span class="line"><span class="attr">buffer-size</span> = <span class="number">65536</span></span><br><span class="line"><span class="attr">vacuum</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">pidfile</span> =/opt/project/uwsgi.pid</span><br><span class="line"><span class="attr">daemonize</span> =/opt/project/hello.log</span><br><span class="line"><span class="attr">stats</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9191</span></span><br></pre></td></tr></table></figure><blockquote><p>  再通过命令行运行 Flask 应用.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uwsgi hello.ini</span><br></pre></td></tr></table></figure><ul><li>之后, 可通过浏览器访问 <code>http://你的服务器IP:端口号</code>测试结果.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/hello.py.png" alt="hello.py"></p><br><h3 id="③通过Nginx代理到uwsgi">③通过Nginx代理到uwsgi</h3><blockquote><p>  之前用 uwsgi 启动的 Flask 应用, 并不是我们想要的, 我们想通过 直接访问 WEB 应用(80端口) 来访问 Flask 应用.</p><p>  因此, 我们需要用 Nginx 来做代理, 将请求代理到 Flask 应用. 同时, 不能再为 uwsgi 配置 http 协议, 而改用 socket:</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">master</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">socket</span>=<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">5000</span></span><br><span class="line"><span class="attr">chdir</span> = /opt/project</span><br><span class="line"><span class="attr">wsgi-file</span>=/opt/project/hello.py</span><br><span class="line"><span class="attr">callable</span>=app</span><br><span class="line"><span class="attr">processes</span>=<span class="number">4</span></span><br><span class="line"><span class="attr">threads</span>=<span class="number">2</span></span><br><span class="line"><span class="attr">buffer-size</span> = <span class="number">65536</span></span><br><span class="line"><span class="attr">vacuum</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">pidfile</span> =/opt/project/uwsgi.pid</span><br><span class="line"><span class="attr">daemonize</span> =/opt/project/hello.log</span><br><span class="line"><span class="attr">stats</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9191</span></span><br></pre></td></tr></table></figure><blockquote><p>  Nginx配置:</p><p>注意, 若是有其他代理信息, 要注意多个代理之间的顺序.</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当然在 listen 80的 server 块中</span></span><br><span class="line">server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    location / &#123;</span><br><span class="line">        include uwsgi_params;</span><br><span class="line">        uwsgi_pass 127.0.0.1:5000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>之后, 可通过浏览器访问 <code>http://你的服务器IP/</code>测试结果.</li></ul><blockquote><p>  注意: 若是不想 Nginx 直接代理网站根路径 ‘/’ 到 Flask应用, 而是想将 '/flask’代理到 Flask 应用, 则需修改两部分:</p><p>①修改 Nginx 配置: location /flask {</p><p>②修改应用 py 文件, 每个路由添加上 ‘/flask’前缀, 如 hello.py更改为: @app.route(’/flask’)</p></blockquote><ul><li>之后, 可通过浏览器访问 <code>http://你的服务器IP/flask</code>测试结果.</li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> Flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flask </tag>
            
            <tag> Python </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven_Web工程的自动部署</title>
      <link href="/maven_09.html"/>
      <url>/maven_09.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Maven_Web工程的手动部署。</p><p>Maven_Web工程的自动部署。</p><a id="more"></a><h2 id="1-Maven-Web工程的手动部署">1.Maven_Web工程的手动部署</h2><blockquote><ul><li>①Eclipse中，在要部署的Web工程的pom.xml上，右键单击→Run as→Maven build…：</li><li>在 Goals 中填写打包 package 命令，再点击 Run 运行。就会打包Web项目为war包，(需要 Refresh 一下 target 目录)如图：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_09_01.png" alt="maven_09_01"></p><blockquote><ul><li>②将war包放进Servlet容器的webapps目录，并重命名：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_09_02.png" alt="maven_09_02"></p><blockquote><ul><li>③启动你的Servlet容器，便会自动解压war包：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_09_03.png" alt="maven_09_03"></p><blockquote><ul><li>④浏览器访问，<code>http://localhost:你的Servlet容器端口号/myweb/</code> 即可成功访问到：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_09_04.png" alt="maven_09_04"></p><hr><h2 id="2-Maven-Web工程的自动部署">2.Maven_Web工程的自动部署</h2><blockquote><ul><li>①配置Web工程的pom.xml文件，在projet节点下：</li><li>注意：可以在 <a href="https://codehaus-cargo.github.io/" target="_blank" rel="noopener">cargo</a>官网，查看具体的Maven配置启动Servlet容器的信息。</li></ul></blockquote><details><summary>One More Thing 👇</summary><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置当前工程构建过程中的特殊设置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 部署后Web应用的名字 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>MyWeb<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置构建过程中需要使用的插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- cargo是一家专门从“启动Servlet容器”的组织 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.cargo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cargo-maven2-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 针对插件进行的配置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 配置当前系统中容器的位置 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">container</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">containerId</span>&gt;</span>tomcat8x<span class="tag">&lt;/<span class="name">containerId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">home</span>&gt;</span>你的Servlet容器的路径<span class="tag">&lt;/<span class="name">home</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">container</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">type</span>&gt;</span>existing<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">home</span>&gt;</span>你的Servlet容器的路径<span class="tag">&lt;/<span class="name">home</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 如果Tomcat端口为默认值8080则不必设置该属性 --&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;properties&gt;</span></span><br><span class="line"><span class="comment">       &lt;cargo.servlet.port&gt;8989&lt;/cargo.servlet.port&gt;</span></span><br><span class="line"><span class="comment">      &lt;/properties&gt; --&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 配置插件在什么情况下执行 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>cargo-run<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 生命周期的阶段 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>install<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 插件的目标 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>run<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></details><blockquote><ul><li>②Eclipse中，在要部署的Web工程的pom.xml上，右键单击→Run as→Maven build…：</li><li>在 Goals 中填写打包 deploy 命令，再点击 Run 运行。即可自动部署到本地的Servlet容器。</li><li>但是在Eclipse中无法停止自动部署时，启动的 Servlet 容器，需要手动停止。</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven的继承和聚合</title>
      <link href="/maven_08.html"/>
      <url>/maven_08.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Maven的继承。</p><p>Maven的聚合。</p><a id="more"></a><h2 id="1-Maven的继承">1.Maven的继承</h2><h3 id="1）为什么要有继承？">1）为什么要有继承？</h3><blockquote><p>  假如存在一下现状：</p><ul><li>MakeFriends工程依赖Hello2工程，Hello2工程依赖Hello工程。</li><li>①Hello依赖的junit：4.0</li><li>②Hello2依赖的junit：4.2</li><li>③MakeFriends依赖的junit：4.9</li><li>junit依赖是test范围的，由于test范围的依赖不能传递，所以必然会分散在各个模块工程中，很容易造成版本不一致。</li><li>这就产生了一种需求：如何统一管理各个模块工程中对junit依赖的版本。</li></ul></blockquote><h3 id="2）继承">2）继承</h3><blockquote><p>  解决上述问题的思路：将junit依赖统一提取到“父工程”中，在“子工程”中声明junit依赖时不指定版本号，而是以父工程中统一设定的为准，同时还便于修改版本号。</p><p>  这就产生了“继承”的概念。</p><p>  具体操作步骤如下：</p></blockquote><ul><li>①创建一个Maven工程作为父工程。<font color='red'>注意：打包方式为 pom。</font></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_08_01.png" alt="maven_08_01"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>②在子工程中声明对父工程的引用。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子工程中声明对父工程的引用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--以当前工程的pom.xml文件为基准的父工程的pom.xml文件的相对路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../Parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>③将子工程的坐标中与父工程坐标中重复的内容删除。如图，删除图中标警告的地方：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_08_02.png" alt="maven_08_02"></p><ul><li>④在父工程中统一管理junit的依赖。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 统一配置依赖管理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>⑤在子工程中删除junit依赖的版本号部分。如图，删除图中标警告的地方：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_08_03.png" alt="maven_08_03"></p><ul><li>注意：配置了继承后，执行<code>mvn install</code>安装命令时，<font color='red'>要先安装父工程</font>。</li></ul><hr><h2 id="2-聚合">2.聚合</h2><blockquote><ul><li>①作用：一键安装本地开发的相互依赖的各个工程模块。</li><li>②配置方式：在一个“总的聚合工程”中配置各个参与聚合的模块信息。</li><li>注意：可以将父工程作为聚合工程，但聚合工程可以不是父工程。</li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--一般在父工程中配置聚合--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定各个子工程的相对路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../Hello<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../Hello2<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../MakeFriends<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>③使用方式：在聚合工程的pom.xml上点击右键→Run as→Maven install，即可。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven的高级依赖</title>
      <link href="/maven_07.html"/>
      <url>/maven_07.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>依赖的传递性。</p><p>依赖的排除。</p><p>依赖的原则。</p><p>统一管理依赖的版本号。</p><a id="more"></a><h2 id="1-依赖的传递性">1.依赖的传递性</h2><blockquote><p>  对于之前创建项目的依赖关系，如下：</p><ul><li><p>Hello2依赖Hello</p></li><li><p>MakeFriends依赖Hello2，进而间接依赖Hello</p></li></ul></blockquote><ul><li>在Hello中添加下述依赖：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.48<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>则在Hello2和MakeFriends项目中也会自动添加Hello中上面的依赖：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_01.png" alt="maven_07_01"></p><ul><li>可在pom.xml中查看依赖的信息：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_02.png" alt="maven_07_02"></p><blockquote><p>  依赖的传递性带来的好处：可以传递的依赖不必在每个模块工程中都重复声明，只需在“最底层的被依赖模块”的工程中依赖一次即可。</p><p>  在真实开发中，往往会专门设计一个模块，来处理相关的jar包的依赖信息。</p><p><font color="red">注意：非compiler范围的依赖无法传递，若有需要就得重复声明。</font></p><p>  因而，可以这样认为，test和provided范围的依赖仅限于当前工程自己使用。</p></blockquote><hr><h2 id="2-依赖的排除">2.依赖的排除</h2><h3 id="1）需要设置依赖排除的场合">1）需要设置依赖排除的场合</h3><blockquote><p>①假如传递过来的依赖中，有些 jar 包是不稳定版的，不希望加入当前工程。</p><p>②假如传递过来的依赖中，有些 jar 包是旧版本的，也不希望加入当前工程。</p><p>…还有其他场合</p></blockquote><h3 id="2）设置依赖的排除">2）设置依赖的排除</h3><blockquote><ul><li>只需在要排除的工程的pom.xml中添加排除信息：</li><li>注意：可在pom.xml的Dependency Hierarchy(依赖的层次结构)中的jar包上，右键单击再点击Open POM，就能查看jar包的POM信息。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_03.png" alt="maven_07_03"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注意要在被依赖的工程信息中添加--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="3-依赖的原则">3.依赖的原则</h2><ul><li>作用：解决模块工程之间的 jar 包冲突的问题（在依赖的传递性的基础上）。</li><li>①验证路径最短者优先原则。如下图中的依赖关系，选择依赖路径最进的 jar 包：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_04.png" alt="maven_07_04"></p><ul><li>②验证路径相同时先声明者优先。先声明Hello或Hello2工程的dependency，则优先。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_05.png" alt="maven_07_05"></p><hr><h2 id="4-统一管理依赖的版本号">4.统一管理依赖的版本号</h2><ul><li>【1】例如，下图中一个工程使用的spring 的 jar包都是4.0.0版本的。</li><li>如果需要统一升级为4.1.1，怎么办呢？可以手动改，但太多，不可靠。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_07_06.png" alt="maven_07_06"></p><ul><li>【2】建议使用的配置方式：</li><li>①先在pom.xml的project节点中，声明properties标签，并在其内使用自定义标签统一声明版本号。如下：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cwz.spring.version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">cwz.spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>②在需要统一设置版本的位置，使用<code>${自定义标签名}</code>来引用声明的版本号。如下：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;cwz.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>③注意：properties标签配合自定义标签声明数据的配置，并不只是能用于声明依赖的版本号。凡是需要统一声明，再引用的场合都可以使用。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cwz.spring.version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">cwz.spring.version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--项目构建的源码的字符集：UTF-8--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>导入Maven工程到Eclipse</title>
      <link href="/maven_06.html"/>
      <url>/maven_06.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>导入之前创建的“纯 Maven”（Hello和Hello2）工程到Eclipse中。</p><p>导入其他Eclipse创建的 Maven 工程到Eclipse中。</p><p>用Eclipse创建一个Maven 工程MakeFriends，使其依赖刚才导入的之前的Hello2工程。</p><a id="more"></a><h2 id="1-导入“纯-Maven”到Eclipse">1.导入“纯 Maven”到Eclipse</h2><h3 id="1）为什么称之为“纯-Maven”？">1）为什么称之为“纯 Maven”？</h3><blockquote><ul><li>之所以称之为“纯 Maven”工程，是因为那个Maven工程是自己手动创建或由其他IDE创建的，项目中没有Eclipse的配置文件。</li><li>对比一下，Eclipse创建的Maven工程：</li><li>注意：若没有显示Eclipse的配置文件，请打开文件管理器的“查看隐藏文件选项”。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_01.png" alt="maven_06_01"></p><blockquote><ul><li>对于 Maven 工程：它使用 pom.xml 来定义一个具体的 Maven 工程。</li><li>对于 Eclipse 工程：它使用 自己的配置文件来定义它是一个 Eclipse 工程。</li></ul></blockquote><h3 id="2）具体导入操作">2）具体导入操作</h3><ul><li>①在Eclipse的 Package Explorer（或其他）中，右键→Import：</li><li>或依次点击 File→Import：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_02.png" alt="maven_06_02"></p><ul><li>②依次找到 Maven→Existing Maven Projects，点击Next：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_03.png" alt="maven_06_03"></p><ul><li>若导入后有错误，请<a href="./maven_05.html#3-%E4%BF%AE%E6%94%B9Maven%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B%E7%9A%84JDK%E7%89%88%E6%9C%AC">参照修改</a>。</li></ul><hr><h2 id="2-导入其他Eclipse创建的-Maven-工程到Eclipse">2.导入其他Eclipse创建的 Maven 工程到Eclipse</h2><blockquote><ul><li><p>不只可以导入 Maven 工程，也可以导入其他类型Eclipse创建的工程。</p></li><li><p>①在Eclipse的 Package Explorer（或其他）中，右键→Import：</p></li><li><p>或依次点击 File→Import：</p></li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_04.png" alt="maven_06_04"></p><ul><li>②依次找到 General→Existing Projects into Workspace，点击Next：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_05.png" alt="maven_06_05"></p><ul><li>若导入后有错误，请<a href="./maven_05.html#3-%E4%BF%AE%E6%94%B9Maven%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B%E7%9A%84JDK%E7%89%88%E6%9C%AC">参照修改</a>。</li></ul><hr><h2 id="3-创建Maven工程MakeFriends">3.创建Maven工程MakeFriends</h2><blockquote><p>  用于之后演示：Maven 中的高级 依赖。</p><p>请<a href="./maven_05.html#2-%E5%88%9B%E5%BB%BAMaven%E7%89%88%E7%9A%84Java%E5%B7%A5%E7%A8%8B">参照修改</a>，创建：</p></blockquote><ul><li>①MakeFriends项目的坐标（GAV）：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_06.png" alt="maven_06_06"></p><ul><li>②在src/main/java/com.cwz.maven下创建 MakeFriends类：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MakeFriends</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">makeFriends</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 没添加依赖之前这里会报错</span></span><br><span class="line">        Hello2 friend = <span class="keyword">new</span> Hello2();</span><br><span class="line">        friend.sayHelloToFriend(<span class="string">"litingwei"</span>);</span><br><span class="line">        String str = <span class="string">"Hey,"</span>+friend.getMyName()+<span class="string">" make a friend please."</span>;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>③在src/test/java/com.cwz.maven下创建 TestMakeFriends类：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> junit.framework.Assert.assertEquals;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MakeFriendsTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMakeFriends</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MakeFriends makeFriend = <span class="keyword">new</span> MakeFriends();</span><br><span class="line">        String str = makeFriend.makeFriends(<span class="string">"litingwei"</span>);</span><br><span class="line">        assertEquals(<span class="string">"Hey,John make a friend please."</span>,str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>④在pom.xml中添加依赖：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>⑤关于上述Hello2项目依赖的一些说明：</li></ul><blockquote><p>  对于在当前Eclipse的WorkSpace中的被依赖项目，如：Hello2项目。Eclipse会自动识别并建立链接。</p><p>对于不在当前Eclipse的WorkSpace中的被依赖项目，如：junit.jar。就会进入Maven仓库寻找。</p><p>  注意：一般在Eclipse中开发时，依赖本地项目，可以不安装项目到本地仓库。</p><p>但是，到真正部署运行时，必须要先将被依赖项目安装到本地仓库，再打包部署当前项目，否则会报错。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_06_07.png" alt="maven_06_07"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eclipse中创建Maven工程</title>
      <link href="/maven_05.html"/>
      <url>/maven_05.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>如何在Eclipse中使用Maven？</p><p>定制New菜单的透视图</p><p>修改Maven创建工程的JDK版本</p><p>这里还需要解决三个问题：</p><p>①在Eclipse中创建Maven版的Java工程</p><p>②在Eclipse中创建Maven版的Web工程</p><p>③在Eclipse中执行Maven命令</p><a id="more"></a><h2 id="1-定制New菜单的透视图">1.定制New菜单的透视图</h2><blockquote><ul><li>若在Eclipse中使用右键New一个新的工程时，没有出现Maven Project。可自己定制一下：</li><li>依次选择：Window→Perspective→Customize Perspective→Menu Visibility：</li><li>再依次打开 File→New，找到里面的 Maven Project 并打上勾：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_01.png" alt="maven_05_01"></p><h2 id="2-创建Maven版的Java工程">2.创建Maven版的Java工程</h2><ul><li>①在Eclipse的 Package Explorer（或其他）中，右键→New→Maven Project：</li><li><strong>注意：忽略类型选择，创建一个简单的工程。</strong></li><li>当然，也可以不忽略类型，使用“类型”：maven-archetype-quickstart 来创建简单的Java工程，但这样创建的项目结构不太符合Maven的约定结构，<strong>没有resources包</strong>，可以自己试一下。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_02.png" alt="maven_05_02"></p><ul><li>②输入Maven工程的坐标（GAV）：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_03.png" alt="maven_05_03"></p><blockquote><ul><li>③项目的结构和Maven约定结构一样，如下图：</li><li>注意有一个严重的问题：这样使用Maven创建的工程是 JDK1.5 版本。</li><li>当然，这样也能够使用，但是不能支持一些新的 JDK 特性。可以修改，<a href="#3-%E4%BF%AE%E6%94%B9Maven%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B%E7%9A%84JDK%E7%89%88%E6%9C%AC">点击参看</a>。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_04.png" alt="maven_05_04"></p><hr><h2 id="3-修改Maven创建工程的JDK版本">3.修改Maven创建工程的JDK版本</h2><h3 id="1）修改Eclipse设置">1）修改Eclipse设置</h3><blockquote><p>  在当前项目上，依次：右键单击→Properties，打开项目属性进行修改。</p><p>注意：这样修改的话，每次新建的Maven项目都需要修改。</p><p>需要修改<strong>项目工程属性</strong>的如下三个地方：</p><ul><li>①Java Build Path</li><li>②Java Compiler</li><li>③Project Facets</li></ul></blockquote><ul><li>①修改Java Build Path</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_05.png" alt="maven_05_05"></p><ul><li>②修改Java Compiler</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_06.png" alt="maven_05_06"></p><ul><li>③Project Facets，没显示内容的，点击：**Convert to faceted from …**即可显示：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_07.png" alt="maven_05_07"></p><h3 id="2）修改Maven配置——一劳永逸">2）修改Maven配置——一劳永逸</h3><ul><li>①找到Maven 的settings.xml配置文件</li><li>②找到 profiles 标签</li><li>③加入如下配置：</li><li><strong>注意：配置时，需要看看Maven核心程序版本是否支持你的JDK版本。</strong></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="4-在Eclipse中执行Maven命令">4.在Eclipse中执行Maven命令</h2><ul><li>①找到项目的pom.xml文件，在上面右键单击：</li><li>②依次选中：Run as→Maven xxx 命令</li><li>这里的Maven命令，有：Maven clean、Maven test、Maven install等</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_08.png" alt="maven_05_08"></p><ul><li>可以依次选中：Run as→Maven build… 命令来添加Maven命令，如下：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_09.png" alt="maven_05_09"></p><hr><h2 id="5-创建Maven版的Web工程">5.创建Maven版的Web工程</h2><blockquote><ul><li>①在Eclipse的 Package Explorer（或其他）中，右键→New→Maven Project：</li><li><strong>注意：忽略类型选择，创建一个简单的工程。</strong></li><li>当然，也可以不忽略类型，使用“类型”：maven-archetype-webapp 来创建 Web 工程。但这样创建的项目结构不太符合Maven的约定结构，<strong>没有resources包</strong>，可以自己试一下。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_02.png" alt="maven_05_02"></p><blockquote><ul><li>②输入Maven工程的坐标（GAV）：</li><li>注意：要选择打包方式为 <strong>war 形式</strong>，这可以说是 Maven 来区别普通 Java 工程和Web 工程的地方。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_10.png" alt="maven_05_10"></p><blockquote><ul><li>创建完后，WebProject结构如下图：</li><li>存在两个问题：目录结构不完整；pom.xml文件可能有报错。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_11.png" alt="maven_05_11"></p><blockquote><ul><li>③构建完整的Web工程：</li><li>在当前Web工程上右键单击，选择项目属性 Properties→Project Facets</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_12.png" alt="maven_05_12"></p><ul><li>其中，动态Web工程的高级配置如下：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_13.png" alt="maven_05_13"></p><ul><li>若做完这些配置项目还有错或有警告，再次配置一下 Properties→Project Facets 即可。</li></ul><div class="danger"><ul><li>④注意，此时，这个Web工程还不是很完整，因为缺少 Servlet 的运行时环境。</li><li>添加 Servlet 的运行时环境，有两种方法：在Eclipse中添加；使用 Maven 添加运行Servlet的api依赖。</li></ul></div><ul><li>A.直接在Eclipse中添加 Servlet 运行时环境：</li><li>在当前Web工程上右键单击，选择项目属性 Properties→Targeted Runtimes</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_14.png" alt="maven_05_14"></p><ul><li><p>B.使用 Maven 添加运行Servlet的api依赖：</p></li><li><p>回顾一下provided范围的依赖：</p></li></ul><blockquote><ul><li>provided范围的依赖：<ul><li>对主程序、测试程序有效</li><li><strong>不参与打包和部署</strong>，例如：servlet-api.jar</li><li>一般用于 Maven 的 Web 工程，具体使用可参照下图：</li></ul></li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_03_04.png" alt="maven_03_04.png"></p><ul><li>在pom.xml的dependencies节点中添加如下配置：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>若是在JSP页面中使用EL表达式的 pageContext 点 有提示，需要加入 jsp-api 的依赖：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>注意：依赖作用范围的设置，有时设置错误，可能会出现一些难以预料的错误，就像下边的：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_05_15.png" alt="maven_05_15"></p><hr><h2 id="6-Maven搜索网站">6.Maven搜索网站</h2><div class="success"><ul><li><p>①<a href="https://mvnrepository.com/" target="_blank" rel="noopener">MVNRepository</a></p></li><li><p>②<a href="https://maven.aliyun.com/mvn/search" target="_blank" rel="noopener">AliRepo</a></p></li><li><p>③<a href="https://search.maven.org/" target="_blank" rel="noopener">The Central Repository</a></p></li><li><p>④<a href="https://maven.ityuan.com/" target="_blank" rel="noopener">IT猿网</a></p></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven的生命周期及Eclipse中配置Maven</title>
      <link href="/maven_04.html"/>
      <url>/maven_04.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Maven的生命周期</p><p>Maven的生命周期相关插件和目标</p><p>在Eclipse中设置Maven插件</p><a id="more"></a><h2 id="1-Maven的生命周期">1.Maven的生命周期</h2><blockquote><p>具体生命周期的介绍，参看百度百科 <a href="https://baike.baidu.com/item/Maven/6094909#5" target="_blank" rel="noopener">Maven</a></p><ul><li>①生命周期即各个构建环节的执行顺序：必须按照既定的顺序来执行，不能打乱顺序。</li><li>②Maven 的核心程序中定义了抽象的生命周期，生命周期中各个阶段的具体任务是由插件来完成的。</li><li>③Maven 核心程序为了更好的实现自动化构建，按照这一特点执行生命周期中的各个阶段：不论现在要执行生命周期中的哪一阶段，都从这个生命周期的最初位置开始执行。</li><li>经过以下测试可见，每次都是从最初位置“maven-resources-plugin:2.6:resources”开始的。</li></ul></blockquote><ul><li>例如：执行 <code>mvn compile</code> 命令有如下顺序：</li></ul><table><thead><tr><th style="text-align:left">maven-resources-plugin:2.6:resources</th></tr></thead><tbody><tr><td style="text-align:left">maven-compiler-plugin:3.1:compile</td></tr></tbody></table><ul><li>例如：执行 <code>mvn test-compile</code> 命令有如下顺序：</li></ul><table><thead><tr><th style="text-align:left">maven-resources-plugin:2.6:resources</th></tr></thead><tbody><tr><td style="text-align:left">maven-compiler-plugin:3.1:compile</td></tr><tr><td style="text-align:left">maven-resources-plugin:2.6:testResources</td></tr><tr><td style="text-align:left">maven-compiler-plugin:3.1:testCompile</td></tr><tr><td style="text-align:left">生成测试报告</td></tr></tbody></table><ul><li>例如：执行 <code>mvn package</code> 命令有如下顺序：</li></ul><table><thead><tr><th>maven-resources-plugin:2.6:resources</th></tr></thead><tbody><tr><td>maven-compiler-plugin:3.1:compile</td></tr><tr><td>maven-resources-plugin:2.6:testResources</td></tr><tr><td>maven-compiler-plugin:3.1:testCompile</td></tr><tr><td>maven-surefire-plugin:2.12.4:test</td></tr><tr><td>生成测试报告</td></tr><tr><td>maven-jar-plugin:2.4:jar</td></tr></tbody></table><hr><h2 id="2-插件和目标">2.插件和目标</h2><blockquote><ul><li>①生命周期的各个阶段仅仅定义了要执行的任务是什么。</li><li>②各个阶段和插件的目标是对应的。</li><li>③相似的目标由特定的插件来完成。</li><li>④生命周期阶段是理论上的定义，插件目标可以看作是“调用具体插件的命令”。</li></ul></blockquote><ul><li>例如：</li></ul><table><thead><tr><th>生命周期阶段</th><th>插件目标</th><th>插件</th></tr></thead><tbody><tr><td>compile</td><td>compile</td><td>maven-compiler-plugin</td></tr><tr><td>test-compile</td><td>testCompile</td><td>maven-compiler-plugin</td></tr></tbody></table><hr><h2 id="3-Eclipse中Maven插件的设置">3.Eclipse中Maven插件的设置</h2><h3 id="1）找到Maven插件">1）找到Maven插件</h3><p><span style="font-size: 1.2em;font-weight: bolder;color:red;">需要注意的是：新建了 Eclipse 的 workspace（工作区）之后需要重新设置 Maven 插件。</span></p><blockquote><ul><li>现今的 Eclipse 的内置了 Eclipse 插件，我们只需设置一下即可使用。</li><li>需要设置两个地方：</li><li>①Installations</li><li>②User Settings</li></ul></blockquote><ul><li>依次点击：Window→Preferences→Maven，如图：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_04_01.png" alt="maven_04_01"></p><h3 id="2）Installations">2）Installations</h3><blockquote><ul><li>指定 Maven 核心程序的位置，Eclipse 内置有内置的一个（如下图）。不建议使用，建议改成自己解压的那个</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_04_02.png" alt="maven_04_02"></p><ul><li>添加自己的 Maven 程序：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_04_03.png" alt="maven_04_03"></p><h3 id="3）User-Settings">3）User Settings</h3><ul><li>只需指定settings.xml的位置，可根据配置找到本地仓库的位置，如下图：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_04_04.png" alt="maven_04_04"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven的依赖问题</title>
      <link href="/maven_03.html"/>
      <url>/maven_03.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>手动创建第二个 Maven 项目，用以说明 Maven 的依赖问题。</p><p>依赖的范围。</p><p>用Maven编译第二个工程。</p><a id="more"></a><h2 id="1-手动搭建另一个-Maven-工程">1.手动搭建另一个 Maven 工程</h2><h3 id="1）第二个Maven工程的搭建">1）第二个Maven工程的搭建</h3><ul><li>按照之前的 Maven 约定的目录结构，手动搭建另一个 Maven 工程结构如下：</li><li>用于说明 Maven 的依赖问题。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_03_01.png" alt="maven_03_01.png"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--添加依赖，使得能在 Hello2 中使用 Hello 工程中的内容--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 Hello2/src/main/java/com/cwz/maven 目录下</span></span><br><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHelloToFriend</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 使用第一个 Maven 工程中的 Hello 类</span></span><br><span class="line">        Hello hello = <span class="keyword">new</span> Hello();</span><br><span class="line">        String str = hello.sayHello(name)+<span class="string">" I am "</span>+<span class="keyword">this</span>.getMyName();</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMyName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"John"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 Hello2/src/test/java/com/cwz/maven 目录下</span></span><br><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> junit.framework.Assert.assertEquals;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> com.cwz.maven.Hello2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello2Test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHello2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Hello2 hello2 = <span class="keyword">new</span> Hello2();</span><br><span class="line">        String results = hello2.sayHelloToFriend(<span class="string">"litingwei"</span>);</span><br><span class="line">        assertEquals(<span class="string">"Hello litingwei! I am John"</span>,results);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2）关于SNAPSHOT与RELEASE">2）关于SNAPSHOT与RELEASE</h3><blockquote><p>  SNAPSHOT：快照，即不稳定版本的意思。</p><p>  RELEASE：释放、分离、发行，即稳定的发行版本。</p></blockquote><hr><h2 id="2-依赖">2.依赖</h2><h3 id="1）依赖的基本操作">1）依赖的基本操作</h3><blockquote><p>  Maven 在解析依赖时，会先到本地仓库中从查找被依赖的 jar 包。</p><p>对于自己开发的 Maven 工程，可以使用 <code>mvn install</code> 命令将该工程安装到本地仓库。</p></blockquote><h3 id="2）依赖的范围">2）依赖的范围</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_03_03.png" alt="maven_03_03.png"></p><blockquote><ul><li>【1】compile范围的依赖：<ul><li>对主程序<strong>有效</strong></li><li>对测试程序<strong>有效</strong></li><li><strong>参与打包、参与部署</strong></li></ul></li><li>【2】test范围的依赖：<ul><li>对主程序<strong>无效</strong></li><li>对测试程序<strong>有效</strong></li><li><strong>不参与打包</strong>、不参与部署，例如：junit.jar</li></ul></li><li>【3】provided范围的依赖：<ul><li>对主程序、测试程序有效</li><li><strong>不参与打包和部署</strong>，例如：servlet-api.jar</li><li>一般用于 Maven 的 Web 工程，具体使用可参照下图：</li></ul></li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_03_04.png" alt="maven_03_04.png"></p><hr><h2 id="3-用Maven编译第二个工程">3.用Maven编译第二个工程</h2><ul><li>若是之前在第一个 Hello Maven 工程中，没用使用 <code>mvn install</code> 命令。则在第二个 Hello2 Maven 工程中，直接执行了 <code>mvn compile</code> 命令，会报错如下：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_03_02.png" alt="maven_03_02.png"></p><ul><li>虽然说在 pom.xml 中配置了依赖，但是没安装到本地仓库，就会找不到依赖。</li><li>执行完 install 命令，再执行 compile 命令即可解决上述错误。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven的POM|坐标|仓库</title>
      <link href="/maven_02.html"/>
      <url>/maven_02.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Maven的POM，即 Project Object Model（项目对象模型）。</p><p>Maven的坐标（GAV），即groupid、artifactId、version。</p><p>Maven的仓库，即 Repository。</p><a id="more"></a><h2 id="1-POM">1.POM</h2><blockquote><p>  POM，即 Project Object Model（项目对象模型）。是否知道 DOM，即Document Object Model（）。</p><p>  把现实世界中的事物，为了方便在程序中研究，将它抽象为一个对象，作为一种模型来进行研究，便于操作。</p><p>  pom.xml 对于 Maven 工程是核心的配置文件，与构建过程相关的一切设置都在这个文件中进行配置，其重要程度就相当于 web.xml 对于动态 WEB 工程。</p></blockquote><hr><h2 id="2-坐标">2.坐标</h2><blockquote><p>  ①可以类比几何中的坐标</p><ul><li><p>[1]在一个平面中使用 x、y 两个向量可以唯一的确定平面中的一个点。</p></li><li><p>[2]在空间中使用 x、y、z 三个向量可以唯一的确定空间中的一个点。</p></li></ul></blockquote><blockquote><p>  ② Maven 的坐标（gav）</p><ul><li><p>使用如下三个向量在 Maven 的仓库中唯一的确定一个 Maven 工程。</p></li><li><p>[1]groupid：公司或组织的域名<strong>倒序</strong>+当前项目名称</p></li><li><p>[2]artifactId：当前项目的模块名称</p></li><li><p>[3]version：当前模块的版本</p></li></ul></blockquote><h3 id="1）坐标配置">1）坐标配置</h3><ul><li>例如，如下配置：</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在 pom.xml 的 project 节点下--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.edu.ujn.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2）坐标与仓库中路径的对应关系">2）坐标与仓库中路径的对应关系</h3><ul><li>例如：对于 pom文件 spring-core-4.0.0.RELEASE.pom 中的坐标，如下图：</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_02_01.png" alt="maven_02_01"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>其对应仓库路径为：org/springframework/spring-core/4.0.0.RELEASE/spring-core-4.0.0.RELEASE.jar</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_02_02.png" alt="maven_02_02"></p><hr><h2 id="3-Maven仓库">3.Maven仓库</h2><h3 id="1）仓库的分类">1）仓库的分类</h3><ul><li><p>[1]本地仓库：为当前电脑上的所有 Maven 工程服务。</p></li><li><p>[2]远程仓库</p><blockquote><ul><li>①私服：搭建在局域网环境中，为局域网内的所有 Maven 工程服务。</li><li>②中央仓库：架设在 Internet 上，为全世界所有的 Maven 工程服务。</li><li>③中央仓库的镜像：架设在各个大洲，为中央仓库分担流量，减轻中央仓库的负担，同时加快对用户请求的响应。</li></ul></blockquote></li></ul><h3 id="2）仓库中保存的内容：Maven工程">2）仓库中保存的内容：Maven工程</h3><blockquote><ul><li>[1] Maven 自身所需要的插件</li><li>[2] 第三方框架或工具的 jar 包<ul><li>介绍一下：第一方是 JDK；第二方是 开发人员自己。</li></ul></li><li>[3] 自己开发的 Maven 工程</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven基础</title>
      <link href="/maven_01.html"/>
      <url>/maven_01.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>手动搭建第一个 Maven 工程</p><p>Maven常用命令</p><p>Maven的联网问题</p><p>修改Maven本地仓库位置</p><p>修改镜像仓库</p><a id="more"></a><h2 id="1-手动搭建第一个-Maven-工程">1.手动搭建第一个 Maven 工程</h2><ul><li>按照之前的 Maven 约定的目录结构，手动搭建第一个 Maven 工程结构如下：</li><li>用于测试下述 Maven的常用命令。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_00.png" alt="maven_01_00.png"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.cwz.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 位于 Hello/src/main/java/com/cwz/maven 目录下</span></span><br><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello "</span>+name+<span class="string">"!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 位于 Hello/src/test/java/com/cwz/maven 目录下</span></span><br><span class="line"><span class="keyword">package</span> com.cwz.maven;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> junit.framework.Assert.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Hello hello = <span class="keyword">new</span> Hello();</span><br><span class="line">        String results = hello.sayHello(<span class="string">"litingwei"</span>);</span><br><span class="line">        assertEquals(<span class="string">"Hello litingwei!"</span>,results);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-Maven的常用命令">2.Maven的常用命令</h2><blockquote><p>  下述命令是一些与构建过程相关的命令：</p><p>注意：执行这些命令时，必须要进入 pom.xml 所在的目录。</p></blockquote><ul><li>【1】<code>mvn clean</code>：清理</li><li>【2】<code>mvn compile</code>：编译主程序</li><li>【3】<code>mvn test-compile</code>：编译测试程序</li><li>【4】<code>mvn test</code>：测试执行</li><li>【5】<code>mvn package</code>：打包</li><li>【6】<code>mvn install</code>：将自己开发的 Maven 安装到本地仓库</li><li>【7】<code>mvn site</code>：生成当前项目的站点文档</li></ul><blockquote><ul><li>执行<code>mvn compile</code>命令后，如下结果：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_01.png" alt="maven_01_01.png"></p><blockquote><p>  第一次执行命令会联网Download一些插件，之后，将项目的main程序编译的代码放进 “当前项目/target/classes” 目录下：</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_02.png" alt="maven_01_02.png"></p><blockquote><ul><li>执行<code>mvn test-compile</code>命令后，将项目的测试程序编译的代码放进 “当前项目/target/test-classes” 目录下：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_03.png" alt="maven_01_03.png"></p><blockquote><ul><li>执行<code>mvn package</code>命令后，将整个项目打包放进 “当前项目/target/” 目录下：</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_04.png" alt="maven_01_04.png"></p><blockquote><ul><li>最后，整个项目target目录如下：</li><li>可执行<code>mvn clean</code>命令，清空target目录（项目构建后的产品目录）。</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_01_05.png" alt="maven_01_05.png"></p><hr><h2 id="3-关于Maven的联网问题">3.关于Maven的联网问题</h2><ul><li>①Maven的核心程序中仅仅定义了抽象的生命周期方法，但是具体的工作必须由特定的插件来完成。而插件本身并不包含在Maven的核心程序中。</li><li>②当执行Maven 的命令需要用到某些插件时，Maven核心程序会先到本地仓库中寻找。</li><li>③本地仓库的默认位置：“当前用户家目录/.m2/repository”。</li><li>④若Maven核心程序在本地仓库中找不到所需插件，就会自动连接外网，到中央仓库下载。</li><li>⑤若无法连接到外网，则会构建失败。</li><li>⑥可以修改Maven本地仓库的默认位置：<a href="#4-%E4%BF%AE%E6%94%B9Maven%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E4%BD%8D%E7%BD%AE">修改Maven本地仓库位置</a></li></ul><hr><h2 id="4-修改Maven本地仓库位置">4.修改Maven本地仓库位置</h2><blockquote><p>  修改maven解压目录下：/conf/settings.xml 文件即可。</p><p>找到 &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;。</p><p>将其放到注释外面，并修改路径为你想要的仓库的位置。</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>你想要的仓库的路径<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="5-修改镜像仓库">5.修改镜像仓库</h2><blockquote><p>  Maven远程仓库默认是外国的，为了快速下载，我们可以将其改为国内的镜像仓库。</p><p>  修改maven解压目录下：/conf/settings.xml 文件即可。</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- mirror</span></span><br><span class="line"><span class="comment">   | Specifies a repository mirror site to use instead of a given repository. The repository that</span></span><br><span class="line"><span class="comment">   | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span></span><br><span class="line"><span class="comment">   | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span></span><br><span class="line"><span class="comment">   |</span></span><br><span class="line"><span class="comment">  &lt;mirror&gt;</span></span><br><span class="line"><span class="comment">    &lt;id&gt;mirrorId&lt;/id&gt;</span></span><br><span class="line"><span class="comment">    &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span></span><br><span class="line"><span class="comment">    &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span></span><br><span class="line"><span class="comment">    &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span></span><br><span class="line"><span class="comment">  &lt;/mirror&gt;</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>阿里云公共仓库<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven初识</title>
      <link href="/maven_00.html"/>
      <url>/maven_00.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Maven是什么?</p><p>为什么要有Maven?</p><p>如何搭建Maven的环境?</p><a id="more"></a><h2 id="1-Maven简介">1.Maven简介</h2><blockquote><p>  Maven 是 Apache 软件基金会组织维护的一款<strong>自动化构建工具</strong>，专注服务于 Java 平台的项目构建和<br>依赖管理.</p><p>  Maven 这个单词的本意是：专家、内行，读音是['meɪv(ə)n]或['mevn]。</p></blockquote><ul><li>说到底，Maven 就是一个自动化构建工具。构建过程一般分为：</li></ul><h3 id="1）构建过程">1）构建过程</h3><blockquote><ul><li><p>①清理：删除以前的编译结果，为重新编译做好准备。</p></li><li><p>②编译：将 Java 源程序编译为字节码文件。</p></li><li><p>③测试：针对项目中的关键点进行测试，确保项目在迭代开发过程中关键点的正确性。</p></li><li><p>④报告：在每一次测试后以标准的格式记录和展示测试结果。</p></li><li><p>⑤打包：将一个包含诸多文件的工程封装为一个压缩文件用于安装或部署。Java 工程对应 jar 包，Web<br>工程对应 war 包。</p></li><li><p>⑥安装：在 Maven 环境下特指将打包的结果——jar 包或 war 包安装到本地仓库中。</p></li><li><p>⑦部署：将打包的结果部署到远程仓库或将 war 包部署到服务器上运行。</p></li></ul></blockquote><h3 id="2）Maven核心概念">2）Maven核心概念</h3><blockquote><ul><li>①POM</li><li>②约定的目录结构</li><li>③坐标</li><li>④依赖管理</li><li>⑤仓库管理</li><li>⑥生命周期</li><li>⑦插件和目标</li><li>⑧继承</li><li>⑨聚合</li></ul></blockquote><h3 id="3）Maven约定的目录结构">3）Maven约定的目录结构</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_00_02.png" alt="maven_00_02.png"></p><hr><h2 id="2-为什么要有Maven">2.为什么要有Maven?</h2><blockquote><p>  为什么要使用 Maven？它能帮助我们解决什么问题？</p></blockquote><ul><li>①添加第三方 jar 包</li></ul><blockquote><p>  在我们一般开发中使用了大量的第三方框架和工具。</p><p>  就像开发 Servlet 的 JavaWeb 时复制粘贴到 WEB-INF/lib 目录下, 但是这会导致每次创建一个新的工程就需要将 jar 包重复复制到 lib 目录下，从而造成工作区中存在大量重复的文件。</p><p>  而使用 Maven 后每个 jar 包本身只在本地仓库中保存一份，需要 jar 包的工程只需要以坐标的方式<br>简单的引用一下就可以了。不仅极大的节约了存储空间，让项目更轻巧，更避免了重复文件太多而造成<br>的混乱。</p></blockquote><ul><li>②jar 包之间的依赖关系</li></ul><blockquote><p>  我们都知道 jar 包之间一般都会有一些依赖关系，用到一个 jar 包时，必须添加上它所依赖的 jar 包，但是我们有时往往很难记住 jar 包之间的依赖关系，从而导致项目运行出错。</p></blockquote><ul><li>③获取第三方 jar 包</li></ul><blockquote><p>  使用 Maven 我们可以享受到一个完全统一规范的 jar 包管理体系。你只需要在你的项目中以坐标的方式依赖一个 jar 包，Maven 就会自动从中央仓库进行下载，并同时下载这个 jar 包所依赖的其他 jar 包——规范、完整、准确！一次性解决所有问题！</p></blockquote><ul><li>④将项目拆分成多个工程模块</li></ul><blockquote><p>  现实生活中，现在的 Java EE 项目越来越大，将一个 Java EE 项目放在一个工程里显然是不合适的，不仅不方便合作，还不方便对项目进行管理。</p><p>  可以使用 Maven 的依赖管理机制，将一个大的项目拆分成多个工程模块。</p></blockquote><hr><h2 id="3-搭建Maven环境">3.搭建Maven环境</h2><h3 id="1）官网下载maven">1）官网下载maven</h3><blockquote><p>  <a href="https://maven.apache.org/download.cgi" target="_blank" rel="noopener">Maven Download</a>，进入 Maven官网下载 <strong>bin</strong> 文件即可。</p><p><a href="http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz" target="_blank" rel="noopener">http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</a></p><p>  Linux下用 wget 下载：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载完后默认在当前所在目录，这里在～目录</span></span><br><span class="line">cd ~</span><br><span class="line">wget http://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/maven/maven_00_01.png" alt="maven_00_01.png"></p><h3 id="2）解压maven">2）解压maven</h3><blockquote><p>  将下载的 maven 解压到一个非中文无空格的路径。可以避免一些奇怪的错误。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv apache-maven-3.6.3-bin.tar.gz /opt/</span><br><span class="line">tar -zxvf apache-maven-3.6.3-bin.tar.gz</span><br></pre></td></tr></table></figure><h3 id="3）配置环境变量">3）配置环境变量</h3><blockquote><p>  在之前这里已经配置过 JAVA_HOME 变量，没配置的可参照配置 Maven 环境变量配置。</p></blockquote><ul><li>①编辑/etc/profile</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure><ul><li>②在/etc/profile最下方添加配置</li></ul><blockquote><p>  注意：这里建议配置 M2_HOME，而不是 MAVEN_HOME。可以避免一些奇怪的错误。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export M2_HOME=/opt/apache-maven-3.6.3</span><br><span class="line">export PATH=$PATH:$&#123;M2_HOME&#125;/bin</span><br></pre></td></tr></table></figure><blockquote><p>  在这里看一下我的环境变量配置：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/jvm/jdk1.8.0_211</span><br><span class="line">export M2_HOME=/opt/apache-maven-3.6.3</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line">export PATH=$PATH:$&#123;M2_HOME&#125;/bin</span><br></pre></td></tr></table></figure><ul><li>③查看是否配置成功</li></ul><blockquote><p>  配置完毕后，需要重启一个终端或命令行再测试是否配置成功。</p><p>有的Linux可能需要注销再测试。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 Maven 环境变量</span></span><br><span class="line">echo $M2_HOME</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 Maven 版本</span></span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown与Typora</title>
      <link href="/Markdown_Typora.html"/>
      <url>/Markdown_Typora.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>简单使用Markdown语言;</p><p>利用Typora编辑器, 记录日常生活学习笔记;</p><a id="more"></a><h2 id="1-Markdown简介">1.Markdown简介</h2><h3 id="简介">简介</h3><blockquote><ul><li><p>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。</p></li><li><p>Markdown 语言在 2004 由约翰·格鲁伯（英语：John Gruber）创建。</p></li><li><p>Markdown 编写的文档可以导出 <strong>HTML 、Word、图像、PDF、Epub</strong> 等多种格式的文档。</p></li><li><p>Markdown 编写的文档后缀为 <strong>.md</strong>, <strong>.markdown</strong>。</p></li></ul></blockquote><h3 id="编辑器">编辑器</h3><blockquote><p>  介绍一款最流行的 Typora 编辑器, Typora 支持 MacOS 、Windows、Linux 平台，且包含多种主题，编辑后直接渲染出效果。</p><p>  支持导出HTML、PDF、Word、图片等多种类型文件。</p><p>  Typora 官网：<a href="https://typora.io/" target="_blank" rel="noopener">https://typora.io/</a>.</p></blockquote><hr><h2 id="2-Markdown标题">2.Markdown标题</h2><h3 id="标题">标题</h3><blockquote><p>  共六级标题, 使用 <strong>#</strong> 号可表示 1-6 级标题, 一级标题对应一个 <strong>#</strong> 号, 二级标题对应两个 <strong>#</strong> 号, 以此类推.</p><p>例:</p><p># 一级标题</p><p>## 二级标题</p></blockquote><blockquote><p>  Typora 快捷键, 使光标停留在要设置标题的行, 按下 <kbd>Ctrl</kbd>+<kbd>数字键</kbd>设置对应标题.</p></blockquote><hr><h2 id="3-Markdown段落格式">3.Markdown段落格式</h2><h3 id="换段">换段</h3><blockquote><p>段落的换行: 空一行表示或两个空格+回车表示.</p><p>Typora 中直接按回车即可.</p></blockquote><h3 id="斜体">斜体</h3><ul><li><p>斜体1: <em>123</em></p></li><li><p>斜体2: <em>123</em></p></li></ul><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>I</kbd>.</p></blockquote><h3 id="粗体">粗体</h3><ul><li><p>粗体1: <strong>123</strong></p></li><li><p>粗体2: <strong>123</strong></p></li></ul><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>B</kbd>.</p></blockquote><h3 id="粗斜体">粗斜体</h3><ul><li><p>粗斜体1: <em><strong>123</strong></em></p></li><li><p>粗斜体2: <em><strong>123</strong></em></p></li></ul><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>B</kbd>+<kbd>I</kbd>或<kbd>Ctrl</kbd>+<kbd>I</kbd>+<kbd>B</kbd>.</p></blockquote><h3 id="分隔线">分隔线</h3><hr><blockquote><p>Typora 中的快捷键:  先按三下<kbd>-</kbd>, 再按<kbd>Enter</kbd>.</p></blockquote><h3 id="删除线">删除线</h3><p>例子: <s>123</s></p><blockquote><p>Typora 中的快捷键:  <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>5</kbd>.</p></blockquote><h3 id="下划线">下划线</h3><p>例子: <u>123</u></p><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>U</kbd>.</p></blockquote><h3 id="脚标与脚注">脚标与脚注</h3><p>例子: 这上边有脚注<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><blockquote><p>  Typora 中的使用:</p><p>在需要插入脚注标号的位置写 <code>[^ number ]</code> ;再在下方通过 <code>[^ number ]:</code>在文档中插入脚注.</p><p>注意不要遗漏了脚注编号 <code>number</code> 前后的空格.</p></blockquote><hr><h2 id="4-Markdown列表">4.Markdown列表</h2><h3 id="无序列表">无序列表</h3><p>无序列表1:</p><ul><li><p>第一项</p></li><li><p>第二项</p></li><li><p>第三项</p></li></ul><p>无序列表2:</p><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul><p>无序列表3:</p><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>]</kbd>.</p><p>便捷使用: <kbd>-</kbd>+<kbd>Space</kbd>.</p></blockquote><h3 id="有序列表">有序列表</h3><p>有序列表:</p><ol><li>第一项</li><li>第四项</li></ol><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>[</kbd>.</p><p>便捷使用: <kbd>数字键</kbd>+<kbd>.</kbd>+<kbd>Space</kbd>.</p></blockquote><h3 id="列表嵌套">列表嵌套</h3><ol><li><p>第一项</p><ul><li>一一</li><li>一二</li></ul></li><li><p>第二项</p><ul><li>二一</li><li>二二</li></ul></li></ol><hr><h2 id="5-Markdown区块">5.Markdown区块</h2><p>简单区块:</p><blockquote><p>一</p><p>二</p></blockquote><p>区块嵌套:</p><blockquote><p>一</p><blockquote><p>二</p></blockquote></blockquote><p>区块中使用列表:</p><blockquote><ol><li>第一项</li><li>第二项</li></ol><ul><li>第一项</li><li>第二项</li></ul></blockquote><p>列表中使用区块:</p><ul><li><p>第一项</p><blockquote><p>①</p><p>②</p></blockquote></li><li><p>第二项</p></li></ul><blockquote><p>区块即引用.</p><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Q</kbd>.</p><p>快捷使用: <kbd>&gt;</kbd>+<kbd>Space</kbd>.</p></blockquote><hr><h2 id="6-Markdown代码">6.Markdown代码</h2><p>简单代码片: <code>printf()</code>函数.</p><p>代码块:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'RUNOOB'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>Typora 中的快捷键:</p><p>代码片: <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>~</kbd>.</p><p>代码块: <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd>.</p><p>快捷使用: <kbd>`</kbd>或<kbd>```</kbd> 直接包括代码块.</p></blockquote><hr><h2 id="7-Markdown链接">7.Markdown链接</h2><p>直接使用链接地址: <a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a></p><p>链接: <a href="https://www.baidu.com" target="_blank" rel="noopener">百度一下</a></p><p>高级链接:</p><p>这个链接用 google 作为网址变量 <a href="http://www.google.com/" target="_blank" rel="noopener" title="谷歌">Google</a>，然后在文档的结尾为变量赋值（网址）</p><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>K</kbd>.</p><p>直接使用链接地址: &lt;链接地址&gt;</p></blockquote><hr><h2 id="8-Markdown图片">8.Markdown图片</h2><p>简单使用:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://via.placeholder.com/480x100" alt="alt 占位图" title="可选标题"></p><p>使用变量:</p><p>这个链接用 1 作为网址变量 <a href="http://static.runoob.com/images/runoob-logo.png" target="_blank" rel="noopener">RUNOOB</a>.<br>然后在文档的结尾为变量赋值（网址）</p><p>也可以直接使用 img 标签:</p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://via.placeholder.com/480x100" width="50%"><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd>.</p></blockquote><hr><h2 id="9-Markdown表格">9.Markdown表格</h2><p>Markdown 制作表格使用 <strong>|</strong> 来分隔不同的单元格，使用 <strong>-</strong> 来分隔表头和其他行。</p><ul><li>-: 设置内容和标题栏居右对齐。</li><li>:- 设置内容和标题栏居左对齐。</li><li>:-: 设置内容和标题栏居中对齐。</li></ul><table><thead><tr><th style="text-align:left">左对齐</th><th style="text-align:right">右对齐</th><th style="text-align:center">居中对齐</th></tr></thead><tbody><tr><td style="text-align:left">单元格</td><td style="text-align:right">单元格</td><td style="text-align:center">单元格</td></tr><tr><td style="text-align:left">单元格</td><td style="text-align:right">单元格</td><td style="text-align:center">单元格</td></tr></tbody></table><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>T</kbd>.</p><p>可在界面直接操作单元格.</p></blockquote><hr><h2 id="10-Markdown高级使用技巧">10.Markdown高级使用技巧</h2><h3 id="使用HTML标签">使用HTML标签</h3><p>直接使用HTML标签: 如, &lt;kbd&gt;、&lt;sup&gt;、&lt;sub&gt;等.</p><p>例如: 使用 <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd> 重启电脑</p><h3 id="插入公式">插入公式</h3><p>$$<br>\mathbf{V}_1 \times \mathbf{V}_2 =  \begin{vmatrix}<br>\mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \<br>\frac{\partial X}{\partial u} &amp;  \frac{\partial Y}{\partial u} &amp; 0 \<br>\frac{\partial X}{\partial v} &amp;  \frac{\partial Y}{\partial v} &amp; 0 \<br>\end{vmatrix}<br>$$</p><blockquote><p>Typora 中的快捷键:  <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>M</kbd>.</p><p>快捷使用: 先按键入两个<kbd>$</kbd>, 再按<kbd>Enter</kbd>.</p></blockquote><h3 id="角标">角标</h3><p>例如: X<sup>2</sup>、H<sub>2</sub>O等</p><blockquote><p>上标快捷使用:  <kbd>^</kbd> +<kbd>上标</kbd>+<kbd>^</kbd>.</p><p>下标快捷使用:  <kbd>~</kbd> +<kbd>下标</kbd>+<kbd>~</kbd>.</p></blockquote><h3 id="高亮显示">高亮显示</h3><p>例如: <mark>高亮显示</mark></p><blockquote><p>快捷使用: 将高亮内容键入一对<kbd>==</kbd>和<kbd>==</kbd>之间.</p></blockquote><h3 id="着重关键字">着重关键字</h3><p>例如: <code>Keyword</code></p><blockquote><p>着重关键字即插入代码片.</p><p>Typora 中的快捷键: <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>`</kbd>.</p><p>快捷使用: <kbd>`</kbd>包括关键字.</p></blockquote><h3 id="插入enjoy表情">插入enjoy表情</h3><p>例如: 😃.</p><blockquote><p>快捷使用: 键入<kbd>:</kbd>+表情对应单词.</p></blockquote><h3 id="内联公式">内联公式</h3><p>例如: $\frac {\partial f} {\partial x }$, 公式和文字显示在一行.</p><blockquote><p>快捷使用: 将高亮内容键入一对<kbd>$</kbd>和<kbd>$</kbd>之间.</p></blockquote><h3 id="插入图表">插入图表</h3><ul><li>序列图、流程图、Mermaid</li></ul><p>例子, 简单图表:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">B --&gt; C&#123;条件a&#125;</span><br><span class="line">C --&gt;|a&#x3D;1| D[结果1]</span><br><span class="line">C --&gt;|a&#x3D;2| E[结果2]</span><br><span class="line">F[横向流程图]</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>脚注内容 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-Web简单运用</title>
      <link href="/JDBC2-0.html"/>
      <url>/JDBC2-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在 JavaWeb 中使用 JDBC 进行相关数据的操作。</p><p>在这里只是讲一下简单的应用，不涉及 MVC 模式。</p><blockquote><p>① 利用 c3p0 数据库连接池获取数据库连接。</p><p>② 利用 dbutils 工具类操作数据库。</p><p>③ 利用 beanutils 工具类操作 JavaBean。</p></blockquote><a id="more"></a><h2 id="1-下载相关包">1.下载相关包</h2><blockquote><p>当然，你可以自己到相应的官网下载。</p><ul><li>commons包---------<a href="http://commons.apache.org" target="_blank" rel="noopener">Apache Commons</a></li><li>MySQL驱动---------<a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noopener">MySQL官网</a></li><li>c3p0相关驱动---------<a href="https://sourceforge.net/projects/c3p0/" target="_blank" rel="noopener">SF开源网站</a></li></ul><p>这里也提供全套的 jar 包下载，百度云链接: <a href="https://pan.baidu.com/s/1aSDHhDx5T3Y1-FUxYvpncA&amp;shfl=shareset" target="_blank" rel="noopener">https://pan.baidu.com/s/1aSDHhDx5T3Y1-FUxYvpncA&amp;shfl=shareset</a> 提取码: ncv7。失效请联系博主。</p><p>其中 Codec 包是用来进行特殊编码和解码的。</p></blockquote><h2 id="2-在JavaWeb中简单使用-JDBC">2.在JavaWeb中简单使用 JDBC</h2><blockquote><ul><li>①在 Ecplise 中<a href="./JavaWeb1-1.html#3-%E5%88%9B%E5%BB%BA%E5%8A%A8%E6%80%81%E7%9A%84-JavaWeb-%E5%B7%A5%E7%A8%8B">创建一个动态的 Web 工程</a>。</li><li>②在 Web 根目录下的 WEB-INF/lib 目录下，导入下载好的 jar 包。</li><li>③在 src 目录下新建包，存放相应的 java 文件，当然，都放在一个包里也可以。如下图：</li></ul></blockquote><blockquote><p>下面用到的 src，下载地址：链接: <a href="https://pan.baidu.com/s/1MHoMuvXXb0Fx_ehlWVE87g&amp;shfl=shareset" target="_blank" rel="noopener">https://pan.baidu.com/s/1MHoMuvXXb0Fx_ehlWVE87g&amp;shfl=shareset</a> 提取码: sv8y。失效请联系博主。</p><p>下载后解压后，别忘记了 先将下载要用的 jar 包导入 lib，再修改你的 c3p0-config.xml 配置文件：修改的你数据库 jdbcUrl、用户名、密码。</p><p>期间用到的数据库表为 user，字段为：userId(int)、userName(varchar)、password(vrachar)、age(int)、address(varchar)、email(varchar)。</p><p>之后以 Java Application 形式运行 UserDAOJDBCImplTest.java 文件测试即可。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_2_01.png" alt="JDBC_2_01"></p><blockquote><p>相关介绍：</p><ul><li>dao包---------Data Access Object 接口类</li><li>domain包---------存放JavaBean</li><li>impl包---------存放DAO的实现类</li><li>servlet包---------存放用到的servlet</li><li>test包---------junit测试包</li><li>utils包---------工具类</li><li>c3p0-config.xml---------c3p0配置信息</li></ul><p>在JavaWeb中简单使用中，我们先把所有的类文件放在一个包里。</p></blockquote><hr><blockquote><p>例子：使用c3p0数据库连接池，获取 MySQL 数据库连接，之后利用 DButils 操作数据库，查询数据库记录并返回对应的 JavaBean 对象，或数据库的查询结果、更新数据库记录。数据库的一张 user 表如下：</p><p>在这里建议，开发 Java 项目的话，数据表字段名建议用 小驼峰命名法 命名。</p></blockquote><table><thead><tr><th>user_id</th><th>user_name</th><th>password</th><th>age</th><th>address</th><th>email</th></tr></thead><tbody><tr><td>1</td><td>root</td><td>root</td><td>10</td><td>山东临沂</td><td>root @crainyday.com</td></tr><tr><td>2</td><td>admin</td><td>admin</td><td>20</td><td>山东济南</td><td>admin @crainyday.com</td></tr><tr><td>3</td><td>user</td><td>user</td><td>30</td><td>山东泰安</td><td>user @crainyday.com</td></tr></tbody></table><p>修改数据表字段名：</p><table><thead><tr><th>userId</th><th>userName</th><th>password</th><th>age</th><th>address</th><th>email</th></tr></thead><tbody><tr><td>1</td><td>root</td><td>root</td><td>10</td><td>山东临沂</td><td>root @crainyday.com</td></tr><tr><td>2</td><td>admin</td><td>admin</td><td>20</td><td>山东济南</td><td>admin @crainyday.com</td></tr><tr><td>3</td><td>user</td><td>user</td><td>30</td><td>山东泰安</td><td>user @crainyday.com</td></tr></tbody></table><hr><p>分文件介绍：</p><h3 id="A-创建表对应的-JavaBean">A.创建表对应的 JavaBean</h3><blockquote><p>JavaBean 属性与 user 表一一对应，属性名用小驼峰命名法，setter和getter用大驼峰命名。</p><p>为了方便编程，可以将数据库表的字段名也用 小驼峰命名法，这样的话，写对该表操作的 SQL 语句时方便很多。</p><p>例如：对同一种查询，数据库字段用下划线命名法命名的话，要这样写：“SELECT user_id as userId,user_name as userName,password,age,address,email FROM user WHERE user_name = ?”。</p><p>数据库字段用小驼峰命名法命名的话，就可以这样写：“SELECT * FROM user WHERE userName = ?”。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crainyday.web;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户Bean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> crainyday</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> userId; </span><br><span class="line">    <span class="keyword">private</span> String userName; </span><br><span class="line">    <span class="keyword">private</span> String password; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUserId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserId</span><span class="params">(<span class="keyword">int</span> userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User [userId="</span> + userId + <span class="string">", userName="</span> + userName + <span class="string">", password="</span> + password + <span class="string">", age="</span> + age</span><br><span class="line">                + <span class="string">", address="</span> + address + <span class="string">", email="</span> + email + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="B-JDBCUtils工具类">B.JDBCUtils工具类</h3><blockquote><p>利用 c3p0 连接池获取数据源，下面只是初步的工具类，不涉及事务操作。</p></blockquote><blockquote><p>注意：需要在 src 目录下有 c3p0-config.xml 文件，JDBCUtils.java 中的数据源名为：c3p0-config.xml文件中的named-config标签中的 name 属性值。</p></blockquote><p>c3p0-config.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span>jdbc:mysql://127.0.0.1:3306/design?useSSL=false&amp;amp;serverTimezone=GMT%2B8&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">"web"</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>JDBCUtils.java：</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crainyday.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBC 操作工具类</span></span><br><span class="line"><span class="comment"> * 1. 获取数据库连接</span></span><br><span class="line"><span class="comment"> * 2. 释放数据库连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> crainyday</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 注意数据源只创建一次即可, 需要在静态代码块里初始化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 这里的数据源名为：c3p0-config.xml文件中的named-config标签中的 name 属性值。</span></span><br><span class="line">        ds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"web"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 释放一个 connection 连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> connection</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection connection)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回数据源的一个 connection 连接对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> SQLException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><hr><h3 id="C-最基础DAO">C.最基础DAO</h3><blockquote><p>封装了基本的 CRUD (增加Create、读取Read、更新Update和删除Delete)的方法, 以供子类继承使用。</p><p>这里的 DAO 无事务操作，故直接在方法中利用 JDBCUtils 获取数据库连接。</p><p>采用 DBUilts 操作数据库。</p><p>返回查询到的某一条记录对应的 JavaBean 对象，或返回查询的某些记录对应的 JavaBean 对象的 List 对象，或返回查询结果的数值。</p></blockquote><p>DAO.java：</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crainyday.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> crainyday</span></span><br><span class="line"><span class="comment"> * 封装了基本的 CRUD 的方法, 以供子类继承使用</span></span><br><span class="line"><span class="comment"> * 当前 DAO 无事务操作,直接在方法中获取数据库连接</span></span><br><span class="line"><span class="comment"> * 整个 DAO 采用 DBUtils 方案解决</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;: 当前 DAO 操作的实体类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// QueryRunner 是线程安全的</span></span><br><span class="line">    <span class="keyword">private</span> QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="keyword">private</span> Class&lt;T&gt; clazz;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DAO 构造函数: 利用反射确定当前 DAO 操作的实体类型 clazz</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DAO</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Type superClass = getClass().getGenericSuperclass();</span><br><span class="line">        <span class="keyword">if</span>(superClass <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">            ParameterizedType parameterizedType = (ParameterizedType) superClass;</span><br><span class="line">            Type [] typeArgs = parameterizedType.getActualTypeArguments();</span><br><span class="line">            <span class="keyword">if</span>(typeArgs != <span class="keyword">null</span> &amp;&amp; typeArgs.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(typeArgs[<span class="number">0</span>] <span class="keyword">instanceof</span> Class) &#123;</span><br><span class="line">                    clazz = (Class&lt;T&gt;) typeArgs[<span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回某一个字段的值 或 数据表中符合条件的记录数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;E&gt; <span class="function">E <span class="title">getForValue</span><span class="params">(String sql, Object ...args)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="keyword">return</span> (E) qr.query(connection, sql, <span class="keyword">new</span> ScalarHandler&lt;E&gt;(), args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.release(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回 T 所对应的 List</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">getForList</span><span class="params">(String sql, Object ...args)</span></span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="keyword">return</span> qr.query(connection, sql, <span class="keyword">new</span> BeanListHandler&lt;&gt;(clazz), args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.release(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回 T 所对应的一个实体类的对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(String sql, Object ...args)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="keyword">return</span> qr.query(connection, sql, <span class="keyword">new</span> BeanHandler&lt;&gt;(clazz), args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.release(connection);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该方法封装了 INSERT DELETE UPDATE 操作.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  sql 语句</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            qr.update(connection, sql, args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.release(connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><hr><h3 id="D-UserDAO">D.UserDAO</h3><blockquote><p>描述了一些与 User JavaBean 相关的 操作接口，以供子类 implements</p><p>就是这个 User Bean 可以用来干什么，只是描述一下它的功能。</p></blockquote><p>UserDAO.java：</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crainyday.web;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * UserBean 操作接口</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> crainyday</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户注册</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用户登录</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username, String password)</span></span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回和 username 相等的记录条数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getUsernameCount</span><span class="params">(String username)</span></span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回和 email 相等的记录条数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> email</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getEmailCount</span><span class="params">(String email)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><hr><h3 id="E-UserDAOJDBCImpl">E.UserDAOJDBCImpl</h3><blockquote><p>继承自 基础的 DAO，实现了 功能接口 DAO。</p><p>User 数据访问对象 JDBC 的实现</p><p>通过基础 DAO 操作数据库：用户登陆，用户注册，查询用户信息</p></blockquote><p>UserDAOJDBCImpl.java：</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crainyday.web;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * User 数据访问对象 JDBC 的实现</span></span><br><span class="line"><span class="comment"> * 操作数据库:用户登陆,用户注册,查询用户</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> crainyday</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDAOJDBCImpl</span> <span class="keyword">extends</span> <span class="title">DAO</span>&lt;<span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserDAO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"INSERT INTO user VALUES(?,?,?,?,?,?)"</span>;</span><br><span class="line">        update(sql, user.getUserId(),user.getUserName(), user.getPassword(), user.getAge(), user.getAddress(), user.getEmail());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT * FROM user WHERE userName = ?"</span>;</span><br><span class="line">        <span class="keyword">return</span> get(sql, username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getUsernameCount</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT count(userId) FROM user WHERE userName = ?"</span>;</span><br><span class="line">        <span class="keyword">return</span> getForValue(sql, username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getEmailCount</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT count(userId) FROM user WHERE email = ?"</span>;</span><br><span class="line">        <span class="keyword">return</span> getForValue(sql, email);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="F-UserDAOJDBCImplTest">F.UserDAOJDBCImplTest</h3><blockquote><p>测试写好的数据操作、对象功能是否正确。也可以用 junits 测试，为了共用，这里用了基本的方法。</p></blockquote><p>UserDAOJDBCImplTest.java：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.crainyday.web;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class UserDAOJDBCImplTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        UserDAO dao &#x3D; new UserDAOJDBCImpl();</span><br><span class="line">        String username &#x3D; &quot;root&quot;;</span><br><span class="line">        String password &#x3D; &quot;root&quot;;</span><br><span class="line">        User user &#x3D; dao.login(username, password);</span><br><span class="line">        User registerUser &#x3D; new User();</span><br><span class="line">        registerUser.setUserId(2);</span><br><span class="line">        registerUser.setUserName(&quot;admin&quot;);</span><br><span class="line">        registerUser.setPassword(&quot;admin&quot;);</span><br><span class="line">        registerUser.setAge(12);</span><br><span class="line">        registerUser.setAddress(&quot;山东济南&quot;);</span><br><span class="line">        registerUser.setEmail(&quot;admin@crainyday.com&quot;);</span><br><span class="line">        dao.register(registerUser);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu中安装XMind</title>
      <link href="/Ubuntu-XMind.html"/>
      <url>/Ubuntu-XMind.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>作为最受欢迎的思维导图软件---------XMind，在日常生活工作中也是经常用到的。之前在 Windows 中也是用它来做一些知识点的梳理，因此在转向了 ubuntu 后也想继续使用该软件。</p><p>但是如何最正确的安装呢？注意，本人这里仅仅针对 ubuntu 安装的 XMind。</p><a id="more"></a><h2 id="1-下载-XMind">1.下载 XMind</h2><blockquote><p>  去 XMind 的官网下载 ，也可点击下载 <a href="https://www.xmind.cn/xmind/download/" target="_blank" rel="noopener">XMind</a>。下载后不要急于安装。需要配置好 XMind 的运行环境，因为 XMind 是用 eclipse 基于 Java 开发的，这里用的是 JDK 1.8，XMind 8 最低必须要求 1.8。</p></blockquote><h2 id="2-安装-JDK">2.安装 JDK</h2><blockquote><p>  已经配置好 <a href="./Ubuntu_008.html#%E4%B8%80-Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">ubuntu 的 Java 环境</a>的请忽略此步骤。不想配置 <a href="./Ubuntu_008.html#%E4%B8%80-Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">ubuntu 的 Java 环境</a> 的，可以用下面的 shell 命令直接安装。不过这里更建议，先配置好 <a href="./Ubuntu_008.html#%E4%B8%80-Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">ubuntu 的 Java 环境</a> ，因为配置后就不用再修改 XMind.ini 配置文件，直接就可运行 XMind。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure><h2 id="3-解压安装-XMind">3.解压安装 XMind</h2><blockquote><p>  其实不用安装，直接解压第一步下载下来的 zip文件就能运行。将下载下来的 XMind.zip 文件 mv 到你想要的地方，解压即可。涉及得到的命令如下：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /opt/xmind</span><br><span class="line">sudo mv xmind-8-update8-linux.zip /opt/xmind</span><br><span class="line">cd /opt</span><br><span class="line">sudo chmod -R 777 xmind</span><br><span class="line">cd /xmind</span><br><span class="line">sudo unzip xmind-8-update8-linux.zip</span><br><span class="line">sudo rm xmind-8-update8-linux.zip</span><br></pre></td></tr></table></figure><blockquote><p>  重要的事情说三遍！！！这一步很重要，成败在此一举。在 Linux 中，文件系统安全很高，有好处也有弊端，在这里建议，以后安装或运行什么软件的时候，第一步就提权，不然可能会恶心死你，明明操作都对，结果不尽人愿，运行 web 项目的时候有时也要提权。</p></blockquote><div class="danger"><p>一定要提权 /opt/xmind 目录。</p><p>一定要提权 /opt/xmind 目录。</p><p>一定要提权 /opt/xmind 目录。</p></div><blockquote><p>这里简单说一下，XMind 的目录结构。</p><ul><li>./setup.sh --------- XMind 的安装文件，这里用不到。</li><li>./XMind_amd64 --------- 64位版 XMind 的目录</li><li>./XMind_i386 --------- 32位版 XMind 的目录</li></ul></blockquote><h2 id="4-配置-XMind-ini">4.配置 XMind.ini</h2><blockquote><p>  已经配置好 <a href="./Ubuntu-Java.html">ubuntu 的 Java 环境</a>的也请忽略此步骤。</p><p>在原来的 XMind_amd64/XMind.ini 或 XMind_i386/XMind.ini 文件的基础上，添加下面两行代码。</p><p>注意：若是你是通过安装实现的配置 Java 环境的，到最后运行 XMind 时报了错误或有警告，请放弃这种配置方式，直接先去<a href="./Ubuntu-Java.html">配置好 ubuntu 的 Java 环境</a>，此时不需再修改 XMind.ini 文件。</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-vm</span><br><span class="line">/usr/lib/jvm/java-8-openjdk/amd64/bin</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/XMind-1.png" alt="XMind-1"></p><h2 id="5-运行-XMind">5.运行 XMind</h2><blockquote><p>双击 XMind_amd64/XMind 文件即可成功运行，32位的请双击 XMind_i386/XMind 文件。</p></blockquote><h2 id="6-编辑-desktop">6.编辑 .desktop</h2><blockquote><p>  添加桌面快捷方式，快速打开 XMind。在 /usr/share/applications 目录下，添加 .desktop 文件。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cd /usr/share/applications</span><br><span class="line">sudo vim xmind.desktop</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version &#x3D; 1.0</span><br><span class="line">Encoding&#x3D;UTF-8</span><br><span class="line">Type&#x3D;Application</span><br><span class="line">Name&#x3D;Xmind</span><br><span class="line">Comment&#x3D;Xmind</span><br><span class="line">Path&#x3D;&#x2F;opt&#x2F;xmind&#x2F;XMind_amd64</span><br><span class="line">Exec&#x3D;&#x2F;opt&#x2F;xmind&#x2F;XMind_amd64&#x2F;XMind</span><br><span class="line">Icon&#x3D;&#x2F;opt&#x2F;xmind&#x2F;XMind_logo.png</span><br><span class="line">Terminal&#x3D;false</span><br><span class="line">Categories&#x3D;Application</span><br><span class="line">StartupWMClass&#x3D;XMind</span><br></pre></td></tr></table></figure><p>这里的 XMind_logo.png 图标是我自己百度找的，XMind本身没有。</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/ubuntu/XMind-2.png" alt="XMind-2"></p>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaBean</title>
      <link href="/JavaWeb4-0.html"/>
      <url>/JavaWeb4-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>什么是 JavaBean ？(Java豆)</p><p>在 JSP 中 使用 JavaBean。</p><p>三个标签：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="JavaBean的标识符" class="JavaBean的全类名" scope="作用范围"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;jsp:setProperty property=<span class="string">"属性名(键)"</span> value=<span class="string">"属性值"</span> name=<span class="string">"JavaBean的标识符"</span> /&gt;</span><br><span class="line">&lt;jsp:getProperty property=<span class="string">"属性名(键)"</span> name=<span class="string">"JavaBean的标识符"</span> /&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="1-JavaBean">1. JavaBean</h2><blockquote><p>用作 JavaBean 的类的要求：</p><ul><li>① 必须有一个公共的、无参的构造方法（<em><strong>利用 反射 创建该类的对象时必须的</strong></em>）</li><li>② JavaBean 的属性以方法定义的形式出现</li><li>③ 对属性赋值的方法称为属性修改器或 setter 方法，获取属性值的方法称为属性访问器或 getter 方法</li><li>④ userName 的 setter 方法名为：setUserName，password 的 getter 方法名为 getPassword</li><li>⑤ JavaBean 的属性名根据 getter 和 setter 方法名生成，方法名去掉”get“或”set“，剩余部分首字母小写即为属性名</li></ul><p>以下就是一个典型的 JavaBean 类：</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crd.design.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userPassword;</span><br><span class="line">    <span class="keyword">private</span> String userSalt;</span><br><span class="line">    <span class="keyword">private</span> String userEmail;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> userId, String userName, String userPassword, String userSalt, String userEmail)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.userPassword = userPassword;</span><br><span class="line">        <span class="keyword">this</span>.userSalt = userSalt;</span><br><span class="line">        <span class="keyword">this</span>.userEmail = userEmail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String userName, String userPassword, String userEmail)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">        <span class="keyword">this</span>.userPassword = userPassword;</span><br><span class="line">        <span class="keyword">this</span>.userEmail = userEmail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUserId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserId</span><span class="params">(<span class="keyword">int</span> userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userPassword;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserPassword</span><span class="params">(String userPassword)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userPassword = userPassword;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserSalt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userSalt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserSalt</span><span class="params">(String userSalt)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userSalt = userSalt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userEmail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserEmail</span><span class="params">(String userEmail)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userEmail = userEmail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User [userId="</span> + userId + <span class="string">", userName="</span> + userName + <span class="string">", userPassword="</span> + userPassword + <span class="string">", userSalt="</span></span><br><span class="line">                + userSalt + <span class="string">", userEmail="</span> + userEmail + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-JSP中应用-JavaBean">2. JSP中应用 JavaBean</h2><blockquote><p>  对于 JSP 页面来说，只要是一个类有一个公共的、无参的构造方法，该类就可以用作创建 JavaBean 对象。该类中不接受任何参数的 getter 方法和 只接受一个参数的 setter 方法，都可以当作该类对象的属性名来引用。</p></blockquote><h3 id="A-相关标签">A.相关标签</h3><table><thead><tr><th>标签</th><th>作用</th></tr></thead><tbody><tr><td>&lt;jsp:useBean&gt;</td><td>创建和查找 JavaBean 实例对象</td></tr><tr><td>&lt;jsp:setProperty&gt;</td><td>设置 JavaBean 对象的属性</td></tr><tr><td>&lt;jsp:getProperty&gt;</td><td>读取 JavaBean 对象的属性</td></tr></tbody></table><h3 id="B-jsp-useBean">B.&lt;jsp:useBean&gt;</h3><blockquote><p>&lt;jsp:useBean&gt;用法：</p><p>  用于在某个指定(<em>scope属性指定</em>)的域范围(application、session、request、pageContext等)内查找一个指定(<em>id属性指定</em>)名称的 JavaBean 对象，若查到则返回该对象的引用，若不存在则实例化一个新的 JavaBean 对象(<em>class属性指定</em>)并将它存进 <em>scope 属性</em> 指定的域范围内。</p><p>语法：</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="beanInstanceName" class="package.class" scope="page|request|session|application"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;%-- scope只能取上述四个值，page 为默认值 --%&gt;</span><br></pre></td></tr></table></figure><blockquote><p>另一种用法：（此时返回的bean是Object类型的对象）</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="beanInstanceName" beanName="package.class" type="java.lang.Object" scope="page|request|session|application"&gt;&lt;/jsp:useBean&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="user" class="com.crd.design.domain.User" scope="session"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;%--以上代码相当于如下：</span><br><span class="line">&lt;%</span><br><span class="line">    User user = (User)session.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">    <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">    user = (User)Class.forName(<span class="string">"com.crd.design.domain.User"</span>).newInstance();</span><br><span class="line">    session.setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%-- useBean之后就可以使用该bean对象，如： --%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    user.setUserName(<span class="string">"CRainyDay"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h3 id="C-jsp-setProperty">C.&lt;jsp:setProperty&gt;</h3><blockquote><p>&lt;jsp:setProperty&gt;用法：</p><p>  给指定(<em>name属性指定</em>)的 JavaBean 对象的 指定(<em>property属性指定</em>)属性 赋指定(<em>value属性指定</em>)的属性值。</p><p>语法：</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty property=<span class="string">"属性名"</span> value=<span class="string">"属性值"</span> name=<span class="string">"id指定的bean对象"</span> /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="user" class="com.crd.design.domain.User" scope="session"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;jsp:setProperty property=<span class="string">"userName"</span> value=<span class="string">"crainyday"</span> name=<span class="string">"user"</span> /&gt;</span><br><span class="line">&lt;%--以上代码相当于如下：</span><br><span class="line">&lt;%</span><br><span class="line">    user.setUserName(<span class="string">"crainyday"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure><p><font style='color:red;font-size:1.3em;'>setProperty 的特殊用法：</font></p><blockquote><p>若 property 属性值为 ”*“，省略 value 属性，则会自动为对应 JavaBean 对象的所有属性赋值为对应的请求参数的值。</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--例：请求参数为 ?userName=<span class="string">"crainyday"</span>&amp;userId=<span class="number">12</span>&amp;userPassword=<span class="string">"crainyday"</span>--%&gt;</span><br><span class="line">&lt;jsp:useBean id="user" class="com.crd.design.domain.User" scope="session"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;jsp:setProperty property=<span class="string">"*"</span> name=<span class="string">"user"</span> /&gt;</span><br><span class="line">&lt;%--这样做进一步简化了开发，</span><br><span class="line">    否则，必须先从request中取出对应参数的值，</span><br><span class="line">    然后为JavaBean对象对应属性赋值--%&gt;</span><br></pre></td></tr></table></figure><h3 id="D-jsp-getProperty">D.&lt;jsp:getProperty&gt;</h3><blockquote><p>&lt;jsp:getProperty&gt;用法：</p><p>  获取指定(<em>name属性指定</em>)的 JavaBean 对象的 指定(<em>property属性指定</em>)属性 的属性值。</p><p>语法：</p></blockquote><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:getProperty property=<span class="string">"属性名"</span> name=<span class="string">"id指定的bean对象"</span> /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id="user" class="com.crd.design.domain.User" scope="session"&gt;&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;jsp:getProperty property=<span class="string">"userName"</span> name=<span class="string">"user"</span> /&gt;</span><br><span class="line">&lt;%--以上代码相当于如下：</span><br><span class="line">&lt;%= user.getUserName()%&gt;</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure><h2 id="3-利用eclipse快速开发JavaBean">3.利用eclipse快速开发JavaBean</h2><ul><li>①新建类并创建 JavaBean 的私有属性。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb4-0.1.png" alt="JavaWeb4-0.1"></p><ul><li>②在该类中右键单击，然后点击源码，再点击生成 Getter 和 Setter 方法，选择要生成方法的字段即可生成对应的 Getter、Setter方法。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb4-0.2.png" alt="JavaWeb4-0.2"></p><ul><li><p>③同步骤②，也可以由字段生成该类的构造方法，一定要一个公共的、无参的构造方法。</p></li><li><p>④同步骤②，也可以覆盖该类的 toString 方法，用于之后测试 JavaBean。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Web </tag>
            
            <tag> Servlet </tag>
            
            <tag> JSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一个JavaWeb应用</title>
      <link href="/JavaWeb1-1.html"/>
      <url>/JavaWeb1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>什么是 JavaWeb？</p><p>如何开发 JavaWeb？</p><ul><li>①同之前一样，用 eclipse 开发普通 Java 项目的方式创建第一个 JavaWeb 项目并发布到 Tomcat 服务器。</li><li>②用 JavaEE 版的 eclipse 创建第一个动态的 JavaWeb 工程。</li></ul><a id="more"></a><h2 id="1-JavaWeb-概述">1. JavaWeb 概述</h2><blockquote><p>  JavaWeb 应用是由一组 Servlet、HTML 页面、Java 类以及其它可以被绑定的资源构成的，它可以运行在各种供应商提供的实现了 Servlet 规范的 Servlet 容器中。</p><p>由此，JavaWeb 应用中可以包含：</p><p>— Servlet</p><p>— JSP</p><p>— 实用类</p><p>— 静态文档，如HTML、图片、CSS、JS等</p><p>— 描述 Web 应用的信息(web.xml)</p></blockquote><p>JavaWeb 目录结构：</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.1.png" alt="JavaWeb1-1.1"></p><hr><p><font style='color:red;font-weight:bolder;'>在此，先统一 eclipse 的所有文件的编码解码格式，一般统一为 UTF-8 即可。</font></p><p>请看教程示例 <a href="./eclipse-charset.html">Eclipse 修改字符集</a></p><hr><h2 id="2-手动创建-JavaWeb-应用">2.手动创建 JavaWeb 应用</h2><blockquote><p>经典版的 Eclipse：Eclipse 的每个安装包都不同， Java 开发人员通常使用 <a href="https://www.eclipse.org/downloads/packages/release/2019-09/r/eclipse-ide-java-developers" target="_blank" rel="noopener">Eclipse IDE for Java Developers</a> 来开发 Java 应用。安装 Eclipse 之前必须做好 <a href="./JavaSE1-0.html#5-%E5%AE%89%E8%A3%85JDK%E5%8F%8A%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E7%9A%84path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">Java开发环境配置</a></p><p>用经典版的 eclipse 开发普通 Java 项目的方式创建第一个 JavaWeb 项目并发布到Tomcat服务器</p></blockquote><h3 id="①创建-Java-项目">①创建 Java 项目</h3><blockquote><p>右键新建一个 Java 项目，按照 Servlet 定义的 JavaWeb 目录结构，创建对应目录。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.2.png" alt="JavaWeb1-1.2"></p><p>web.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>test<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span><span class="comment">&lt;!--注意：这里要为Web项目名称--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>index.jsp：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">Hello</span><br></pre></td></tr></table></figure><h3 id="②配置Build-Path">②配置Build Path</h3><blockquote><p>在 JavaWeb 目录结构中要求：JavaWeb 应用的类文件必须存放在 /WEB-INF/classes 目录下。</p><p>因此，需要将当前 Java 项目 src 的源码输出文件夹改为 /WEB-INF/classes。</p></blockquote><p>  在项目上右键单击，依次 选择 Build Path → Config Build Path</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.3.png" alt="JavaWeb1-1.3"></p><p>  之后将 src 的源码输出文件夹 修改即可。</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.4.png" alt="JavaWeb1-1.4"></p><p>  之后在 src 下创建一个 Java 类(Test.java)。</p><p>Test.java：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTestInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Testing......"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  修改 index.jsp：</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"test.Test"</span>%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">Hello</span><br><span class="line">&lt;%</span><br><span class="line">    Test test = <span class="keyword">new</span> Test();</span><br><span class="line">    System.out.println(test.getTestInfo());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><h3 id="③部署到-tomcat">③部署到 tomcat</h3><blockquote><p>这里说两种部署方法：</p><ul><li>①最简单的方法，把 WebContent 目录复制到 Tomcat 的 webapps 目录下，并改名为：test，重启 tomcat 后访问 <a href="localhost:8080/test/index.jsp">localhost:8080/test/index.jsp</a> 即可。浏览器会输出：Hello。控制台会输出：Testing…</li><li>②通过配置，映射任意目录下的 WEB 应用，实现后，重启 tomcat 后访问 <a href="localhost:8080/test/index.jsp">localhost:8080/test/index.jsp</a> 即可。浏览器会输出：Hello。控制台会输出：Testing…</li></ul></blockquote><p>  先在 Tomcat 根目录中，conf 目录下依次创建 catalina/localhost 目录，然后在 localhost 目录下为 test<br>这个 Web 应用程序建立 test.xml 文件。</p><p>test.xml：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> </span></span><br><span class="line"><span class="tag"><span class="attr">path</span>=<span class="string">"/hello"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">docBase</span>=<span class="string">"E:\\Java\\Source\\test\\WebContent"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">reloadable</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--path 不起作用--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--docBase 为创建的 JavaWeb 应用的 WebContent的真实物理路径--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--注意写路径时的转义字符--&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>reloadable：当修改了 docBase 指向的目录下的 class 文件时， tomcat 服务器是否重新加载 web 应用。</p></blockquote><hr><h2 id="3-创建动态的-JavaWeb-工程">3.创建动态的 JavaWeb 工程</h2><blockquote><p><a href="https://www.eclipse.org/downloads/packages/release/2019-09/r/eclipse-ide-enterprise-java-developers" target="_blank" rel="noopener">JavaEE 版的 Eclipse 下载</a></p><p>下载之后，将压缩文件解压，和原来安装的 Eclipse 合并即可。Ctrl+C、Ctrl+V，选择全部覆盖。</p><p>请看教程示例 <a href="./eclipse-charset.html">Eclipse 修改字符集</a></p></blockquote><h3 id="①将-Eclipse-切换到-JavaEE-模式">①将 Eclipse 切换到 JavaEE 模式</h3><blockquote><p>点击如图中的图标即可切换，没有的点击“打开透视图”查找即可。</p><p>若查找不到，就是你的 Eclipse 没有安装 JavaEE 开发的系列插件。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.5.png" alt="JavaWeb1-1.5"></p><h3 id="②打开包资源管理器">②打开包资源管理器</h3><blockquote><p>JavaEE 默认使用的是 Project Explorer(项目资源管理器)，这里我用惯了 包资源管理器。</p><p>依次点击 Window → Show View → Other，打开要显示的视图。</p><p>找到 Java → Package Explorer 即可打开 包资源管理器。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.6.png" alt="JavaWeb1-1.6"></p><h3 id="③新建一个-Server">③新建一个 Server</h3><blockquote><p>按照②的方法，打开 Servers 视图。</p><p>之后右键单击，依次点击 New → Server，新建一个 Server。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.7.png" alt="JavaWeb1-1.7"></p><blockquote><p>选择新建的 Tomcat 的版本，host name、Server name 默认即可。</p><p>之后添加 Server 的运行时环境，点击 Add，添加 Tomcat Server，选择自己电脑上安装的 Tomcat，确定即可。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.8.png" alt="JavaWeb1-1.8"></p><h3 id="④新建一个-Dynamic-Web-Project">④新建一个 Dynamic Web Project</h3><blockquote><p>在包管理器中，右键单击，New → Dynamic Web Project。</p><p>这里注意，一定不要新建 Static Web Project，若找不到新建的动态 Web 工程，点击 Other 寻找即可。</p><p>输入项目名，选择运行环境(就是刚才新建的 Server 的 Apache Tomcat 版本，默认即可)，选择动态 Web 应用版本，Next → Next，别急着点 Finish，最后一步一定要选择 Generate web.xml deployment descriptor。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.9.png" alt="JavaWeb1-1.9"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.10.png" alt="JavaWeb1-1.10"></p><h3 id="⑤测试">⑤测试</h3><blockquote><p>新建一个 Test 类，index.jsp 文件如图。</p><p>Eclipse 快捷键：Alt+/ 代码提示，Ctrl+Shift+O 自动导包，Ctrl+/ 代码注释。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.11.png" alt="JavaWeb1-1.11"></p><p>Test.java：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.crd.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTestInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"testings......"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.jsp：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"com.crd.test.Test"</span>%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        Test test = <span class="keyword">new</span> Test();</span><br><span class="line">        System.out.println(test.getTestInfo());</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><blockquote><p>之后，在 index.jsp 文件上，右键单击 → Run AS → Run On Server，即可成功运行。</p><p>打开 Console(控制台)视图，同步骤②。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.12.png" alt="JavaWeb1-1.12"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-1.13.png" alt="JavaWeb1-1.13"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Web </tag>
            
            <tag> Servlet </tag>
            
            <tag> JSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置JavaWeb环境</title>
      <link href="/JavaWeb1-0.html"/>
      <url>/JavaWeb1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>安装、部署、启动 JavaWeb 的环境------Tomcat服务器。</p><p>在此之前，必须保证已经安装配置了JDK的环境。</p><p>若没有请参看 <a href="/JavaSE1-0.html#5-%E5%AE%89%E8%A3%85JDK%E5%8F%8A%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E7%9A%84path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">Java环境配置</a> 进行配置。</p><a id="more"></a><h2 id="1-配置-JDK-环境">1.配置 JDK 环境</h2><blockquote><p>输入以下命令，查看 JDK 版本。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><blockquote><p>若是提示找不到 java 命令，请先安装 JDK 或 JRE。并配置系统变量: JAVA_HOME 或 JRE_HOME.</p></blockquote><p>如何配置 Java 开发环境？</p><p><a href="/JavaSE1-0.html#5-%E5%AE%89%E8%A3%85JDK%E5%8F%8A%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E7%9A%84path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">Java环境配置</a></p><blockquote><p>配置一个环境变量. java_home(指向 JDK 安装的根目录) 或 jre_home</p></blockquote><h2 id="2-部署并启动-tomcat">2.部署并启动 tomcat</h2><h3 id="1-下载-tomcat">1)下载 tomcat</h3><p><a href="http://tomcat.apache.org/" target="_blank" rel="noopener">tomcat</a> ，下载哪个版本都 OK，我这里用的 <a href="https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.46/bin/apache-tomcat-8.5.46-windows-x64.zip" target="_blank" rel="noopener">apache-tomcat-8.5.46.zip</a></p><h3 id="2-解压-tomcat">2)解压 tomcat</h3><blockquote><p>解压时注意，要解压到非中文目录</p></blockquote><h3 id="3-启动-tomcat">3)启动 tomcat</h3><blockquote><p>通过双击 apache-tomcat-8.5.46\bin 目录下的 startup.bat, 启动服务器</p><p>在浏览器中输入 localhost:8080 来检验 Tomcat 安装是否正确.</p></blockquote><p>成功：</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-0.1.png" alt="JavaWeb1-0.1"></p><h3 id="4-端口可能被占用">4)端口可能被占用</h3><blockquote><p>若8080端口已被占用；或已经启动了一个 Tomcat 应用, 再启动同一个 Tomcat 应用, 会抛出异常:</p><p>java.net.BindException: Address already in use: JVM_Bind:8080</p><p>因为 8080 端口已经被占用了.</p></blockquote><h2 id="3-关于-tomcat">3.关于 tomcat</h2><blockquote><p>  Tomcat, 一款常用的 运行 Servlet(一种特殊的 JAVA 类，之后会详细介绍)和 JSP(一种特殊的文件，也可以说是一种特殊的 Servlet，之后会介绍) 的 Web 服务器。它和 Apache Web 服务器一样，也具有处理静态HTML的功能，但效果不如Apache，它主要用于处理 jsp 文件。你也可以将它简单的理解为一个 “特殊的 JVM”。实际上 Tomcat 是 Apache 服务器的扩展，它不仅仅是 Web 服务器，还是 Servlet 容器。</p></blockquote><blockquote><p>  当然，还有很多和 Tomcat 类似的 web 服务器，像：Resin 服务器、JBoss服务器、WebSphere 服务器、WebLogic 服务器等，但由于 Tomcat 是轻量级、开源并且完全免费的Web容器，所以使用广泛，它只适用于中小型项目，对于大型项目要选用其他服务器。</p></blockquote><hr><p><font style='color:red;font-size:1.5em;'>Servlet 与 Servlet 容器：</font></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-0.5.png" alt="JavaWeb1-0.5"></p><blockquote><p>Servlet 容器：为 JavaWeb 应用提供运行时环境，负责管理 Servlet 和 JSP 的生命周期，以及它们的共享数据。Servlet 容器，也称 JavaWeb 应用容器，或者 Servlet/JSP 容器。</p></blockquote><blockquote><p>在这里多说一点，区分一下：静态页面与动态页面。</p><p>静态页面：</p><p>  你可以理解为一些“死的资源”构成的“死”的页面，如HTML、图片、CSS、JS等。里面的“数据都是死的”。这些页面，往往用户在请求之前，都是已经在服务器存在了的。</p><p>动态页面：</p><p>  并不是说页面能“动”就是动态页面，而是里面有一些动态的、实时的数据交互，如连接、查询数据库，并返回一些动态的数据。这些页面，往往用户请求之前，服务器中还没有，用户请求时，根据特定的请求信息，动态生成了静态页面，并返回给浏览器。</p></blockquote><hr><h2 id="4-修改-tomcat-端口">4.修改 tomcat 端口</h2><blockquote><p>通过修改 apache-tomcat-8.5.37\conf\server.xml 文件中的配置信息来修改 Tomcat 服务的端口号。</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8989"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line"><span class="tag"><span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--修改 port 为想要修改的端口号即可--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-配置启动-tomcat">5.配置启动 tomcat</h2><blockquote><p>往往为了方便开发，我们希望在任意文件夹下，通过相应命令即可启动、停止 tomcat。</p><p>步骤：</p><ul><li>①新建系统变量 CATALINA_HOME. 值为 tomcat 所在的根目录, 例：D:\Program Files\apache-tomcat-8.5.37。</li><li>②在系统的 Path 中添加一项，“%CATALINA_HOME%\bin”。</li><li>③打开cmd，输入catalina run命令即可启动 tomcat。</li><li>④在③的基础上，按“Ctrl+C”即可停止 tomcat。</li></ul></blockquote><h2 id="6-启动-tomcat-中文乱码">6.启动 tomcat 中文乱码</h2><blockquote><p>启动 tomcat 时，往往会有一些中文的乱码，打印在控制台上，可以通过修改配置文件以解决。</p><p>通过修改 apache-tomcat-8.5.37\conf\logging.properties 文件，将里面的 GBK，全部改为 UTF-8 即可。</p><p>若文件中本来都是用 UTF-8 编码的，就将 <em>java.util.logging.ConsoleHandler.encoding = GBK</em>。</p></blockquote><h2 id="7-tomcat-目录结构">7. tomcat 目录结构</h2><table><thead><tr><th>目录</th><th>描述</th></tr></thead><tbody><tr><td>/bin</td><td>存放windows或Linux平台上启动和关闭Tomcat的脚本文件</td></tr><tr><td>/conf</td><td>存放Tomcat服务器的各种全局配置文件，其中最重要的是server.xml和web.xml</td></tr><tr><td>/doc</td><td>存放Tomcat文档</td></tr><tr><td>/server</td><td>包含三个子目录：classes、lib和webapps</td></tr><tr><td>/server/lib</td><td>存放Tomcat服务器所需的各种JAR文件</td></tr><tr><td>/server/webapps</td><td>存放Tomcat自带的两个WEB应用admin应用和 manager应用</td></tr><tr><td>/common/lib</td><td>存放Tomcat服务器以及所有web应用都可以访问的jar文件</td></tr><tr><td>/shared/lib</td><td>存放所有web应用都可以访问的jar文件（但是不能被Tomcat服务器访问）</td></tr><tr><td>/logs</td><td>存放Tomcat执行时的日志文件</td></tr><tr><td>/src</td><td>存放Tomcat的源代码</td></tr><tr><td>/webapps</td><td>Tomcat的主要Web发布目录，默认情况下把Web应用文件放于此目录</td></tr><tr><td>/work</td><td>存放JSP编译后产生的class文件</td></tr></tbody></table><h2 id="8-tomcat-的管理程序">8. tomcat 的管理程序</h2><blockquote><p>  tomcat 提供了一个管理程序：manage，用于管理已部署到 tomcat 的 web 应用程序，也可以部署 web 应用到 tomcat 服务器。</p></blockquote><ul><li>①如下图，点击 Manage App 进入管理程序，需要输入用户名和密码。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-0.2.png" alt="JavaWeb1-0.2"></p><ul><li>②一开始不知道密码，点击取消即可，之后显示如下图配置。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-0.4.png" alt="JavaWeb1-0.4"></p><ul><li>③将上述提示配置，配置到 conf/tomcat-users.xml 文件。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">role</span> <span class="attr">rolename</span>=<span class="string">"manager-gui"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">"root"</span> <span class="attr">password</span>=<span class="string">"root"</span> <span class="attr">roles</span>=<span class="string">"manager-gui"</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>④重启 tomcat 利用改后的用户名、密码，登录即可。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JavaWeb/JavaWeb1-0.3.png" alt="JavaWeb1-0.3"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Web </tag>
            
            <tag> Servlet </tag>
            
            <tag> JSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vuex初识</title>
      <link href="/Vue5-1.html"/>
      <url>/Vue5-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>vuex初识</p><p>为什么要引入 vuex?</p><p>vuex是什么?</p><p>vuex怎么使用?</p><a id="more"></a><h2 id="1-vuex简介">1.vuex简介</h2><blockquote><p>vuex是vue的一个插件(它并没有遵循一般vue插件的命名规范), 它的目的是对vue应用中多个组件的共享状态进行集中式的管理(读/写).</p><p>vue是一个状态自管理应用. 下面是整个vue应用的数据流通图:</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue5-1.1.png" alt="Vue5-1.1"></p><blockquote><p>State: 驱动整个应用的数据源.</p><p>View: 以声明方式将State中的数据映射到视图.</p><p>Actions: 响应在View上的用户输入导致的状态变化(包含多种更新状态的方法)</p></blockquote><h3 id="关于多组件共享状态">关于多组件共享状态</h3><blockquote><p>产生的问题:</p><ul><li>①多个视图依赖于同一状态.</li><li>②来自不同视图的行为需要变更同一状态.</li></ul><p>之前的解决方法:</p><ul><li>a. 将数据及操作数据的行为都定义在父组件里</li><li>b. 将数据及操作数据的行为传递给需要的各个组件(可能存在多级传递)</li></ul><p>而vuex就是用来专门解决这一问题的.</p></blockquote><h3 id="vuex的流程图">vuex的流程图</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue5-1.2.png" alt="Vue5-1.2"></p><h2 id="2-一个简单的vue计数应用">2.一个简单的vue计数应用</h2><blockquote><p>先使用原始的vue方式实现, 之后一步步改为vuex实现方式.</p></blockquote><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;click &#123;&#123;count&#125;&#125; times, count is &#123;&#123;evenOrOdd&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;increment&quot;&gt;+&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;decrement&quot;&gt;-&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;incrementIfOdd&quot;&gt;increment if odd&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;incrementAsync&quot;&gt;increment async&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        count: 0</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      evenOrOdd () &#123;</span><br><span class="line">        return this.count % 2 &#x3D;&#x3D;&#x3D; 0 ? &#39;偶数&#39; : &#39;奇数&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      increment () &#123;</span><br><span class="line">        const count &#x3D; this.count</span><br><span class="line">        this.count &#x3D; count + 1</span><br><span class="line">      &#125;,</span><br><span class="line">      decrement () &#123;</span><br><span class="line">        const count &#x3D; this.count</span><br><span class="line">        this.count &#x3D; count - 1</span><br><span class="line">      &#125;,</span><br><span class="line">      incrementIfOdd () &#123;</span><br><span class="line">        const count &#x3D; this.count</span><br><span class="line">        if (count % 2 &#x3D;&#x3D;&#x3D; 1) &#123;</span><br><span class="line">          this.count &#x3D; count + 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      incrementAsync () &#123;</span><br><span class="line">        const count &#x3D; this.count</span><br><span class="line">        setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">          this.count &#x3D; count + 1</span><br><span class="line">        &#125;, 1000)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h2 id="3-vuex的初步使用">3.vuex的初步使用</h2><blockquote><ul><li>①之前项目没有vuex库的需要先安装库: npm install --save vuex</li><li>②在项目根目录下创建 store.js, vuex的核心管理对象模块. 编写vuex的核心代码</li><li>③将store模块配置到当前项目中: 在main.js中配置store</li></ul></blockquote><p>main.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    App</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span>,</span><br><span class="line">  store<span class="comment">// 配置store后,所有组件对象都多了一个属性对象: $store</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="store-对象">$store 对象</h3><blockquote><p>配置完 store 后, 所有的组件对象就都多了一个属性对象: $store, 可以用它来实现很多功能.</p><p>$store中有两个属性对象: state 和 getters, 也有方法: dispatch(actionName, data) //用来分发调用actions</p></blockquote><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;click &#123;&#123;count&#125;&#125; times, count is &#123;&#123;evenOrOdd&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;increment&quot;&gt;+&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;decrement&quot;&gt;-&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;incrementIfOdd&quot;&gt;increment if odd&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;incrementAsync&quot;&gt;increment async&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123;mapState, mapActions&#125; from &#39;vuex&#39;</span><br><span class="line">  export default &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">      ...mapState([&#39;count&#39;]),</span><br><span class="line">      evenOrOdd () &#123;</span><br><span class="line">        &#x2F;&#x2F;这里其实是返回了一个vuex的计算属性(可以理解为返回了一个方法)</span><br><span class="line">        return this.$store.getters.evenOrOdd</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      increment () &#123;</span><br><span class="line">        this.$store.dispatch(&#39;increment&#39;)</span><br><span class="line">      &#125;,</span><br><span class="line">      decrement () &#123;</span><br><span class="line">        this.$store.dispatch(&#39;decrement&#39;)</span><br><span class="line">      &#125;,</span><br><span class="line">      ...mapActions([&#39;incrementIfOdd&#39;, &#39;incrementAsync&#39;])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>store.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">vuex的核心管理对象模块: store</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  count: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  INCREMENT (state) &#123;</span><br><span class="line">    state.count++</span><br><span class="line">  &#125;,</span><br><span class="line">  DECREMENT (state) &#123;</span><br><span class="line">    state.count--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  increment (&#123;commit&#125;) &#123;</span><br><span class="line">    commit(<span class="string">'INCREMENT'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  decrement (&#123;commit&#125;) &#123;</span><br><span class="line">    commit(<span class="string">'DECREMENT'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  incrementIfOdd (&#123;commit, state&#125;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (state.count % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      commit(<span class="string">'INCREMENT'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  incrementAsync (&#123;commit, state&#125;) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'INCREMENT'</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  evenOrOdd (state) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.count % <span class="number">2</span> === <span class="number">0</span> ? <span class="string">'偶数'</span> : <span class="string">'奇数'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state, <span class="comment">// 包含多个状态对象</span></span><br><span class="line">  mutations, <span class="comment">// 包含多个更新state函数的对象</span></span><br><span class="line">  actions, <span class="comment">// 包含多个对应时间回掉函数的对象</span></span><br><span class="line">  getters<span class="comment">// 包含多个getter计算属性函数的对象</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>这个例子并不适合用vuex来做, vuex是用来解决多组件共享状态问题的. 在这里仅仅用来说明vuex的基本语法.</p><p>在真正开发一个项目时, 要综合分析, 有时多组件共享问题用vuex实现也不是很好.</p></blockquote><h2 id="4-vuex的一般项目结构">4.vuex的一般项目结构</h2><blockquote><p>上面的例子中, 将vuex相关的所有代码, 书写在了一个文件(store.js)中. 但在一般大中型项目中, 会将 vuex 的store.js 拆分为五个文件: index.js、actions.js、getters.js、mutations.js、types.js</p><ul><li>index.js: 创建 state 状态对象, 并将其余几个文件引入后, 向外暴露 store 对象.</li><li>actions.js: 包含多个事件回调函数的对象, 经常用来做一些异步操作(向服务器请求数据等), 之后通过触发 mutations.js 中的方法, 间接的更新 state .</li><li>getters.js: vuex的 state 相关的一些计算属性.</li><li>mutations.js: 包含多个直接更新 state 的方法(回调函数)的对象. 这些方法由 actions.js 中的 commit(‘mutation名’) 触发执行. 注意: 在这里只能执行一些同步代码, 一般只用来同步操作 state .</li><li>types.js: 创建并向外暴露一些对应 mutations.js 方法的字符串常量.</li></ul></blockquote><blockquote><p>vuex 还有一种 modules 配置, 但是一般用不到. 在一些状态非常非常多的应用中才会使用.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue路由续</title>
      <link href="/Vue4-2.html"/>
      <url>/Vue4-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>缓存路由组件</p><p>路由组件传值</p><p>编程式路由组件</p><p>路由守卫</p><a id="more"></a><h2 id="1-缓存路由组件对象">1.缓存路由组件对象</h2><blockquote><p>  要知道一点, 页面中的组件其实都是一些组件对象.</p><p>  在页面中切换路由时, 会默认先销毁当前的路由组件对象, 在创建要访问的路由组件对象.</p><p>  而销毁了之前的组件对象的话, 那个组件中的数据(可能是从后台花了很大力气得到的数据)也会销毁, 再切换回这个组件时, 又会重新请求组件中的数据.</p><p>  如果我们对那些数据的实时性要求不高的话, 我们希望不要放弃之前的数据. 这就用到了------缓存路由组件对象的技术. 那些数据都在路由对象中存着, 只要对象不销毁, 数据就在.</p></blockquote><blockquote><p>缓存路由组件对象: 我们只需要显示路由组件的地方加个keep-alive标签说明一下就OK.</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">&lt;&#x2F;keep-alive&gt;</span><br></pre></td></tr></table></figure><h2 id="2-向路由组件传递数据">2.向路由组件传递数据</h2><blockquote><p>在vue中路由真实涉及的只有两个标签: router-link 和 router-view.</p><p>无可厚非, 我们有两种方法传递数据. 一种通过 router-link 传递, 一种通过 router-view 传递.</p></blockquote><h3 id="①路由路径携带参数">①路由路径携带参数</h3><blockquote><p>在这里也有两种携带参数的方式: 携带 param 参数和 query 参数.</p><p>在页面中切换路由组件时, 都会有一个特殊的对象 $route : 当前路由对象, 它存着一些路由的信息, 包括路由路径携带的参数(param/query).</p><ul><li>①定义路由时, 不能把路径写死. 因为路径带有参数, 需要用占位符.</li><li>②编写路由连接时, 需要在 to 属性里指定占位符的值.</li><li>③在子路由组件中接收参数.</li></ul></blockquote><p>定义路由路径:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">path: <span class="string">'message'</span>,</span><br><span class="line">component: Message,</span><br><span class="line">children: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//path: '/home/message/detail?id=:id',//路径携带query参数.</span></span><br><span class="line">      path: <span class="string">'/home/message/detail/:id'</span>,<span class="comment">//路径携带param参数.带有占位符</span></span><br><span class="line">      component: Detail</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>编写路由连接:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--&lt;router-link :to&#x3D;&quot;&#96;&#x2F;home&#x2F;message&#x2F;detail?id&#x3D;$&#123;message.id&#125;&#96;&quot;&gt;&#123;&#123;message.title&#125;&#125;&lt;&#x2F;router-link&gt;--&gt;</span><br><span class="line">&lt;router-link :to&#x3D;&quot;&#96;&#x2F;home&#x2F;message&#x2F;detail&#x2F;$&#123;message.id&#125;&#96;&quot;&gt;&#123;&#123;message.title&#125;&#125;&lt;&#x2F;router-link&gt;</span><br></pre></td></tr></table></figure><p>接收路由参数:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        id: &#39;&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;模拟异步ajax请求</span><br><span class="line">        this.id &#x3D; this.$route.params.id&#x2F;&#x2F;这里接收的是param参数</span><br><span class="line">        &#x2F;&#x2F;this.id &#x3D; this.$route.query.id&#x2F;&#x2F;这样接收的是query参数</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">      &#x2F;&#x2F;这里需要监视$route对象,因为mounted函数只会调用一次.</span><br><span class="line">      &#x2F;&#x2F;当前组件不知道$route的值发生了变化.故须监视</span><br><span class="line">      $route: function (value) &#123;</span><br><span class="line">        this.id &#x3D; value.params.id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="②router-view标签属性携带数据">②router-view标签属性携带数据</h3><blockquote><ul><li>①在父组件中的router-view标签属性中传递数据</li><li>②在子组件中的props中声明接收属性</li></ul></blockquote><p>Parent.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view msg&#x3D;&quot;Hello VueRouter!!!&quot;&gt;&lt;&#x2F;router-view&gt;</span><br></pre></td></tr></table></figure><p>Child.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      msg: String</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-编程式路由导航">3.编程式路由导航</h2><blockquote><p>路由(跳转页面)有两种基础的实现方式: 路由标签(如: a标签)和 JS编程实现路由.</p><p>vue中编程式路由导航用到了另一个对象 $router(路由器), 这是一个功能对象.</p><ul><li>this.$router.push(url): 相当于点击了路由链接(可以返回当前路由界面)</li><li>this.$router.replace(url): 用新路由替换当前路由(不能再返回到当前路由界面)</li><li>this.$router.back(): 返回到上一个记录路由(相当于浏览器的回退按钮)</li><li>this.$router.go(1): 请求下一个记录路由(相当于浏览器的前进按钮)</li></ul></blockquote><h2 id="4-History-模式">4. History 模式</h2><blockquote><p>这种模式得玩好, 不然部署项目的时候你就知道了(奸笑). 开发的时候可以使用 history 模式, 但是建议, 部署项目的时候一定要使用(hash)模式.</p><p>当然, 你也可以配置一下web服务器, 使之支持 history 模式路由.</p></blockquote><h2 id="5-路由守卫">5.路由守卫</h2><blockquote><p>支持组件内路由和全局路由.</p><p>这里我只使用过 全局前置守卫路由: router.beforeEach((to, from, next).</p><p>主要是用来判断用户的token是否过期.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue路由初识</title>
      <link href="/Vue4-1.html"/>
      <url>/Vue4-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>vue中的路由简介</p><p>什么是路由?</p><p>怎么使用路由?</p><a id="more"></a><h2 id="1-SPA-与-MPA">1. SPA 与 MPA</h2><blockquote><p>SPA: 单页Web应用, 就是只有一张Web页面的应用(只请求一个html文件), 是加载单个HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序.</p><p>MPA: 每一次页面跳转时, 都会向后台服务器请求一个新的html文档, 这种类型的网站也就是多页网站, 也叫做多页Web应用.</p><p>在SPA中, 不会产生页面跳转, 但是一个页面中承载着很多功能页面(即组件), 只是更新显示不同的路由组件.</p></blockquote><h2 id="2-路由与路由器">2.路由与路由器</h2><blockquote><p>路由器管理路由.</p><p>路由是什么? 可以说是键值对(即一种映射关系), key 是路径(即path), value: 对于后台来说是处理请求的回调函数, 对于前台来说是组件.</p></blockquote><h2 id="3-基本路由">3.基本路由</h2><blockquote><p>基本步骤:</p><ul><li>①先在项目src创建main.js和App.vue.</li><li>②从这之后vue组件分为: 非路由组件(一般放在/src/components下)和路由组件(一般放在/src/views或/src/pages目录下).</li><li>③这里在views目录下, 创建路由组件About.vue和Home.vue, 里面随便写点要显示的东西.</li><li>④创建文件/src/router/index.js 或/src/router.js, 在里面配置路由, 如下方代码.</li><li>⑤在 main.js 中配置路由器, 如下方代码.</li><li>⑥在页面组件对应地方生成路由连接 router-link.</li><li>⑦在页面组件对应地方指定要显示的路由组件 router-view.</li></ul></blockquote><p>router.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'./views/About'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./views/Home'</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;<span class="comment">//向外暴露路由对象即路由器</span></span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/about'</span>,</span><br><span class="line">      component: About</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/home'</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      redirect: <span class="string">'/about'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>main.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    App</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span>,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;row&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;col-xs-offset-2 col-xs-8&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;page-header&quot;&gt;&lt;h2&gt;Router Test&lt;&#x2F;h2&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;row&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;col-xs-2 col-xs-offset-2&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;list-group&quot;&gt;</span><br><span class="line">          &lt;!--生成路由链接--&gt;</span><br><span class="line">          &lt;router-link to&#x3D;&quot;&#x2F;about&quot; class&#x3D;&quot;list-group-item&quot;&gt;About&lt;&#x2F;router-link&gt;</span><br><span class="line">          &lt;router-link to&#x3D;&quot;&#x2F;home&quot; class&#x3D;&quot;list-group-item&quot;&gt;Home&lt;&#x2F;router-link&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;col-xs-6&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;panel-body&quot;&gt;</span><br><span class="line">            &lt;!--显示上面路由链接对应的路由组件--&gt;</span><br><span class="line">            &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .router-link-active &#123;</span><br><span class="line">    color: red !important;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><blockquote><p>编写使用路由实际上只有3步:</p><ul><li><p>①编写路由组件</p></li><li><p>②定义路由</p></li><li><p>③使用路由: router-link和router-view标签. (这里注意keep-alive标签)</p></li></ul><p>keep-alive标签: 保存 router-view 显示的组件, 在切换组件时, 不销毁之前的组件.</p></blockquote><h2 id="4-嵌套路由">4.嵌套路由</h2><blockquote><p>嵌套路由: 顾名思义, 在路由组件中在嵌套其他路由组件.(可以多层嵌套)</p><ul><li>①先定义路由组件News.vue和Message.vue</li><li>②定义路由(或称注册路由). 修改router.js. 之前已经配置过了路由器. 没有配置的自行配置.</li><li>③在Home.vue中使用路由.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue4-1.1.png" alt="Vue4-1.1"></p><p>News.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for&#x3D;&quot;(news, index) in newsArr&quot; :key&#x3D;&quot;index&quot;&gt;&#123;&#123;news&#125;&#125;&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        newsArr: [&#39;news001&#39;, &#39;news002&#39;, &#39;news003&#39;, &#39;news004&#39;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>Message.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for&#x3D;&quot;m in messages&quot; :key&#x3D;&quot;m.id&quot;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;javascript:;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">    &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        messages: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F;模拟ajax请求</span><br><span class="line">        const messages &#x3D; [</span><br><span class="line">          &#123;id: 1, title: &#39;messages001&#39;&#125;,</span><br><span class="line">          &#123;id: 3, title: &#39;messages003&#39;&#125;,</span><br><span class="line">          &#123;id: 4, title: &#39;messages004&#39;&#125;</span><br><span class="line">        ]</span><br><span class="line">        this.messages &#x3D; messages</span><br><span class="line">      &#125;, 1000)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>router.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'./views/About'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./views/Home'</span></span><br><span class="line"><span class="keyword">import</span> News <span class="keyword">from</span> <span class="string">'./views/News'</span></span><br><span class="line"><span class="keyword">import</span> Message <span class="keyword">from</span> <span class="string">'./views/Message'</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/about'</span>,</span><br><span class="line">      component: About</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/home'</span>,</span><br><span class="line">      component: Home,</span><br><span class="line">      children: [<span class="comment">//定义home组件的子路由</span></span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'/home/news'</span>,</span><br><span class="line">          component: News</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">'message'</span>,</span><br><span class="line">          component: Message</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;<span class="comment">//默认路由</span></span><br><span class="line">          path: <span class="string">''</span>,</span><br><span class="line">          redirect: <span class="string">'/home/news'</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="comment">//默认路由</span></span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      redirect: <span class="string">'/about'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Home.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Home&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ul class&#x3D;&quot;nav nav-tabs&quot;&gt;</span><br><span class="line">        &lt;!--生成路由链接--&gt;</span><br><span class="line">        &lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;news&quot;&gt;News&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line">        &lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;message&quot;&gt;Message&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line">      &lt;&#x2F;ul&gt;</span><br><span class="line">      &lt;!--显示当前路由组件--&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Home&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue的UI组件库</title>
      <link href="/Vue3-4.html"/>
      <url>/Vue3-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vue的UI组件库</p><a id="more"></a><blockquote><p>vue常用的组件库有两个: Mint UI(移动端) 和 Element(PC端).</p><p>这两个都是饿了么开源的组件库.</p></blockquote><p>下面主要介绍一下 mint-ui 的使用.</p><h2 id="1-使用前配置">1.使用前配置</h2><blockquote><ul><li><p>首先下载mint-ui: npm install --save mint-ui</p></li><li><p>为了缩小项目整体体积, 借助  babel-plugin-component, 实现按需打包: 只需引入需要的组件, 以达到减小项目体积的目的.</p></li><li><p>安装 babel-plugin-component: npm install --save-dev babel-plugin-component</p></li><li><p>修改项目根目录下的 .babelrc 文件. 在 plugin 配置中添加一些新的配置. 新的 plugin 配置如下:</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;plugins&quot;: [&quot;transform-vue-jsx&quot;, &quot;transform-runtime&quot;, [&quot;component&quot;, [</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;libraryName&quot;: &quot;mint-ui&quot;,</span><br><span class="line">    &quot;style&quot;: true</span><br><span class="line">  &#125;</span><br><span class="line">]]]</span><br></pre></td></tr></table></figure></blockquote><h2 id="2-mint-ui">2.mint-ui</h2><blockquote><p>mint-ui组件分为: 标签组建和非标签组建.</p><p>由于 mint-ui 是一个移动端的库, 需要在./src/index.html中引入一些移动端必要的第三方库</p></blockquote><p>添加 meta:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>引入JS文件以解决移动端事件延迟的问题, 实现快速点击.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="string">'addEventListener'</span> <span class="keyword">in</span> <span class="built_in">document</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          FastClick.attach(<span class="built_in">document</span>.body);</span></span><br><span class="line"><span class="actionscript">        &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span>(!<span class="built_in">window</span>.Promise) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.writeln(<span class="string">'&lt;script src="https://as.alipayobjects.com/g/component/es6-promise/3.2.2/es6-promise.min.js"'</span>+<span class="string">'&gt;'</span>+<span class="string">'&lt;'</span>+<span class="string">'/'</span>+<span class="string">'script&gt;'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-根据mint-ui官网的文档编写即可">3.根据mint-ui官网的文档编写即可</h2><p>main.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> &#123;Button&#125; <span class="keyword">from</span> <span class="string">'mint-ui'</span></span><br><span class="line"><span class="comment">// 注册成为全局标签</span></span><br><span class="line">Vue.component(Button.name, Button)</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    App</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;mt-button style&#x3D;&quot;width: 100%;&quot; type&#x3D;&quot;primary&quot; @click.native&#x3D;&quot;handleClick&quot;&gt;primary&lt;&#x2F;mt-button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123;Toast&#125; from &#39;mint-ui&#39;</span><br><span class="line">  export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleClick () &#123;</span><br><span class="line">        Toast(&#39;提示信息&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue发送ajax请求</title>
      <link href="/Vue3-3.html"/>
      <url>/Vue3-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vue利用vue-resource和axios发送ajax请求</p><a id="more"></a><h2 id="1-vue-resource">1. vue-resource</h2><blockquote><p>vue的一个插件库, 非官方库, 在vue1.x中使用广泛. vue2.x中已很少使用, 之后都是用axios库.</p><p>使用步骤:</p><ul><li>①当前项目中安装: npm install vue-resource --save</li><li>②在入口main.js文件中引入: import VueResource from ‘vue-resource’</li><li>③调用Vue的use函数声明引用插件: Vue.use(VueResource)</li><li>④通过 this.$http.get()或this.$http.post()发送请求.</li></ul></blockquote><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if&#x3D;&quot;repoURL&quot;&gt;most star repo is &lt;a target&#x3D;&quot;_blank&quot; :href&#x3D;&quot;repoURL&quot;&gt;&#123;&#123;repoName&#125;&#125;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div v-else&gt;LOADING...&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        repoURL: &#39;&#39;,</span><br><span class="line">        repoName: &#39;&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      const url &#x3D; &#96;https:&#x2F;&#x2F;api.github.com&#x2F;search&#x2F;repositories?q&#x3D;vue&amp;sort&#x3D;stars&#96;</span><br><span class="line">      this.$http.get(url).then(</span><br><span class="line">        response &#x3D;&gt; &#123;&#x2F;&#x2F;请求成功时</span><br><span class="line">          const item &#x3D; response.data.items[0]</span><br><span class="line">          this.repoURL &#x3D; item.html_url</span><br><span class="line">          this.repoName &#x3D; item.name</span><br><span class="line">        &#125;,</span><br><span class="line">        response &#x3D;&gt; &#123;&#x2F;&#x2F;请求失败时</span><br><span class="line">          alert(response)</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h2 id="2-axios">2. axios</h2><blockquote><p>通用的 ajax 请求库, 第三方库. 官方推荐使用. vue2.x中广泛使用.</p><p>使用步骤:</p><ul><li>①当前项目中安装: npm install axios --save</li><li>②在哪个组件中使用, 就要: import axios from ‘axios’</li><li>③之后通过 axios.get()或axios.post() 发送请求.</li></ul></blockquote><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if&#x3D;&quot;repoURL&quot;&gt;most star repo is &lt;a target&#x3D;&quot;_blank&quot; :href&#x3D;&quot;repoURL&quot;&gt;&#123;&#123;repoName&#125;&#125;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div v-else&gt;LOADING...&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import axios from &#39;axios&#39;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        repoURL: &#39;&#39;,</span><br><span class="line">        repoName: &#39;&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted () &#123;</span><br><span class="line">      const url &#x3D; &#96;https:&#x2F;&#x2F;api.github.com&#x2F;search&#x2F;repositories?q&#x3D;vue&amp;sort&#x3D;stars&#96;</span><br><span class="line">      axios.get(url).then(</span><br><span class="line">        response &#x3D;&gt; &#123;&#x2F;&#x2F;请求成功时</span><br><span class="line">          const item &#x3D; response.data.items[0]</span><br><span class="line">          this.repoURL &#x3D; item.html_url</span><br><span class="line">          this.repoName &#x3D; item.name</span><br><span class="line">        &#125;,</span><br><span class="line">        response &#x3D;&gt; &#123;&#x2F;&#x2F;请求失败时</span><br><span class="line">          alert(response)</span><br><span class="line">        &#125;</span><br><span class="line">      )&#x2F;&#x2F;.catch(error &#x3D;&gt; &#123;&#x2F;&#x2F;请求失败的回调函数也可以这样写</span><br><span class="line">       &#x2F;&#x2F;   alert(error)</span><br><span class="line">       &#x2F;&#x2F; &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue存储数据与组件间的通信续</title>
      <link href="/Vue3-2.html"/>
      <url>/Vue3-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>存储数据------即将数据缓存. 这里用 localStorage 缓存. 这里还用到了深度监视.</p><p>Vue中组件通信的其他方式.</p><a id="more"></a><h2 id="1-localStorage">1. localStorage</h2><blockquote><p>localstorage 生命周期是永久, 这意味着除非用户显示的在浏览器提供的UI上清除 localStorage 信息, 否则这些信息将永远存在. 存放数据大小为一般为5 MB, 而且它仅在客户端(即浏览器)中保存, 不参与和服务器的通信.</p><p>localStorage 存储的数据都是以文件存储的, 数据格式都是文本类型(即字符串). 所以这就需要转换数据格式.</p><p>存储数据前: 利用JSON.stringify将对象转换成字符串</p><p>获取数据后: 利用JSON.parse将字符串转换成对象</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="built_in">Object</span>)<span class="comment">//将对象转换成字符串并返回</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(str)<span class="comment">//将字符串转换成对象并返回</span></span><br><span class="line">localStorage.setItem(<span class="string">"key"</span>,<span class="string">"value"</span>);<span class="comment">//以"key"为名称存储一个值"value"</span></span><br><span class="line">localStorage.getItem(<span class="string">"key"</span>);<span class="comment">//获取名称为"key"的值</span></span><br><span class="line">localStorage.removeItem(<span class="string">"key"</span>);<span class="comment">//删除名称为"key"的信息.</span></span><br><span class="line">localStorage.clear();<span class="comment">//清空localStorage中所有信息</span></span><br></pre></td></tr></table></figure><h2 id="2-存取时机">2.存取时机</h2><blockquote><p>定义数据的时候, 将要用的数据从localStorage中取出数据. 当数据改变时, 将数据重新存到localStorage中.</p><p>提到了数据改变, 就用到了深度监视.</p></blockquote><p>深度监视某个属性:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#x2F;&#x2F;此时定义数据,从localStorage中将想要的数据取出.</span><br><span class="line">        &#x2F;&#x2F;一开始localStorage中没有todos_key.</span><br><span class="line">        todos: JSON.parse(window.localStorage.getItem(&#39;todos_key&#39;) || &#39;[]&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">      todos: &#123;</span><br><span class="line">        deep: true,&#x2F;&#x2F;深度监视</span><br><span class="line">        handler: function (value) &#123;</span><br><span class="line">          window.localStorage.setItem(&#39;todos_key&#39;, JSON.stringify(value))</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;......&#x2F;&#x2F;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-数据存储优化">3.数据存储优化</h2><blockquote><p>将上述的localStorage的读写过程封装在一个JS文件中.</p></blockquote><h2 id="4-组件间的通信">4.组件间的通信</h2><h3 id="①自定义事件">①自定义事件</h3><blockquote><p>之前我们组件之间的通信都是用的 propos 属性. 现在用自定义事件来进行组件通信.</p><p>自定义事件只能用于组件之间传递函数, 不能传递其他的.</p><p>一说到事件, 首先应考虑两点: ①绑定事件监听. ②触发(分发)事件.</p><p>在这里, 绑定自定义事件有两种方法:</p><ul><li>① @事件名=‘回调函数’. 例在Component标签对象上绑定myEvent事件: &lt;Component @myEvent=“myEvent”/&gt;. 这种方式只能用于父子组件之间的通信.</li><li>② 利用 $on 函数给特定标签对象绑定事件. 先给该标签对象设置 ref 属性, 再用 this.$refs.xxx.$on(‘自定义事件名’, 回调函数).</li></ul><p>触发事件的方式: 通过 $emit 函数触发自定义事件. this.$emit(‘自定义事件名’,参数…).</p></blockquote><h3 id="②消息订阅与发布">②消息订阅与发布</h3><blockquote><p>这种组件通信需要一个PubSub库.</p><p>通过 npm install --save pubsub-js 安装库到当前项目.</p><p>消息订阅可以类比绑定事件, 消息发布可以类比触发事件.</p><p>订阅消息与绑定事件都是一些异步操作, 在钩子函数 mounted 中书写相关代码即可.</p><p>消息订阅与发布的一种好处就是, 没有组件之间的限制, 任何组件之间都可以用.</p><p>步骤:</p><ul><li>①import库</li><li>②在mounted中订阅消息 PubSub.subscribe(‘消息名’, 回调函数)</li><li>③在需要时发布消息. PubSub.publish(‘消息名’, 参数…)</li></ul></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PubSub.subscribe(<span class="string">'delToDos'</span>, (msg, index) =&gt; &#123;<span class="comment">//最好用箭头函数, 防止this出错</span></span><br><span class="line">  <span class="keyword">this</span>.delToDos(index)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="③slot">③slot</h3><blockquote><p>此种方式用于父组件向子组件传递<code>标签数据</code>. 在子组件的内部, 已经事先定义好了一些&quot;插口&quot;, 父组件只需要说明把要显示的标签&quot;插到&quot;哪个插口即可. 这种方式不同于其他几种, 其他的都是传递的消息或数据.</p><p>这种方式适用于, 多个父组件共用一个子组件且要求的显示效果不同.</p></blockquote><p>子组件声明插口, Child.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;demo&quot;&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;slot name&#x3D;&quot;slot1&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;span&gt;</span><br><span class="line">      &lt;slot name&#x3D;&quot;slot2&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;slot name&#x3D;&quot;slot3&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><p>父组件根据插口属性将标签插入子组件, Parent.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;demo&quot;&gt;</span><br><span class="line">      &lt;Child&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;checkbox&quot; slot&#x3D;&quot;slot1&quot;&#x2F;&gt;</span><br><span class="line">        &lt;span slot&#x3D;&quot;slot2&quot; &gt;Hello Slot2&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;button slot&#x3D;&quot;slot3&quot;&gt;清除已完成任务&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;Child&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS数组函数</title>
      <link href="/Vue3-1.html"/>
      <url>/Vue3-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>介绍几个常用的JS数组函数</p><p>filter、forEach、map、reduce、splice、sort</p><a id="more"></a><h2 id="1-filter">1. filter</h2><blockquote><p>filter() 方法创建一个新的数组并返回, 新数组中的元素一定是原数组中的元素, 不改变原来的数组. 过滤原数组产生新数组.</p><p>array.filter(function(currentValue,index,arr), thisValue)</p><p>thisValue(对象)用作回调函数中的 “this” 的值</p><p>若使用箭头函数: array.filter((currentValue,index,arr) =&gt; {}), 在箭头函数里使用this, 当前无this就会去父作用域寻找.</p></blockquote><h2 id="2-forEach">2. forEach</h2><blockquote><p>数组每个元素都执行一次回调函数.</p><p>array.forEach(function(currentValue, index, arr), thisValue)</p></blockquote><h2 id="3-map">3. map</h2><blockquote><p>通过指定函数处理数组的每个元素, 并返回处理后的数组.</p><p>返回一个新数组, 数组中的元素为原始数组元素调用函数处理后的值.</p><p>array.map(function(currentValue,index,arr), thisValue)</p></blockquote><h2 id="4-reduce">4. reduce</h2><blockquote><p>将数组元素计算为一个值(从左到右).</p><p>接收一个函数作为累加器, 数组中的每个值(从左到右)开始缩减, 最终计算为一个值.</p><p>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</p><p>initialValue: 计算的初始值.</p></blockquote><h2 id="5-splice">5. splice</h2><blockquote><p>从数组中添加或删除元素.</p><p><em>array</em>.splice(<em>index</em>,<em>howmany</em>,<em>item1</em>,…,<em>itemX</em>)</p></blockquote><h2 id="6-sort">6. sort</h2><blockquote><p>对数组元素重新排序.</p><p><em>array</em>.sort(<em>sortfunction</em>)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue组件化编码之添加交互</title>
      <link href="/Vue2-3.html"/>
      <url>/Vue2-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>在之前的项目基础上, 实现交互添加、交互删除功能.</p><a id="more"></a><blockquote><p>首先, 要明白实现这些交互功能要先添加相应的事件监听. 之后, 要明白: 这些交互无非就是一些改变页面原始数据的操作. 即我们需要更新页面数据.</p><p>这里要知道: 数据在哪个组件定义的, 更新数据的方法就应该定义在哪个组件. 根据需要, 父组件将该方法传递给子组件, 子组件接收后调用它实现数据更新.</p></blockquote><h2 id="1-交互添加">1.交互添加</h2><blockquote><p>在App组件中添加addComment方法, 来向comments数组中插入新的评论数据. 该方法不是在本组件中调用, 而是在Add组件中调用. 因此需要将该方法, 传递给其子组件Add. 传递的方法与传递数据的方法一致. 子组件声明接收属性后调用.</p></blockquote><blockquote><p>数组的unshift方法: 向数组的开头添加一个或更多元素,并返回新的长度. <em>array</em>.unshift(<em>el1,el2,…,el3</em>).</p></blockquote><h2 id="2-交互删除">2.交互删除</h2><blockquote><p>在App组件中添加delComment(index)方法, 来在comments数组删除一条评论数据. 该方法不是在本组件中调用, 而是在Item组件中调用. 因此需要将该方法, 向下传递两次给其子孙组件Item. 传递的方法与传递数据的方法一致. 子组件声明接收属性后调用.</p></blockquote><blockquote><p>数组的splice方法: 用于添加或删除数组中的元素.<em>array</em>.splice(<em>index</em>,<em>howmany</em>,<em>item1</em>,…,<em>itemX</em>)</p></blockquote><p>最后的示例项目src:</p><p>一定不要忘了, 在这个项目里我们引用了第三方库 bootstrap.css 需要在项目根目录的index.html中引入.</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue组件化编码小案例</title>
      <link href="/Vue2-2.html"/>
      <url>/Vue2-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vue的组件化编码------小案例------初始化显示</p><a id="more"></a><h2 id="1-组件化编码的步骤">1.组件化编码的步骤</h2><blockquote><p>分三步: ①拆分页面. ②先实现一个静态页面. ③再实现动态页面.</p><p>静态组件显示的内容数据是固定的、没有交互, 动态组件数据是动态的、存在交互.</p></blockquote><p>将本例中的静态页面划分为如下4个组件:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-2.1.png" alt="Vue2-2.1"></p><p>本例的HTML:<details><summary>One More Thing 👇</summary></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./bootstrap.css"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.reply</span> &#123;</span></span><br><span class="line"><span class="undefined">      margin-top: 0px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    li &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-class">.5s</span>;</span></span><br><span class="line"><span class="undefined">      overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.handle</span> &#123;</span></span><br><span class="line"><span class="undefined">      width: 40px;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">      position: absolute;</span></span><br><span class="line"><span class="undefined">      right: 10px;</span></span><br><span class="line"><span class="undefined">      top: 1px;</span></span><br><span class="line"><span class="undefined">      text-align: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.handle</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="undefined">      display: block;</span></span><br><span class="line"><span class="undefined">      text-decoration: none;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.list-group-item</span> <span class="selector-class">.centence</span> &#123;</span></span><br><span class="line"><span class="undefined">      padding: 0px 50px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.user</span> &#123;</span></span><br><span class="line"><span class="undefined">      font-size: 22px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"site-header jumbotron"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-xs-12"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>请发表对Vue的评论<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-4"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"用户名"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>评论内容<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">rows</span>=<span class="string">"6"</span> <span class="attr">placeholder</span>=<span class="string">"评论内容"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-offset-2 col-sm-10"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default pull-right"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"reply"</span>&gt;</span>评论回复：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">'display: none'</span>&gt;</span>暂无评论，点击左侧添加评论！！！<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"handle"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> &gt;</span>xxx<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>说:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"centence"</span>&gt;</span>Vue不错!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"handle"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> &gt;</span>yyy<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>说:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"centence"</span>&gt;</span>Vue有点难!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>之后开始正式拆分组件.</p><h2 id="2-创建Vue组件">2.创建Vue组件</h2><blockquote><ul><li>①先清空src目录, 并新建空白main.js入口文件.</li><li>②将第三方库bootstrap.css文件放在static/css目录下, 并在当前Vue项目的index.html中引入.</li><li>③拆分编写各组件, 实现静态页面.</li><li>④在静态页面添加数据和交互, 实现动态页面.</li></ul></blockquote><h3 id="①拆分搭建静态页面">①拆分搭建静态页面</h3><p>App.vue:<details><summary>One More Thing 👇</summary></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;header class&#x3D;&quot;site-header jumbotron&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;row&quot;&gt;</span><br><span class="line">          &lt;div class&#x3D;&quot;col-xs-12&quot;&gt;</span><br><span class="line">            &lt;h1&gt;请发表对Vue的评论&lt;&#x2F;h1&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;header&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;container&quot;&gt;</span><br><span class="line">      &lt;Add&#x2F;&gt;</span><br><span class="line">      &lt;List&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Add from &#39;.&#x2F;components&#x2F;Add&#39;</span><br><span class="line">  import List from &#39;.&#x2F;components&#x2F;List&#39;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">      Add,</span><br><span class="line">      List</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure></details><p>main.js:<details><summary>One More Thing 👇</summary></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    App</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></details><p>Add.vue:<details><summary>One More Thing 👇</summary></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;col-md-4&quot;&gt;</span><br><span class="line">    &lt;form class&#x3D;&quot;form-horizontal&quot;&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;label&gt;用户名&lt;&#x2F;label&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; class&#x3D;&quot;form-control&quot; placeholder&#x3D;&quot;用户名&quot;&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;label&gt;评论内容&lt;&#x2F;label&gt;</span><br><span class="line">        &lt;textarea class&#x3D;&quot;form-control&quot; rows&#x3D;&quot;6&quot; placeholder&#x3D;&quot;评论内容&quot;&gt;&lt;&#x2F;textarea&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;form-group&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;col-sm-offset-2 col-sm-10&quot;&gt;</span><br><span class="line">          &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn btn-default pull-right&quot;&gt;提交&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;Add&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure></details><p>List.vue:<details><summary>One More Thing 👇</summary></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;col-md-8&quot;&gt;</span><br><span class="line">    &lt;h3 class&#x3D;&quot;reply&quot;&gt;评论回复：&lt;&#x2F;h3&gt;</span><br><span class="line">    &lt;h2 style&#x3D;&#39;display: none&#39;&gt;暂无评论，点击左侧添加评论！！！&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;ul class&#x3D;&quot;list-group&quot;&gt;</span><br><span class="line">      &lt;li class&#x3D;&quot;list-group-item&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;handle&quot;&gt;</span><br><span class="line">          &lt;a href&#x3D;&quot;javascript:;&quot;&gt;删除&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;user&quot;&gt;&lt;span &gt;xxx&lt;&#x2F;span&gt;&lt;span&gt;说:&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;centence&quot;&gt;Vue不错!&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">      &lt;li class&#x3D;&quot;list-group-item&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;handle&quot;&gt;</span><br><span class="line">          &lt;a href&#x3D;&quot;javascript:;&quot;&gt;删除&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;user&quot;&gt;&lt;span &gt;yyy&lt;&#x2F;span&gt;&lt;span&gt;说:&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;centence&quot;&gt;Vue有点难!&lt;&#x2F;p&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">    &lt;&#x2F;ul&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#39;List&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .reply &#123;</span><br><span class="line">    margin-top: 0px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    transition: .5s;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .handle &#123;</span><br><span class="line">    width: 40px;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    background: #fff;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 10px;</span><br><span class="line">    top: 1px;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .handle a &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .list-group-item .centence &#123;</span><br><span class="line">    padding: 0px 50px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .user &#123;</span><br><span class="line">    font-size: 22px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure></details><blockquote><p>目前, 还没进一步拆分List.vue组件, 等到添加动态组件时再进一步拆分.</p><p>最后, npm run dev当前项目显示如下图, 达到了预期效果.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-2.2.png" alt="Vue2-2.2"></p><h3 id="②添加数据">②添加数据</h3><blockquote><p>观察下面图片, 先分析图中一条条的评论中数据类型. 每条数据是一个对象, 包含: username、content属性. List组件区域整体数据构成对象数组 comments. 在分析数据 comments 放在哪个组件. 由于 Add 组件也会用到该数据(向数组中添加新的评论信息), 所以将 comments 放到 Add 和 List 组件的父组件 App 中定义.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-2.3.png" alt="Vue2-2.3"></p><h4 id="在哪定义数据">在哪定义数据</h4><blockquote><p>被多个组件共用的数据, 放到它们的父组件中. 只有当前组件用到的数据, 放到当前组件中即可.</p></blockquote><h4 id="如何传递数据">如何传递数据</h4><blockquote><p>本组件中定义的数据, 仅在当前组件中可用. 但在父组件中定义的数据, 如何传递到其他组件呢?</p><p>这就涉及到一个术语: <strong>组件间通信</strong>.</p></blockquote><p><font style='color:red;'><strong>最简单最原始的方式:</strong></font> 通过标签属性传递</p><p>例: 在App组件中将comments传递给List组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--注意属性名一定要用强制数据绑定--&gt;</span><br><span class="line">&lt;!--注意属性名可以自定义, .但一般与要传递的数据一致--&gt;</span><br><span class="line">&lt;List :comments&#x3D;&#39;comments&#39;&#x2F;&gt;</span><br></pre></td></tr></table></figure><h4 id="如何接收数据">如何接收数据</h4><blockquote><p>接收数据, 在Vue中叫做声明接收属性: 这个属性就会成为组件对象的属性.</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">      comments: Array</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-cli</title>
      <link href="/Vue2-1.html"/>
      <url>/Vue2-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>vue的组件化编码. Vue脚手架------即vue-cli</p><a id="more"></a><h2 id="1-用vue-cli创建一个模板项目">1.用vue-cli创建一个模板项目</h2><blockquote><p>vue-cli是vue官方提供的脚手架工具. 实际上也是一个库, 它从网上下载一个模板项目</p><p>相关的命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">安装脚手架</span></span><br><span class="line">npm install -g vue-cli</span><br><span class="line"><span class="meta">#</span><span class="bash">初始化项目xxx</span></span><br><span class="line">vue init webpack xxx</span><br><span class="line">cd xxx</span><br><span class="line"><span class="meta">#</span><span class="bash">下载项目文件</span></span><br><span class="line">npm install</span><br><span class="line"><span class="meta">#</span><span class="bash">编译运行项目</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>之后浏览器访问: <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> 即可访问该项目.</p><p>在这里我们用的是 webpack 构建的脚手架, 当然也有其他的.</p></blockquote><h3 id="①项目整体目录结构">①项目整体目录结构</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-1.1.png" alt="Vue2-1.1"><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-1.2.png" alt="Vue2-1.2"></p><blockquote><p>.babelrc文件是babe的配置文件. babe 的功能: JSX转JS、ES6转ES5等. rc 即 runtime control(运行时控制)</p><p>.eslintignore文件. ESlint检查时忽略的文件的配置信息.</p><p>.eslintrc.js文件是 eslint 的配置文件. ESLint 是一个ECMAScript/JavaScript 语法规则和代码风格的检查工具.</p><p>package.json文件是当前应用的描述文件.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-1.3.png" alt="Vue2-1.3"></p><h3 id="②src目录结构">②src目录结构</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-1.4.png" alt="Vue2-1.4"></p><blockquote><p>assets文件夹与 static文件夹的区别:</p><ul><li>相同点: 文件夹里的资源在页面中都是可以引用的.</li><li>不同点: 在js中使用assets下面的资源, 不能直接写路径, 路径会经过webpack中file-loader的编译.</li></ul><p>动态绑定assets中的资源时, 要用require来引入该资源. 对于非第三方资源, 推荐放在assets中, 这里面的文件会经过webpack打包、重新编译. 而static中的文件, 不会经过重新编译. 项目在经过打包后, 会生成dist文件夹, static中的文件只是复制到dist文件夹中. static中建议放一些外部第三方资源文件.</p></blockquote><h2 id="2-基于脚手架编写项目">2.基于脚手架编写项目</h2><blockquote><p>这里从头开始编写. 先删除项目src中的components文件夹、App.vue文件、main.js入口文件.</p><ul><li>先在src下新建一个main.js入口文件, 接着新建一个空白的vue文件和components文件夹.</li><li>在components文件夹下新建一个HelloWorld.vue文件.</li><li>在以上vue文件中编写上vue的模板代码: 如下. 之后可以自己创建一个vue模板文件.</li><li>之后依次编写HelloWorld.vue、App.vue、main.js文件.</li></ul><p>vue组件的使用步骤: ①引入组件 ②映射组件标签 ③使用组件标签</p></blockquote><p>vue模板代码:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;&#x2F;&#x2F;固定语法,向外暴露里面的配置对象.与编写Vue配置对象一致</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>HelloWorld.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p class&#x3D;&quot;msg&quot;&gt;&#123;&#123;msg&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data()&#123;&#x2F;&#x2F;在Vue配置对象中data可以写对象也可以写函数. 但在这里必须写函数.</span><br><span class="line">      return &#123;</span><br><span class="line">        msg:&#39;Hello Vue!!!&#39;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .msg&#123;</span><br><span class="line">    color: red;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>App.vue:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;img class&#x3D;&quot;logo&quot; src&#x3D;&quot;.&#x2F;assets&#x2F;logo.png&quot; alt&#x3D;&quot;logo&quot;&gt;</span><br><span class="line">    &lt;!--3.使用组件标签--&gt;</span><br><span class="line">    &lt;HelloWorld&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  &#x2F;&#x2F;1.引入组件</span><br><span class="line">  import HelloWorld from &#39;.&#x2F;components&#x2F;HelloWorld.vue&#39;</span><br><span class="line">  export default &#123;</span><br><span class="line">    components:&#123;</span><br><span class="line">      &#x2F;&#x2F;2.映射组件标签</span><br><span class="line">      HelloWorld</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .logo&#123;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 200px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><p>main.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">项目入口JS文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//1.引入组件</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el:<span class="string">'#app'</span>,</span><br><span class="line">  components:&#123;</span><br><span class="line">    <span class="comment">//2.映射组件标签</span></span><br><span class="line">    App</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span><span class="comment">//3.使用组件标签</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-打包发布项目">3.打包发布项目</h2><blockquote><p>打包项目: npm run build</p><p>发布项目:</p><ul><li><p>发布1: 使用静态服务器工具包.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g serve #全局安装静态服务器</span><br><span class="line">serve dist #运行项目, 访问: http://localhost:5000 即可</span><br></pre></td></tr></table></figure></li><li><p>发布2:使用动态web服务器(像: tomcat)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.先修改配置: webpack.prod.conf.js</span></span><br><span class="line">output:&#123;</span><br><span class="line">    publicPath:<span class="string">'/xxx/'</span> <span class="comment">//xxx为打包文件夹的名字,注意名字前后一定要加'/'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.修改完配置后,再运行: npm run build 重新打包</span></span><br><span class="line"><span class="comment">//3.然后将dist文件夹名修改为上面的:xxx</span></span><br><span class="line"><span class="comment">//4.将xxx文件夹拷贝到正在运行的服务器根目录下.</span></span><br></pre></td></tr></table></figure></li></ul></blockquote><h2 id="4-ESLint">4.ESLint</h2><blockquote><p>ESLint是一个很流行的代码规范检查工具, 基本已经替代了JSLint. ESLint定义了一系列规则, 一旦你违反了其中一个规则, ESLint就会提示你.</p><p>从用脚手架编写完项目, 之后运行, 你会发现WebStrom的Terminal里ESLint所给出的提示, 如下图.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue2-1.5.png" alt="Vue2-1.5"></p><blockquote><p>当然, 作为一个专业的程序员. 看见它们你肯定会有强迫症, 想去掉它们.</p><ul><li>①一个个的根据ESLint的提示去掉, 以后写的时候注意.</li><li>②通过配置项目根目录下的.eslintrc.js文件去掉, 更改里面的 rules对象配置即可.</li><li>③霸道的方法, 直接更改.eslintignore配置文件, 将要忽略的文件名写在里面.</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue常用的一些东西</title>
      <link href="/Vue1-5.html"/>
      <url>/Vue1-5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>表单数据的自动收集</p><p>生命周期、过渡&amp;动画、过滤器</p><a id="more"></a><h2 id="1-vue的生命周期">1. vue的生命周期</h2><blockquote><p>vue的生命周期分为三大部分: ①初始化显示 ②更新显示 ③销毁vue实例. vue执行到特定的生命周期后, 会依次调用对应的回调函数. 以下回调函数从上到下依次执行.</p><p>注意: 在vue中这些函数被称为 <strong>钩子函数</strong>.</p><p>①初始化显示阶段. 该阶段回调函数只会被调用一次</p><ul><li>before Create()</li><li>created()</li><li>before Mount()   mount: 挂载, 表示从内存挂载到HTML页面</li><li>mounted()</li></ul><p>②更新显示阶段. 该阶段回调函数会被调用多次</p><ul><li>before Update()</li><li>updated()</li></ul><p>③销毁(死亡)阶段. 该阶段回调函数只会被调用一次</p><ul><li>before destroy()</li><li>destroyed()</li></ul><p>常用的生命周期回调函数</p><p>mounted(): 发送ajax请求, 启动定时器等异步任务.</p><p>before Destroy(): 做一些收尾工作, 如: 清除定时器等</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"destroyVM"</span>&gt;</span>销毁VM对象<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span>Hello Vue!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                isShow:<span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            beforeCreate()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'beforeCreate()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            created()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'created()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            beforeMount()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'beforeMount()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            mounted()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'mounted()'</span>)</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.intervalID = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.isShow = !<span class="keyword">this</span>.isShow</span></span><br><span class="line"><span class="undefined">                &#125;,1000)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            beforeUpdate()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'beforeUpdate()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            updated()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'updated()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            beforeDestroy()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'beforeDestroy()'</span>)</span></span><br><span class="line"><span class="actionscript">                clearInterval(<span class="keyword">this</span>.intervalID)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            destroyed()&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'destroyed()'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                destroyVM()&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.$destroy()</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-过渡-动画">2.过渡&amp;动画</h2><blockquote><p>过渡: transition. 动画: animation.</p><p>  这实际上是说, 我们网页中的一个HTML元素, 在显示和隐藏的过程中有一些特殊的过渡和动画样式. vue的动画, 实际上是操作的 CSS 的 transition 或 animation, 通过给<strong>目标元素</strong>动态的添加或移除特定的 class 实现.</p><p>vue中过渡&amp;动画相关的类名:</p><ul><li>xxx-enter-active: 指定显示的 transition.</li><li>xxx-leave-active: 指定隐藏的 transition.</li><li>xxx-enter/xxx-leave-to: 指定<strong>隐藏时</strong>的样式.</li></ul><p>vue做基本过渡&amp;动画的步骤:</p><ol><li>在目标元素外包裹&lt;transition name=“xxx”&gt;&lt;/transition&gt;标签</li><li>定义 class 样式: ①指定过渡样式: transition. ②指定隐藏时的样式: opacity/其他</li></ol></blockquote><p>便于理解, 请看下图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue1-5.1.png" alt="Vue1-5.1"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="comment">/*显示和隐藏的过滤效果*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.fade-enter-active</span>,<span class="selector-class">.fade-leave-active</span>&#123;</span></span><br><span class="line"><span class="undefined">            transition: opacity 2s;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="comment">/*隐藏时的样式*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.fade-enter</span>,<span class="selector-class">.fade-leave-to</span>&#123;</span></span><br><span class="line"><span class="undefined">            opacity: 0;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="comment">/*显示的过滤效果*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.move-enter-active</span>&#123;</span></span><br><span class="line"><span class="undefined">            transition: all 1s;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="comment">/*隐藏的过滤效果*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.move-leave-active</span>&#123;</span></span><br><span class="line"><span class="undefined">            transition: all 3s;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="comment">/*隐藏时的样式*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.move-enter</span>,<span class="selector-class">.move-leave-to</span>&#123;</span></span><br><span class="line"><span class="undefined">            opacity: 0;</span></span><br><span class="line"><span class="undefined">            transform: translateX(20px);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.bounce-enter-active</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">animation</span>: <span class="selector-tag">bounce-in</span> <span class="selector-class">.5s</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.bounce-leave-active</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">animation</span>: <span class="selector-tag">bounce-in</span> <span class="selector-class">.5s</span> <span class="selector-tag">reverse</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        @<span class="keyword">keyframes</span> bounce-in &#123;</span></span><br><span class="line"><span class="undefined">            0% &#123;</span></span><br><span class="line"><span class="undefined">                transform: scale(0);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            50% &#123;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(1<span class="selector-class">.5</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            100% &#123;</span></span><br><span class="line"><span class="undefined">                transform: scale(1);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"isShow=!isShow"</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"fade"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span>Hello Vue!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"isShow=!isShow"</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"move"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span>Hello Vue!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"isShow=!isShow"</span>&gt;</span>显示/隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"bounce"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span>Hello Vue!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">            data()&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    isShow:<span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">"#demo2"</span>,</span></span><br><span class="line"><span class="undefined">            data()&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    isShow:<span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">"#demo3"</span>,</span></span><br><span class="line"><span class="undefined">            data()&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    isShow:<span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-过滤器">3.过滤器</h2><blockquote><p>过滤器就是对我们要在网页显示的数据进行一些格式化操作后再显示.</p><p>注意: 并没有改变原本的数据, 而是产生新的对应的数据</p><p>过滤器的使用步骤:</p><ol><li>定义过滤器.</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(filterName, function(value[,arg1,arg2,...])&#123;</span><br><span class="line">    // 进行一定的数据处理</span><br><span class="line">    return newValue</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li><p>使用过滤器. 注意: 原始数据之后和过滤器之前都有一个空格.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;myData | filterName&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;myData | filterName(arg)&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>显示格式化的日期时间<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>未处理:&#123;&#123;datetime&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>完整版:&#123;&#123;datetime | datetimeFilter&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>年月日:&#123;&#123;datetime | datetimeFilter('YYYY-MM-DD')&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>时分秒:&#123;&#123;datetime | datetimeFilter('HH:mm:ss')&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/moment.js/2.24.0/moment.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        Vue.filter(<span class="string">'datetimeFilter'</span>,<span class="function"><span class="keyword">function</span> <span class="params">(value,format)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//设置形参默认值也可以</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//function (value,format="YYYY-MM-DD HH:mm:ss")</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> moment(value).format(format||<span class="string">"YYYY-MM-DD HH:mm:ss"</span>)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">"#test"</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="javascript">                datetime:<span class="keyword">new</span> <span class="built_in">Date</span>(),</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-vue指令">4. vue指令</h2><blockquote><p>vue指令分为: 内置指令和自定义指令.</p></blockquote><h3 id="①vue内置指令">①vue内置指令</h3><blockquote><p>常见的一些内置vue指令:</p><ul><li>v-text: 更新元素的 test Content.</li><li>v-html: 更新元素的 inner HTML.</li><li>v-if: 如果为 true, 当前标签才会输出到页面.</li><li>v-else: 如果为 false, 当前标签才会输出到页面.</li><li>v-show: 通过控制元素的 display 来控制元素的显示与隐藏.</li><li>v-for: 遍历数组/对象.</li><li>v-on: 绑定事件监听, 一般简写为 “@”</li><li>v-bind: 强制绑定解析表达式, 一般简写为 “:”</li><li>v-model: 双向数据绑定.</li><li>ref: 为HTML元素指定唯一标识, vue对象通过 $refs 属性访问这个元素对象.</li><li>v-cloak: 防止闪现, 与 CSS 配合: [v-cloak]{display: none}</li></ul></blockquote><p>如下图, 在经过vue解析之后, 才会将原始HTML文件中的vue指令和一些表达式去除或替换. 如果解析过慢, 或vue等待的数据还没有到来, 此时HTML页面就会出现如下图的情况. 为了防止, 出现了 v-cloak 指令.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue1-5.2.png" alt="Vue1-5.2"></p><p>注意: 在网页中第一次运行下述代码时, 会出现上述图片中的情况.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">"example"</span>&gt;</span>Hello Vue!!!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"output"</span>&gt;</span>弹出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">"----"</span>)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">              msg:<span class="string">'I love China!'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                output() &#123;</span></span><br><span class="line"><span class="actionscript">                    alert(<span class="keyword">this</span>.$refs.example.textContent)</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="②自定义vue指令">②自定义vue指令</h3><blockquote><p>有两种方法: 全局注册和局部注册.</p><p>全局注册的指令, 当前页面的所有部分都可以用. 局部注册的指令, 只有在注册范围内可用.</p><ul><li>全局注册:</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive('my-directive', function(el, binding)&#123;</span><br><span class="line">    el.innerHTML = binding.value.toupperCase()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>局部注册:</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">directives : &#123;</span><br><span class="line">    'my-directive' : &#123;</span><br><span class="line">        bind (el, binding) &#123;</span><br><span class="line">            el.innerHTML = binding.value.toupperCase()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>注意: 下述代码有错误, 局部注册的 lower-text 指令, 在 test2 中不可用.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-upper-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-lower-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-upper-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-lower-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        Vue.directive(<span class="string">'upper-text'</span>,<span class="function"><span class="keyword">function</span> <span class="params">(el,binding)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//全局注册的 upper-text 指令, 在本页面的所有vue对象中都可用</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//el: 指令属性所在的标签对象</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//binding: 包含指令相关信息数据的对象</span></span></span><br><span class="line"><span class="undefined">            el.textContent = binding.value.toUpperCase()</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                msg:<span class="string">'I love China!'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            directives:&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//局部注册的 lower-text 指令, 在 test2 里面不可用,会报错</span></span></span><br><span class="line"><span class="actionscript">                <span class="string">'lower-text'</span>(el,binding)&#123;</span></span><br><span class="line"><span class="undefined">                    el.textContent = binding.value.toLowerCase()</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test2'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                msg:<span class="string">'I love China!'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-vue插件">5. vue插件</h2><blockquote><p>开发插件:</p><ul><li>新建 JS 文件, 将插件的所有代码放到匿名函数调用里.</li><li>声明插件对象, 给插件对象添加 install 方法.</li><li>添加全局方法或属性, 用Vue函数对象点’‘Vue.’'添加.</li><li>添加全局资源: 指令/过滤器/过渡等, 用Vue函数对象点’‘Vue.’'添加.</li><li>添加实例方法, 通过 Vue.prototype 添加. 为了区别全局方法, 实例方法以&quot;$&quot;开头.</li></ul><p>使用插件: 在引入Vue.js后, 先引入外部vue插件库, 再用 Vue.use(MyPlugin) 声明使用该插件. 实际上这调用了 插件对象的 install 方法, 将插件中的功能&quot;安装&quot;到 Vue 里.</p></blockquote><p>vue-myPlugin.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;<span class="comment">//匿名函数调用包裹插件代码, 更规范</span></span><br><span class="line">  <span class="comment">//1.创建需要向外暴露的插件对象</span></span><br><span class="line">  <span class="keyword">const</span> MyPlugin = &#123;&#125;</span><br><span class="line">  <span class="comment">//2.vue插件必须暴露一个 install 方法,且第一个参数必须是Vue</span></span><br><span class="line">  MyPlugin.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//3.添加插件功能</span></span><br><span class="line">    <span class="comment">// ①. 添加全局方法或属性</span></span><br><span class="line">    Vue.myGlobalMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Vue函数对象的myGlobalMethod()'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ②. 添加全局资源</span></span><br><span class="line">    Vue.directive(<span class="string">'my-directive'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">      el.textContent = <span class="string">'my-directive---'</span>+binding.value</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// ④. 添加实例方法.</span></span><br><span class="line">    Vue.prototype.$myMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'vm---$myMethod()'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//4.向外暴露插件对象</span></span><br><span class="line">  <span class="built_in">window</span>.MyPlugin = MyPlugin</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure><p>使用自定义插件:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-my-directive</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/vue-myPlugin.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//声明使用插件</span></span></span><br><span class="line"><span class="undefined">        Vue.use(MyPlugin)</span></span><br><span class="line"><span class="undefined">        Vue.myGlobalMethod()</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                msg:<span class="string">'I Love China!'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">        vm.$myMethod()</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue的事件处理与表单输入绑定</title>
      <link href="/Vue1-4.html"/>
      <url>/Vue1-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>vue中事件的处理与表单数据的自动收集</p><a id="more"></a><h2 id="1-事件处理">1.事件处理</h2><h3 id="①-绑定监听">①.绑定监听</h3><blockquote><p>vue中绑定监听最原始的做法: v-on:事件名=‘响应函数’</p><p>简化做法: @事件名=‘响应函数’</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"test1"</span>&gt;</span>test1<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="comment">&lt;!--相当于&lt;button @click="test1($event)"&gt;test1&lt;/button&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"test2('hello',$event)"</span>&gt;</span>test2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                test1(event)&#123;</span></span><br><span class="line"><span class="undefined">                    alert(event.target.innerHTML)</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                test2(msg,event)&#123;</span></span><br><span class="line"><span class="actionscript">                    alert(msg + <span class="string">"---"</span> + event.target.innerHTML)</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="②-事件修饰符">②.事件修饰符</h3><blockquote><p>两个事件修饰符: stop和prevent.</p><p>stop修饰符用以阻止事件冒泡. 也可以通过当前event的stopPropagation()方法阻止事件冒泡</p><p>prevent修饰符用以取消组件的默认行为. 也可以通过当前event的preventDefault()方法取消组件的默认行为</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:200px;height: 200px;background-color: red"</span> @<span class="attr">click</span>=<span class="string">"test3"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:100px;height: 100px;background-color: blue"</span> @<span class="attr">click.stop</span>=<span class="string">"test4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.baidu.com/"</span> @<span class="attr">click.prevent</span>=<span class="string">"test5"</span>&gt;</span>GO<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                test3(event)&#123;</span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">'outer'</span>)</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                test4()&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//也可以通过当前event的stopPropagation()方法阻止事件冒泡</span></span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">'inner'</span>)</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                test5()&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//也可以通过当前event的preventDefault()方法取消组件的默认行为</span></span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">'test5'</span>);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="③-按键修饰符">③.按键修饰符</h3><blockquote><p>只有一般常用的按键才有按键修饰符, 如: enter、space、alt、ctrl等.</p><p>也可以判断当前event的keyCode值实现</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.enter</span>=<span class="string">"test6"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#test'</span>,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                test6(event)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//除了按键修饰符,也可以判断当前event的keyCode实现</span></span></span><br><span class="line"><span class="undefined">                    alert(event.target.value)</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-表单输入绑定">2.表单输入绑定</h2><blockquote><p>常用的一些表单控件: test/textarea、password、radio、checkbox、select-option等</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/xxx"</span> @<span class="attr">submit.prevent</span>=<span class="string">"handleSub"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>用户名: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"username"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>密码: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">v-model</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>性别: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"female"</span> <span class="attr">value</span>=<span class="string">"女"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"female"</span>&gt;</span>女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">id</span>=<span class="string">"male"</span> <span class="attr">value</span>=<span class="string">"男"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"male"</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>爱好: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"basket"</span> <span class="attr">value</span>=<span class="string">"basket"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"basket"</span>&gt;</span>篮球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"foot"</span> <span class="attr">value</span>=<span class="string">"foot"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"foot"</span>&gt;</span>足球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"pingpong"</span> <span class="attr">value</span>=<span class="string">"pingpong"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"pingpong"</span>&gt;</span>乒乓<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>城市: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">"cityID"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>未选择<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">:value</span>=<span class="string">"city.id"</span> <span class="attr">v-for</span>=<span class="string">"(city,index) in citys"</span> <span class="attr">:key</span>=<span class="string">"city.id"</span>&gt;</span></span><br><span class="line">                    &#123;&#123;city.name&#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>介绍: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">"10"</span> <span class="attr">v-model</span>=<span class="string">"desc"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                username:<span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">                password:<span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">                sex:<span class="string">'女'</span>,</span></span><br><span class="line"><span class="actionscript">                likes:[<span class="string">'pingpong'</span>],</span></span><br><span class="line"><span class="actionscript">                cityID:<span class="string">"1"</span>,</span></span><br><span class="line"><span class="undefined">                citys:[</span></span><br><span class="line"><span class="actionscript">                    &#123;id:<span class="number">1</span>,name:<span class="string">"BJ"</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;id:<span class="number">2</span>,name:<span class="string">"SD"</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;id:<span class="number">3</span>,name:<span class="string">"SH"</span>&#125;</span></span><br><span class="line"><span class="undefined">                ],</span></span><br><span class="line"><span class="actionscript">                desc:<span class="string">""</span></span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                handleSub()&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="keyword">this</span>.username,<span class="keyword">this</span>.password)</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue中的两个常用渲染</title>
      <link href="/Vue1-3.html"/>
      <url>/Vue1-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>条件渲染与列表渲染</p><p>const、var、let 的区别</p><a id="more"></a><h2 id="1-条件渲染">1.条件渲染</h2><blockquote><p>条件渲染指令:</p><p>  v-if、v-else、v-show</p><p>v-if与v-show的比较: 如果需要频繁的切换用 v-show 更好, 下面将告诉你为什么.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"ok"</span>&gt;</span>成功<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>失败<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;button @click="shift"&gt;切换&lt;/button&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"ok=!ok"</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"ok"</span>&gt;</span>表白成功<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"!ok"</span>&gt;</span>表白失败<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                ok:<span class="literal">false</span>,</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                shift()&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.ok = ! <span class="keyword">this</span>.ok;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  先看一下下图, v-show 只是暂时的在页面中隐藏HTML元素, 而 v-if 是操作DOM. 如果频繁的切换, v-if要频繁的修改网页的DOM树.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Vue/Vue1-3.1.png" alt="Vue1-3.1"></p><h2 id="2-列表渲染">2.列表渲染</h2><blockquote><p>两种渲染: v-for遍历数组、v-for遍历对象</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>v-for遍历数组<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(p,index) in persons"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                &#123;&#123;index&#125;&#125;---&#123;&#123;p.name&#125;&#125;---&#123;&#123;p.age&#125;&#125;</span><br><span class="line">                ---<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"deleteItem(index)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                ---<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"updateItem(index,&#123;name:'Test',age:18&#125;)"</span>&gt;</span>更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>v-for遍历对象<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(value,key) in person"</span> <span class="attr">:key</span>=<span class="string">"key"</span>&gt;</span></span><br><span class="line">                &#123;&#123;value&#125;&#125;---&#123;&#123;key&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//在这里,vue本身只监视persons数组的改变,而没有监视数组内部数据的改变</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//但是vue重写了一些改变数组内部数据的方法(先调用原来的方法,再进行数据绑定),进而实现数据数组内部数据变化时自动刷新页面</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="undefined">                persons:[</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Ajax'</span>,age:<span class="number">20</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Bob'</span>,age:<span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Jane'</span>,age:<span class="number">22</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Stein'</span>,age:<span class="number">21</span>&#125;</span></span><br><span class="line"><span class="undefined">                ],</span></span><br><span class="line"><span class="actionscript">                person:&#123;name:<span class="string">'Bob'</span>,age:<span class="number">20</span>,email:<span class="string">'3013142340@qq.com'</span>,phone:<span class="string">'18888888888'</span>&#125;</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                deleteItem(index)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//删除数组中指定index的元素</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.persons.splice(index,<span class="number">1</span>);</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                updateItem(index,newP)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.persons[index] = newP;<span class="comment">//这行代码并没有改变persons本身,只是改变了数组内部的数据.数组内部的数据发生变化,但是没有vue的变异方法,所以不会更新页面</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.persons.splice(index,<span class="number">1</span>,newP);</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//splice函数也可以向数组中插入新的元素.用法:splice(index,0,item)</span></span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  vue中变异的数组函数, splice: ①向数组中添加一个元素, array.splice(index,0,item) ②删除数组的一个元素, array.splice(index,1) ③替换数组中的一个元素, array.splice(index,1,item)</p><p>  为了实现当数组内部数据变化时, 自动刷新页面, vue重写了一些改变数组内部数据的<strong>变异方法</strong>(先调用原来的方法,再进行数据绑定).</p><h2 id="3-列表的搜索与排序">3.列表的搜索与排序</h2><blockquote><p>列表搜索即对显示数据的条件过滤, 按照指定条件选取出符合的数据并显示.</p><p>利用数组的 filter 方法过滤数组元素.</p><p>用到了 vue 的计算属性, 当计算属性中的相关变量的值发生变化时, 该计算属性便会重新被计算.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"filterName"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(p,index) in filterPersons"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                &#123;&#123;index&#125;&#125;---&#123;&#123;p.name&#125;&#125;---&#123;&#123;p.age&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"setOrderType(1)"</span>&gt;</span>年龄升序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"setOrderType(2)"</span>&gt;</span>年龄降序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"setOrderType(0)"</span>&gt;</span>原本顺序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                filterName:<span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">                orderType:<span class="number">0</span>,<span class="comment">//0-&gt;原本顺序,1-&gt;升序,2-&gt;降序</span></span></span><br><span class="line"><span class="undefined">                persons:[</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Ajax'</span>,age:<span class="number">20</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Bob'</span>,age:<span class="number">18</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Jane'</span>,age:<span class="number">22</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;name:<span class="string">'Stein'</span>,age:<span class="number">21</span>&#125;</span></span><br><span class="line"><span class="undefined">                ]</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            methods:&#123;</span></span><br><span class="line"><span class="undefined">                setOrderType(orderType)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">this</span>.orderType = orderType</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            computed:&#123;</span></span><br><span class="line"><span class="undefined">                filterPersons()&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">const</span> &#123;filterName,persons,orderType&#125; = <span class="keyword">this</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> newPersons</span></span><br><span class="line"><span class="javascript">                    newPersons = persons.filter(<span class="function"><span class="params">p</span>=&gt;</span>p.name.indexOf(filterName)!==<span class="number">-1</span>)</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span>(orderType!==<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                        newPersons.sort(<span class="function"><span class="keyword">function</span> <span class="params">(p1,p2)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(orderType===<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> p1.age-p2.age</span></span><br><span class="line"><span class="actionscript">                            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                                <span class="keyword">return</span> p2.age-p1.age</span></span><br><span class="line"><span class="undefined">                            &#125;</span></span><br><span class="line"><span class="undefined">                        &#125;)</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> newPersons</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  const、let、var的区别. 首先, 要知道作用域, ES5 中作用域有: 全局作用域和函数作用域, 没有块作用域的概念. ES6 正式引入块级作用域{}.</p><ol><li>var: 会发生变量提升. 用var声明的变量, 在其声明之前就可以调用. 其值为: undefined. 属于函数级作用域.</li><li>const: 用来定义常量, 声明时必须初始化(即必须赋值), 只能在块作用域里访问, 而且不能修改.</li><li>let: 不会发生变量提升. 只能在块作用域里访问, 不能跨块访问, 更不能跨函数访问.</li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>强制绑定class与style</title>
      <link href="/Vue1-2.html"/>
      <url>/Vue1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Vue动态的改变class与style属性值</p><a id="more"></a><h2 id="1-理解">1.理解</h2><blockquote><p>一般在应用界面中, 某个(些)元素的样式是变化的, class/style绑定就是专门用来实现动态样式效果的技术</p></blockquote><h2 id="2-class绑定">2.class绑定</h2><blockquote><p>html用法  :class=“variable”</p><p>其中variable是data中的变量, variable有三种类型: 字符串、对象、数组.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.classA</span> &#123;</span></span><br><span class="line"><span class="undefined">      color: red;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.classB</span> &#123;</span></span><br><span class="line"><span class="undefined">      color: blue;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.classC</span> &#123;</span></span><br><span class="line"><span class="undefined">      font-size: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1. class绑定: :class='xxx'<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"classC"</span> <span class="attr">:class</span>=<span class="string">"myClass"</span>&gt;</span>xxx是字符串<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"classC"</span> <span class="attr">:class</span>=<span class="string">"&#123;classA:hasClassA,classB:hasClassB&#125;"</span>&gt;</span>xxx是对象<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"['classA','classC']"</span>&gt;</span>xxx是对象<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"update"</span>&gt;</span>更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="actionscript">      myClass:<span class="string">"classA"</span>,</span></span><br><span class="line"><span class="actionscript">      hasClassA:<span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">      hasClassB:<span class="literal">true</span>,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      update()&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.myClass = <span class="string">"classB"</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.hasClassA = !<span class="keyword">this</span>.hasClassA;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.hasClassB = !<span class="keyword">this</span>.hasClassB;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-style绑定">3.style绑定</h2><blockquote><p>html用法 :style=&quot;{ color: activeColor, fontSize: fontSize + ‘px’ }&quot;<br>其中activeColor/fontSize是data中的变量</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>2. style绑定<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">"&#123;color:activeColor, fontSize: fontSize + 'px'&#125;"</span>&gt;</span>:style="&#123; color: activeColor, fontSize: fontSize + 'px' &#125;"<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"update"</span>&gt;</span>更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'#demo'</span>,</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="actionscript">      activeColor:<span class="string">"red"</span>,</span></span><br><span class="line"><span class="undefined">      fontSize:20,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">      update()&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.activeColor = <span class="string">"yellowGreen"</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.fontSize = <span class="number">50</span>-<span class="keyword">this</span>.fontSize;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue的计算属性与监视</title>
      <link href="/Vue1-1.html"/>
      <url>/Vue1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>计算属性—&gt;computed  监视—&gt;watch</p><a id="more"></a><h2 id="1-计算属性">1.计算属性</h2><blockquote><p>在computed属性对象中定义计算属性的方法, 在页面中使用{{方法名}}来显示计算的结果.</p><p>在使用计算属性时, 都会用到缓存. 如果你不希望有缓存, 请用方法来替代.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  姓: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"First Name"</span> <span class="attr">v-model</span>=<span class="string">"firstName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Last Name"</span> <span class="attr">v-model</span>=<span class="string">"lastName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--fullName1是根据fistName和lastName计算产生--&gt;</span></span><br><span class="line">  姓名1(单向): <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Full Name1"</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">v-model</span>=<span class="string">"fullName1"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;fullName1&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="comment">&lt;!--注意:fullName1计算属性不一定每次都会调用--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;fullName()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="comment">&lt;!--注意:这里用方法也可以实现想要达到的效果,不同的是方法没有缓存--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="actionscript">      firstName:<span class="string">"A"</span>,</span></span><br><span class="line"><span class="actionscript">      lastName:<span class="string">"B"</span>,</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods:&#123;</span></span><br><span class="line"><span class="undefined">      fullName()&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    computed:&#123;</span></span><br><span class="line"><span class="actionscript">      fullName1(vmObj)&#123;<span class="comment">//当前vm对象,即this</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">" "</span> + vmObj.lastName;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-监视属性">2.监视属性</h2><blockquote><p>通过vm对象的$watch()或watch配置来监视指定的属性, 当属性变化时, 回调函数自动调用, 在函数内部进行计算</p></blockquote><p>  在计算一些页面中的数据时, 计算属性与监视相比更简单一些. 但监视常用来做<font style="color:red;"><strong>深度监视</strong>.</font></p><h3 id="①配置监视">①配置监视</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  姓: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"First Name"</span> <span class="attr">v-model</span>=<span class="string">"firstName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Last Name"</span> <span class="attr">v-model</span>=<span class="string">"lastName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--fullName1是根据fistName和lastName计算产生--&gt;</span></span><br><span class="line">  姓名2(单向): <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Full Name2"</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">v-model</span>=<span class="string">"fullName2"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="actionscript">      firstName:<span class="string">"A"</span>,</span></span><br><span class="line"><span class="actionscript">      lastName:<span class="string">"B"</span>,</span></span><br><span class="line"><span class="actionscript">      fullName2:<span class="string">"A B"</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    watch:&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">//监视firstName</span></span></span><br><span class="line"><span class="actionscript">      firstName:<span class="function"><span class="keyword">function</span> <span class="params">(newVal,oldVal)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.fullName2 = newVal + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="②-watch-监视">②$watch()监视</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  姓: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"First Name"</span> <span class="attr">v-model</span>=<span class="string">"firstName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Last Name"</span> <span class="attr">v-model</span>=<span class="string">"lastName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--fullName1是根据fistName和lastName计算产生--&gt;</span></span><br><span class="line">  姓名2(单向): <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Full Name2"</span> <span class="attr">readonly</span>=<span class="string">"readonly"</span> <span class="attr">v-model</span>=<span class="string">"fullName2"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="actionscript">      firstName:<span class="string">"A"</span>,</span></span><br><span class="line"><span class="actionscript">      lastName:<span class="string">"B"</span>,</span></span><br><span class="line"><span class="actionscript">      fullName2:<span class="string">"A B"</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    watch:&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">//监视firstName</span></span></span><br><span class="line"><span class="actionscript">      firstName:<span class="function"><span class="keyword">function</span> <span class="params">(newVal,oldVal)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.fullName2 = newVal + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="actionscript">  vm.$watch(<span class="string">"lastName"</span>,<span class="function"><span class="keyword">function</span> <span class="params">(newVal,oldVal)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//监视lastName</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.fullName2 = <span class="keyword">this</span>.firstName + <span class="string">" "</span> + newVal;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-计算属性高级">3.计算属性高级</h2><blockquote><p>通过getter/setter实现对属性数据的显示和监视, 计算属性存在缓存, 多次读取只执行一次getter计算</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">  姓: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"First Name"</span> <span class="attr">v-model</span>=<span class="string">"firstName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Last Name"</span> <span class="attr">v-model</span>=<span class="string">"lastName"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--fullName1是根据fistName和lastName计算产生--&gt;</span></span><br><span class="line">  姓名3(双向): <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Full Name3"</span> <span class="attr">v-model</span>=<span class="string">"fullName3"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">    data:&#123;</span></span><br><span class="line"><span class="actionscript">      firstName:<span class="string">"A"</span>,</span></span><br><span class="line"><span class="actionscript">      lastName:<span class="string">"B"</span>,</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    computed:&#123;</span></span><br><span class="line"><span class="undefined">      fullName3:&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//回调函数,计算当初始化或该属性的相关属性值改变时,计算当前的属性值</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">get</span>()&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">" "</span> + <span class="keyword">this</span>.lastName;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//回调函数,监视当前的属性值,当其改变时,更新与它相关的属性值</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">set</span>(value)&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> names = value.split(<span class="string">' '</span>);</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.firstName = names[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.lastName = names[<span class="number">1</span>];</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>实现页面中双向的数据更新, 可以用计算属性的setter/getter实现, 也可以用监视来实现.</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue初识</title>
      <link href="/Vue1-0.html"/>
      <url>/Vue1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>初步认识VUE</p><a id="more"></a><h2 id="1-Vue-js是什么">1. Vue.js是什么?</h2><ul><li><ol><li>一位华裔前Google工程师(尤雨溪)开发的<strong>前端js库</strong></li></ol></li><li><ol start="2"><li>作用: 动态构建用户界面即前端界面</li></ol></li><li><ol start="3"><li>特点:</li></ol><p>①遵循MVVM模式, M指Model数据, V指View, VM指的是view Model对象</p><p>②编码简洁, 体积小, 运行效率高, 移动/PC端开发</p><p>③它本身只关注UI, 可以轻松引入vue插件和其它第三库开发项目</p></li><li><ol start="4"><li>与其它框架的关联:</li></ol><p>①借鉴angular的<strong>模板</strong>和<strong>数据绑定</strong>技术</p><p>②借鉴react的<strong>组件化</strong>和<strong>虚拟DOM</strong>技术</p></li><li><ol start="5"><li>Vue包含一系列的扩展插件(库):</li></ol><p>①vue-cli: vue脚手架</p><p>②vue-resource(axios): ajax请求</p><p>③vue-router: 路由</p><p>④vuex: 状态管理</p><p>⑤vue-lazyload: 图片懒加载</p><p>⑥vue-scroller: 页面滑动相关</p><p>⑦mint-ui: 基于vue的组件库(移动端)</p><p>⑧element-ui: 基于vue的组件库(PC端)</p></li></ul><h2 id="2-基本使用">2. 基本使用</h2><ol><li><p>引入vue.js文件</p></li><li><p>创建Vue实例对象(vm), 指定选项(配置)对象</p><p>el : 指定Dom标签容器的选择器<br>data : 指定初始化状态数据的对象/函数(返回一个对象)</p></li><li><p>在页面模板中使用}}或vue指令, 来显示数据</p></li></ol><p>例子:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  1. 引入Vue.js</span></span><br><span class="line"><span class="comment">  2. 创建Vue对象</span></span><br><span class="line"><span class="comment">    el : 指定根element(选择器)</span></span><br><span class="line"><span class="comment">    data : 初始化数据(页面可以访问)</span></span><br><span class="line"><span class="comment">  3. 双向数据绑定 : v-model</span></span><br><span class="line"><span class="comment">  4. 显示数据 : &#123;&#123;xxx&#125;&#125;</span></span><br><span class="line"><span class="comment">  5. 理解vue的mvvm实现</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--实现输入框与p标签的显示数据同步更新--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"username"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//创建vm实例</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;<span class="comment">//配置对象</span></span></span><br><span class="line"><span class="actionscript">            el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">            data:&#123;</span></span><br><span class="line"><span class="actionscript">                username:<span class="string">'Vue!'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">MVVM:</span></span><br><span class="line"><span class="comment">model:模型,即数据对象(data)</span></span><br><span class="line"><span class="comment">view:视图,模板页面</span></span><br><span class="line"><span class="comment">viewModel:视图模型,即Vue的一个实例</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-模板的常见语法">3.模板的常见语法</h2><blockquote><p>模板(视图)的理解:<br>动态的html页面, 包含了一些JS语法代码、大括号表达式、指令(以v-开头的自定义标签属性).</p></blockquote><blockquote><p>(1)双大括号表达式<br>语法: {{exp}} 或 {{{exp}}}<br>功能: 向页面输出数据, 可以调用对象的方法</p></blockquote><blockquote><p>(2)VUE指令：</p><p>①强制数据绑定<br>功能: 指定变化的属性值<br>完整写法: v-bind:xxx=‘yyy’  //yyy会作为表达式解析执行<br>简洁写法: :xxx=‘yyy’</p><p>②绑定事件监听<br>功能: 绑定指定事件名的回调函数<br>完整写法: v-on:click=‘xxx’<br>简洁写法: @click=‘xxx’</p></blockquote><p>例子:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1. 双大括号表达式<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;content.toUpperCase()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">"tag"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">"tag"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>2. 指令一: 强制数据绑定<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"url"</span>&gt;</span>访问指定站点<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">"url"</span>&gt;</span>访问指定站点2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"url"</span>&gt;</span>访问指定站点3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>3. 指令二: 绑定事件监听<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"test1"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"test2(content)"</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="comment">&lt;!--带参的方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el:<span class="string">"#demo"</span>,</span></span><br><span class="line"><span class="undefined">        data:&#123;</span></span><br><span class="line"><span class="actionscript">            content:<span class="string">"Hello Vue!!!"</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">            tag:"<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'https://www.baidu.com/'</span>&gt;</span>test<span class="tag">&lt;/<span class="name">a</span>&gt;</span>",</span></span></span><br><span class="line"><span class="actionscript">            url:<span class="string">"https://www.baidu.com/"</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods:&#123;</span></span><br><span class="line"><span class="actionscript">            test1(event)&#123;<span class="comment">//默认事件参数</span></span></span><br><span class="line"><span class="undefined">                alert(event);</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"test1()"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            test2(value)&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"test2("</span>+value+<span class="string">")"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-Vue对象的常用配置选项">4. Vue对象的常用配置选项</h2><ul><li><blockquote><p>①el:</p><p>指定dom标签容器的选择器, Vue就会管理对应的标签及其子标签</p></blockquote></li><li><blockquote><p>②data: 对象或函数类型<br>指定初始化状态属性数据的对象, vm也会自动拥有data中所有属性, 页面中可以直接访问使用<br>数据代理: 由vm对象来代理对data中所有属性的操作(读/写)</p></blockquote></li><li><blockquote><p>③methods: 包含多个方法的对象<br>供页面中的事件指令来绑定回调, 回调函数默认有event参数, 但也可以指定自己的参数<br>所有的方法由vue对象来调用, 访问data中的属性直接使用 <a href="http://this.xxx" target="_blank" rel="noopener">this.xxx</a></p></blockquote></li><li><blockquote><p>④computed: 包含多个方法的对象<br>对状态属性进行计算返回一个新的数据, 供页面获取显示<br>一般情况下是相当于是一个只读的属性<br>利用set/get方法来实现属性数据的计算读取, 同时监视属性数据的变化<br>如何给对象定义get/set属性<br>在创建对象时指定: get name () {return xxx} / set name (value) {}<br>对象创建之后指定: Object.defineProperty(obj, age, {get(){}, set(value){}})</p></blockquote></li><li><blockquote><p>⑤watch: 包含多个属性监视的对象<br>分为一般监视和深度监视<br>xxx: function(value){}<br>xxx : {<br>deep : true,<br>handler : fun(value)<br>}<br>另一种添加监视方式: vm.$watch(‘xxx’, function(value){})</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-DBUtils</title>
      <link href="/JDBC1-10.html"/>
      <url>/JDBC1-10.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>DBUtils------Apache下的一个JDBC开源工具类库</p><a id="more"></a><h2 id="1-Apache—DBUtils简介">1.Apache—DBUtils简介</h2><blockquote><ul><li><p>commons-dbutils 是 Apache 组织提供的一个开源 JDBC工具类库，它是对JDBC的简单封装，学习成本极低，并且使用dbutils能极大简化jdbc编码的工作量，同时也不会影响程序的性能.</p></li><li><p>API介绍:</p></li></ul><p>  –org.apache.commons.dbutils.QueryRunner</p><p>  –org.apache.commons.dbutils.ResultSetHandler</p><p>  –工具类: org.apache.commons.dbutils.DbUtils、…</p></blockquote><blockquote><ul><li>DbUtils类: 提供如关闭连接、装载JDBC驱动程序等常规工作的工具类，里面的所有方法都是静态的。主要方法如下:</li></ul><p>  –public static void close(…) throws java.sql.SQLException：　DbUtils类提供了三个重载的关闭方法。这些方法检查所提供的参数是不是NULL，如果不是的话，它们就关闭Connection、Statement和ResultSet.</p><p>  –public static void closeQuietly(…): 这一类方法不仅能在Connection、Statement和ResultSet为NULL情况下避免关闭，还能隐藏一些在程序中抛出的SQLEeception.</p><p>  –public static void commitAndCloseQuietly(Connection conn)： 用来提交连接，然后关闭连接，并且在关闭连接时不抛出SQL异常.</p><p>  –public static boolean loadDriver(java.lang.String driverClassName)：这一方装载并注册JDBC驱动程序，如果成功就返回true. 使用该方法，你不需要捕捉这个异常ClassNotFoundException.</p></blockquote><h2 id="2-DBUtils的更新操作">2.DBUtils的更新操作</h2><blockquote><p>通过QueryRunner类执行SQL语句, 并将结果集按指定要求返回.</p><ul><li><p>QueryRunner类简单化了SQL查询，它与ResultSetHandler组合在一起使用可以完成大部分的数据库操作，能够大大减少编码量.</p></li><li><p>QueryRunner类提供了两个构造方法:</p></li></ul><p>  –默认的构造方法</p><p>  –需要一个 javax.sql.DataSource 来作参数的构造方法.</p><ul><li>QueryRunner类的主要方法:</li></ul><p>  –public Object query(Connection conn, String sql, Object[] params, ResultSetHandler rsh) throws SQLException：执行一个查询操作，在这个查询中，对象数组中的每个元素值被用来作为查询语句的置换参数。该方法会自行处理 PreparedStatement 和 ResultSet 的创建和关闭.</p><p>  –public Object query(String sql, Object[] params, ResultSetHandler rsh) throws SQLException:　几乎与第一种方法一样；唯一的不同在于它不将数据库连接提供给方法，并且它是从提供给构造方法的数据源(DataSource) 或使用的setDataSource 方法中重新获得 Connection.</p><p>  –public Object query(Connection conn, String sql, ResultSetHandler rsh) throws SQLException : 执行一个不需要置换参数的查询操作.</p><p>  –public int update(Connection conn, String sql, Object[] params) throws SQLException:用来执行一个更新（插入、更新或删除）操作.</p><p>  –public int update(Connection conn, String sql) throws SQLException：用来执行一个不需要置换参数的更新操作.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDBUtils</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建执行SQL的 QueryRunner 对象</span></span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    <span class="comment">//2. 准备SQL语句,SQL可以是DELETE INSERT UPDATE操作</span></span><br><span class="line">    String sql = <span class="string">"delete from Student where id in (?,?)"</span>;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//4. 准备数据库连接</span></span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        <span class="comment">//5. 传入相应参数,执行SQL</span></span><br><span class="line">        qr.update(conn, sql, <span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, <span class="keyword">null</span>, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-DBUtils的查询操作">3.DBUtils的查询操作</h2><blockquote><p>通过DBUtils的QueryRunner类的query()方法实现数据库查询, 但是这里要给query方法的第三个参数传一个 ResultSetHandler 接口的实现类.</p><ul><li><p>该接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式.</p></li><li><p>ResultSetHandler 接口提供了一个单独的方法: Object handle (java.sql.ResultSet .rs), 处理结果集时就是调用的该方法, 且query()方法的返回值就是 ResultSetHandler 实现类的 handle() 方法的返回值.</p></li></ul></blockquote><blockquote><p>DBUtils提供的 ResultSetHandler 的实现类:</p><ul><li><p>BeanHandler：将结果集中的第一行数据封装到一个对应的JavaBean实例中.</p></li><li><p>BeanListHandler：将结果集中的每一行数据都封装到一个对应的JavaBean实例中，存放到List里.</p></li><li><p>MapHandler：将结果集中的第一行数据封装到一个Map里，key是列名，value就是对应的值.</p></li><li><p>MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List.</p></li><li><p>ScalarHandler: 把结果集转换为一个值(该值可以是任意基本类型和String、Date 等)返回</p></li><li><p>ArrayHandler：把结果集中的第一行数据转成对象数组.</p></li><li><p>ArrayListHandler：把结果集中的每一行数据都转成一个数组，再存放到List中.</p></li><li><p>ColumnListHandler：将结果集中某一列的数据存放到List中。</p></li><li><p>KeyedHandler(name)：将结果集中的每一行数据都封装到一个Map里，再把这些map再存到一个map里，其key为指定的key.</p></li></ul></blockquote><h3 id="A-BeanListHandler">A.BeanListHandler</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBeanListHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"SELECT id,name,email,birth date from Student where id in (?,?)"</span>;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        List&lt;Student&gt; list = qr.query(conn, sql, <span class="keyword">new</span> BeanListHandler&lt;Student&gt;(Student.class),<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, <span class="keyword">null</span>, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-MapListHandler">B.MapListHandler</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMapListHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"SELECT id,name,email,birth date from Student where id in (?,?)"</span>;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; map = qr.query(conn, sql, <span class="keyword">new</span> MapListHandler(),<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, <span class="keyword">null</span>, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="C-ScalarHandler">C.ScalarHandler</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testScalarHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryRunner qr = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">    String sql = <span class="string">"SELECT name,birth date from Student where id in (?,?)"</span>;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        <span class="comment">//注意: 这个查询结果只是一个值</span></span><br><span class="line">        Object obj = qr.query(conn, sql, <span class="keyword">new</span> ScalarHandler&lt;&gt;(),<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, <span class="keyword">null</span>, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-数据库连接池</title>
      <link href="/JDBC1-9.html"/>
      <url>/JDBC1-9.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JAVA------数据库连接池</p><a id="more"></a><h2 id="1-JDBC数据库连接池的必要性">1.JDBC数据库连接池的必要性</h2><blockquote><ul><li>在使用开发基于数据库的web程序时，<strong>传统的模式</strong>基本是按以下步骤:</li></ul><p>–在主程序（如servlet、beans）中建立数据库连接.</p><p>–进行sql操作</p><p>–断开数据库连接</p><ul><li>这种模式开发，存在的问题:</li></ul><p>–普通的JDBC数据库连接使用 DriverManager 来获取，每次向数据库建立连接的时候都要将 Connection 加载到内存中，再验证用户名和密码(得花费0.05s～1s的时间)。需要数据库连接的时候，就向数据库要求一个，执行完成后再断开连接。这样的方式将会消耗大量的资源和时间。<strong>数据库的连接资源并没有得到很好的重复利用</strong>.若同时有几百人甚至几千人在线，频繁的进行数据库连接操作将占用很多的系统资源，严重的甚至会造成服务器的崩溃.</p><p>–对于每一次数据库连接，使用完后都得断开。否则，如果程序出现异常而未能关闭，将会导致数据库系统中的内存泄漏，最终将导致重启数据库.</p><p>–这种开发不能控制被创建的连接对象数，系统资源会被毫无顾及的分配出去，如连接过多，也可能导致内存泄漏，服务器崩溃。</p></blockquote><h2 id="2-数据库连接池">2.数据库连接池</h2><blockquote><p>在真正的开发中, 我们几乎不用之前的方法获取数据库连接.</p><ul><li><p>为解决传统开发中的数据库连接问题，可以采用数据库连接池技术.</p></li><li><p>数据库连接池的<strong>基本思想</strong>就是为数据库连接建立一个“缓冲池”。预先在缓冲池中放入一定数量的连接，当需要建立数据库连接时，只需从“缓冲池”中取出一个，使用完毕之后再放回去.</p></li><li><p><strong>数据库连接池</strong>负责分配、管理和释放数据库连接，它<strong>允许应用程序重复使用一个现有的数据库连接，而不是重新建立一个</strong>.</p></li><li><p>数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中，这些数据库连接的数量是由<strong>最小数据库连接数来设定</strong>的。无论这些数据库连接是否被使用，连接池都将一直保证至少拥有这么多的连接数量。连接池的<strong>最大数据库连接数量</strong>限定了这个连接池能占有的最大连接数，当应用程序向连接池请求的连接数超过最大连接数量时，这些请求将被加入到等待队列中.</p></li></ul></blockquote><blockquote><p>数据库连接池的优点:</p><p>-1. 资源重用</p><p>-2. 更快的系统反应速度</p><p>-3. 新的资源分配手段</p><p>-4. 统一的连接管理，避免数据库连接泄露</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_15.png" alt="JDBC_15"></p><blockquote><p>两种常用的开源数据库连接池:</p><ul><li>JDBC 的数据库连接池使用 javax.sql.DataSource 来表示，DataSource 只是一个接口，该接口通常由服务器(Weblogic, WebSphere, Tomcat)提供实现，也有一些开源组织提供实现：</li></ul><p>–DBCP 数据库连接池</p><p>–C3P0 数据库连接池</p><ul><li>DataSource 通常被称为数据源，它包含连接池和连接池管理两个部分，习惯上也经常把 DataSource 称为连接池</li></ul></blockquote><p><font style="color:red;font-size:1.2em;">注意: 使用数据库连接池后 ,在关闭数据库连接池返回的Connection对象时, 并不是真正的把数据库连接关闭, 而是将该连接还给数据库连接池.</font></p><h2 id="3-DBCP数据源">3.DBCP数据源</h2><blockquote><p>DBCP数据源即DBCP数据库连接池</p><p>•DBCP 是 Apache 软件基金组织下的开源连接池实现，该连接池依赖该组织下的另一个开源系统：Common-pool. 如需使用该连接池实现，应在系统中增加如下两个 jar 文件:</p><p>–Commons-dbcp.jar：连接池的实现</p><p>–Commons-pool.jar：连接池实现的依赖库</p><p>•Tomcat 的连接池正是采用该连接池来实现的, 该数据库连接池既可以与应用服务器整合使用，也可由应用程序独立使用.</p></blockquote><h3 id="A-通过BasicDataSource">A.通过BasicDataSource</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp2.BasicDataSource;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 创建 DBCP 数据源实例</span></span><br><span class="line">        BasicDataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line">        dataSource = <span class="keyword">new</span> BasicDataSource();</span><br><span class="line">        <span class="comment">//2. 为数据源实例指定必需的属性值</span></span><br><span class="line">        dataSource.setUsername(<span class="string">"root"</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">"root"</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">"jdbc:sqlserver://localhost:1433;DatabaseName=SPJDB"</span>);</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">"com.microsoft.sqlserver.jdbc.SQLServerDriver"</span>);</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//3. 为数据源指定一些可选的属性值</span></span><br><span class="line">        <span class="comment">//1) 指定数据库连接池中初始化连接数的个数</span></span><br><span class="line">        dataSource.setInitialSize(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//2) 指定最小连接数: 在数据库连接池中保存的最少的空闲连接的数量</span></span><br><span class="line">        dataSource.setMinIdle(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//3) 等待数据库连接池分配连接的最长时间(ms). 超时将出现异常</span></span><br><span class="line">        dataSource.setMaxWaitMillis(<span class="number">5000</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//4. 从数据源中获取数据库连接</span></span><br><span class="line">            conn = dataSource.getConnection();</span><br><span class="line">            System.out.println(conn.getClass());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(dataSource != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    dataSource.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-通过DataSourceFactory">B.通过DataSourceFactory</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*1. 加载 dbcp 的properties配置文件: 文件中的键需要来自 BasicDataSource 的属性</span></span><br><span class="line"><span class="comment"> *2. 调用 BasicDataSourceFactory 的 createDataSource 方法创建 DataSource 实例</span></span><br><span class="line"><span class="comment"> *3. 从 DataSource 实例中获取数据库连接</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataSourceFactory</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//注意dbcp.properties在项目的src目录下</span></span><br><span class="line">    InputStream inStream = test.class.getClassLoader()</span><br><span class="line">        .getResourceAsStream(<span class="string">"dbcp.properties"</span>);</span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.load(inStream);</span><br><span class="line">    DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line">    dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">    System.out.println(dataSource.getConnection());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#dbcp.properties:</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:sqlserver://localhost:1433;DatabaseName=SPJDB</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maxWaitMillis</span>=<span class="string">5000</span></span><br></pre></td></tr></table></figure><h2 id="4-C3P0数据源">4.C3P0数据源</h2><blockquote><p>需要的外部jar包:</p><p>-1. c3p0-0.9.5.2.jar</p><p>-2. mchange-commons-java-0.2.12.jar</p></blockquote><h3 id="A-不使用配置文件">A.不使用配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testC3P0</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    ComboPooledDataSource cpds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">    cpds.setDriverClass( <span class="string">"com.microsoft.sqlserver.jdbc.SQLServerDriver"</span> );</span><br><span class="line">    cpds.setJdbcUrl( <span class="string">"jdbc:sqlserver://localhost:1433;DatabaseName=SPJDB"</span> );</span><br><span class="line">    cpds.setUser(<span class="string">"root"</span>);</span><br><span class="line">    cpds.setPassword(<span class="string">"root"</span>);</span><br><span class="line">    System.out.println(cpds.getConnection());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-使用配置文件">B.使用配置文件</h3><blockquote><p>可以使用 properties 配置文件, 也可以使用 xml 配置文件, 建议使用 xml 文件</p><p>xml 文件名为: c3p0-config.xml, 该xml文件在项目的src目录下</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">"helloc3p0"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定数据源的基本属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.microsoft.sqlserver.jdbc.SQLServerDriver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span>jdbc:sqlserver://localhost:1433;DatabaseName=SPJDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- 若数据库中连接数不足时,一次向数据库服务器申请多少个连接 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireIncrement"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 初始化数据库连接池时连接的数量 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池中的最小的数据库连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接池中的最大的数据库连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- C3P0数据库连接池可以维护的Statement的个数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 每个连接同时可以使用的Statement对象的个数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatementsPerConnection"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testC3P0</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    DataSource ds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"helloc3p0"</span>);</span><br><span class="line">    System.out.println(ds.getConnection());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-重构JDBCTools类">5.重构JDBCTools类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 操作 JDBC 的工具类,封装了一些常用的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">//数据库连接池</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        ds = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"helloc3p0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据库连接:</span></span><br><span class="line"><span class="comment"> * 通过读取配置文件,根据配置信息从数据库服务器获取一个连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 开始事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beginTx</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 提交事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">commit</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.commit();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 回滚事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rollback</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭 ResultSet Statement 和 Connection 资源</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(ResultSet rs,Statement state,Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(state != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                state.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-批处理</title>
      <link href="/JDBC1-8.html"/>
      <url>/JDBC1-8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>批处理 JDBC 语句提高处理速度</p><a id="more"></a><blockquote><p>批处理:</p><p>向数据库表中插入n多条SQL语句, 如何处理一下, 提高执行的性能.</p></blockquote><p>先看一下几种方式的对比, 向表中插入10万条数据:</p><h2 id="1-只使用Statement">1.只使用Statement</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDBCTools.class:</span></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 操作 JDBC 的工具类,封装了一些常用的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据库连接:</span></span><br><span class="line"><span class="comment"> * 通过读取配置文件,根据配置信息从数据库服务器获取一个连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        InputStream is = JDBCTools.class.getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">        Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">        pro.load(is);</span><br><span class="line">        String url = pro.getProperty(<span class="string">"jdbc"</span>);</span><br><span class="line">        String user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">        String password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        Class.forName(pro.getProperty(<span class="string">"driver"</span>));</span><br><span class="line">        Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 开始事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">beginTx</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 提交事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">commit</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.commit();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 回滚事务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rollback</span><span class="params">(Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭 ResultSet Statement 和 Connection 资源</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(ResultSet rs,Statement state,Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(state != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                state.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DAO.class:</span></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的更新方法,包括: Insert Delete Update</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 获取数据库连接</span></span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//2. 执行 SQL语句</span></span><br><span class="line">            psmt.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(<span class="keyword">null</span>, psmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的查询方法,SQL为select类型.</span></span><br><span class="line"><span class="comment"> * 查询结果最多是一行记录.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">get</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        List&lt;T&gt; list = getForList(clazz, sql, args);</span><br><span class="line">        <span class="keyword">if</span>(list.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的查询方法,SQL为select类型.</span></span><br><span class="line"><span class="comment"> * 查询结果可以为多行记录(0~n).</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">List&lt;T&gt;  <span class="title">getForList</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object ... args)</span></span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//1. 获取连接再获取结果集</span></span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line">            <span class="comment">//2. 将结果集转换为Map的List</span></span><br><span class="line">            List&lt;Map&lt;String, Object&gt;&gt; values = handleResultSetToMapList(rs);</span><br><span class="line">            <span class="comment">//3. 将 Map 的List 转换为 JavaBean 对应的List</span></span><br><span class="line">            list = transferMapListToBeanList(clazz, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询方法,结果为一行中的一列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="keyword">public</span> &lt;E&gt; <span class="function">E <span class="title">getForValue</span><span class="params">(String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                <span class="keyword">return</span> (E)rs.getObject(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, psmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取结果集的 ColumnLabel 对应的 List</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getColumnLabels</span><span class="params">(ResultSet rs)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        List&lt;String&gt; labels = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; rsmd.getColumnCount();i++) &#123;</span><br><span class="line">            labels.add(rsmd.getColumnLabel(i+<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> labels;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集得到一个 Map 的List, 其中一个 Map 代表一个记录.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Map&lt;String, Object&gt;&gt; handleResultSetToMapList(ResultSet rs) <span class="keyword">throws</span> SQLException&#123;</span><br><span class="line">        List&lt;String&gt; labels = <span class="keyword">this</span>.getColumnLabels(rs);</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; values = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(String key :labels) &#123;</span><br><span class="line">                Object value = rs.getObject(key);</span><br><span class="line">                map.put(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            values.add(map);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将 Map 的 List 转换为 JavaBean对象的 List</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InstantiationException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InvocationTargetException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">private</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">transferMapListToBeanList</span><span class="params">(Class&lt;T&gt; clazz, List&lt;Map&lt;String, Object&gt;&gt; values)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> InstantiationException, IllegalAccessException, InvocationTargetException </span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        T bean = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(values.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(Map&lt;String,Object&gt; m:values) &#123;</span><br><span class="line">                bean = clazz.newInstance();</span><br><span class="line">                <span class="keyword">for</span>(Map.Entry&lt;String, Object&gt; entry:m.entrySet()) &#123;</span><br><span class="line">                    String propertyName = entry.getKey();</span><br><span class="line">                    Object propertyValue = entry.getValue();</span><br><span class="line">                    BeanUtils.setProperty(bean, propertyName, propertyValue);</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(bean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBatchWithStatement</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    Statement state = <span class="keyword">null</span>;</span><br><span class="line">    String sql = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        JDBCTools.beginTx(conn);</span><br><span class="line">        state = conn.createStatement();</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100000</span>;i ++) &#123;</span><br><span class="line">            sql = <span class="string">"INSERT INTO Student VALUES("</span>+(i+<span class="number">1</span>)</span><br><span class="line">                +<span class="string">",'"</span>+<span class="string">"name_"</span>+i+<span class="string">"','alian@qq.com','1999-09-09')"</span>;</span><br><span class="line">            state.executeUpdate(sql);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"Time:"</span>+(end-begin));<span class="comment">//Time:30442 左右</span></span><br><span class="line">        JDBCTools.commit(conn);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        JDBCTools.rollback(conn);</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, state, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-只使用PreparedStatement">2.只使用PreparedStatement</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBatchWithPreparedStatement</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">    String sql = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        JDBCTools.beginTx(conn);</span><br><span class="line">        sql = <span class="string">"INSERT INTO Student VALUES(?,?,?,?)"</span>;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date(<span class="keyword">new</span> java.util.Date().getTime());</span><br><span class="line">        psmt = conn.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100000</span>;i ++) &#123;</span><br><span class="line">            psmt.setInt(<span class="number">1</span>, i+<span class="number">1</span>);</span><br><span class="line">            psmt.setString(<span class="number">2</span>, <span class="string">"name_"</span>+i);</span><br><span class="line">            psmt.setString(<span class="number">3</span>, <span class="string">"name_"</span>+i+<span class="string">"@qq.cp.com"</span>);</span><br><span class="line">            psmt.setDate(<span class="number">4</span>, date);</span><br><span class="line">            psmt.executeUpdate();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"Time:"</span>+(end-begin));<span class="comment">//Time:19754</span></span><br><span class="line">        JDBCTools.commit(conn);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        JDBCTools.rollback(conn);</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, psmt, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-使用Batch">3.使用Batch</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBatch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">    String sql = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        JDBCTools.beginTx(conn);</span><br><span class="line">        sql = <span class="string">"INSERT INTO Student VALUES(?,?,?,?)"</span>;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date(<span class="keyword">new</span> java.util.Date().getTime());</span><br><span class="line">        psmt = conn.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100000</span>;i ++) &#123;</span><br><span class="line">            psmt.setInt(<span class="number">1</span>, i+<span class="number">1</span>);</span><br><span class="line">            psmt.setString(<span class="number">2</span>, <span class="string">"name_"</span>+i);</span><br><span class="line">            psmt.setString(<span class="number">3</span>, <span class="string">"name_"</span>+i+<span class="string">"@qq.cp.com"</span>);</span><br><span class="line">            psmt.setDate(<span class="number">4</span>, date);</span><br><span class="line">            <span class="comment">// "积攒" SQL</span></span><br><span class="line">            psmt.addBatch();</span><br><span class="line">            <span class="comment">//当"积攒"到一定程度时,统一向数据库发送一次SQL 并清空"积攒"</span></span><br><span class="line">            <span class="keyword">if</span>((i+<span class="number">1</span>)%<span class="number">300</span>==<span class="number">0</span>) &#123;</span><br><span class="line">                psmt.executeBatch();</span><br><span class="line">                psmt.clearBatch();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">100000</span>%<span class="number">300</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            psmt.executeBatch();</span><br><span class="line">            psmt.clearBatch();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"Time:"</span>+(end-begin));<span class="comment">//Time:2546</span></span><br><span class="line">        JDBCTools.commit(conn);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        JDBCTools.rollback(conn);</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, psmt, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-数据库事务</title>
      <link href="/JDBC1-7.html"/>
      <url>/JDBC1-7.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>数据库事务</p><a id="more"></a><h2 id="1-事务的简介">1.事务的简介</h2><blockquote><ul><li><p>在数据库中,所谓事务是指<strong>一组逻辑操作单元</strong>,<strong>使数据从一种状态变换到另一种状态</strong>.</p></li><li><p>为确保数据库中数据的<strong>一致性</strong>,数据的操纵应当是离散的成组的逻辑单元:当它全部完成时,数据的一致性可以保持,而当这个单元中的一部分操作失败,整个事务应全部视为错误,所有从起始点以后的操作应全部回退到开始状态.</p></li><li><p>事务的操作:先定义开始一个事务,然后对数据作修改操作,这时如果<strong>提交</strong>(COMMIT),这些修改就永久地保存下来,如果<strong>回退</strong>(ROLLBACK),数据库管理系统将放弃所作的所有修改而回到开始事务时的状态.</p></li></ul></blockquote><h2 id="2-事务的属性">2.事务的属性</h2><blockquote><ul><li>事务的ACID(acid)属性:</li></ul><p>–1. 原子性（Atomicity）<br>原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生.</p><p>–2. 一致性（Consistency）<br>事务必须使数据库从一个一致性状态变换到另外一个一致性状态.</p><p>–3. 隔离性（Isolation）<br>事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰.</p><p>–4. 持久性（Durability）<br>持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响.</p></blockquote><h2 id="3-JDBC事务处理">3.JDBC事务处理</h2><blockquote><ul><li><p>事务：指构成单个逻辑工作单元的操作集合</p></li><li><p>事务处理：保证所有事务都作为一个工作单元来执行，即使出现了故障，都不能改变这种执行方式。当在一个事务中执行多个操作时，要么所有的事务都被提交(commit)，要么整个事务回滚(rollback)到最初状态</p></li><li><p>当一个连接对象被创建时，默认情况下是自动提交事务：每次执行一个 SQL 语句时，如果执行成功，就会向数据库自动提交，而不能回滚</p></li><li><p>为了让多个 SQL 语句作为一个事务执行:</p></li></ul><p>–调用 Connection 对象的 setAutoCommit(false); 以取消自动提交事务</p><p>–在所有的 SQL 语句都成功执行后，调用 commit(); 方法提交事务</p><p>–在出现异常时，调用 rollback(); 方法回滚事务</p><p>–若此时 Connection 没有被关闭, 则需要恢复其自动提交状态</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 账户1给账户2转账1000元.</span></span><br><span class="line"><span class="comment"> *  若两个执行的SQL之间有异常,则有的SQL不能执行,而出现数据不同步.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJDBC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DAO dao = <span class="keyword">new</span> DAO();</span><br><span class="line">    String sql = <span class="string">"UPDATE Account SET balance = balance-? WHERE id = ?"</span>;</span><br><span class="line">    dao.update(sql,<span class="number">1000</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//int i = 10/0;//若打开这行代码的注释,则不能给账户2添加1000元.</span></span><br><span class="line">    sql = <span class="string">"UPDATE Account SET balance = balance+? WHERE id = ?"</span>;</span><br><span class="line">    dao.update(sql,<span class="number">1000</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>关于事务:</p><p>–1. 如果是执行了多个SQL操作, 每个SQL操作都有自己单独的连接, 则无法保证事务.</p><p>–2. 具体步骤:</p><ol><li><p>事务操作开始前, 要开启事务(即关闭默认commit): conn.setAutoCommit(false);</p></li><li><p>如果事务的操作都成功, 则提交事务: conn.commit();</p></li><li><p>若出现异常, 则在catch块中回滚事务: conn.rollback();</p></li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 修改之前的DAO的update()方法,使其能够支持事务.</span></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的更新方法,包括: Insert Delete Update</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Connection conn,String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//2. 执行 SQL语句</span></span><br><span class="line">            psmt.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//在这里不能关闭数据库连接,之后可能会用到</span></span><br><span class="line">            JDBCTools.release(<span class="keyword">null</span>, psmt, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJDBC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        <span class="comment">//1. 开启事务</span></span><br><span class="line">        conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        String sql = <span class="string">"UPDATE Account SET balance = balance-? WHERE id = ?"</span>;</span><br><span class="line">        update(conn,sql,<span class="number">1000</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        sql = <span class="string">"UPDATE Account SET balance = balance+? WHERE id = ?"</span>;</span><br><span class="line">        update(conn,sql,<span class="number">1000</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//2. 提交事务</span></span><br><span class="line">        conn.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//3. 回滚事务</span></span><br><span class="line">            conn.rollback();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭数据库连接</span></span><br><span class="line">        JDBCTools.release(<span class="keyword">null</span>, <span class="keyword">null</span>, conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-数据库的隔离级别">4.数据库的隔离级别</h2><blockquote><ul><li>对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题:</li></ul><p>–<strong>脏读</strong>: 对于两个事物 T1, T2, T1 读取了已经被 T2 更新但还<strong>没有被提交</strong>的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的.</p><p>–<strong>不可重复读</strong>: 对于两个事物 T1, T2, T1 读取了一个字段, 然后 T2 <strong>更新</strong>了该字段. 之后, T1再次读取同一个字段, 值就不同了.</p><p>–<strong>幻读</strong>: 对于两个事物 T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中<strong>插入</strong>了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行.</p><ul><li><p>数据库事务的隔离性: 数据库系统必须具有隔离并发运行各个事务的能力, 使它们不会相互影响, 避免各种并发问题.</p></li><li><p>一个事务与其他事务隔离的程度称为隔离级别. 数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱</p></li></ul></blockquote><p>数据库提供的4种隔离级别:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_14.png" alt="JDBC_14"></p><blockquote><ul><li><p>Oracle 支持的 2 种事务隔离级别：<strong>READ COMMITED</strong>, SERIALIZABLE. Oracle 默认的事务隔离级别为: READ COMMITED</p></li><li><p>Mysql 支持 4 中事务隔离级别. Mysql 默认的事务隔离级别为: REPEATABLE READ</p></li></ul></blockquote><blockquote><p>修改数据库的隔离级别:</p><p>JDBC程序中修改: 调用 Connection 的 setTransactionIsolation(); 方法</p><p>在MySQL中设置隔离级别:</p><p>  设置当前 MySQL 连接的隔离级别:</p><p>  –set  transaction isolation level read committed;</p><p>  设置数据库系统的全局的隔离级别:</p><p>  – set <strong>global</strong> transaction isolation level read committed;</p><p>查看当前的隔离级别: SELECT @@tx_isolation;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-获取主键值</title>
      <link href="/JDBC1-6.html"/>
      <url>/JDBC1-6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>获取数据库自动生成的主键的值</p><a id="more"></a><h2 id="1-getGeneratedKeys">1.getGeneratedKeys()</h2><blockquote><p>这里我只测试过可以获取 MySQL和SQL Server数据库的自增主键值</p><p>设置主键:</p><p>mysql: create table student(id int auto_increment primary key not null, name varchar(15));</p><p>sqlserver: create table student(id int identity(1,1) primary key not null, name varchar(15));</p><p>oracle: 要通过触发器来设置主键自增.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetKeyValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">"INSERT INTO Student VALUES(?,?,?)"</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);</span><br><span class="line">            ps.setString(<span class="number">1</span>, <span class="string">"Jhon"</span>);</span><br><span class="line">            ps.setString(<span class="number">2</span>, <span class="string">"jhon@qq.com"</span>);</span><br><span class="line">            ps.setDate(<span class="number">3</span>, <span class="keyword">new</span> Date(<span class="keyword">new</span> java.util.Date().getTime()));</span><br><span class="line">            ps.executeUpdate();</span><br><span class="line">            <span class="comment">//通过 getGeneratedKeys() 方法获取新生成的主键的 ResultSet 对象</span></span><br><span class="line">            <span class="comment">//在 ResultSet 中只有一列 GENERATED_KEYS ,用于存放新生成的主键值</span></span><br><span class="line">            rs = ps.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getObject(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; rsmd.getColumnCount();i ++) &#123;</span><br><span class="line">                System.out.println(rsmd.getColumnName(i+<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, ps, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-元数据获取数据库相关信息">2.元数据获取数据库相关信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testJDBC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        DatabaseMetaData db = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            <span class="comment">//获取数据库元数据</span></span><br><span class="line">            db = conn.getMetaData();</span><br><span class="line">            <span class="comment">//获取数据库版本号</span></span><br><span class="line">            System.out.println(db.getDatabaseProductVersion());</span><br><span class="line">            <span class="comment">//获取当前连接的用户名</span></span><br><span class="line">            System.out.println(db.getUserName());</span><br><span class="line">            <span class="comment">//获取当前数据库连接中的所有数据库名</span></span><br><span class="line">            rs = db.getCatalogs();</span><br><span class="line">            <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, <span class="keyword">null</span>, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-DAO设计模式</title>
      <link href="/JDBC1-5.html"/>
      <url>/JDBC1-5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JDBC中的DAO设计模式------Data Access Object(数据访问对象)</p><a id="more"></a><h2 id="1-DAO简介">1.DAO简介</h2><blockquote><ul><li>什么是DAO?</li></ul><p>DAO即Data Access Object, 是用来访问数据信息的类. 包含了对数据的 CRUD(即create,read,update,delete) 操作. 而不包含任何业务相关的信息.</p><p>DAO其实就是对一些常用的 JDBC 方法的封装(就像之前写的JDBC工具类, 也有不同的地方).</p><ul><li>DAO的意义?</li></ul><p>为了实现代码功能的模块化, 更有利于代码的维护与升级.</p><ul><li>DAO要实现哪些数据相关操作的方法?</li></ul><p>若是要处理一些事务的操作, 下列方法还应该在最前面添加一个数据库连接Connection参数</p><ol><li>void update(String sql, Object … args);<br>执行对数据库的 Insert Update Delete 操作</li><li>&lt;T&gt; T get(Class&lt;T&gt; clazz, String sql, Object … args);<br>查询一条记录, 返回对应的JavaBean对象</li><li>&lt;T&gt; List&lt;T&gt;  getForList(Class&lt;T&gt; clazz, String sql, Object … args);<br>查询多条记录, 返回对应对象的集合</li><li>&lt;E&gt; E getForValue(String sql, Object … args);<br>返回某一条记录的某一个字段的值 或 一个统计的值(即聚集函数的结果)</li></ol></blockquote><h2 id="2-beanutils工具类">2.beanutils工具类</h2><blockquote><p>beanutils工具类是Apache的产品之一, 是一个用来操作JavaBean对象的开源jar. 回想之前, 我们是用的 Java 原始的反射机制来操作的JavaBean对象.</p></blockquote><blockquote><p>JavaBean: 是一个特殊的 Java 类, 类必须是具体的和公共的, 并且具有无参数的构造器, 通过提供的公共方法(即setter和getter方法)来操作成员变量.</p></blockquote><blockquote><p>Java 类的属性:</p><p>① 在 JavaEE 开发中, Java类的属性通过类的 getter(或setter) 方法来定义, 即去除方法 get(或set), 将之后字母的首字母小写, 即为 Java 类的属性.例: public String getIdCard(); 所代表的属性是 idCard.</p><p>② 而之前我们常说的属性(即类的成员变量), 这里称之为字段.</p><p>③ 注意, 我们写的时候, 字段一般都与属性一一对应; 当然, 也会有不对应的情况.</p></blockquote><p>和之前用 JDBC 驱动时一样, 要将 commons-beanutils-1.9.3.jar和commons-logging-1.2.jar 两个 jar包添加到当前项目的 “构建路径”.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_13.png" alt="JDBC_13"></p><p>步骤: ①没有 lib 目录的在当前项目下新建目录 lib,将要添加的 jar 包放在里面.</p><p>②在想要添加的 jar 上右键单击, 之后单击 “构建路径”(即 “Build Path”)</p><p>③之后再单击 “添加至构建路径” 即 “Add to Build Path”</p><blockquote><p>经常用到的两个方法: setProperty() 为JavaBean对象指定属性赋值.</p><p>getProperty() 获取 JavaBean 对象的指定属性</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBeanUtils</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBeanUtils</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//Student类还是之前写的类</span></span><br><span class="line">        Object obj = <span class="keyword">new</span> Student();</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        BeanUtils.setProperty(obj, <span class="string">"name"</span>, <span class="string">"Bob"</span>);</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">        <span class="comment">/*输出:</span></span><br><span class="line"><span class="comment">        Student [id=0, name=null, email=null, date=null]</span></span><br><span class="line"><span class="comment">Student [id=0, name=Bob, email=null, date=null]</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-DAO">3.DAO</h2><blockquote><p>要学会使用编辑器, 可快速重构代码.</p><p>学会将代码模块化, 可将功能性的代码片段抽取成一个方法, 方便维护和管理.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.beanutils.BeanUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的更新方法,包括: Insert Delete Update</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 获取数据库连接</span></span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//2. 执行 SQL语句</span></span><br><span class="line">            psmt.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(<span class="keyword">null</span>, psmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的查询方法,SQL为select类型.</span></span><br><span class="line"><span class="comment"> * 查询结果最多是一行记录.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">get</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        List&lt;T&gt; list = getForList(clazz, sql, args);</span><br><span class="line">        <span class="keyword">if</span>(list.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的查询方法,SQL为select类型.</span></span><br><span class="line"><span class="comment"> * 查询结果可以为多行记录(0~n).</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">List&lt;T&gt;  <span class="title">getForList</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object ... args)</span></span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//1. 获取连接再获取结果集</span></span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line">            <span class="comment">//2. 将结果集转换为Map的List</span></span><br><span class="line">            List&lt;Map&lt;String, Object&gt;&gt; values = handleResultSetToMapList(rs);</span><br><span class="line">            <span class="comment">//3. 将 Map 的List 转换为 JavaBean 对应的List</span></span><br><span class="line">            list = transferMapListToBeanList(clazz, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询方法,结果为一行中的一列</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="keyword">public</span> &lt;E&gt; <span class="function">E <span class="title">getForValue</span><span class="params">(String sql, Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                <span class="keyword">return</span> (E)rs.getObject(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span>(Exception ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, psmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取结果集的 ColumnLabel 对应的 List</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">getColumnLabels</span><span class="params">(ResultSet rs)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        List&lt;String&gt; labels = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; rsmd.getColumnCount();i++) &#123;</span><br><span class="line">            labels.add(rsmd.getColumnLabel(i+<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> labels;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集得到一个 Map 的List, 其中一个 Map 代表一个记录.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Map&lt;String, Object&gt;&gt; handleResultSetToMapList(ResultSet rs) <span class="keyword">throws</span> SQLException&#123;</span><br><span class="line">        List&lt;String&gt; labels = <span class="keyword">this</span>.getColumnLabels(rs);</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; values = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(String key :labels) &#123;</span><br><span class="line">                Object value = rs.getObject(key);</span><br><span class="line">                map.put(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            values.add(map);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将 Map 的 List 转换为 JavaBean对象的 List</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InstantiationException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalAccessException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InvocationTargetException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">private</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">transferMapListToBeanList</span><span class="params">(Class&lt;T&gt; clazz, List&lt;Map&lt;String, Object&gt;&gt; values)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> InstantiationException, IllegalAccessException, InvocationTargetException </span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        T bean = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(values.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(Map&lt;String,Object&gt; m:values) &#123;</span><br><span class="line">                bean = clazz.newInstance();</span><br><span class="line">                <span class="keyword">for</span>(Map.Entry&lt;String, Object&gt; entry:m.entrySet()) &#123;</span><br><span class="line">                    String propertyName = entry.getKey();</span><br><span class="line">                    Object propertyValue = entry.getValue();</span><br><span class="line">                    BeanUtils.setProperty(bean, propertyName, propertyValue);</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(bean);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-TestDAO">4.TestDAO</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAOTest</span> </span>&#123;</span><br><span class="line">    DAO dao = <span class="keyword">new</span> DAO();</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = getStudentFromConsole();</span><br><span class="line">        addStudent(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Student <span class="title">getStudentFromConsole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入学生ID:"</span>);</span><br><span class="line">        stu.setId(scanner.nextInt());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Name:"</span>);</span><br><span class="line">        stu.setName(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Email:"</span>);</span><br><span class="line">        stu.setEmail(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Birth:"</span>);</span><br><span class="line">        stu.setDate(Date.valueOf(scanner.next()));</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudent</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"INSERT INTO Student VALUES(?,?,?,?)"</span>;</span><br><span class="line">        dao.update(sql,stu.getId(),stu.getName(),stu.getEmail(),stu.getDate());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT id, name, email, birth date FROM Student "</span></span><br><span class="line">                + <span class="string">"WHERE id = ?"</span>;</span><br><span class="line">        Student stu = dao.get(Student.class, sql,<span class="number">3</span>);</span><br><span class="line">        System.out.println(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetForList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT id, name, email, birth date FROM Student"</span>;</span><br><span class="line">        List&lt;Student&gt; list = dao.getForList(Student.class, sql);</span><br><span class="line">        <span class="keyword">for</span>(Student stu:list) &#123;</span><br><span class="line">            System.out.println(stu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetForValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"SELECT COUNT(*) FROM Student"</span>;</span><br><span class="line">        <span class="keyword">int</span> result = dao.getForValue(sql);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-一个通用的JDBC查询方法</title>
      <link href="/JDBC1-4.html"/>
      <url>/JDBC1-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>利用反射及 JDBC 元数据编写通用的查询方法.</p><a id="more"></a><h2 id="1-观察之前的查询方法">1.观察之前的查询方法</h2><blockquote><ol><li>方法返回值不一定,要根据具体的运行时类确定</li><li>创建的对象不一定,要根据具体的运行时类确定</li><li>具体对象的属性与结果集的字段之间没有什么关系:<br>如何获取结果集中的字段?并给字段对应的对象的属性赋值?</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Student <span class="title">getStudent</span><span class="params">(String sql,Object ... args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1.方法返回值不一定,要根据具体的运行时类确定</span></span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    Student stu = <span class="keyword">null</span>;<span class="comment">//2.创建的对象不一定,要根据具体的运行时类确定</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        ps = conn.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">            ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">            stu = <span class="keyword">new</span> Student(</span><br><span class="line">                rs.getInt(<span class="number">1</span>),</span><br><span class="line">                rs.getString(<span class="number">2</span>).trim(),</span><br><span class="line">                rs.getString(<span class="number">3</span>).trim(),</span><br><span class="line">                rs.getDate(<span class="number">4</span>));</span><br><span class="line">            <span class="comment">//3.具体对象的属性与结果集的字段之间没有什么关系,</span></span><br><span class="line">            <span class="comment">//如何获取结果集中的字段?并给字段对应对象的属性复制?</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(rs, ps, conn);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stu;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-利用反射创建对象">2.利用反射创建对象</h2><blockquote><p>之前我们知道 Java 的反射是动态语言的关键.</p></blockquote><p>忘记如何用反射的可以看一下 , <a href="JavaReflection.html#3-%E5%88%9D%E8%AF%86%E5%8F%8D%E5%B0%84">Java反射</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">get</span><span class="params">(Class&lt;T&gt; clazz,String sql,Object ... args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1.由于不能确定返回值,利用泛型实现,通过传过来的clazz参数确定返回值</span></span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">    T entity = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCTools.getConnection();</span><br><span class="line">        ps = conn.prepareStatement(sql);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">            ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        rs = ps.executeQuery();</span><br><span class="line">        <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">            <span class="comment">//2.利用反射创建对象</span></span><br><span class="line">            entity = clazz.newInstance();</span><br><span class="line">            <span class="comment">//3.通过解析SQL语句来判断到底选择查询了哪些列,</span></span><br><span class="line">            <span class="comment">//以及需要为 entity 对象的哪些属性赋值</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCTools.release(rs, ps, conn);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> entity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-对应列与属性">3.对应列与属性</h2><blockquote><p>注意到: SQL查询的数据表的列与对象的属性没有什么关系.</p><p>我们要修改一下查询时的SQL语句, 查询时为每一列起一个别名, 该别名与对象的属性一一对应.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_12.png" alt="JDBC_12"></p><h2 id="4-获取列名-别名">4.获取列名(别名)</h2><h3 id="A-数据库元数据">A.数据库元数据</h3><blockquote><ul><li><p>Java 通过JDBC获得连接以后，得到一个Connection 对象，可以从这个对象获得<strong>有关数据库管理系统的各种信息</strong>，包括数据库中的各个表，表中的各个列，数据类型，触发器，存储过程等各方面的信息。根据这些信息，JDBC可以访问一个实现事先并不了解的数据库。</p></li><li><p>获取这些信息的方法都是在<strong>DatabaseMetaData</strong>类的对象上实现的，而DatabaseMetaData对象是在Connection对象上获得的.</p></li><li><p>可通过Connection 对象的 getMetaData()方法获取 DatabaseMetaData 对象</p></li></ul></blockquote><blockquote><ul><li>DatabaseMetaData 类中提供了许多方法用于获得数据源的各种信息，通过这些方法可以非常详细的了解数据库的信息:<br>  –getURL(): 返回一个String类对象，代表数据库的URL。<br>  –getUserName(): 返回连接当前数据库管理系统的用户名。<br>  –isReadOnly(): 返回一个boolean值，指示数据库是否只允许读操作。<br>  –getDatabaseProductName(): 返回数据库的产品名称。<br>  –getDatabaseProductVersion(): 返回数据库的版本号。<br>  –getDriverName(): 返回驱动驱动程序的名称。<br>  –getDriverVersion(): 返回驱动程序的版本号。<br>  –getCatalogs(): 返回数据库连接对应的数据库的结果集。</li></ul></blockquote><h3 id="B-结果集元数据">B.结果集元数据</h3><blockquote><p><strong>ResultSetMetaData</strong>类</p><ul><li>可用于获取关于 ResultSet 对象中列的类型和属性信息的对象:</li></ul><p>–<strong>getColumnName</strong>(int column)：获取指定列的名称</p><p>–<strong>getColumnCount</strong>()：返回当前 ResultSet 对象中的列数。</p><p>–<strong>getColumnTypeName</strong>(int column)：检索指定列的数据库特定的类型名称。</p><p>–<strong>getColumnDisplaySize</strong>(int column)：指示指定列的最大标准宽度，以字符为单位。</p><p>–<strong>isNullable</strong>(int column)：指示指定列中的值是否可以为 null。</p><p>– <strong>isAutoIncrement</strong>(int column)：指示是否自动为指定列进行编号，这样这些列仍然是只读的。</p><p>可通过 ResultSet 对象的 getMetaData()方法获取 ResultSetMetaData 对象</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//rs为ResultSet对象</span></span><br><span class="line">ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rsmd.getColumnCount(); i++) &#123;</span><br><span class="line">    System.out.println(rsmd.getColumnName(i+<span class="number">1</span>));<span class="comment">//打印出列名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-利用反射创建对象并赋值">5.利用反射创建对象并赋值</h2><h3 id="A-反射工具类">A.反射工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 反射的 Utils 函数集合</span></span><br><span class="line"><span class="comment"> * 提供访问私有变量, 获取泛型类型 Class, 提取集合中元素属性等 Utils 函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectionUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过反射, 获得定义 Class 时声明的父类的泛型参数的类型</span></span><br><span class="line"><span class="comment"> * 如: public EmployeeDao extends BaseDao&lt;Employee, String&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;Object&gt; <span class="title">getSuperClassGenricType</span><span class="params">(Class&lt;Object&gt; clazz, <span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">        Type genType = clazz.getGenericSuperclass();</span><br><span class="line">        <span class="keyword">if</span>(!(genType <span class="keyword">instanceof</span> ParameterizedType))&#123;</span><br><span class="line">            <span class="keyword">return</span> Object.class;</span><br><span class="line">        &#125;</span><br><span class="line">        Type [] params = ((ParameterizedType)genType).getActualTypeArguments();</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= params.length || index &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> Object.class;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!(params[index] <span class="keyword">instanceof</span> Class))&#123;</span><br><span class="line">            <span class="keyword">return</span> Object.class;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;Object&gt;) params[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过反射, 获得 Class 定义中声明的父类的泛型参数类型</span></span><br><span class="line"><span class="comment"> * 如: public EmployeeDao extends BaseDao&lt;Employee, String&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;Object&gt; <span class="title">getSuperGenericType</span><span class="params">(Class&lt;Object&gt; clazz)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSuperClassGenricType(clazz, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 循环向上转型, 获取对象的 DeclaredMethod</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> methodName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameterTypes</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Method <span class="title">getDeclaredMethod</span><span class="params">(Object object, String methodName, Class&lt;?&gt;[] parameterTypes)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Class&lt;?&gt; superClass = object.getClass(); superClass != Object.class; superClass = superClass.getSuperclass())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//superClass.getMethod(methodName, parameterTypes);</span></span><br><span class="line">                <span class="keyword">return</span> superClass.getDeclaredMethod(methodName, parameterTypes);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">                <span class="comment">//Method 不在当前类定义, 继续向上转型</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//..</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使 filed 变为可访问</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> field</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">makeAccessible</span><span class="params">(Field field)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!Modifier.isPublic(field.getModifiers()))&#123;</span><br><span class="line">            field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 循环向上转型, 获取对象的 DeclaredField</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filedName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Field <span class="title">getDeclaredField</span><span class="params">(Object object, String filedName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(Class&lt;?&gt; superClass = object.getClass(); superClass != Object.class; superClass = superClass.getSuperclass())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> superClass.getDeclaredField(filedName);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">                <span class="comment">//Field 不在当前类定义, 继续向上转型</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接调用对象方法, 而忽略修饰符(private, protected)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> methodName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameterTypes</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parameters</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> InvocationTargetException </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalArgumentException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">invokeMethod</span><span class="params">(Object object, String methodName, Class&lt;?&gt; [] parameterTypes,</span></span></span><br><span class="line"><span class="function"><span class="params">                                      Object [] parameters)</span> <span class="keyword">throws</span> InvocationTargetException</span>&#123;</span><br><span class="line">        Method method = getDeclaredMethod(object, methodName, parameterTypes);</span><br><span class="line">        <span class="keyword">if</span>(method == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Could not find method ["</span> + methodName + <span class="string">"] on target ["</span> + object + <span class="string">"]"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        method.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> method.invoke(object, parameters);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(IllegalAccessException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"不可能抛出的异常"</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接设置对象属性值, 忽略 private/protected 修饰符, 也不经过 setter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fieldName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setFieldValue</span><span class="params">(Object object, String fieldName, Object value)</span></span>&#123;</span><br><span class="line">        Field field = getDeclaredField(object, fieldName);</span><br><span class="line">        <span class="keyword">if</span> (field == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Could not find field ["</span> + fieldName + <span class="string">"] on target ["</span> + object + <span class="string">"]"</span>);</span><br><span class="line">        makeAccessible(field);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            field.set(object, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"不可能抛出的异常"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 直接读取对象的属性值, 忽略 private/protected 修饰符, 也不经过 getter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fieldName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getFieldValue</span><span class="params">(Object object, String fieldName)</span></span>&#123;</span><br><span class="line">        Field field = getDeclaredField(object, fieldName);</span><br><span class="line">        <span class="keyword">if</span> (field == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Could not find field ["</span> + fieldName + <span class="string">"] on target ["</span> + object + <span class="string">"]"</span>);</span><br><span class="line">        makeAccessible(field);</span><br><span class="line">        Object result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result = field.get(object);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"不可能抛出的异常"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-利用反射赋值">B.利用反射赋值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的查询方法,SQL为select类型.</span></span><br><span class="line"><span class="comment"> * 查询结果最多是一行记录.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">get</span><span class="params">(Class&lt;T&gt; clazz,String sql,Object ... args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//由于不能确定返回值,利用泛型实现,通过传过来的clazz参数确定返回值</span></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        T entity = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line">            ResultSetMetaData rsmd = rs.getMetaData();</span><br><span class="line">            <span class="comment">//用HashMap暂时存放查询结果</span></span><br><span class="line">            <span class="comment">//键:列的别名即对象属性名; 值:记录中对应列的值</span></span><br><span class="line">            Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rsmd.getColumnCount(); i++) &#123;</span><br><span class="line">                    result.put(rsmd.getColumnLabel(i+<span class="number">1</span>), rs.getObject(i+<span class="number">1</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(result.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                entity = clazz.newInstance();</span><br><span class="line">                <span class="comment">//利用反射创建对象</span></span><br><span class="line">                <span class="keyword">for</span>(Map.Entry&lt;String, Object&gt; entry:result.entrySet()) &#123;</span><br><span class="line">                    <span class="comment">//利用反射为对象的各属性赋值</span></span><br><span class="line">                    String fieldName = entry.getKey();</span><br><span class="line">                    Object value = entry.getValue();</span><br><span class="line">                    setFieldValue(entity, fieldName, value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, ps, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> entity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-PreparedStatement</title>
      <link href="/JDBC1-3.html"/>
      <url>/JDBC1-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>通过 PreparedStatement 来执行 SQL 语句</p><a id="more"></a><h2 id="一-PreparedStatement初识">一.PreparedStatement初识</h2><blockquote><ul><li><p>之前我们都是通过 Statement  来执行的 SQL 语句</p></li><li><p>可以通过调用 Connection 对象的 preparedStatement() 方法获取PreparedStatement 对象</p></li><li><p>PreparedStatement 接口是 Statement 的子接口, 它表示一条预编译过的 SQL 语句</p></li><li><p>PreparedStatement 对象所代表的 SQL 语句中的参数用问号(?)来表示, 调用PreparedStatement 对象的 setXxx() 方法来设置这些参数. setXxx() 方法有两个参数, 第一个参数是要设置的 SQL 语句中的参数的索引(从 1 开始), 第二个是设置的 SQL 语句中的参数的值</p></li></ul></blockquote><h3 id="1-为什么要用PreparedStatement">1.为什么要用PreparedStatement</h3><ol><li><p>看之前用Statement的程序, SQL语句需要我们去拼接, 很麻烦, 而PreparedStatement 就不需要我们拼接.</p></li><li><p>使用 PreparedStatement 代码的可读性和可维护性好.</p></li><li><p>PreparedStatement 能最大可能提高性能:</p></li></ol><p> – DBServer会对预编译语句提供性能优化. 因为预编译语句有可能被重复调用, 所以语句在被DBServer的编译器编译后的执行代码被缓存下来, 那么下次调用时只要是相同的预编译语句就不需要编译, 只要将参数直接传入编译过的语句执行代码中就会得到执行.</p><p> – 在statement语句中, 即使是相同操作但因为数据内容不一样, 所以整个语句本身不能匹配, 没有缓存语句的意义. 事实是没有数据库会对普通语句编译后的执行代码缓存. 这样每执行一次都要对传入的语句编译一次.</p><p> – (语法检查, 语义检查, 翻译成二进制命令, 缓存)</p><ol start="4"><li>PreparedStatement 可以有效防止 SQL 注入</li></ol><h3 id="2-SQL-注入">2.SQL 注入</h3><blockquote><ul><li><p>SQL 注入是利用某些系统没有对用户输入的数据进行充分的检查, 而在用户输入数据中注入非法的 SQL 语句段或命令, 从而利用系统的 SQL 引擎完成恶意行为的做法</p></li><li><p>对于 Java 而言, 要防范 SQL 注入, 只要用 PreparedStatement 取代 Statement 就可以了</p></li></ul></blockquote><p>  例, 在数据库的UserInfo表中查询, 是否有某个用户名及对应密码. 用户名为: a’<br>OR PASSWORD = ;密码为:  OR ‘1’=‘1’</p><p>用 Statement 方式, 拼接的 SQL 语句如下:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> UserName,<span class="keyword">Password</span> <span class="keyword">FROM</span> UserInfo <span class="keyword">WHERE</span> UserName = <span class="string">'a'</span></span><br><span class="line"><span class="keyword">OR</span> <span class="keyword">PASSWORD</span> = <span class="string">' AND Password = '</span> <span class="keyword">OR</span> <span class="string">'1'</span>=<span class="string">'1'</span>;</span><br></pre></td></tr></table></figure><p>而 PreparedStatement 方式, 生成的 SQL 语句如下:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> UserName,<span class="keyword">Password</span> <span class="keyword">FROM</span> UserInfo <span class="keyword">WHERE</span> UserName = <span class="string">"a'</span></span><br><span class="line"><span class="string">OR PASSWORD = "</span></span><br><span class="line"><span class="keyword">AND</span> <span class="keyword">Password</span> = <span class="string">" OR '1'='1'"</span>;</span><br></pre></td></tr></table></figure><h2 id="二-使用PreparedStatement">二.使用PreparedStatement</h2><h3 id="1-executeUpdate">1.executeUpdate()</h3><blockquote><p>在 JDBCTools类中, 重载之前用Statement写的update(String sql)方法, 重载函数为update(String sql,Object … args).</p><p>这里的sql是带有占位符的SQL语句, 后面利用可变个数形参的方法传递参数. 若用数组的话, 在传递参数的时候还要将那些参数封装为数组.</p><p>这里的SQL语句是 insert delete update 语句, 不能是select语句. 之后用  PreparedStatement 的 executeUpdate() 方法执行生成的 SQL 语句.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上述update()的重载,以PreparedStatement方式执行SQL</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args:SQL中占位符对应的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql,Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(<span class="keyword">null</span>,ps, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-executeQuery">2.executeQuery()</h3><blockquote><p>使用 PreparedStatement 的executeQuery()方法, 执行带有 select 的SQL语句.</p><p>当然, 你也可以和执行 JDBCTools 里的update()方法一样, 将查询数据库的代码抽取成一个工具方法, 之后会讲如何写一个通用的查询方法, 放在 JDBCTools 类里面. 我就直接测试了.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FilterInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = getStudentFromConsole();</span><br><span class="line">        addStudent(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Student <span class="title">getStudentFromConsole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入学生ID:"</span>);</span><br><span class="line">        stu.setId(scanner.nextInt());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Name:"</span>);</span><br><span class="line">        stu.setName(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Email:"</span>);</span><br><span class="line">        stu.setEmail(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Birth:"</span>);</span><br><span class="line">        stu.setDate(Date.valueOf(scanner.next()));</span><br><span class="line">        System.out.println(stu.getDate());</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudent</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"INSERT INTO Student VALUES(?,?,?,?)"</span>;</span><br><span class="line">        JDBCTools.update(sql,stu.getId(),stu.getName(),stu.getEmail(),stu.getDate());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//上边是测试的 PreparedStatement 实现的 update()方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSearchStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> type = getSearchType();</span><br><span class="line">        Student stu = searchStudent(type);</span><br><span class="line">        showMsg(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showMsg</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stu == <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"查无此人!"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(stu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getSearchType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"请输入查询类型:1.id查询 2.姓名查询"</span>);</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> FilterInputStream(System.in)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> type = scanner.nextInt();</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">if</span>(type != <span class="number">1</span> &amp;&amp; type != <span class="number">2</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"输入的查询类型有误!"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">searchStudent</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="keyword">null</span>;</span><br><span class="line">        Student stu = <span class="keyword">null</span>;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">if</span>(type == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入要查询的id:"</span>);</span><br><span class="line">            <span class="keyword">int</span> id = scanner.nextInt();</span><br><span class="line">            sql = <span class="string">"SELECT * FROM Student WHERE id = ?"</span>;</span><br><span class="line">            stu = getStudent(sql,id);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入要查询的Name:"</span>);</span><br><span class="line">            String name = scanner.next();</span><br><span class="line">            sql = <span class="string">"SELECT * FROM Student WHERE name = '?'"</span>;</span><br><span class="line">            stu = getStudent(sql,name);</span><br><span class="line">        &#125;</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Student <span class="title">getStudent</span><span class="params">(String sql,Object ... args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        Student stu = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i ++) &#123;</span><br><span class="line">                ps.setObject(i+<span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                stu = <span class="keyword">new</span> Student(</span><br><span class="line">                        rs.getInt(<span class="number">1</span>),</span><br><span class="line">                        rs.getString(<span class="number">2</span>).trim(),</span><br><span class="line">                        rs.getString(<span class="number">3</span>).trim(),</span><br><span class="line">                        rs.getDate(<span class="number">4</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, ps, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-以OOP编写JDBC程序</title>
      <link href="/JDBC1-2.html"/>
      <url>/JDBC1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>以OOP(即面向对象编程)编写 JDBC 程序</p><a id="more"></a><h2 id="1-JDBC工具类">1.JDBC工具类</h2><blockquote><p>将一些常用的 JDBC 方法封装成一个 JDBC 工具类, 方便管理及调用.</p><p>下面程序中的配置文件 jdbc.properties 必须在当前项目的 src 目录下.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 操作 JDBC 的工具类,封装了一些常用的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据库连接:</span></span><br><span class="line"><span class="comment"> * 通过读取配置文件,根据配置信息从数据库服务器获取一个连接</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        InputStream is = JDBCTools.class.getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">        Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">        pro.load(is);</span><br><span class="line">        String url = pro.getProperty(<span class="string">"jdbc"</span>);</span><br><span class="line">        String user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">        String password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        Class.forName(pro.getProperty(<span class="string">"driver"</span>));</span><br><span class="line">        Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的执行SQL更新语句,包括: Insert Delete Update语句, 不能执行select语句</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            state.executeUpdate(sql);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(<span class="keyword">null</span>,state, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭 ResultSet 和 Statement 和 Connection</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(ResultSet rs,Statement state,Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(state != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                state.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-操作Student数据表中的数据">2.操作Student数据表中的数据</h2><blockquote><p>利用 Java 的对象操作数据表中的记录, 这里的 Java 对象之后会有个专业名词: JavaBean</p><p>处理表的记录时, 不再一个字段一个字段的处理, 而是把它们封装成一个对象, 统一处理.</p><p>可以称为 O-R映射 即 对象与关系(也可以说数据表)之间的映射, 对象的属性与数据表的字段一一对应.</p></blockquote><h3 id="A-DB中的Student表">A.DB中的Student表</h3><table><thead><tr><th>id</th><th>name</th><th>email</th><th>birth</th></tr></thead><tbody><tr><td>1</td><td>Bob</td><td><a href="mailto:bob@qq.com">bob@qq.com</a></td><td>1997-01-01</td></tr><tr><td>2</td><td>Jane</td><td><a href="mailto:jane@qq.com">jane@qq.com</a></td><td>1999-09-09</td></tr><tr><td>3</td><td>Jhon</td><td><a href="mailto:jhon@qq.com">jhon@qq.com</a></td><td>2000-10-01</td></tr></tbody></table><h3 id="B-Java中的Student对象">B.Java中的Student对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> id, String name, String email, Date date)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">        <span class="keyword">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDate</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.date = date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", email="</span> + email + <span class="string">", date="</span> + date + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="C-插入一条Student记录">C.插入一条Student记录</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBCOOP</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = getStudentFromConsole();</span><br><span class="line">        addStudent(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Student <span class="title">getStudentFromConsole</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student stu = <span class="keyword">new</span> Student();</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入学生ID:"</span>);</span><br><span class="line">        stu.setId(scanner.nextInt());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Name:"</span>);</span><br><span class="line">        stu.setName(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Email:"</span>);</span><br><span class="line">        stu.setEmail(scanner.next());</span><br><span class="line">        System.out.print(<span class="string">"请输入学生Birth:"</span>);</span><br><span class="line">        stu.setDate(Date.valueOf(scanner.next()));</span><br><span class="line">        System.out.println(stu.getDate());</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStudent</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"INSERT INTO Student VALUES("</span></span><br><span class="line">                + stu.getId() +<span class="string">",'"</span></span><br><span class="line">                + stu.getName() + <span class="string">"','"</span></span><br><span class="line">                + stu.getEmail() + <span class="string">"','"</span></span><br><span class="line">                + stu.getDate() + <span class="string">"')"</span>;</span><br><span class="line">        System.out.println(sql);</span><br><span class="line">        JDBCTools.update(sql);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="D-查询数据表">D.查询数据表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FilterInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBCOOP</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSearchStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> type = getSearchType();</span><br><span class="line">        Student stu = searchStudent(type);</span><br><span class="line">        showMsg(stu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showMsg</span><span class="params">(Student stu)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stu == <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"查无此人!"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(stu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getSearchType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"请输入查询类型:1.id查询  2.姓名查询"</span>);</span><br><span class="line">        <span class="comment">/*这里注意,若仍采用 Scanner scanner = new Scanner(System.in);</span></span><br><span class="line"><span class="comment">         *当 scanner.close()时 System.in流也会被关闭,之后再用到该流时,</span></span><br><span class="line"><span class="comment">         *会报 java.util.nosuchelementexception 异常</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> FilterInputStream(System.in)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> type = scanner.nextInt();</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">if</span>(type != <span class="number">1</span> &amp;&amp; type != <span class="number">2</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"输入的查询类型有误!"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">searchStudent</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="keyword">null</span>;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">if</span>(type == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入要查询的id:"</span>);</span><br><span class="line">            <span class="keyword">int</span> id = scanner.nextInt();</span><br><span class="line">            sql = <span class="string">"SELECT * FROM Student WHERE id = "</span> + id;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入要查询的Name:"</span>);</span><br><span class="line">            String name = scanner.next();</span><br><span class="line">            sql = <span class="string">"SELECT * FROM Student WHERE name = '"</span> + name +<span class="string">"'"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        scanner.close();</span><br><span class="line">        <span class="keyword">return</span> getStudent(sql);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Student <span class="title">getStudent</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        Student stu = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            rs = state.executeQuery(sql);</span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                stu = <span class="keyword">new</span> Student(</span><br><span class="line">                        rs.getInt(<span class="number">1</span>),</span><br><span class="line">                        rs.getString(<span class="number">2</span>).trim(),</span><br><span class="line">                        rs.getString(<span class="number">3</span>).trim(),</span><br><span class="line">                        rs.getDate(<span class="number">4</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(rs, state, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stu;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  <font style="color:red;">注意: 一个方法A中使用了Scanner, 且在里面把它关闭了, 然后又在方法B里再用Scanner时Scanner in = new Scanner(<a href="http://System.in" target="_blank" rel="noopener">System.in</a>); 会报 java.util.nosuchelementexception 异常.</font></p><blockquote><p>Java提供的IO包中, 一般都会处理资源级联关闭, 即关闭最外层包装的流, 内层被包被的流也会被关闭.</p><p>在Scanner类中使用了一个InputStreamReader()输入流, 对System.in进行再次包装. 当调用Scanner的close()方法时, 会执行InputStreamReader的关闭操作, 即调用用该包装类的close(). 该操作又会调用其内部包装的Sysetm.in的close操作.</p><p><a href="http://xn--ScannerSystem-o50uh90bia29h012r7q7gj5lby9alm9cka.in" target="_blank" rel="noopener">若想解决关闭Scanner而不关闭System.in</a>, 只需要对传入Scanner构造方法的System.in做下包装就可以了, 新包装的流要注意: 1.不产生新的流资源  2.是一个InputStream的实现类  3.close方法为空实现</p><p>你也可以利用上述方法, 解决其他类似的问题.</p></blockquote><p>如下:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Scanner scanner = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> FilterInputStream(System.in)&#123;</span><br><span class="line">    <span class="comment">//当关闭到 FilterInputStream 对应的流时, 便不再向内层流关闭</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC-DriverManger</title>
      <link href="/JDBC1-1.html"/>
      <url>/JDBC1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JDBC------通过DriverManger获取数据库连接</p><a id="more"></a><h2 id="一-驱动管理类">一.驱动管理类</h2><p>  之前使用的是原始的方法即 Driver 接口获取数据库连接, 但是我们在开发中一般都用 DriverManger即驱动管理类来实现不同数据库的连接.</p><h3 id="1-建立连接">1.建立连接</h3><blockquote><ul><li><p>可以调用 DriverManager 类的 getConnection() 方法建立到数据库的连接</p></li><li><p>JDBC URL 用于标识一个被注册的驱动程序, 驱动程序管理器通过这个 URL 选择正确的驱动程序, 从而建立到数据库的连接.</p></li><li><p>JDBC URL的标准由三部分组成, 各部分间用冒号分隔.<br>------jdbc: &lt;子协议&gt;:&lt;子名称&gt;<br>------协议: JDBC URL中的协议总是jdbc<br>------子协议: 子协议用于标识一个数据库驱动程序<br>------子名称: 一种标识数据库的方法. 子名称可以依不同的子协议而变化, 用子名称的目的是为了定位数据库提供足够的信息</p></li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_09.png" alt="JDBC_09"></p><h3 id="2-加载与注册JDBC驱动">2.加载与注册JDBC驱动</h3><blockquote><ul><li><p>加载 JDBC 驱动需调用 Class 类的静态方法 forName(), 向其传递要加载的 JDBC 驱动的类名.</p></li><li><p>DriverManager 类是驱动程序管理器类, 负责管理驱动程序.</p></li><li><p>通常不用显式调用 DriverManager 类的 registerDriver() 方法来注册驱动程序类的实例, 因为 Driver 接口的驱动程序类都包含了静态代码块, 在这个静态代码块中, 会调用DriverManager.registerDriver() 方法来注册自身的一个实例.</p></li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestDriverManger</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1.准备连接数据库的4个string</span></span><br><span class="line">        String driverClass = <span class="keyword">null</span>;</span><br><span class="line">        String url = <span class="keyword">null</span>;</span><br><span class="line">        String user = <span class="keyword">null</span>;</span><br><span class="line">        String password = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//读取类路径下的 jdbc.properties 文件</span></span><br><span class="line">        InputStream in = </span><br><span class="line">                getClass().getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(in);</span><br><span class="line">        driverClass = properties.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">        url = properties.getProperty(<span class="string">"jdbc"</span>);</span><br><span class="line">        user = properties.getProperty(<span class="string">"user"</span>);</span><br><span class="line">        password = properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        <span class="comment">//2.加载驱动程序(实际上对应的Driver实现类中有注册驱动的静态代码块)</span></span><br><span class="line">        Class.forName(driverClass);</span><br><span class="line">        <span class="comment">//3.通过 DriverManger的getConnection方法获取数据库的连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用DriverManger的好处:</p><blockquote><ol><li>可以通过重载的 getConnection() 方法获取数据库连接, 较为方便</li><li>可以同时管理多个驱动程序: 若注册了多个数据库连接, 根据调用 getConnection() 方法时传入的参数来连接不同的数据库, 并返回不同的数据库连接.</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestDriverManger</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String driver1 = <span class="string">"com.microsoft.sqlserver.jdbc.SQLServerDriver"</span>;</span><br><span class="line">        String driver2 = <span class="string">"com.mysql.cj.jdbc.Driver"</span>;</span><br><span class="line">        String url1 = <span class="string">"jdbc:sqlserver://127.0.0.1:1433;DatabaseName=SPJDB"</span>;</span><br><span class="line">        String url2 = <span class="string">"jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false"</span>;</span><br><span class="line">        String user1 = <span class="string">"root"</span>;</span><br><span class="line">        String user2 = <span class="string">"root"</span>;</span><br><span class="line">        String password1 = <span class="string">"root"</span>;</span><br><span class="line">        String password2 = <span class="string">"root"</span>;</span><br><span class="line">        </span><br><span class="line">        Class.forName(driver1);</span><br><span class="line">        Connection conn1 = DriverManager.getConnection(url1, user1, password1);</span><br><span class="line">        System.out.println(conn1);</span><br><span class="line">        </span><br><span class="line">        Class.forName(driver2);</span><br><span class="line">        Connection conn2 = DriverManager.getConnection(url2, user2, password2);</span><br><span class="line">        System.out.println(conn2);</span><br><span class="line">        conn1.close();</span><br><span class="line">        conn2.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二-访问数据库">二.访问数据库</h2><blockquote><ul><li><p>数据库连接被用于向数据库服务器发送命令和 SQL 语句，在连接建立后，需要对数据库进行访问，执行 sql 语句</p></li><li><p>在 java.sql 包中有 3 个接口分别定义了对数据库的调用的不同方式:</p></li></ul><p> –Statement</p><p>  –PrepatedStatement</p><p>   –CallableStatement</p></blockquote><h3 id="1-Statement">1.Statement</h3><blockquote><ul><li><p>通过调用 Connection 对象的 createStatement() 方法获取该对象</p></li><li><p>该对象用于执行静态的 SQL 语句, 并且返回执行结果</p></li><li><p>Statement 接口中定义了下列方法用于执行 SQL 语句:</p></li></ul><p>  –ResultSet excuteQuery(String sql): 传入的sql可以是 select</p><p>  –int excuteUpdate(String sql): 传入的sql可以是 insert update delete, 不能是 select</p></blockquote><h4 id="更新数据库">更新数据库</h4><blockquote><p>数据库的更新操作一般指: Insert Delete Update SQL操作</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestDriverManger</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String driver = <span class="string">"com.microsoft.sqlserver.jdbc.SQLServerDriver"</span>;</span><br><span class="line">        String url = <span class="string">"jdbc:sqlserver://localhost:1433;DatabaseName=SPJDB"</span>;</span><br><span class="line">        String user = <span class="string">"root"</span>;</span><br><span class="line">        String password = <span class="string">"root"</span>;</span><br><span class="line">        String sql = <span class="string">"Insert into SPJ values(1,1,2,1000);"</span>;</span><br><span class="line">        Class.forName(driver);</span><br><span class="line">        Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">        Statement statement = conn.createStatement();</span><br><span class="line">        statement.executeUpdate(sql);</span><br><span class="line">        statement.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  在这里, 我们想写一个通用的方法, 该方法可以执行 INSERT UPDATE DELETE 语句. 同时, 我们还想将一些常用的 JDBC 操作封装在一起, 方便管理与使用.</p><p>JDBCTools类:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 操作 JDBC 的工具类,封装了一些常用的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据库连接:</span></span><br><span class="line"><span class="comment"> * 通过读取配置文件,根据配置信息从数据库服务器获取一个连接</span></span><br><span class="line"><span class="comment"> * 现在这个方法每执行一次都会获取和释放一次数据库连接,这样不太好,之后会修改</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        InputStream is = JDBCTools.class.getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">        Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">        pro.load(is);</span><br><span class="line">        String url = pro.getProperty(<span class="string">"jdbc"</span>);</span><br><span class="line">        String user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">        String password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        Class.forName(pro.getProperty(<span class="string">"driver"</span>));</span><br><span class="line">        Connection conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭 Statement 和 Connection</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> state</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Statement state,Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(state != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                state.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TestJDBCTools类:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"DELETE from SPJ where S_num=1 and P_num=1 and J_num=2;"</span>;</span><br><span class="line">        update(sql);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的更新方法,包括: Insert Delete Update</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            state.executeUpdate(sql);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCTools.release(state, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="查询数据库">查询数据库</h4><blockquote><p>我在这里说的查询数据库, 指的是 Select SQL操作</p><p>通过 ResultSet 对象来操作查询的结果集</p><ul><li><p>通过调用 Statement 对象的 excuteQuery() 方法创建该对象</p></li><li><p>ResultSet 对象以逻辑表格的形式封装了执行数据库操作的结果集, ResultSet 接口由数据库厂商实现</p></li><li><p>ResultSet 对象维护了一个指向当前数据行的游标, 初始的时候, 游标在第一行之前, 可以通过 ResultSet 对象的 next() 方法移动到下一行</p></li><li><p>ResultSet 接口的常用方法:</p></li></ul><p>   –boolean next()</p><p>   –getXxx() , Xxx 可以是: String Int Time Date …</p><p>   ……</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_10.png" alt="JDBC_10"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_11.png" alt="JDBC_11"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBCTools</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        String sql = <span class="string">"select * from Student"</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCTools.getConnection();</span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            rs = state.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="number">1</span>);</span><br><span class="line">                String name = rs.getString(<span class="string">"name"</span>);</span><br><span class="line">                String eamil = rs.getString(<span class="number">3</span>);</span><br><span class="line">                Date date = rs.getDate(<span class="number">4</span>);</span><br><span class="line">                System.out.print(id+<span class="string">";"</span>);</span><br><span class="line">                System.out.print(name+<span class="string">";"</span>);</span><br><span class="line">                System.out.print(eamil+<span class="string">";"</span>);</span><br><span class="line">                System.out.println(date);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//在这里, 别忘了去修改一下 JDBCTools 类里的 release() 方法</span></span><br><span class="line">            JDBCTools.release(rs, state, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC初识</title>
      <link href="/JDBC1-0.html"/>
      <url>/JDBC1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JDBC------Java Database Connectivity</p><a id="more"></a><h2 id="一-数据持久化">一.数据持久化</h2><blockquote><p>持久化(persistence): 把数据保存到可掉电式存储设备中以供之后使用. 大多数情况下, 特别是企业级应用, 数据持久化意味着将内存中的数据保存到硬盘上加以”固化”, 而持久化的实现过程大多通过各种关系数据库来完成.</p></blockquote><blockquote><p>持久化的主要应用是将内存中的数据存储在关系型数据库中, 当然也可以存储在磁盘文件、XML数据文件中.</p></blockquote><h2 id="二-Java中的数据存储技术">二.Java中的数据存储技术</h2><blockquote><p>①  JDBC直接访问数据库<br>②  JDO技术(即Java Data Object)<br>③ 第三方O/R工具, 如: Hibernate, ibatis等</p></blockquote><p>JDBC是Java访问数据库的基石, JDO、Hibernate等只是更好的封装了JDBC.</p><h2 id="三-JDBC基础">三.JDBC基础</h2><blockquote><p>JDBC(Java Database Connectivity)是一个<strong>独立于特定数据库管理系统</strong>、通用的SQL数据库存取和操作的<strong>公共接口</strong>(一组API), 定义了用来访问数据库的标准Java类库, 使用这个类库可以以一种标准的方法、方便地访问数据库资源.</p><p>JDBC为访问不同的数据库提供了一种<strong>统一的途径</strong>, 为开发者屏蔽了一些细节问题.</p><p>JDBC的目标是使Java程序员使用JDBC可以连接任何<strong>提供了JDBC驱动程序</strong>的数据库系统, 这样就使得程序员无需对特定的数据库系统的特点有过多的了解, 从而大大简化和加快了开发过程.</p><p>JDBC驱动程序由<strong>数据库厂商</strong>实现.</p><p>JDBC编程是一种面向接口的编程, 我们在程序中用的是java.sql下的Connection接口, 但是该接口在java包里并没有具体的实现, 其实现就是JDBC驱动程序.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_01.png" alt="JDBC_01"></p><h3 id="1-JDBC体系结构">1.JDBC体系结构</h3><p>JDBC接口(API)包括两个层次:</p><ul><li><p><strong>面向应用的API</strong>: Java API, 抽象接口, 供应用程序开发人员使用(连接数据库, 执行SQL语句, 获得结果).</p></li><li><p><strong>面向数据库的API</strong>: Java Driver API, 供开发商开发数据库驱动程序用.</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_02.png" alt="JDBC_02"></p><h3 id="2-JDBC驱动程序">2.JDBC驱动程序</h3><blockquote><p>JDBC驱动程序: 各个数据库厂商根据JDBC的规范制作的 JDBC 实现类的类库</p><p>JDBC分类:</p><ul><li>第一类: JDBC-ODBC桥.</li><li>第二类: 部分本地API部分Java的驱动程序.</li><li>第三类: JDBC网络纯Java驱动程序.</li><li><font style="color:red;">第四类: 本地协议的纯 Java 驱动程序.</font></li><li>第三、四两类都是纯Java的驱动程序, 因此, 对于Java开发者来说, 它们在性能、可移植性、功能等方面都有优势.</li></ul></blockquote><p>第一类: JDBC-ODBC桥</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_03.png" alt="JDBC_03"></p><p>第二类: 部分本地API部分Java的驱动程序.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_04.png" alt="JDBC_04"></p><p>第三类: JDBC网络纯Java驱动程序. 一般在做JSP网站开发时用.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_05.png" alt="JDBC_05"></p><p>第四类: 本地协议的纯 Java 驱动程序.</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_06.png" alt="JDBC_06"></p><p>我们之后主要将的是第四类: 本地协议的纯 Java 驱动程序. 其实, 第三类和第四类差不多.</p><h2 id="四-JDBC-API">四.JDBC API</h2><blockquote><p>JDBC API 是一系列的接口, 它使得应用程序能够进行数据库联接, 执行SQL语句, 并且得到返回结果.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_07.png" alt="JDBC_07"></p><p>  通过Driver Manger我们能获取到代表数据库连接的Connection, 通过Connection我们能获取到用于执行SQL语句的 Statement , 通过Statement 我们能获取到代表查询结果的 Result.</p><h2 id="五-Driver接口">五.Driver接口</h2><blockquote><ul><li>Java.sql.Driver 接口是所有 JDBC 驱动程序需要实现的接口. 这个接口是提供给数据库厂商使用的, 不同数据库厂商提供不同的实现.</li><li>在程序中不需要直接去访问实现了 Driver 接口的类, 而是由驱动程序管理器类(java.sql.DriverManager)去调用这些Driver实现</li><li>但是我们是可以通过Driver接口来获取数据库连接的.</li><li>注意: 数据库的连接是稀缺资源, 用完后必须要关闭连接.</li></ul></blockquote><h3 id="1-将JDBC驱动引入项目">1.将JDBC驱动引入项目</h3><ul><li>①下载需要的 JDBC 驱动</li><li>②在项目下新建一个 lib 目录.</li><li>③将用到的 JDBC 驱动(jar文件, 例: mysql-connector-java-8.0.15.jar)放入该目录.</li><li>④在 lib 目录下的 JDBC 驱动上, 右键单击, 依次选择 “构建路径”, “添加至构建路径”.</li><li>之后, JDBC驱动就成功导入项目了, 在 “引用的库” 里面可以看到.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDBC_08.png" alt="JDBC_08"></p><h3 id="2-Driver获取mysql的连接">2.Driver获取mysql的连接</h3><p>注意: 测试时要开启MySQL服务</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="comment">//以前的mysql JDBC驱动 Driver实现类为: com.mysql.jdbc.Driver</span></span><br><span class="line">        Driver driver = <span class="keyword">new</span> com.mysql.cj.jdbc.Driver();</span><br><span class="line">        String url = <span class="string">"jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false"</span>;</span><br><span class="line">        Properties info = <span class="keyword">new</span> Properties();</span><br><span class="line">        info.put(<span class="string">"user"</span>, <span class="string">"root"</span>);</span><br><span class="line">        info.put(<span class="string">"password"</span>, <span class="string">"root"</span>);</span><br><span class="line">        Connection conn = driver.connect(url, info);</span><br><span class="line">        System.out.println(conn);</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-Driver获取任何数据库的连接">3.Driver获取任何数据库的连接</h3><blockquote><p>编写一个通用的方法, 在不修改Java源码的情况下, 可以获取任何数据库的连接</p><p>解决方案: 将Driver接口实现类的全类名、要连接数据库的URL、数据库用户名user、用户名密码password放进一个配置文件里.</p><p>通过修改配置文件的方式实现和具体的数据库解耦.</p></blockquote><p>在项目的src目录下, 新建一个 jdbc.properties 文件, 内容:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#SQL Server DB</span></span><br><span class="line"><span class="attr">driver</span>=<span class="string">com.microsoft.sqlserver.jdbc.SQLServerDriver</span></span><br><span class="line"><span class="attr">jdbc</span>=<span class="string">jdbc:sqlserver://127.0.0.1:1433;DatabaseName=SPJDB</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL DB</span></span><br><span class="line"><span class="comment">#driver=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">#driver=com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#jdbcUrl=jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line"><span class="comment">#user=root</span></span><br><span class="line"><span class="comment">#password=root</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Oracle DB</span></span><br><span class="line"><span class="comment">#driver=oracle.jdbc.driver.OracleDriver</span></span><br><span class="line"><span class="comment">#jdbcUrl=jdbc:oracle:thin:@localhost:1521:orcl</span></span><br><span class="line"><span class="comment">#user=scott</span></span><br><span class="line"><span class="comment">#password=java</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意: 这里用到了 junit 单元测试类</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(getConnection());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String driverClass = <span class="keyword">null</span>;</span><br><span class="line">        String jdbcUrl = <span class="keyword">null</span>;</span><br><span class="line">        String user = <span class="keyword">null</span>;</span><br><span class="line">        String password = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//读取类路径下的 jdbc.properties 文件</span></span><br><span class="line">        InputStream in = </span><br><span class="line">                getClass().getClassLoader().getResourceAsStream(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        properties.load(in);</span><br><span class="line">        driverClass = properties.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">        jdbcUrl = properties.getProperty(<span class="string">"jdbc"</span>);</span><br><span class="line">        user = properties.getProperty(<span class="string">"user"</span>);</span><br><span class="line">        password = properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">        <span class="comment">//利用反射, 实例化全类名对应的类 即 创建不同驱动的Driver对象</span></span><br><span class="line">        Driver driver = </span><br><span class="line">                (Driver) Class.forName(driverClass).newInstance();</span><br><span class="line">        Properties info = <span class="keyword">new</span> Properties();</span><br><span class="line">        info.put(<span class="string">"user"</span>, user);</span><br><span class="line">        info.put(<span class="string">"password"</span>, password);</span><br><span class="line">        Connection connection = driver.connect(jdbcUrl, info);</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你只需关闭properties文件里某个数据库配置的注释, 注释其他的数据库配置. 就可以得到不同的数据库连接</p><h3 id="4-关于连接字符串">4.关于连接字符串</h3><blockquote><p>对于 MySQL 的连接字符串，自 Connector 8.0 新版本之后，jdbcUrl 必须添加 serverTimezone 属性。</p><p>当然，一般这样设置就OK了：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbcUrl</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br></pre></td></tr></table></figure><p>更多新增内容，详见 MySQL 官网 <a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-whats-new.html" target="_blank" rel="noopener">doc</a>。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery中的动画</title>
      <link href="/jQuery1-6.html"/>
      <url>/jQuery1-6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery中的简单动画</p><a id="more"></a><h2 id="一-hide-与show">一.hide()与show()</h2><blockquote><p>通过hide()与show()方法实现动画, 其中hide()相当于css(“display”,“none”).</p><p>以上两个方法不带任何参数时没有任何动画效果, 可以通过添加一个速度参数使元素&quot;动起来&quot;. 这两个方法会同时改变内容的高度、宽度、透明度</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        * &#123;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.panel</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.head</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#bfa</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.head</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="undefined">            cursor: pointer;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#98C8EF</span>;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">".head"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">".content"</span>).show(<span class="number">1000</span>);</span></span><br><span class="line"><span class="actionscript">            &#125;, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">".content"</span>).hide(<span class="number">1000</span>);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"head"</span>&gt;</span>什么是jQuery?<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">            jQuery是一个快速、简洁的JavaScript框架，是继Prototype之后又一个优秀的JavaScript代码库（或JavaScript框架）。jQuery设计的宗旨是“write Less，Do More”，即倡导写更少的代码，做更多的事情。它封装JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计和Ajax交互。</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-slideDown-与slideUp">二.slideDown()与slideUp()</h2><blockquote><p>这两个方法只会改变元素的高度, 也可以传一个速度参数</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).slideDown(<span class="number">1000</span>);</span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).slideUp(<span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="三-fadeIn-与fadeOut">三.fadeIn()与fadeOut()</h2><blockquote><p>这两个方法只会改变元素的透明度</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).fadeIn();</span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).fadeOut();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="四-切换元素的可见性">四.切换元素的可见性</h2><h3 id="1-toggle">1.toggle()</h3><blockquote><p>直接切换元素可见状态, 不传参数的话, 没有动画的效果.传一个速度参数, 便可看见动画的效果</p><p>这个方法相当于show()与hide()方法的组合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).toggle(<span class="string">"slow"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-slideToggle">2.slideToggle()</h3><blockquote><p>通过高度的变化来切换元素的可见状态</p><p>想当于slideDown()与slideUp()方法的组合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).slideToggle(<span class="string">"slow"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-fadeToggle">3.fadeToggle()</h3><blockquote><p>通过透明度来切换元素的可见状态</p><p>相当于fadeIn()与fadeOut()方法的组合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).fadeToggle(<span class="string">"slow"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-fadeTo">4.fadeTo()</h3><blockquote><p>把元素的透明度以渐近的方式调整到指定值(0-1之间)</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html其余代码同上</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".content"</span>).show();</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">    $(<span class="string">".head"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//每次点击透明度减少0.2</span></span><br><span class="line">        $(<span class="string">".content"</span>).fadeTo(<span class="string">"slow"</span>,i);</span><br><span class="line">        i -= <span class="number">0.2</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery中的事件</title>
      <link href="/jQuery1-5.html"/>
      <url>/jQuery1-5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery中的事件</p><a id="more"></a><h2 id="一-加载DOM">一.加载DOM</h2><blockquote><p>在页面加载完毕后, 浏览器会通过JS为DOM元素添加事件. 在常规JS代码中, 通常使用window.onload方法, 而在jQuery中使用$(document).ready()方法, 可简写为$().</p></blockquote><blockquote><p>两者区别:</p><ol><li>window.onload必须等待网页中的所有内容加载完毕后(包括图片)才能执行其中代码, 而且只会有一个window.onload会执行, 因为后续修改window.onload会覆盖之前的</li><li>$(document).ready()在网页中的DOM结构绘制完毕之后便会执行, 可能DOM元素关联的东西并没有加载完成, 而且这个函数可编写多个, 这多个中的代码均会执行.</li></ol></blockquote><h2 id="二-绑定事件">二.绑定事件</h2><p>html部分:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        *&#123;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.panel</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.head</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#bfa</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.head</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="undefined">            cursor: pointer;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 400px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#98C8EF</span>;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"head"</span>&gt;</span>什么是jQuery?<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">            jQuery是一个快速、简洁的JavaScript框架，是继Prototype之后又一个优秀的JavaScript代码库（或JavaScript框架）。jQuery设计的宗旨是“write Less，Do More”，即倡导写更少的代码，做更多的事情。它封装JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计和Ajax交互。</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-直接绑定">1.直接绑定</h3><blockquote><p>is()方法: 用来判断给定的某个jQuery对象是否符合指定的jQuery选择器</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> flag = $(<span class="string">".content"</span>).is(<span class="string">":hidden"</span>);</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            $(<span class="string">".content"</span>).show();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">".content"</span>).hide();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-bind-绑定">2.bind()绑定</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).bind(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> flag = $(<span class="string">".content"</span>).is(<span class="string">":hidden"</span>);</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            $(<span class="string">".content"</span>).show();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">".content"</span>).hide();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="三-合成事件">三.合成事件</h2><blockquote><p>hover(): 模拟光标悬停事件. 当光标移动到元素上时, 会触发指定的第一个函数, 当光标移出这个元素时, 会触发指定的第二个函数.</p><p>toggle(): 用于模拟鼠标连续单击事件. 第一次单击元素, 触发第一个函数, 再次单击同一个元素, 触发第二个函数. 之后依次类推.  现在废除了之前说的作用, 只用来切换元素的可见性</p></blockquote><h3 id="1-hover">1.hover()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//html代码还是上方的</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">".head"</span>).hover(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).show();</span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".content"</span>).hide();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="四-移除事件">四.移除事件</h2><blockquote><p>unbind()方法:<br>移除某按钮上所有的click事件: $(&quot;#btn&quot;).unbind(“click”);<br>移除某按钮上所有的事件: $(&quot;#btn&quot;).unbind();</p><p>one()方法:<br>该方法可以为元素绑定处理函数. 当处理函数触发一次后, 便会被立即删除. 即在每个对象上, 事件处理函数只会被执行一次.</p></blockquote><h2 id="五-事件冒泡">五.事件冒泡</h2><blockquote><p>事件会按照DOM层次结构像水泡一样不断向上, 直到传递到顶端</p><p>解决: 在事件处理函数中返回false, 会对事件停止冒泡, 还可以停止元素的默认行为.</p></blockquote><p>由于事件的冒泡, 以下例子中, 点击p标签会向上传递点击事件, body和div的点击事件也会被触发.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            height: 200px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#bfa</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        p&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"body"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"body click"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">".content"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"div click"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"p"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"p click"</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//return false;//阻止事件冒泡</span></span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>body</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>div</span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="六-事件对象的属性">六.事件对象的属性</h2><blockquote><p>事件对象: 当事件被触发时, 事件对象就被创建了. 在程序中使用事件对象, 只需要为事件对象的响应函数添加一个参数来接收该事件对象. 该事件对象只有事件处理函数才能访问到. 事件处理函数执行完毕后, 事件对象便被销毁.</p><p>常用到的事件对象的属性:</p><p>event.pageX, event.pageY: 获取光标相对于页面(而不是浏览器窗口)的x,y坐标</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery的DOM</title>
      <link href="/jQuery1-4.html"/>
      <url>/jQuery1-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQUery中的DOM操作</p><a id="more"></a><h2 id="一-DOM简介">一.DOM简介</h2><blockquote><p>DOM(Document Object Model—文档对象模型): 一种与浏览器、平台、语言无关的接口, 使用该接口可以轻松地访问页面中所有的标准组件</p><p>DOM操作的分类:</p><ul><li>DOM Core: DOM Core并不专属于JS, 任何一种支持DOM的程序设计语言都可以使用它. 它的用途并非仅限于处理网页, 也可以用来处理任何一种用标记语言编写的文档, 如:XML</li><li>HTML DOM: 使用JS和DOM为HTML文件编写脚本时, 有许多专属于HTML-DOM的属性</li><li>CSS-DOM: 针对于CSS操作, 在JS中, CSS-DOM主要用于获取和设置style对象的各种属性</li></ul></blockquote><h2 id="二-jQuery操作HTML-DOM">二.jQuery操作HTML-DOM</h2><h3 id="1-查找结点">1.查找结点</h3><blockquote><ol><li>查找属性结点: 通过jQuery选择器完成</li><li>操作属性节点: 查找到元素对应节点后, 通过jQuery对象的attr()方法来获取它的各属性值</li><li>操作文本节点: 通过text()方法</li></ol></blockquote><h3 id="2-创建节点">2.创建节点</h3><blockquote><p>使用jQuery的工厂函数$(str); 会根据传入的html格式str字符串, 创建一个DOM对象, 并把这个DOM对象包装成一个jQuery对象返回.</p><p>注意:</p><ol><li>创建的新元素节点不会被自动添加到文档中, 需要手动调用jQuery的方法插入到当前文档.</li><li>当创建单个元素时, 标签开始, 必须要结束该标签.例: $(&quot;<p></p>&quot;)</li></ol><p>创建文本节点就是在创建元素节点时直接将文本内容写进去; 创建属性节点也是这样.</p></blockquote><h3 id="3-插入节点">3.插入节点</h3><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>append()</td><td>向每个匹配的元素的内容的结尾处追加内容</td></tr><tr><td>appendTo()</td><td>将每个匹配的元素追加到指定元素的内部的结尾处</td></tr><tr><td>prepend()</td><td>向每个匹配的元素的内容的开始处插入内容</td></tr><tr><td>prependTo()</td><td>将每个匹配的元素插入到指定元素的内部的开始处</td></tr></tbody></table><p>这些方法插入的节点都将成为文档中某个节点的子节点.</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>after()</td><td>向每个匹配的元素的之后插入内容</td></tr><tr><td>insertAfter()</td><td>将匹配的元素的插入到指定的元素之后</td></tr><tr><td>before()</td><td>向每个匹配的元素的之前插入内容</td></tr><tr><td>insertBefore()</td><td>将匹配的元素的插入到指定的元素之首</td></tr></tbody></table><p>以上方法不但能将新创建的DOM元素插入到文档中, 也能对原有的DOM元素进行移动.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面两种方法等价:</span></span><br><span class="line">$(<span class="string">"#id"</span>).append(<span class="string">"&lt;p&gt;我是追加的内容&lt;/p&gt;"</span>);</span><br><span class="line">$(<span class="string">"&lt;p&gt;我是追加的内容&lt;/p&gt;"</span>).appendTo($(<span class="string">"#id"</span>));</span><br><span class="line"><span class="comment">//prepend与prependTo和上述方法类似</span></span><br><span class="line"><span class="comment">//after与insertAfter和上述方法类似</span></span><br><span class="line"><span class="comment">//before与insertBefore和上述方法类似</span></span><br></pre></td></tr></table></figure><h3 id="4-删除节点">4.删除节点</h3><blockquote><p>remove(): 从DOM中删除所有匹配的元素, 传入的参数用于根据jQuery表达式来筛选元素. 当某个节点用remove()方法删除后, 该节点以及所包含的所有后代节点将被同时删除. 这个方法的返回值是一个指向已被删除的节点的引用.</p></blockquote><blockquote><p>empty(): 清空节点—清空元素中的所有后代节点(不包括属性节点).</p></blockquote><h3 id="5-复制节点">5.复制节点</h3><blockquote><p>clone(): 克隆匹配的DOM元素, 返回值为克隆后的副本. 此时复制的节点不具有任何行为.</p><p>clone(true): 复制元素的同时也可复制元素中的事件.</p></blockquote><h3 id="6-替换节点">6.替换节点</h3><blockquote><p>replaceWith(): 将所有匹配到的元素都替换为指定的HTML或DOM元素</p><p>replaceAll(): 颠倒了的replaceWith()方法, 与append()与appendTo()方法类似</p><p>注意: 若在替换之前, 已在元素上绑定了事件, 替换之后原先绑定的事件会与原来的元素一起消失.</p><p>若想互换文档中的两个节点的话, 要先克隆其中一个节点.</p></blockquote><h3 id="7-包裹节点">7.包裹节点</h3><blockquote><p>做一些网页特效时, 往往会用到这些方法.</p><p>wrap(): 将匹配到的所有元素一个个用其他元素包裹起来</p><p>wrapAll(): 将匹配到的所有元素作为整体用一个元素包裹起来</p><p>wrapInner(): 将每一个匹配元素的内容用其他结构化标记包裹起来</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例:</span></span><br><span class="line">$(<span class="string">"li"</span>).wrap(<span class="string">"&lt;font color='red'&gt;&lt;/font&gt;"</span>);</span><br><span class="line"><span class="comment">//之后所有的li将变为:&lt;font color='red'&gt;&lt;li&gt;...&lt;/li&gt;&lt;/font&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-jQuery操作CSS-DOM">三.jQuery操作CSS-DOM</h2><h3 id="1-操作class属性">1.操作class属性</h3><blockquote><p>获取和设置class属性都可以使用attr()方法, 也可以使用专门的</p></blockquote><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>addClass()</td><td>为class属性添加一个值</td></tr><tr><td>removeClass()</td><td>从匹配元素中删除全部或指定class属性的值</td></tr><tr><td>toggleClass()</td><td>切换class属性的值, 有则删除, 无则添加</td></tr><tr><td>hasClass()</td><td>判断元素class属性是否有某个值</td></tr></tbody></table><h3 id="2-操作元素样式">2.操作元素样式</h3><blockquote><p>操作元素的css样式, 均可通过 css() 方法实现</p><ol><li>通过opacity属性操作元素透明度: css(“opacity”,value);</li><li>通过width和height属性操作元素宽高, 也可直接用width()和height()方法操作</li></ol><p>获取元素在当前视窗中的相对位移: offset()方法. 其返回的对象包含两个属性: top和left. 该方法只对可见元素有效</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery选择器续2</title>
      <link href="/jQuery1-3.html"/>
      <url>/jQuery1-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery过滤选择器续</p><a id="more"></a><h2 id="1-子元素过滤选择器">1.子元素过滤选择器</h2><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:nth-child(index/even/odd/equation)</td><td>选取每个父元素下的第index个子元素或奇偶元素(index&gt;=1)</td><td>集合元素</td></tr><tr><td>:first-child</td><td>选取每个父元素的第一个子元素</td><td>集合元素</td></tr><tr><td>:last-child</td><td>选取每个父元素的最后一个子元素</td><td>集合元素</td></tr><tr><td>:only-child</td><td>若某元素是其父元素中唯一的子元素, 那么它将被匹配</td><td>集合元素</td></tr></tbody></table><blockquote><p>:nth-child()详解:</p><ul><li>:nth-child(even/odd):能选取每个父元素下的索引值为偶/奇数的元素</li><li>:nth-child(2):能选取每个父元素下的索引值为2的元素</li><li>:nth-child(3n):能选取每个父元素下索引值为3的倍数的元素</li><li>:nth-child(3n+1):能选取每个父元素下索引值为3n+1的元素</li></ul><p>选取子元素时, 需要在选择器前添加一个空格</p></blockquote><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取每个class为one的div父元素下的第2个子元素."</span> <span class="attr">id</span>=<span class="string">"btn1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取每个class为one的div父元素下的第一个子元素."</span> <span class="attr">id</span>=<span class="string">"btn2"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取每个class为one的div父元素下的最后一个子元素."</span> <span class="attr">id</span>=<span class="string">"btn3"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"如果class为one的div父元素下的仅仅只有一个子元素，那么选中这个子元素."</span> <span class="attr">id</span>=<span class="string">"btn4"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"123456789"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mover"</span>&gt;</span>正在执行动画的div元素.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//选取子元素, 需要在选择器前添加一个空格. </span></span><br><span class="line">        $(<span class="string">"div.one :nth-child(2)"</span>).css(<span class="string">"background"</span>, <span class="string">"#ffbbaa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div.one :first-child"</span>).css(<span class="string">"background"</span>, <span class="string">"#ffbbaa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div.one :last-child"</span>).css(<span class="string">"background"</span>, <span class="string">"#ffbbaa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div.one :only-child"</span>).css(<span class="string">"background"</span>, <span class="string">"#ffbbaa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="2-表单对象属性过滤选择器">2.表单对象属性过滤选择器</h2><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:enabled</td><td>选取所有可用元素</td><td>集合元素</td></tr><tr><td>:disabled</td><td>选取所有不可用元素</td><td>集合元素</td></tr><tr><td>:checked</td><td>选取所有被选中的元素(单选框,复选框)</td><td>集合元素</td></tr><tr><td>:selected</td><td>选取所有被选中选项元素(下拉列表)</td><td>集合元素</td></tr></tbody></table><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单对象属性过滤选择器<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span>对表单内 可用input 赋值操作.<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn2"</span>&gt;</span>对表单内 不可用input 赋值操作.<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn3"</span>&gt;</span>获取多选框选中的个数.<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn4"</span>&gt;</span>获取多选框选中的内容.<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn5"</span>&gt;</span>获取下拉框选中的内容.<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span> <span class="attr">action</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        可用元素: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"add"</span> <span class="attr">value</span>=<span class="string">"可用文本框1"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        不可用元素: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">disabled</span>=<span class="string">"true"</span> <span class="attr">value</span>=<span class="string">"不可用文本框"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        可用元素: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"che"</span> <span class="attr">value</span>=<span class="string">"可用文本框2"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        不可用元素: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">disabled</span>=<span class="string">"true"</span> <span class="attr">value</span>=<span class="string">"不可用文本框"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        多选框: <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"newsletter"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> <span class="attr">value</span>=<span class="string">"test1"</span> /&gt;</span>test1</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"newsletter"</span> <span class="attr">value</span>=<span class="string">"test2"</span> /&gt;</span>test2</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"newsletter"</span> <span class="attr">value</span>=<span class="string">"test3"</span> /&gt;</span>test3</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"newsletter"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> <span class="attr">value</span>=<span class="string">"test4"</span> /&gt;</span>test4</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"newsletter"</span> <span class="attr">value</span>=<span class="string">"test5"</span> /&gt;</span>test5</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        下拉列表1: <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> <span class="attr">style</span>=<span class="string">"height: 100px"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>浙江<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>辽宁<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>湖北<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        下拉列表2: <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"test2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>浙江<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>辽宁<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>天津<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>湖北<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">""</span> <span class="attr">cols</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>js部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//使所有的可用的单行文本框的 value 值变为 已重新赋值</span></span><br><span class="line">        alert($(<span class="string">":text:enabled"</span>).val());</span><br><span class="line">        $(<span class="string">":text:enabled"</span>).val(<span class="string">"已重新赋值"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">":text:disabled"</span>).val(<span class="string">"www.baidu.com"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> num = </span><br><span class="line">            $(<span class="string">":checkbox[name='newsletter']:checked"</span>).length;</span><br><span class="line">        alert(num);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//实际被选择的不是 select, 而是 select 的 option 子节点</span></span><br><span class="line">        <span class="comment">//所以要加一个 空格. </span></span><br><span class="line">        <span class="comment">//var len = $("select :selected").length</span></span><br><span class="line">        <span class="comment">//alert(len);</span></span><br><span class="line">        <span class="comment">//因为 $("select :selected") 选择的是一个数组</span></span><br><span class="line">        <span class="comment">//当该数组中有多个元素时, 通过 .val() 方法就只能获取第一个被选择的值了. </span></span><br><span class="line">        <span class="comment">//alert($("select :selected").val());</span></span><br><span class="line">        <span class="comment">//jQuery 对象遍历的方式使 each, 在 each 内部的 this 是正在</span></span><br><span class="line">        <span class="comment">//得到的 DOM 对象, 而不是一个 jQuery 对象</span></span><br><span class="line">        $(<span class="string">"select :selected"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(<span class="keyword">this</span>.value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">":checkbox[name='newsletter']:checked"</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(<span class="keyword">this</span>.value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-表单选择器">3.表单选择器</h2><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:input</td><td>选取所有的input, textarea,select,button元素</td><td>集合元素</td></tr><tr><td>:text</td><td>选取所有的单行文本框</td><td>集合元素</td></tr><tr><td>:password</td><td>选取所有的密码框元素</td><td>集合元素</td></tr><tr><td>:radio</td><td>选取所有的单选框</td><td>集合元素</td></tr><tr><td>:checkbox</td><td>选取所有的多选框</td><td>集合元素</td></tr><tr><td>:submit</td><td>选取所有的提交按钮</td><td>集合元素</td></tr><tr><td>:image</td><td>选取所有的图像按钮</td><td>集合元素</td></tr><tr><td>:reset</td><td>选取所有的重置按钮</td><td>集合元素</td></tr><tr><td>:button</td><td>选取所有的按钮</td><td>集合元素</td></tr><tr><td>:file</td><td>选取所有的上传域</td><td>集合元素</td></tr><tr><td>:hidden</td><td>选取所有的不可见元素</td><td>集合元素</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery选择器续</title>
      <link href="/jQuery1-2.html"/>
      <url>/jQuery1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery选择器续</p><a id="more"></a><p>过滤选择器</p><h2 id="1-内容过滤选择器">1.内容过滤选择器</h2><blockquote><p>内容过滤选择器的过滤规则主要体现在它所包含的子元素和文本上</p></blockquote><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:contains(text)</td><td>选取含有文本内容为text的元素</td><td>集合元素</td></tr><tr><td>:empty</td><td>选取不包含子元素或文本为空的元素</td><td>集合元素</td></tr><tr><td>:has(selector)</td><td>选取含有选择器所匹配的元素的元素</td><td>集合元素</td></tr><tr><td>:parent</td><td>选取含有子元素或者文本的元素</td><td>集合元素</td></tr></tbody></table><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 含有文本 'di' 的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择不包含子元素(或者文本元素) 的 div 空元素"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择含有 class 为 mini 元素的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择含有子元素(或者文本元素)的div元素"</span> <span class="attr">id</span>=<span class="string">"btn4"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mover"</span>&gt;</span>正在执行动画的div元素.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:contains('di')"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:empty"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:has(.mini)"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:parent"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">        <span class="comment">//$("div:not(:empty)").css("background", "#bfa");</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="2-可见性过滤选择器">2.可见性过滤选择器</h2><blockquote><p>可见性过滤选择器是根据元素的可见和不可见状态来选择相应的元素</p><p>可见选择器: hidden不仅包括样式属性display为none的元素, 也包含文本隐藏域(&lt;input type=‘hidden’/&gt;)和 visible:hidden之类的元素</p></blockquote><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:hidden</td><td>选取所有不可见元素</td><td>集合元素</td></tr><tr><td>:visible</td><td>选取所有可见元素</td><td>集合元素</td></tr></tbody></table><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取所有可见的  div 元素"</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择所有不可见的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择所有不可见的 input 元素"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"123456789000"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mover"</span>&gt;</span>正在执行动画的div元素.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:visible"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//alert($("div:hidden").length);</span></span><br><span class="line">        <span class="comment">//show(time):可以使不可见的元素变为可见,time表示时间,以ms为单位</span></span><br><span class="line">        <span class="comment">//jQuery的很多方法支持方法的连缀,即一个方法的返回值仍然是调用该</span></span><br><span class="line">        <span class="comment">//方法的 jQuery 对象:可以继续调用该对象的其他方法.</span></span><br><span class="line">        $(<span class="string">"div:hidden"</span>).show(<span class="number">2000</span>).css(<span class="string">"background"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//attr()方法,传一个参数表示获取属性值</span></span><br><span class="line">        <span class="comment">//val() 方法可以返回某一个表单元素的 value 属性值. </span></span><br><span class="line">        alert($(<span class="string">"input:hidden"</span>).val());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="3-属性过滤选择器">3.属性过滤选择器</h2><blockquote><p>属性过滤选择器的过滤规则是通过元素的属性来获取相应的元素, 属性过滤选择器不以&quot;:&quot;开头</p></blockquote><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>[attribute]</td><td>选取拥有此属性的元素</td><td>集合元素</td></tr><tr><td>[attribute=value]</td><td>选取指定属性的值为value的元素</td><td>集合元素</td></tr><tr><td>[attribute!=value]</td><td>选取指定属性的值不等于value的元素</td><td>集合元素</td></tr><tr><td>[attribute^=value]</td><td>选取指定属性的值以value开始的元素</td><td>集合元素</td></tr><tr><td>[attribute$=value]</td><td>选取指定属性的值以value结束的元素</td><td>集合元素</td></tr><tr><td>[attribute*=value]</td><td>选取指定属性的值含有value的元素</td><td>集合元素</td></tr><tr><td>[selector1]…[selectorn]</td><td>用属性选择器合并成一个复合属性选择器,满足多个条件,每选择一次,缩小一次范围</td><td>集合元素</td></tr></tbody></table><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取含有 属性title 的div元素."</span> <span class="attr">id</span>=<span class="string">"btn1"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 属性title值等于'test'的div元素."</span> <span class="attr">id</span>=<span class="string">"btn2"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 属性title值不等于'test'的div元素(没有属性title的也将被选中)."</span> <span class="attr">id</span>=<span class="string">"btn3"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 属性title值 以'te'开始 的div元素."</span> <span class="attr">id</span>=<span class="string">"btn4"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 属性title值 以'est'结束 的div元素."</span> <span class="attr">id</span>=<span class="string">"btn5"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 属性title值 含有'es'的div元素."</span> <span class="attr">id</span>=<span class="string">"btn6"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"组合属性选择器,首先选取有属性id的div元素，然后在结果中 选取属性title值 含有'es'的 div 元素."</span> <span class="attr">id</span>=<span class="string">"btn7"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选取 含有 title 属性值, 且title 属性值不等于 test 的 div 元素."</span> <span class="attr">id</span>=<span class="string">"btn8"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"123456789"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mover"</span>&gt;</span>正在执行动画的div元素.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title]"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title='test']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//选取的元素中包含没有 title 的 div 元素. </span></span><br><span class="line">        $(<span class="string">"div[title!='test']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title^='te']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title$='est']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title*='es']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[id][title*='es']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn8"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div[title][title!='test']"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery选择器</title>
      <link href="/jQuery1-1.html"/>
      <url>/jQuery1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery选择器</p><a id="more"></a><blockquote><p>选择器是jQuery的根基, 在jQuery中, 对事件处理, 遍历DOM和Ajax操作都依赖于选择器</p><p>jQuery选择器的优点:</p><ul><li>写法简洁</li><li>完善的事件处理机制</li></ul></blockquote><h2 id="一-基本选择器">一.基本选择器</h2><blockquote><p>基本选择器是jQuery中最常用的选择器, 也是最简单的选择器, 它通过元素的id, class 和标签名来查找DOM元素(注意: 在一个网页中id只能用一次, class允许重复)</p></blockquote><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>$(&quot;#id&quot;)</td><td>根据id匹配一个元素</td><td>单个元素</td></tr><tr><td>$(&quot;.class&quot;)</td><td>根据class匹配多个元素</td><td>集合元素</td></tr><tr><td>$(“element”)</td><td>根据元素名匹配元素</td><td>集合元素</td></tr><tr><td>$(&quot;*&quot;)</td><td>匹配所有元素</td><td>集合元素</td></tr><tr><td>$(“selector1,…,selectorn”)</td><td>将每一个选择器匹配到的元素合并一起返回</td><td>集合元素</td></tr></tbody></table><p>上述选择器直接放在 $(&quot;&quot;) 的引号之间</p><h3 id="1-基本选择器示例">1.基本选择器示例</h3><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 one 的元素"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 class 为 mini 的所有元素"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 元素名是 div 的所有元素"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 所有的元素"</span> <span class="attr">id</span>=<span class="string">"btn4"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 所有的 span 元素和id为two的元素"</span> <span class="attr">id</span>=<span class="string">"btn5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span>^^span元素^^<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一定不要忘记引入jQuery库</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#one"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".mini"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"*"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"span,#two"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="二-层次选择器">二.层次选择器</h2><blockquote><p>若想通过DOM元素之间的层次关系来获取特定的元素, 例如: 后代元素 子元素 相邻元素 兄弟元素等, 则需要用层次选择器.</p></blockquote><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>$(“ancestor descendant”)</td><td>选取ancestor的所有descendant(后代)元素</td><td>集合元素</td></tr><tr><td>$(“parent &gt; child”)</td><td>选取parent的所有child(子)元素</td><td>集合元素</td></tr><tr><td>$(“prev + next”)</td><td>选取紧接在prev元素后的下一个next元素</td><td>集合元素</td></tr><tr><td>$(“prev ~ siblings”)</td><td>选取prev元素后的所有siblings元素</td><td>集合元素</td></tr></tbody></table><blockquote><p>注意: $(“prev ~ siblings”)选择器只能选择#prev元素后的同辈元素; 而jQuery中的 siblings()方法与前后位置无关, 只要是同辈节点即可选取.</p><p>&gt; + - ~ 前后都有一个空格</p></blockquote><h3 id="1-层次选择器示例">1.层次选择器示例</h3><p>html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 body 内的所有 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"在 body 内, 选择子元素是 div 的."</span> <span class="attr">id</span>=<span class="string">"btn2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 one 的下一个 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 two 的元素后面的所有 div 兄弟元素"</span> <span class="attr">id</span>=<span class="string">"btn4"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 two 的元素所有 div 兄弟元素"</span> <span class="attr">id</span>=<span class="string">"btn5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 one 的下一个 span 元素"</span> <span class="attr">id</span>=<span class="string">"btn6"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 two 的元素前边的所有的 div 兄弟元素"</span> <span class="attr">id</span>=<span class="string">"btn7"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span>^^span元素^^<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span>--span元素--<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"body div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"body &gt; div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#one + div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#two ~ div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#two"</span>).siblings(<span class="string">"div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//下面的选择器选择的是与 #one 相邻的 span 元素</span></span><br><span class="line">        <span class="comment">//若 span 与 #one 不相邻,则选择器无效</span></span><br><span class="line">        <span class="comment">//$("#one + span").css("background-color","#bfa");</span></span><br><span class="line">        $(<span class="string">"#one"</span>).nextAll(<span class="string">"span:first"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#two"</span>).prevAll(<span class="string">"div"</span>).css(<span class="string">"background-color"</span>,<span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="三-过滤选择器">三.过滤选择器</h2><blockquote><p>通过特定的规则来筛选出所需的DOM元素, 该选择器都以 “:” 开头</p><p>按不同过滤规则, 过滤选择器可分为: 基本过滤、内容过滤、可见性过滤、属性过滤、子元素过滤和表单对象属性过滤选择器.</p></blockquote><h3 id="1-基本过滤选择器">1.基本过滤选择器</h3><table><thead><tr><th>选择器</th><th>描述</th><th>返回</th></tr></thead><tbody><tr><td>:first</td><td>选取第一个元素</td><td>单个元素</td></tr><tr><td>:last</td><td>选取最后一个元素</td><td>集合元素</td></tr><tr><td>:not(selector)</td><td>去除所有与给定选择器匹配的元素</td><td>集合元素</td></tr><tr><td>:even</td><td>选取索引为偶数的所有元素, 索引从0开始</td><td>集合元素</td></tr><tr><td>:odd</td><td>选取索引为奇数的所有元素, 索引从0开始</td><td>集合元素</td></tr><tr><td>:eq(index)</td><td>选取索引等于index, 索引从0开始</td><td>集合元素</td></tr><tr><td>:gt(index)</td><td>选取索引大于index, 索引从0开始</td><td>集合元素</td></tr><tr><td>:lt(index)</td><td>选取索引小于index, 索引从0开始</td><td>集合元素</td></tr><tr><td>:header</td><td>选取所有的标题元素, 如: h1,h2等</td><td>集合元素</td></tr><tr><td>:animated</td><td>选取当前正在执行动画的所有元素</td><td>集合元素</td></tr></tbody></table><p>示例: html部分:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        div, span, p &#123;</span></span><br><span class="line"><span class="undefined">            width: 140px;</span></span><br><span class="line"><span class="undefined">            height: 140px;</span></span><br><span class="line"><span class="undefined">            margin: 5px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: <span class="selector-id">#000</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            font-size: 17px;</span></span><br><span class="line"><span class="undefined">            font-family: Verdana;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.mini</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 55px;</span></span><br><span class="line"><span class="undefined">            height: 55px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            font-size: 12px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.hide</span> &#123;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择第一个 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择最后一个 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择class不为 one 的所有 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn3"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择索引值为偶数的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn4"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择索引值为奇数的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择索引值为大于 3 的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn6"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择索引值为等于 3 的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn7"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择索引值为小于 3 的 div 元素"</span> <span class="attr">id</span>=<span class="string">"btn8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择所有的标题元素"</span> <span class="attr">id</span>=<span class="string">"btn9"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择当前正在执行动画的所有元素"</span> <span class="attr">id</span>=<span class="string">"btn10"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"选择 id 为 two 的下一个 span 元素"</span> <span class="attr">id</span>=<span class="string">"btn11"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>基本选择器.<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        id 为 one,class 为 one 的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        id为two,class为one,title为test的div</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"other"</span>&gt;</span>class为mini,title为other<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"test"</span>&gt;</span>class为mini,title为test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span>&gt;</span>class为mini<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mini"</span> <span class="attr">title</span>=<span class="string">"tesst"</span>&gt;</span>class为mini,title为tesst<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">class</span>=<span class="string">"none"</span>&gt;</span>style的display为"none"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hide"</span>&gt;</span>class为"hide"的div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        包含input的type为"hidden"的div<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">size</span>=<span class="string">"8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span>^^span元素 111^^<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span>&gt;</span>^^span元素 222^^<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mover"</span>&gt;</span>正在执行动画的div元素.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><p>JS部分:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//之后会说jQuery的动画</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">anmateIt</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#mover"</span>).slideToggle(<span class="string">"slow"</span>, anmateIt);</span><br><span class="line">    &#125;</span><br><span class="line">    anmateIt();</span><br><span class="line">    $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:first"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:last"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:not(.one)"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:even"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:odd"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:gt(3)"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:eq(3)"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn8"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"div:lt(3)"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn9"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">":header"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn10"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">":animated"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">"#btn11"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">"#two"</span>).nextAll(<span class="string">"span:first"</span>).css(<span class="string">"background"</span>, <span class="string">"#bfa"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery简介</title>
      <link href="/jQuery1-0.html"/>
      <url>/jQuery1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>jQuery------write less, do more</p><a id="more"></a><h2 id="一-jQuery简介">一.jQuery简介</h2><blockquote><p>为了简化JS开发, 出现了一些JS库. 这些库封装了很多预定义的对象和实用函数. 能帮助使用者建立有高难度交互的Web 2.0特性的富客户端页面, 并兼容大部分浏览器.</p><p>常见的JS库: prototype、dojo、Ext JS、mootools、jQuery</p></blockquote><blockquote><p>jQuery是继prototype之后又一个优秀的JS库</p><p>jQuery理念: 写的少, 做的多. 优点:</p><ul><li>轻量级</li><li>强大的选择器</li><li>出色的DOM操作封装</li><li>可靠的事件处理机制</li><li>完善的Ajax</li><li>出色的浏览器兼容性</li><li>链式操作方式<br>…</li></ul></blockquote><h2 id="二-jQuery的Hello-World">二.jQuery的Hello World</h2><blockquote><p>应用jQuery, 第一步就是引入jQuery库</p><p>jQuery的 $(function(){}) 就相当于 JS 的window.onload</p><p>jQuery的神奇之处: 有非常多的、非常有用的选择器</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.必须引入jQuery库--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//1.选取btn按钮</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//2.为id为btn添加onclick响应函数</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//3.弹出Hello World!</span></span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-jQuery对象">三.jQuery对象</h2><blockquote><p>jQuery对象就是通过jQuery的 $() 包装的DOM对象后产生的对象</p><p>jQuery对象是jQuery特有的. jQuery对象可以使用jQuery里的方法, 例: $(&quot;#box&quot;).html()</p><p>jQuery对象无法使用DOM对象的任何方法, 同样DOM对象无法使用jQuery对象里的任何方法</p><p>约定: 若获取的对象为jQuery对象, 在变量面前加上$表示.例: var $variable = jQuery对象;<br>var variable = DOM对象;</p></blockquote><h3 id="1-jQuery对象—-DOM对象">1.jQuery对象—&gt;DOM对象</h3><blockquote><p>jQuery对象不能用DOM中的方法, 但若jQuery没有封装想要的方法, 不得不用DOM中的方法时, 要将jQUery对象转化为DOM对象.</p><p>①jQuery对象是一个数组对象, 可以通过[index]的方法的到对应的DOM对象.<br>var $cr = $(&quot;#cr&quot;);<br>var cr = $cr[0];</p><p>②使用jQuery中的get(index)方法得到相应的DOM对象<br>var $cr = $(&quot;#cr&quot;);<br>var cr = $cr.get(0);</p></blockquote><h3 id="2-DOM对象—-jQuery对象">2.DOM对象—&gt;jQuery对象</h3><blockquote><p>对于一个DOM对象, 只需要用 $() 把DOM对象包装起来, 就可以得到一个jQuery对象, 之后就可以用jQuery对象的方法.</p><p>var cr = document.getElementById(“cr”);<br>var $cr = $(cr);</p></blockquote><h2 id="四-jQuery对象的几个常用方法">四.jQuery对象的几个常用方法</h2><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>val([value])</td><td>获取或设置表单元素的value属性值</td></tr><tr><td>attr(name[,val])</td><td>获取或设置元素节点的指定属性值</td></tr><tr><td>each()</td><td>对jQuery对象进行遍历,其参数为function,函数内部this代表当前DOM对象</td></tr><tr><td>text([str])</td><td>获取或设置元素节点的文本节点的值</td></tr><tr><td>html([str])</td><td>获取或设置元素的内部html代码</td></tr><tr><td>height()</td><td>设置元素CSS的高度</td></tr><tr><td>width()</td><td>设置元素CSS的宽度</td></tr><tr><td>css(attr,val)</td><td>设置元素指定属性(attr)的值为val</td></tr><tr><td>removeAttr()</td><td>删除指定元素的指定属性</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> jQuery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ajax-jQuery</title>
      <link href="/Ajax1-2.html"/>
      <url>/Ajax1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>利用jQuery实现Ajax</p><a id="more"></a><h2 id="1-注意">1.注意</h2><p><font style='color: red;font-size:1.2em;'>不了解 <a href='/categories/jQuery/'>jQuery</a> 的可以先了解一下，本站上也有一些 jQuery 的学习笔记</font></p><p>jQuery中的Ajax, 最底层$.ajax() 第二层$.load() $.get() $.post(), 第三层$.getScript() $.getJSON()</p><p>最常用的方法是$.load() $.get() $.post()</p><h2 id="一-load">一.$.load()</h2><blockquote><p>load()方法是jQuery中最为简单和常见的Ajax方法, 能载入远程的HTML代码并插入到DOM中.<br>我们只需用jQuery选择器为HTML片段指定目标位置即可.<br>默认使用 GET 方式 - 传递附加参数时自动转换为 POST 方式</p><p>如果我们只需要返回的全部HTML代码的一部分, 可以将url参数设置为&quot;url selector&quot;(注意url与选择器间有一个空格)</p><p>任何一个HTML的节点都可以使用load()方法来加载Ajax, 结果将直接插入到该节点中的innerHTML中</p></blockquote><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>url</td><td>待装入 HTML 网页网址</td></tr><tr><td>data(可选,对象)</td><td>发送至服务器的 key/value 数据. 在jQuery 1.3中也可以接受一个字符串了.</td></tr><tr><td>callback(可选)</td><td>载入成功时回调函数</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>exer<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> url = <span class="keyword">this</span>.href;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//var url = this.href + " a";//只选择返回的html代码中的a</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//var args = &#123;"time":new Date()&#125;;//args为JSON格式</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//若向本地服务器发送POST请求时,本地服务器需要具备处理POST请求的能力</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">".detail"</span>).load(url);<span class="comment">//get请求</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//$(".detail").load(url,args);//post请求</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.detail</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brief"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sun.html"</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"zhu.html"</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sha.html"</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-get-和-post">二.$.get()和$.post()</h2><blockquote><p>$.get()方法使用GET方式来进行异步请求. 结构: $.get(url[,data][,callback][,type])</p><p>$.get()方法中的回调函数只有两个参数: data表示返回的数据, 可以是XML、JSON、HTML等; textstatus表示请求状态, 其值可能是: success, error, notmodify, timeout 4种</p><p>请求成功时可调用回调函数, 如果需要在出错时执行函数, 请使用 $.ajax()</p><p>$.get()和$.post()方法是jQuery中的全局函数, 而find()等方法都是对jQuery对象进行操作的方法.</p></blockquote><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>url</td><td>待载入页面的URL地址</td></tr><tr><td>data</td><td>待发送 Key/value 参数</td></tr><tr><td>callback</td><td>载入成功时回调函数</td></tr><tr><td>type</td><td>返回内容格式:xml, html, script, json, text, _default</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.4.0.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"a"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> url = <span class="keyword">this</span>.href;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> args = &#123;<span class="string">"time"</span>:<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span></span><br><span class="line"><span class="actionscript">                $.get(url,args,<span class="function"><span class="keyword">function</span><span class="params">(data)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//现在的$.get()方法会根据url识别data格式,此处为xml</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//用$(data)包装data,变为jQuery对象</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//若data为json格式,这样用:var name = data.person.name;</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> name = $(data).find(<span class="string">"name"</span>).text();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> website = $(data).find(<span class="string">"website"</span>).text();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> address = $(data).find(<span class="string">"address"</span>).text();</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">".detail"</span>).empty()</span></span><br><span class="line"><span class="actionscript">                        .append(<span class="string">"&lt;p&gt;姓名:"</span>+name+<span class="string">"&lt;/p&gt;"</span>)</span></span><br><span class="line"><span class="handlebars"><span class="xml">                        .append("<span class="tag">&lt;<span class="name">p</span>&gt;</span>网址:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"+ website +"</span> <span class="attr">target</span>=<span class="string">'_blank'</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>")</span></span></span><br><span class="line"><span class="actionscript">                        .append(<span class="string">"&lt;p&gt;住址:"</span>+address+<span class="string">"&lt;/p&gt;"</span>);</span></span><br><span class="line"><span class="actionscript">                &#125;);<span class="comment">//为了明确,建议在第四个参数处指明返回数据的格式,例:"json"</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.detail</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brief"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sun.xml"</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"zhu.xml"</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sha.xml"</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font style="color:red;font-weight:bold;font-size:1.2em;">$.post()方法和$.get()方法类似, 但是若向本地服务器发送POST请求, 本地服务器需要具备处理POST请求的能力</font></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Ajax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ajax </tag>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ajax数据格式</title>
      <link href="/Ajax1-1.html"/>
      <url>/Ajax1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Ajax------常用的数据格式</p><p>XML</p><p>JSON</p><p>HTML</p><a id="more"></a><p>三种数据格式: XML、JSON、HTML</p><h2 id="一-HTML格式">一.HTML格式</h2><blockquote><p>HTML由一些普通文本组成.若服务器通过XMLHttpRequest发送HTML, 文本将存储在responseText属性中.</p><p>可以直接将responseText赋值给节点的innerHTML属性.</p><p>优点:</p><ol><li>从服务器发送的HTML代码在浏览器端不需要用JS再解析</li><li>HTML的可读性好</li><li>HTML代码块与innerHTML属性搭配, 效率高</li></ol><p>缺点:</p><ol><li>若需通过Ajax更新一篇文档的多个部分, HTML不合适</li><li>innerHTML并非DOM标准</li></ol></blockquote><p>同目录下四个html文件: index.html、sun.html、zhu.html、sha.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--index.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> briefA = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; briefA.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                briefA[i].onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">                    request.open(<span class="string">"GET"</span>, <span class="keyword">this</span>.href, <span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">                    request.send(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">                    request.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(request.readyState == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">if</span>(request.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="javascript">                                <span class="built_in">document</span>.getElementsByClassName(<span class="string">"detail"</span>)[<span class="number">0</span>].innerHTML = request.responseText;</span></span><br><span class="line"><span class="undefined">                            &#125;</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.detail</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brief"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sun.html"</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"zhu.html"</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sha.html"</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sun.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:孙悟空<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>网址:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://baike.baidu.com/item/%E5%AD%99%E6%82%9F%E7%A9%BA/5576?fr=aladdin"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>住址:花果山<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--zhu.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:猪八戒<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>网址:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://baike.baidu.com/item/%E7%8C%AA%E5%85%AB%E6%88%92/769?fr=aladdin"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>住址:高老庄<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sha.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:沙和尚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>网址:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://baike.baidu.com/item/%E6%B2%99%E6%82%9F%E5%87%80/29248?fromtitle=%E6%B2%99%E5%92%8C%E5%B0%9A&amp;fromid=6472043&amp;fr=aladdin"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>住址:流沙河<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-XML">二.XML</h2><blockquote><p>XML就是为了传输数据而生的<br>优点:</p><ol><li>XML是一种通用的数据格式</li><li>XML可以为数据自定义标记</li><li>利用DOM就可以完全掌控文档</li></ol><p>缺点:</p><ol><li>若XML文档来自服务器, 就必须得保证文档文档含有正确的部首信息. 若文档类型不正确, 那么responseXML的值将为空</li><li>当浏览器接收到的XML很大时, DOM解析可能会很复杂</li></ol></blockquote><p>同目录下四个文件: index.html、sun.xml、zhu.xml、sha.xml</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> briefA = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> detail = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"detail"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; briefA.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                briefA[i].onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">                    request.open(<span class="string">"GET"</span>, <span class="keyword">this</span>.href, <span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">                    request.send(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">                    request.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(request.readyState == <span class="number">4</span>&amp;&amp;request.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">//1.接受XML格式数据</span></span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">var</span> result = request.responseXML;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">//2.解析XML数据</span></span></span><br><span class="line"><span class="undefined">                            /* 目标格式</span></span><br><span class="line"><span class="javascript"> * <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript"> * <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>网址:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>简介<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript"> * <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>住址:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="undefined"> */</span></span><br><span class="line"><span class="actionscript">                            detail.innerHTML = <span class="string">""</span>;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">var</span> name = result.getElementsByTagName(<span class="string">"name"</span>)[<span class="number">0</span>].firstChild.nodeValue;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">var</span> web = result.getElementsByTagName(<span class="string">"website"</span>)[<span class="number">0</span>].firstChild.nodeValue;</span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">var</span> address = result.getElementsByTagName(<span class="string">"address"</span>)[<span class="number">0</span>].firstChild.nodeValue;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p1 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p1.innerHTML = <span class="string">"姓名:"</span>+name;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p2 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p2.innerHTML = <span class="string">"网址:"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p3 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p3.innerHTML = <span class="string">"住址:"</span> + address;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="undefined">                            a.href = web;</span></span><br><span class="line"><span class="actionscript">                            a.target = <span class="string">"_blank"</span>;</span></span><br><span class="line"><span class="actionscript">                            a.innerHTML = <span class="string">"简介"</span>;</span></span><br><span class="line"><span class="undefined">                            p2.appendChild(a);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p1);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p2);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p3);</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> &#123;<span class="attribute">width</span>: <span class="number">200px</span>;<span class="attribute">margin</span>: <span class="number">0</span> auto;&#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> <span class="selector-tag">a</span>&#123;<span class="attribute">font-size</span>: <span class="number">20px</span>;&#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.detail</span> &#123;<span class="attribute">width</span>: <span class="number">200px</span>;<span class="attribute">margin</span>: <span class="number">0</span> auto;&#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brief"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sun.xml"</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"zhu.xml"</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sha.xml"</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sun.xml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--一定不要忘记XML的部首信息--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">detail</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">website</span>&gt;</span>https://baike.baidu.com/item/%E5%AD%99%E6%82%9F%E7%A9%BA/5576?fr=aladdin<span class="tag">&lt;/<span class="name">website</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span>&gt;</span>花果山<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">detail</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--zhu.xml--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">detail</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">website</span>&gt;</span>https://baike.baidu.com/item/%E7%8C%AA%E5%85%AB%E6%88%92/769?fr=aladdin<span class="tag">&lt;/<span class="name">website</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span>&gt;</span>高老庄<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">detail</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sha.xml--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">detail</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">website</span>&gt;</span>https://baike.baidu.com/item/%E6%B2%99%E6%82%9F%E5%87%80/29248?fr=aladdin<span class="tag">&lt;/<span class="name">website</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span>&gt;</span>流沙河<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">detail</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-JSON">三.JSON</h2><blockquote><p>优点:</p><ol><li>也是一种数据传输的格式, JSON与XML很相似, 但是JSON更轻巧</li><li>JSON不需要从服务端发送含有特定内容类型的首部信息.</li></ol><p>缺点:</p><ol><li>语法严谨</li><li>代码不太易读</li><li>用eval函数解析JSON字符串存在风险</li></ol></blockquote><p>同目录下四个文件: index.html、sun.json、zhu.json、sha.json</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> briefA = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> detail = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"detail"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; briefA.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">                briefA[i].onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">                    request.open(<span class="string">"GET"</span>, <span class="keyword">this</span>.href, <span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">                    request.send(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">                    request.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(request.readyState == <span class="number">4</span>&amp;&amp;request.status == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                            <span class="comment">//1.接受json格式数据</span></span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">var</span> result = request.responseText;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(result);</span></span><br><span class="line"><span class="actionscript">                            detail.innerHTML = <span class="string">""</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p1 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p1.innerHTML = <span class="string">"姓名:"</span>+obj.person.name;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p2 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p2.innerHTML = <span class="string">"网址:"</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> p3 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span></span><br><span class="line"><span class="actionscript">                            p3.innerHTML = <span class="string">"住址:"</span> + obj.person.address;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="undefined">                            a.href = obj.person.website;</span></span><br><span class="line"><span class="actionscript">                            a.target = <span class="string">"_blank"</span>;</span></span><br><span class="line"><span class="actionscript">                            a.innerHTML = <span class="string">"简介"</span>;</span></span><br><span class="line"><span class="undefined">                            p2.appendChild(a);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p1);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p2);</span></span><br><span class="line"><span class="undefined">                            detail.appendChild(p3);</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.brief</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="undefined">            font-size: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.detail</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            margin: 0 auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brief"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sun.json"</span>&gt;</span>孙悟空<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"zhu.json"</span>&gt;</span>猪八戒<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sha.json"</span>&gt;</span>沙和尚<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"detail"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"person"</span>:&#123;</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"孙悟空"</span>,</span><br><span class="line">    <span class="attr">"website"</span>:<span class="string">"https://baike.baidu.com/item/%E5%AD%99%E6%82%9F%E7%A9%BA/5576?fr=aladdin"</span>,</span><br><span class="line">    <span class="attr">"address"</span>:<span class="string">"花果山"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"person"</span>:&#123;</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"猪八戒"</span>,</span><br><span class="line">    <span class="attr">"website"</span>:<span class="string">"https://baike.baidu.com/item/%E7%8C%AA%E5%85%AB%E6%88%92/769?fr=aladdin"</span>,</span><br><span class="line">    <span class="attr">"address"</span>:<span class="string">"高老庄"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"person"</span>:&#123;</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"沙和尚"</span>,</span><br><span class="line">    <span class="attr">"website"</span>:<span class="string">"https://baike.baidu.com/item/%E6%B2%99%E6%82%9F%E5%87%80/29248?fr=aladdin"</span>,</span><br><span class="line">    <span class="attr">"address"</span>:<span class="string">"流沙河"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Ajax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ajax </tag>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ajax简介</title>
      <link href="/Ajax1-0.html"/>
      <url>/Ajax1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>关于 AJAX 你知道什么?</p><p>什么是 AJAX?</p><p>AJAX是干什么的?</p><a id="more"></a><h2 id="一-什么是AJAX">一.什么是AJAX</h2><blockquote><ul><li>①AJAX, 即Asynchronous JavaScript and XML(异步的 JavaScript 和 XML).</li><li>②AJAX 不是新的编程语言, 而是一种使用现有标准的新方法或技术.</li><li>③AJAX 是与服务器交换数据并更新部分网页的技术, 在不重新加载整个页面的情况下.</li></ul></blockquote><p>现在, 凡是允许浏览器与服务器通信而无须刷新当前页面的技术都被称作 Ajax.<br>Ajax最早是由Google使用的.</p><h3 id="1-如何实现Ajax">1.如何实现Ajax</h3><ul><li>Flash</li><li>Java applet</li><li>框架: 如果使用一组框架构造了一个网页, 可以只更新其中一个框架, 而不必惊动整个页面</li><li>隐藏的iframe</li><li>XMLHttpRequest: 该对象是对JS的一个扩展, 可以使网页与服务器进行通信. 这是创建Ajax应用的最佳选择</li></ul><p>实际上, 通常把Ajax当成XMLHttpRequest</p><h3 id="2-Ajax原理">2.Ajax原理</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/ajax.png" alt="ajax"></p><h3 id="3-Ajax工具包">3.Ajax工具包</h3><blockquote><p>Ajax并不是一项新技术, 它实际上是几种技术, 每种技术各尽其职, 以一种全新的方式聚合在一起.</p></blockquote><ul><li>服务端语言: 服务器需具备向浏览器发送特定信息的能力. Ajax与服务器端语言无关</li><li>XML(eXtensible Markup Language, 可扩展标记语言)是一种描述数据的格式. Ajax程序需要某种格式化的格式来在服务器和客户端之间传递消息, XML是其中一种选择.</li><li>XHTML(eXtensible HyperText Markup Language,可扩展超文本标记语言)(现在是HTML5.0)和CSS(Cascading Style Sheets,层叠样式表)标准化呈现在前端</li><li>DOM(Document Object Model,文档对象模型)实现动态的显示和交互</li><li>使用XMLHttpRequest对象进行异步数据读取</li><li>使用JS绑定和处理数据</li></ul><h3 id="4-Ajax的缺陷">4.Ajax的缺陷</h3><ul><li>由JS和Ajax引擎导致的浏览器的兼容问题</li><li>页面局部刷新, 导致后退等功能失效</li><li>对流媒体的支持没有Flash、Java applet好</li><li>一些手持设备(如手机等)支持性差</li></ul><h2 id="二-XMLHttpRequest">二.XMLHttpRequest</h2><blockquote><ul><li>XMLHttpRequest最早在IE5中以ActiveX组建形式出现, 非W3C标准</li><li>创建XMLHttpRequest对象的方法不一样: IE5将其实现为一个ActiveX对象, 其他浏览器实现为一个本地JS对象</li><li>虽然在不同浏览器上的实现方法是兼容的, 但是XMLHttpRequest实例的属性和方法是相同的.</li></ul></blockquote><h3 id="1-创建方式">1.创建方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getHTTPObject</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequset)&#123;</span><br><span class="line">        xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.ActiveXObject)&#123;</span><br><span class="line">        xhr = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-XMLHttpRequest的方法和属性">2.XMLHttpRequest的方法和属性</h3><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>open(“method”,“url”)</td><td>建立对服务器的调用.Method参数可以是GET、POST或PUT.URL参数可以是相对URL或绝对URL</td></tr><tr><td>send(content)</td><td>向服务器发送请求</td></tr><tr><td>setRequestHeader(“header”,“value”)</td><td>把指定首部设置为所提供的值, 在设置任何首部之前必须调用open()</td></tr><tr><td>abort()</td><td>停止当前请求</td></tr><tr><td>getResponseHeader(’‘header’’)</td><td>返回指定首部的值</td></tr><tr><td>getAllResponseHeaders()</td><td>把http请求的所有响应首部作为键/值返回</td></tr></tbody></table><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>onreadystatechange</td><td>每个状态的改变都会触发这个事件的处理器, 通常会调用一个JS函数</td></tr><tr><td>readyState</td><td>请求状态, 有五个: 0-&gt;未初始化, 1-&gt;正在加载, 2-&gt;已经加载, 3-&gt;交互中, 4-&gt;完成.</td></tr><tr><td>responseText</td><td>服务器的响应, 表示一个串</td></tr><tr><td>responseXML</td><td>服务器的响应, 表示为XML, 这个对象可解析为DOM对象</td></tr><tr><td>status</td><td>服务器的http状态码(200-&gt;OK, 404-&gt;NotFound, 等)</td></tr><tr><td>statusText</td><td>http状态码的相应文本(OK或NotFound, 等)</td></tr></tbody></table><h3 id="3-简单的发送请求">3.简单的发送请求</h3><blockquote><ul><li>利用XMLHttpRequest实例与服务器通信包含以下3个关键部分:</li></ul><ol><li>onreadystatechange事件处理函数</li><li>open方法</li><li>send方法</li></ol></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//1.获取a节点并为其添加一个onclick响应函数</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementsByTagName(<span class="string">"a"</span>)[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//3.创建一个 XMLHttpRequest 对象</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//4.准备发送请求的数据: url</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> url = <span class="keyword">this</span>.href;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> method = <span class="string">"GET"</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//5.调用 XMLHttpRequest 对象的open方法,准备请求</span></span></span><br><span class="line"><span class="undefined">                request.open(method,url);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//6.调用 XMLHttpRequest 对象的send方法,发送请求</span></span></span><br><span class="line"><span class="actionscript">                request.send(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//7.为 XMLHttpRequest 对象添加 onreadystatechange响应函数</span></span></span><br><span class="line"><span class="actionscript">                request.onreadystatechange = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//8.判断响应是否完成: XMLHttpRequest 对象的readyState属性值为4时</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span>(request.readyState==<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//9.再判断响应是否可用:  XMLHttpRequest 对象status属性值为200</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(request.status==<span class="number">200</span>||request.status==<span class="number">304</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//10.打印相应结果: responseText</span></span></span><br><span class="line"><span class="undefined">                            alert(request.responseText);</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//2.取消a节点的默认行为</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--在html文件的同级目录下的ajax.txt文件,内容:Hello Ajax!--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"ajax.txt"</span>&gt;</span>发送<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font style="color:red;font-size:1.2em;font-weight:bold;">注意: readyState 的值为4时响应成功, 但并不代表响应可用, 当status值(200，即OK)表示响应可用时才可使用</font></p><blockquote><p>onreadystatechange:</p><ul><li>该事件处理函数由服务器触发, 而不是用户触发</li><li>在Ajax执行过程中, 服务器会通知客户端当前的通信状态. 这依靠更新 XMLHttpRequest 对象的readyState属性来实现. 改变readyState属性是服务器对客户端连续操作的一种方式. 每次readyState属性值的改变都会触发onreadystatechange事件</li></ul></blockquote><blockquote><p>open(method,url,asynch):</p><ul><li>该方法允许我们用一个Ajax调用向服务器发送请求(其实是建立一个请求).</li><li>method: 请求类型, 类似&quot;GET&quot;或&quot;POST&quot;的字符串. 若只想从服务器获取信息, 而不需发送信息, 使用GET(GET请求也可通过URL附加的查询字符串来发送数据, 但有长度限制). 若需向服务器发送数据, 用POST请求.</li><li>某些情况下, 有些浏览器会把多个XMLHttpRequest请求的结果缓存在同一个URL下. 如果对每个请求的响应不同, 就会带来不好的效果. 此时, 我们会在请求的URL后附加时间戳, 来确保URL的唯一性, 起到禁用缓存的效果.</li><li>asynch: 表示请求是否异步, 一般取默认值true</li></ul></blockquote><blockquote><p>send(data):<br>GET请求时, data = null; POST请求时, data为相应数据.</p></blockquote><h3 id="4-POST请求">4.POST请求</h3><p>只需要在GET的基础上将method改为&quot;POST&quot;,并在open()和send()方法之间添加下面语句:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setRequestHeader(<span class="string">"ContentType"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br></pre></td></tr></table></figure><p><font style='color:red;font-size:1.2em;font-weight:bold;'>注意: 在开发过程中, 我们一般不用原生的方式来向服务器发送请求.一般用框架来实现, 例如: jQuery、axios等</font></p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Ajax </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ajax </tag>
            
            <tag> jQuery </tag>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS-JSON</title>
      <link href="/JS-JSON.html"/>
      <url>/JS-JSON.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JSON — JavaScript Object Notation</p><a id="more"></a><h2 id="一-JSON简介">一.JSON简介</h2><ul><li><p>JSON 指的是 JavaScript 对象表示法(JavaScript Object Notation)</p></li><li><p>JSON 是一个特殊的字符串, 它能被任意编程语言识别, 并可转换为任意语言中的对象</p></li><li><p>JSON 是轻量级的文本数据交换格式</p></li><li><p>JSON 使用 JavaScript 语法来描述数据对象, 但是 JSON 仍然独立于语言和平台. JSON 解析器和JSON 库支持许多不同的编程语言.</p></li></ul><h3 id="1-JSON与XML">1.JSON与XML</h3><p>JSON类似 XML(也是用来进行数据交换的)</p><ul><li>JSON 是纯文本</li><li>JSON 具有“自我描述性”(人类可读)</li><li>JSON 具有层级结构(值中存在值)</li><li>JSON 可通过 JavaScript 进行解析</li><li>JSON 数据可使用 AJAX 进行传输</li></ul><p>相比 XML 的不同之处</p><ul><li>没有结束标签</li><li>更短</li><li>读写的速度更快</li><li>能够使用内建的 JavaScript eval() 方法进行解析</li><li>使用数组</li><li>不使用保留字</li></ul><p><font style="color:red;font-size:1.2em;font-weight:bold">现在都用JS的JSON工具类来解析JSON</font></p><h2 id="二-JSON语法">二.JSON语法</h2><p>JSON 语法是 JavaScript 对象表示法语法的子集</p><ul><li>数据在名称/值对中</li><li>数据由逗号分隔</li><li>花括号保存对象</li><li>方括号保存数组</li></ul><h3 id="1-JSON名值对">1.JSON名值对</h3><p>JSON 数据的书写格式是: 名称/值对.</p><blockquote><p>名称/值对包括字段名称(<font style="color:red;">必须在双引号中</font>), 后面写一个冒号, 然后是值:</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"firstName"</span> : <span class="string">"John"</span>;</span><br><span class="line"><span class="comment">//上面就等价于JS语句</span></span><br><span class="line">firstName = <span class="string">"John"</span>;</span><br></pre></td></tr></table></figure><h3 id="2-JSON的值">2.JSON的值</h3><ul><li>数字(整数或浮点数)</li><li>字符串(在双引号中)</li><li>逻辑值(true 或 false)</li><li>数组(在方括号中)</li><li>对象(在花括号中)</li><li>null</li></ul><h3 id="3-JSON对象">3.JSON对象</h3><blockquote><p>JSON 对象在花括号中书写:<br>对象可以包含多个名称/值对:</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'&#123;"name":"孙悟空","age":500,"sex":"男","status":true&#125;'</span><br></pre></td></tr></table></figure><h3 id="4-JSON数组">4.JSON数组</h3><blockquote><p>JSON 数组在方括号中书写:</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'[1,2,3,4,5]'</span><br></pre></td></tr></table></figure><p>JSON对象与数组可以嵌套</p><h3 id="5-JSON文件">5.JSON文件</h3><ul><li>JSON 文件的文件类型是 “.json”</li><li>JSON 文本的 MIME 类型是 “application/json”</li></ul><h2 id="三-JSON与JS对象转换">三.JSON与JS对象转换</h2><h3 id="1-JSON—-JS对象">1.JSON—&gt;JS对象</h3><blockquote><p>JSON.parse()方法:<br>将指定JSON字符串转换为JS对象并返回</p><p>eval()函数:<br>这个函数可以用来执行一段字符串形式的JS代码, 并将执行结果返回</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//法1:</span></span><br><span class="line"><span class="keyword">var</span> jstr = <span class="string">'&#123;"name":"孙悟空","age":500,"sex":"男","status":true&#125;'</span>;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(jstr);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj);<span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//孙悟空</span></span><br><span class="line"><span class="comment">//IE7及以下浏览器不支持JSON类,可以用法2</span></span><br><span class="line"><span class="comment">//法2:</span></span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="built_in">eval</span>(<span class="string">"("</span>+jstr+<span class="string">")"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj2);<span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.name);<span class="comment">//孙悟空</span></span><br></pre></td></tr></table></figure><h3 id="2-JS对象—-JSON">2.JS对象—&gt;JSON</h3><blockquote><p>JSON.stringify()方法:<br>将指定JS对象转换为JSON字符串并返回</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"孙悟空"</span>,<span class="attr">age</span>:<span class="number">500</span>,<span class="attr">sex</span>:<span class="string">"男"</span>,<span class="attr">status</span>:<span class="literal">true</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> jstr = <span class="built_in">JSON</span>.stringify(obj);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> jstr);<span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(jstr);<span class="comment">//'&#123;"name":"孙悟空","age":500,"sex":"男","status":true&#125;'</span></span><br></pre></td></tr></table></figure><p>若想兼容IE7及以下浏览器, 可以引入外部JS(文件里实现了JSON工具类)</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSclassName</title>
      <link href="/JSclassName.html"/>
      <url>/JSclassName.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS基础—类的相关操作</p><a id="more"></a><h2 id="一-JS直接修改style属性">一.JS直接修改style属性</h2><blockquote><ul><li><p>通过style属性来修改元素的样式, 每修改一个样式, 浏览器需要重新渲染一次页面</p></li><li><p>这样的话, 执行性能是比较差的, 而且当我们要修改很多样式时, 用这种方式也很不方便</p></li><li><p>过多的使用这种方法, 网页的行为与表现也很大程度上耦合了</p></li><li><p>而我们希望, 一行JS代码就可以同时修改多个样式.</p></li><li><p>这时我们可以准备两套(或多套)CSS样式, 当需要修改时, 直接用JS替换为另一套就可以了</p></li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="actionscript">            btn01.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                box.style.width = <span class="number">200</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                box.style.height = <span class="number">200</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                box.style.backgroundColor = <span class="string">"yellowgreen"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.b1</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>修改样式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">class</span>=<span class="string">"b1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-修改class属性">二.修改class属性</h2><blockquote><p>我们可以通过修改元素的class属性来间接修改样式, 这样一来, 我们只需一行代码, 就可同时修改多个样式, 浏览器也只需重新渲染一次, 性能提升, 这种方式也可使表现和行为进一步分离.</p><p>在开发的过程中, 能通过class属性修改样式, 尽量这样使用.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="actionscript">            btn01.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                box.className = <span class="string">"b2"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.b1</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 300px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.b2</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            height: 200px;</span></span><br><span class="line"><span class="undefined">            background-color: yellowgreen;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>修改样式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">class</span>=<span class="string">"b1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-操作元素的class属性">三.操作元素的class属性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//为元素的class属性添加一个值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">obj,cname</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!hasClass(obj,cname))&#123;</span><br><span class="line">        obj.className += <span class="string">" "</span>+cname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断元素class属性是否有某个值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">obj,cname</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//利用正则表达式检测</span></span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span>+cname+<span class="string">"\\b"</span>);</span><br><span class="line">    <span class="keyword">return</span> reg.test(obj.className);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//删除元素class属性中的某个值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">obj,cname</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//利用正则表达式替换为空串</span></span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\b"</span>+cname+<span class="string">"\\b"</span>);</span><br><span class="line">    obj.className = obj.className.replace(reg,<span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//替换元素class属性中的某个值(有则删除,无则添加)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggleClass</span>(<span class="params">obj,cname</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(hasClass(obj,cname))&#123;</span><br><span class="line">        removeClass(obj,cname);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        addClass(obj,cname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSBOM定时器</title>
      <link href="/JSBOM1-1.html"/>
      <url>/JSBOM1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>window对象的定时器</p><a id="more"></a><h2 id="一-setInterval">一.setInterval()</h2><p>如果我们希望一段程序可以每隔一段时间执行一次, 这就用到了我们的定时器.</p><blockquote><p>setInterval()<br>------ 可以将一个函数每隔一段时间执行一次.<br>------ 参数:1. 回调函数, 该函数每隔一段时间会被调用一次<br>------ 2. 调用回调函数的时间间隔<br>------ 返回值: 一个Number型的数字, 这个数字作为定时器的唯一标识<br>------ 注意, 第一次调用回调函数会等一个参数时间间隔</p><p>clearInterval(timer) 可以关闭一个timer标识的setInterval()定时器</p></blockquote><h3 id="1-定时调用示例">1.定时调用示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> text = <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> num = <span class="number">1</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">                text.innerHTML = num++;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(num==<span class="number">11</span>)&#123;</span></span><br><span class="line"><span class="undefined">                    clearInterval(timer);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;,500);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-移动div">2.移动div</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> div = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> speed = <span class="number">10</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> timer = setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">switch</span> (div) &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">37</span>:box.style.left = box.offsetLeft - speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">38</span>:box.style.top = box.offsetTop - speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">39</span>:box.style.left = box.offsetLeft + speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">40</span>:box.style.top = box.offsetTop + speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;, 30);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (event.altKey)speed = <span class="number">100</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">else</span> speed = <span class="number">10</span>;</span></span><br><span class="line"><span class="undefined">                div = event.keyCode;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.onkeyup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">                    div = 0;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">style</span>=<span class="string">"width:100px;height:100px;background-color:red;position:absolute;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-延时调用">二.延时调用</h2><blockquote><p>延时调用: 延时调用一个函数, 不会马上执行, 而是隔一段时间之后在执行, 且只会执行一次</p><p>延时调用与定时调用的区别, 定时调用会多次调用回调函数, 延时调用只会调用一次</p><p>延时调用和定时调用实际上可以互相代替</p><p>延时调用用setTimeout()函数实现</p></blockquote><h2 id="1-setTimeout">1.setTimeout()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num++);<span class="comment">//1s后打印</span></span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br><span class="line">cleanTimeout(timer);<span class="comment">//关闭定时器</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSBOM简介</title>
      <link href="/JSBOM1-0.html"/>
      <url>/JSBOM1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JSBOM简介</p><a id="more"></a><h2 id="一-BOM简介">一.BOM简介</h2><blockquote><p>BOM<br>------ 即浏览器对象模型<br>------ BOM可以使我们通过JS来操作浏览器</p><p>BOM对象:<br>------ Window, 代表的是整个浏览器窗口, 同时window也是网页中的全局对象<br>------ Navigator, 代表当前浏览器的信息, 通过该对象可以识别不同浏览器<br>------ Location, 代表当前浏览器的地址栏信息, 通过它可以获取地址栏信息, 或者操作浏览器跳转页面<br>------ History, 代表浏览器的历史记录, 由于隐私, 该对象不能获取到具体的历史记录, 只能操作浏览器向前或向后翻页且该操作只在当次访问时有效.<br>------ Screen, 代表用户的屏幕信息, 通过它可以获取到用户的显示器相关信息(一般用于手机端)</p><p>以上BOM对象在浏览器中都是作为window对象的属性保存, 可以通过window对象调用, 也可以直接调用.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.navigator);</span><br><span class="line"><span class="built_in">console</span>.log(location);</span><br><span class="line"><span class="built_in">console</span>.log(history);</span><br><span class="line"><span class="built_in">console</span>.log(screen);</span><br></pre></td></tr></table></figure><h2 id="二-Navigator">二.Navigator</h2><ul><li>代表的是当前浏览器的信息, 通过该对象可以识别不同的浏览器</li><li>由于历史原因, Navigator对象中的大部分属性都已无法帮助我们识别不同的浏览器</li><li>一般我们使用userAgent(用户代理即浏览器)来判断浏览器信息, 它是一个字符串, 存储着浏览器的信息, 不同的浏览器有不同的userAgent, 但用userAgent不能区分IE11</li><li>若通过userAgent不能判断, 还可以用一些浏览器中特有的对象或属性, 来判断浏览器信息, 比如: IE特有的ActiveXObject</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*navigator.userAgent</span></span><br><span class="line"><span class="comment"> *chrome:Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36</span></span><br><span class="line"><span class="comment"> *IE8:Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</span></span><br><span class="line"><span class="comment"> *IE9:Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</span></span><br><span class="line"><span class="comment"> *IE10:Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)</span></span><br><span class="line"><span class="comment"> *IE11:Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729; rv:11.0) like Gecko</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>)&#123;</span><br><span class="line">    alert(<span class="string">"你是IE"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/firefox/i</span>.test(navigator.userAgent))&#123;</span><br><span class="line">    alert(<span class="string">"你是火狐"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/chrome/i</span>.test(navigator.userAgent))&#123;</span><br><span class="line">    alert(<span class="string">"你是谷歌"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三-History">三.History</h2><table><thead><tr><th>属性或方法</th><th>描述</th></tr></thead><tbody><tr><td>length</td><td>返回浏览器历史列表中的URL数量</td></tr><tr><td>back()</td><td>加载history列表中的前一个 URL</td></tr><tr><td>forward()</td><td>加载history列表中的下一个 URL</td></tr><tr><td>go()</td><td>加载history列表中的某个具体页面(参数决定)</td></tr></tbody></table><blockquote><p>history方法的功能相当于浏览器的前进和后退按钮的功能</p><p>go() 参数(整数): 1 相当于forward(); -1 相当于back(); 2 前进两次</p></blockquote><h2 id="四-location">四.location</h2><blockquote><p>代表地址栏信息, 若直接打印location, 则可以打印出地址栏当前页面的完整URL</p><p>若直接将location修改为一个绝对地址或相对地址, 则当前页面会自动跳转到该路径, 并会生成相应的历史记录.</p></blockquote><table><thead><tr><th>属性或方法</th><th>描述</th></tr></thead><tbody><tr><td>href</td><td>设置或返回完整的 URL</td></tr><tr><td>host</td><td>设置或返回主机名和当前 URL 的端口号</td></tr><tr><td>hostname</td><td>设置或返回当前 URL 的主机名</td></tr><tr><td>port</td><td>设置或返回当前 URL 的端口号</td></tr><tr><td>pathname</td><td>设置或返回当前 URL 的路径部分</td></tr><tr><td>protocol</td><td>设置或返回当前 URL 的协议</td></tr><tr><td>search</td><td>设置或返回从问号(?)开始的URL(查询部分)</td></tr><tr><td>assign()</td><td>加载新的文档, 相当于修改location</td></tr><tr><td>reload()</td><td>重新加载当前文档</td></tr><tr><td>replace()</td><td>用新的文档替换当前文档</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> jump = <span class="built_in">document</span>.getElementById(<span class="string">"jump"</span>);</span></span><br><span class="line"><span class="actionscript">            jump.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// location = "index.html";</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// location = "https://www.baidu.com";</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 和修改location一样</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// location.assign("https://www.baidu.com");</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 效果和assign()类似,但不会产生历史记录</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// location.replace("https://www.baidu.com");</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 刷新当前页面,和浏览器刷新按钮以及F5一样,若参数为true,则会强制刷新页面缓存</span></span></span><br><span class="line"><span class="actionscript">                location.reload(<span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"jump"</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM事件续</title>
      <link href="/JSDOM1-6.html"/>
      <url>/JSDOM1-6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JSDOM事件续</p><a id="more"></a><h2 id="一-事件的传播">一.事件的传播</h2><blockquote><p>事件的传播分为三个阶段:<br>------1.捕获阶段<br>-------- 在捕获阶段时, 从最外层的祖先元素, 向目标元素进行事件捕获, 但此时默认不会触发事件<br>------2.目标阶段<br>-------- 事件捕获到目标元素, 捕获结束, 并开始在目标元素上触发事件<br>------3.冒泡阶段<br>-------- 事件从目标元素向他的祖先元素传递, 依次触发祖先元素上的相应事件</p><p>如果希望在捕获阶段就触发事件, 可以将addEventListener()方法中的第三个参数设置为true, 但一般情况下, 我们不会这么做, 所以一般这个参数都是false</p><p>IE8及以下浏览器没有捕获阶段</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">(obj,event,callback)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(obj.addEventListener)&#123;</span></span><br><span class="line"><span class="actionscript">                obj.addEventListener(event,callback,<span class="literal">true</span>);</span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                obj.attachEvent(<span class="string">"on"</span>+event,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">                    callback.call(obj);</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box2 = <span class="built_in">document</span>.getElementById(<span class="string">"box2"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box3 = <span class="built_in">document</span>.getElementById(<span class="string">"box3"</span>);</span></span><br><span class="line"><span class="actionscript">            bind(box1,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;alert(<span class="keyword">this</span>.id);&#125;);</span></span><br><span class="line"><span class="actionscript">            bind(box2,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;alert(<span class="keyword">this</span>.id);&#125;);</span></span><br><span class="line"><span class="actionscript">            bind(box3,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;alert(<span class="keyword">this</span>.id);&#125;);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#box1</span>&#123;<span class="attribute">width</span>: <span class="number">300px</span>;<span class="attribute">height</span>: <span class="number">300px</span>;<span class="attribute">background-color</span>: <span class="number">#bfc</span>;&#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#box2</span>&#123;<span class="attribute">width</span>: <span class="number">200px</span>;<span class="attribute">height</span>: <span class="number">200px</span>;<span class="attribute">background-color</span>: red;&#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#box3</span>&#123;<span class="attribute">width</span>: <span class="number">100px</span>;<span class="attribute">height</span>: <span class="number">100px</span>;<span class="attribute">background-color</span>: yellow;&#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span>box1</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span>&gt;</span>box2</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box3"</span>&gt;</span>box3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-拖拽">二.拖拽</h2><ul><li>流程:</li><li>------1.鼠标在被拖拽元素上按下时, 开始拖拽  onmousedown</li><li>------2.鼠标移动时, 被拖拽元素跟随鼠标移动 onmousemove</li><li>------3.鼠标松开时, 被拖拽元素固定在当前位置 onmouseup</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">draw</span><span class="params">(obj)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//1.鼠标在obj上按下时,开始拖拽</span></span></span><br><span class="line"><span class="actionscript">            obj.onmousedown = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//设置obj捕获第一次onmousedown事件</span></span></span><br><span class="line"><span class="undefined">                obj.setCapture &amp;&amp; obj.setCapture();</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> ol = event.clientX - obj.offsetLeft;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> ot = event.clientY - obj.offsetTop;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//2.obj随鼠标移动</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> top = event.clientY - ol;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> left = event.clientX - ot;</span></span><br><span class="line"><span class="actionscript">                    obj.style.left = left + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                    obj.style.top = top + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//3.鼠标松开,固定obj</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.onmousemove = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.onmouseup = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//鼠标松开时,取消obj对鼠标按下的捕获</span></span></span><br><span class="line"><span class="undefined">                    obj.releaseCapture &amp;&amp; obj.releaseCapture();</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//当我们拖拽网页中的内容时,浏览器会默认到搜索引擎中搜索该内容</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//此时会导致拖拽异常,可以通过return false;取消搜索</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//IE8及以下不支持,可以用setCapture()实现</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box2 = <span class="built_in">document</span>.getElementById(<span class="string">"box2"</span>);</span></span><br><span class="line"><span class="undefined">            draw(box1);</span></span><br><span class="line"><span class="undefined">            draw(box2);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#box1</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#FF0000</span>;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#box2</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#bfa</span>;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">            left: 200px;</span></span><br><span class="line"><span class="undefined">            top: 200px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>文本内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-滚轮事件">三.滚轮事件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">(obj,event,callback)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(obj.addEventListener)&#123;</span></span><br><span class="line"><span class="actionscript">                obj.addEventListener(event,callback,<span class="literal">false</span>);</span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                obj.attachEvent(<span class="string">"on"</span>+event,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">                    callback.call(obj);</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">"box1"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//一般浏览器添加滚轮事件</span></span></span><br><span class="line"><span class="actionscript">            box1.onmousewheel = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(event.wheelDelta&gt;<span class="number">0</span>||event.detail&lt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                    box1.style.height = box1.clientHeight - <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                    box1.style.height = box1.clientHeight + <span class="number">10</span> + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//取消Firefox附带滚动条的默认行为</span></span></span><br><span class="line"><span class="undefined">                event.preventDefault &amp;&amp; event.preventDefault();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//取消附带滚动条的默认行为</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//Firefox添加滚轮事件</span></span></span><br><span class="line"><span class="actionscript">            bind(box1,<span class="string">"DomMouseScroll"</span>,box1.onmousewheel);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#box1</span>&#123;<span class="attribute">width</span>: <span class="number">100px</span>;<span class="attribute">height</span>: <span class="number">100px</span>;<span class="attribute">background-color</span>: red;&#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="四-键盘事件">四.键盘事件</h2><table><thead><tr><th>事件</th><th>描述</th></tr></thead><tbody><tr><td>onkeydown</td><td>某个键盘的键被按下</td></tr><tr><td>onkeyup</td><td>某个键盘的键被松开</td></tr><tr><td>onkeypress</td><td>某个键盘的键被按下或按住</td></tr></tbody></table><blockquote><p>键盘事件一般绑定给一些可以获取焦点的对象(一般为表单项)或者document</p><p>对于onkeydown事件来说, 若一直按着某个键不松手, 则事件一直在被触发;当它被连续触发时, 第一次和第二次触发之间会间隔稍微长一些, 之后触发很快; 这种设计是为了防止误操作</p></blockquote><table><thead><tr><th>键盘事件属性</th><th>描述</th></tr></thead><tbody><tr><td>altKey</td><td>返回当事件被触发时，“ALT” 是否被按下</td></tr><tr><td>ctrlKey</td><td>返回当事件被触发时，“CTRL” 键是否被按下</td></tr><tr><td>shiftKey</td><td>返回当事件被触发时，“SHIFT” 键是否被按下</td></tr><tr><td>keyCode</td><td>对于keypress事件, 该属性声明了被敲击的键生成的Unicode字符码. 对于keydown和keyup事件, 它指定了被敲击的键的虚拟键盘码. 虚拟键盘码可能和使用的键盘的布局相关.</td></tr></tbody></table><h3 id="1-键盘事件示例">1.键盘事件示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> text = <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>);</span></span><br><span class="line"><span class="actionscript">            text.onkeydown = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//主键区数字:48-57,数字键区:96-105</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//禁止在文本框中输入数字</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(event.keyCode&gt;=<span class="number">48</span>&amp;&amp;event.keyCode&lt;=<span class="number">57</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//取消在文本框中输出文本的默认行为</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(event.keyCode&gt;=<span class="number">96</span>&amp;&amp;event.keyCode&lt;=<span class="number">105</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(event.ctrlKey&amp;&amp;event.keyCode==<span class="number">65</span>)&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">"ctrl + A 被按下"</span>);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-使用键盘移动div">2.使用键盘移动div</h3><p>这里用键盘移动div有个小问题, 假如一直按着→键, div在第一次移动之后会有一点卡顿(这时为了防止按键的误操作), 但这不是我们希望的, 之后会用定时器解决这个问题.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> speed = <span class="number">10</span>;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//按住alt键加速</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(event.altKey)&#123;</span></span><br><span class="line"><span class="undefined">                    speed = 50;</span></span><br><span class="line"><span class="actionscript">                &#125;<span class="comment">//左:37 上:38 右:40 下:41</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">switch</span>(event.keyCode)&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">37</span>:box.style.left = box.offsetLeft - speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">38</span>:box.style.top = box.offsetTop - speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">39</span>:box.style.left = box.offsetLeft + speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">case</span> <span class="number">40</span>:box.style.top = box.offsetTop + speed + <span class="string">"px"</span>;<span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">style</span>=<span class="string">"width: 100px;height: 100px;background-color: red;position: absolute;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM事件</title>
      <link href="/JSDOM1-5.html"/>
      <url>/JSDOM1-5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>DOM事件</p><a id="more"></a><h2 id="一-事件对象">一.事件对象</h2><blockquote><p>事件对象: 当事件对应的响应函数被触发时, 浏览器每次都会将一个事件对象作为实参传递进响应函数, 在事件对象中封装了当前事件相关的一切信息, 比如: 鼠标坐标、键盘哪个按键被按下、鼠标滚轮滚动方向。。。</p><p>IE8及以下浏览器, 响应函数被触发时, 浏览器不会传递事件对象, 而把事件对象作为window对象的属性保存</p></blockquote><table><thead><tr><th>事件句柄</th><th>描述</th></tr></thead><tbody><tr><td>onmousemove</td><td>鼠标被移动</td></tr><tr><td>onunload</td><td>用户退出页面</td></tr><tr><td>onfocus</td><td>元素获得焦点</td></tr></tbody></table><table><thead><tr><th>鼠标属性</th><th>描述</th></tr></thead><tbody><tr><td>clientX</td><td>返回当事件被触发时，鼠标指针的水平坐标</td></tr><tr><td>clientY</td><td>返回当事件被触发时，鼠标指针的垂直坐标</td></tr><tr><td>pageX</td><td>鼠标相当于当前页面的水平坐标(IE9+)</td></tr><tr><td>pageY</td><td>鼠标相当于当前页面的垂直坐标(IE9+)</td></tr></tbody></table><p><font style='color:red;font-size:1.2em;font-weight:bold;'>注意: 所有的html代码, 均可直接复制, 然后粘贴到<a href="http://www.w3school.com.cn/tiy/t.asp?f=html_intro" target="_blank" rel="noopener">W3School</a> 代码区, 点击提交代码在线执行.</font></p><h3 id="1-div随鼠标移动">1.div随鼠标移动</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> move = <span class="built_in">document</span>.getElementById(<span class="string">"move"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> st = <span class="built_in">document</span>.body.scrollTop||<span class="built_in">document</span>.documentElement.scrollTop;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> sl = <span class="built_in">document</span>.body.scrollLeft||<span class="built_in">document</span>.documentElement.scrollLeft;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> left = event.clientX + sl;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> top = event.clientY + st;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//clientY是相对于浏览器原点鼠标的垂直坐标,</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//当页面中有滚动条时会出现错误,需要修改坐标</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">//你可以将+sl或+st去掉试试</span></span></span><br><span class="line"><span class="actionscript">                move.style.left = left + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                move.style.top = top + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body&#123;</span></span><br><span class="line"><span class="undefined">            height: 1000px;</span></span><br><span class="line"><span class="undefined">            width: 2000px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#move</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="css">            <span class="comment">/*开启定位,否则设置div的left和top没用*/</span></span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"move"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-事件的冒泡">二.事件的冒泡</h2><blockquote><p>所谓事件冒泡, 就是指事件的向上传导, 当后代元素上的事件被触发时, 其祖先元素的相同事件也会被触发</p><p>而在开发中, 大部分情况下冒泡都是有用的, 但是有时候我们不希望事件冒泡.</p><p>取消冒泡: 通过将事件对象的cancelBubble属性设置为true, 即可取消冒泡.</p></blockquote><p>例: 取消id为box的div的onmousemove事件的冒泡, 红色的div则不能随鼠标移动到box上</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> move = <span class="built_in">document</span>.getElementById(<span class="string">"move"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> st = <span class="built_in">document</span>.body.scrollTop||<span class="built_in">document</span>.documentElement.scrollTop;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> sl = <span class="built_in">document</span>.body.scrollLeft||<span class="built_in">document</span>.documentElement.scrollLeft;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> left = event.clientX + sl;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> top = event.clientY + st;</span></span><br><span class="line"><span class="actionscript">                move.style.left = left + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">                move.style.top = top + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="actionscript">            box.onmousemove = <span class="function"><span class="keyword">function</span><span class="params">(event)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event||<span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//取消box的onmousemove的冒泡</span></span></span><br><span class="line"><span class="actionscript">                event.cancelBubble = <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        *&#123;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        body&#123;</span></span><br><span class="line"><span class="undefined">            height: 1000px;</span></span><br><span class="line"><span class="undefined">            width: 2000px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#move</span>&#123;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span> <span class="attr">style</span>=<span class="string">"width: 400px;height: 400px;background-color: #bfa;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"move"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h2 id="三-事件的委派">三.事件的委派</h2><blockquote><p>所谓事件委派, 就是指将事件统一绑定给元素的共同的祖先元素, 这样当后代元素上的事件触发时, 会一直冒泡到祖先元素, 从而通过祖先元素的响应函数来处理事件, 但是这样的话有时候我们点击页面往往会出现不可预料的结果: 我们不知道到底是什么触发了这个事件.</p><p>事件委派就是利用了事件冒泡, 通过委派可以减少事件的绑定次数, 提高程序性能</p></blockquote><ul><li>通过事件对象的target属性, 可以获取触发此次事件的对象</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> u1 = <span class="built_in">document</span>.getElementById(<span class="string">"u1"</span>);</span></span><br><span class="line"><span class="actionscript">            btn01.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml">                li.innerHTML = "<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'javascript:;'</span> <span class="attr">class</span>=<span class="string">'link'</span>&gt;</span>新超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span>";</span></span></span><br><span class="line"><span class="undefined">                u1.appendChild(li);</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="actionscript">            u1.onclick = <span class="function"><span class="keyword">function</span><span class="params">(event)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                event = event || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="undefined">                alert(event.target);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (event.target.className.match(<span class="regexp">/\blink\b/</span>)) &#123;</span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">"我是ul的单击响应函数"</span>);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>添加超链接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"u1"</span> <span class="attr">style</span>=<span class="string">"background-color: #bfa;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>123<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"linkkk"</span>&gt;</span>超链接一<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"link"</span>&gt;</span>超链接二<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"link"</span>&gt;</span>超链接三<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="四-事件的绑定">四.事件的绑定</h2><ul><li>使用  对象.事件 = 响应函数; 形式为元素绑定事件响应函数, 只能同时为一个元素的一个事件绑定一个响应函数, 不能绑定多个, 若绑定了多个, 则最后绑定的函数生效.</li><li>但是, 在有的时候, 我们就希望为一个元素的相同事件绑定多个响应函数, 此时可用元素的addEventListener()方法绑定响应函数</li></ul><blockquote><p>addEventListener()<br>------ 参数:1.事件的字符串, 不要on, 例 :“onclick&quot;应为&quot;click”<br>------2.回调函数, 当事件触发时调用<br>------3.是否在捕获阶段触发事件, 需要一个布尔值, 一般传false<br>可以绑定多个响应函数, 事件被触发时, 顺序执行绑定的响应函数<br>IE8及以下要用attachEvent()方法代替, 但它的执行顺序与addEventListener()方法相反</p></blockquote><p>addEventListener()中的this是绑定该事件的对象, 而attachEvent()中的this是window</p><blockquote><p>想要兼容各种浏览器, 就需要自己写一个方法:<br>------参数:<br>------obj 要绑定事件的对象<br>------eventStr 要绑定事件的字符串(不要&quot;on&quot;)<br>------callback 回调函数</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">(obj,event,callback)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(obj.addEventListener)&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//大部分浏览器</span></span></span><br><span class="line"><span class="actionscript">                obj.addEventListener(event,callback,<span class="literal">false</span>);</span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//IE8及以下</span></span></span><br><span class="line"><span class="undefined">                /* 修改回调函数中的this为传入的obj对象</span></span><br><span class="line"><span class="actionscript"> * <span class="keyword">this</span>是由调用方式决定的</span></span><br><span class="line"><span class="actionscript"> * 通过callback.call(obj)方式可以修改调用方法时的<span class="keyword">this</span></span></span><br><span class="line"><span class="undefined"> */</span></span><br><span class="line"><span class="actionscript">                obj.attachEvent(<span class="string">"on"</span>+event,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">                    callback.call(obj);</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="actionscript">            bind(btn01,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="undefined">                alert(1);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="actionscript">            bind(btn01,<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="undefined">                alert(2);</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>bind()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOM操作网页样式</title>
      <link href="/JSDOM1-4.html"/>
      <url>/JSDOM1-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>通过JS的DOM操作网页的样式</p><a id="more"></a><h2 id="一-JS操作元素内联样式">一.JS操作元素内联样式</h2><ul><li>语法: <font style='color:red;font-weight:bold;'>元素.style.样式名 = 样式值;</font></li><li>注意: 若CSS样式名中含有-, 例: background-color(即背景)</li><li>  这种名称在JS中不允许, 需要将其改为驼峰命名, 例: backgroundColor</li><li>  即, 去掉样式名中的-, 并将-后的字母改为大写.</li><li>忘记的话, 可以查看W3School手册中的CSS样式</li></ul><p><font style='font-size:1.2em;font-weight:bold;'>注意: 通过JSDOM操作元素的style属性读取或修改的样式都是内联样式, 不能读或改CSS的样式, 内联样式拥有较高的优先级, 所以通过JS修改的样式会立即执行.</font></p><p>  <font style='font-size:1.2em;font-weight:bold;'>但是, 若在样式中写了 !important ,则此时样式会有最高的优先级, 无法用JS覆盖该样式. 所以尽量不要用 !important 声明样式.</font></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"box"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="actionscript">btn.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">box.style.width = <span class="string">"300px"</span>;</span></span><br><span class="line"><span class="actionscript">box.style.height = <span class="string">"300px"</span>;</span></span><br><span class="line"><span class="actionscript">box.style.backgroundColor = <span class="string">"yellow"</span>;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="undefined">width: 100px;</span></span><br><span class="line"><span class="undefined">height: 100px;</span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="undefined"> *若在red后加!important,</span></span><br><span class="line"><span class="undefined"> *JS不能通过style修改背景颜色</span></span><br><span class="line"><span class="undefined"> */</span></span><br><span class="line"><span class="undefined">background-color: red !important;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>修改样式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-读取元素的生效样式">二.读取元素的生效样式</h2><ul><li>语法: <font style='color:red;font-weight:bold;'>元素.currentStyle.样式名;</font></li><li>currentStyle只有IE和Opera支持, 通过currentStyle读取元素样式, 若改样式没有值, 则返回其默认值, 如: currentStyle.width 为auto</li><li>别的浏览器(IE9+)可以用window的getComputeStyle方法</li><li>  该方法返回一个对象, 该对象封装了指定元素对应的样式</li><li>  参数: ①要获取样式的元素②可以传递一个伪元素, 一般传null</li><li>  通过该对象读取的样式没有值, 也会返回默认值, 但有点不一样, 它返回的为具体的值.</li></ul><p>  <font style="color:red;font-size:1.2em;">注意: 通过currentStyle和getComputeStyle()方式只能读取元素的样式, 不能修改.要想修改样式, 必须使用style属性</font></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"box"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="actionscript">btn.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> css = <span class="built_in">window</span>.getComputedStyle(box, <span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> w = css.width;<span class="comment">//w为多少px</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> h = css.height;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//正常浏览器的方式(IE8及一下):</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> bgc = css.backgroundColor;<span class="comment">//bgc为rgb值</span></span></span><br><span class="line"><span class="actionscript">alert(<span class="string">"宽:"</span> + w + <span class="string">";高:"</span> + h + <span class="string">";背景色:"</span> + bgc);</span></span><br><span class="line"><span class="actionscript">                    w = box.currentStyle.with;<span class="comment">//w为auto</span></span></span><br><span class="line"><span class="actionscript">                    <span class="comment">//IE浏览器的方式:</span></span></span><br><span class="line"><span class="actionscript">                    bgc = box.currentStyle.backgroundColor;<span class="comment">//bgc为样式的值</span></span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="undefined">height: 100px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>显示样式值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-getStyle">三.getStyle()</h2><ul><li>二中提到的获取元素样式的方式, currentStyle只支持IE, 而getComputedStyle()方式不支持IE8及一下.</li><li>我们可以自己定义一个函数getStyle(), 用来获取指定元素的样式</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            background-color: rgb(255, 0, 0);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>显示样式值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">getStyle</span><span class="params">(obj, name)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>(<span class="built_in">window</span>.getComputedStyle) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//一般浏览器调用</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> getComputedStyle(obj, <span class="literal">null</span>)[name];</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">//IE8及一下时调用</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> obj.currentStyle[name];</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"box"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span></span><br><span class="line"><span class="actionscript">        btn.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> w = getStyle(box,<span class="string">"width"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> h = getStyle(box,<span class="string">"height"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> bgc = getStyle(box,<span class="string">"backgroundColor"</span>);</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"宽:"</span> + w + <span class="string">";高:"</span> + h + <span class="string">";背景色:"</span> + bgc);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="四-其他样式相关属性">四.其他样式相关属性</h2><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>element.clientHeight</td><td>返回元素的可见高度</td></tr><tr><td>element.clientWidth</td><td>返回元素的可见宽度</td></tr><tr><td>element.offsetHeight</td><td>返回元素的高度</td></tr><tr><td>element.offsetWidth</td><td>返回元素的宽度</td></tr><tr><td>element.offsetParent</td><td>返回元素的偏移容器</td></tr><tr><td>element.offsetLeft</td><td>返回元素的水平偏移位置</td></tr><tr><td>element.offsetTop</td><td>返回元素的垂直偏移位置</td></tr><tr><td>element.scrollHeight</td><td>返回元素的整体高度</td></tr><tr><td>element.scrollWidth</td><td>返回元素的整体宽度</td></tr><tr><td>element.scrollLeft</td><td>返回元素左边缘与视图之间的距离</td></tr><tr><td>element.scrollTop</td><td>返回元素上边缘与视图之间的距离</td></tr></tbody></table><blockquote><p>clientHeight、clientWidth: 获取元素可见宽度、高度值(返回数字, 不包括px), 不能修改<br>可见高度和宽度指内容区和内边距(width/height+padding)</p><p>offsetHeight、offsetWidth: 获取元素整个的宽度、高度(可见+boder)</p><p>offsetParent: 获取当前元素的定位父元素, 即距当前元素最近的开启了定位的祖先元素, 若所有的祖先元素都没开启定位, 则返回body.</p><p>offsetLeft、offsetTop: 获取当前元素相对于定位父元素的偏移量</p><p>scrollHeight、scrollWidth: 获取元素整个滚动区域的高度、宽度</p><p>scrollLeft、scrollTop: 获取滚动条滚动的距离, 注意: chrome认为浏览器的滚动条是body的, 火狐等浏览器认为浏览器的滚动条是html的.</p></blockquote><blockquote><p>当scrollHeight - scrollTop == clientHeight时, 说明垂直滚动条已经滚动到底<br>当scrollWidth - scrollLeft == clientWidth时, 说明水平滚动条已经滚动到底</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM查询补充</title>
      <link href="/JSDOM1-3.html"/>
      <url>/JSDOM1-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>DOM查询的剩余方法</p><a id="more"></a><h2 id="一-document属性">一.document属性</h2><table><thead><tr><th>属性名</th><th>描述</th></tr></thead><tbody><tr><td>body</td><td>对应网页的body标签</td></tr><tr><td>documentElement</td><td>对应网页的html根标签</td></tr><tr><td>all</td><td>对应网页中的所有标签</td></tr></tbody></table><h3 id="1-获取body">1.获取body</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//①通过getElementsByTagName()获取</span></span><br><span class="line">    <span class="keyword">var</span> body1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"body"</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(body);<span class="comment">//object HTMLBodyElement</span></span><br><span class="line">    <span class="comment">//②通过document的body属性获取</span></span><br><span class="line">    <span class="keyword">var</span> body2 = <span class="built_in">document</span>.body;</span><br><span class="line">    <span class="built_in">console</span>.log(body1==body2);<span class="comment">//true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>获取html根标签同理, 但用属性获取时要用document.documentElement获取</p><h3 id="2-获取页面中的所有元素">2.获取页面中的所有元素</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//①通过getElementsByTagName()</span></span><br><span class="line">    <span class="keyword">var</span> all1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"*"</span>);</span><br><span class="line">    <span class="comment">//②通过all属性获取</span></span><br><span class="line">    <span class="keyword">var</span> all2 = <span class="built_in">document</span>.all;</span><br><span class="line">    <span class="built_in">console</span>.log(all1==all2);<span class="comment">//false</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; all1.length;i ++)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(all1[i]==all2[i]);<span class="comment">//true</span></span><br><span class="line">        <span class="built_in">console</span>.log(all1[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二-其他DOM查询方法">二.其他DOM查询方法</h2><table><thead><tr><th style="text-align:left">方法</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:left">getElementsByClassName()</td><td>根据元素的class属性值查询一组节点对象</td></tr><tr><td style="text-align:left">querySelector()</td><td>根据CSS选择器来查询第一个满足条件的元素节点对象</td></tr><tr><td style="text-align:left">querySelectorAll()</td><td>根据CSS选择器来查询所有满足条件的元素节点对象</td></tr></tbody></table><h3 id="1-getElementsByClassName">1.getElementsByClassName()</h3><p>根据元素的class属性值查询一组节点对象, 兼容性IE9+</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mybox"</span>&gt;</span>Three<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> boxs = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"box"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(boxs);<span class="comment">//object HTMLCollection</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(boxs[<span class="number">0</span>].innerText);<span class="comment">//One</span></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-querySelector">2.querySelector()</h3><ul><li>参数: 内容为CSS选择器的字符串</li><li>该方法只会查询满足条件的第一个元素对象</li><li>兼容性IE8+. 可以用来代替getElementsByClassName()方法</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">".box"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(box.innerText);<span class="comment">//One</span></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-querySelectorAll">3.querySelectorAll()</h3><ul><li>和querySelector()方法类似, 只是它的返回值是一个数组</li><li>即使满足条件的元素只有一个, 返回的也是数组</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mybox"</span>&gt;</span>Three<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> box = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#mybox"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(box);<span class="comment">//object NodeList</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(box[<span class="number">0</span>].innerText);<span class="comment">//Three</span></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-DOM增删改">三.DOM增删改</h2><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>appendChild()</td><td>把新的子节点添加到指定节点</td></tr><tr><td>removeChild()</td><td>删除子节点</td></tr><tr><td>replaceChild()</td><td>替换子节点</td></tr><tr><td>insertBefore()</td><td>在指定的子节点前面插入新的子节点</td></tr><tr><td>createElement()</td><td>创建元素节点</td></tr><tr><td>createTextNode()</td><td>创建文本节点。</td></tr></tbody></table><h3 id="1-html">1.html</h3><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">@<span class="keyword">CHARSET</span> <span class="string">"UTF-8"</span>;</span></span><br><span class="line"><span class="undefined">body &#123;</span></span><br><span class="line"><span class="undefined">width: 800px;</span></span><br><span class="line"><span class="undefined">margin-left: auto;</span></span><br><span class="line"><span class="undefined">margin-right: auto;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">button &#123;</span></span><br><span class="line"><span class="undefined">width: 300px;</span></span><br><span class="line"><span class="undefined">margin-bottom: 10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-id">#btnList</span> &#123;</span></span><br><span class="line"><span class="undefined">float: left;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-id">#total</span> &#123;</span></span><br><span class="line"><span class="undefined">width: 450px;</span></span><br><span class="line"><span class="undefined">float: left;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">ul &#123;</span></span><br><span class="line"><span class="undefined">list-style-type: none;</span></span><br><span class="line"><span class="undefined">margin: 0px;</span></span><br><span class="line"><span class="undefined">padding: 0px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="undefined">border-style: solid;</span></span><br><span class="line"><span class="undefined">border-width: 1px;</span></span><br><span class="line"><span class="undefined">padding: 5px;</span></span><br><span class="line"><span class="undefined">margin: 5px;</span></span><br><span class="line"><span class="css"><span class="selector-tag">background-color</span>: <span class="selector-id">#99ff99</span>;</span></span><br><span class="line"><span class="undefined">float: left;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="undefined">width: 400px;</span></span><br><span class="line"><span class="undefined">border-style: solid;</span></span><br><span class="line"><span class="undefined">border-width: 1px;</span></span><br><span class="line"><span class="undefined">margin-bottom: 10px;</span></span><br><span class="line"><span class="undefined">padding: 10px;</span></span><br><span class="line"><span class="undefined">float: left;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    你喜欢哪个城市?</span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>东京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span>首尔<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"btnList"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>创建一个"广州"节点,添加到#city下<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn02"</span>&gt;</span>将"广州"节点插入到#bj前面<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn03"</span>&gt;</span>使用"广州"节点替换#bj节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn04"</span>&gt;</span>删除#bj节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn05"</span>&gt;</span>读取#city内的HTML代码<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn06"</span>&gt;</span>设置#bj内的HTML代码<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn07"</span>&gt;</span>创建一个"广州"节点,添加到#city下<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h3 id="2-创建追加节点">2.创建追加节点</h3><ul><li>appendChild() 将一个节点追加到指定加点之后</li><li>createElement() 创建指定名字的元素节点</li><li>createTextNode() 创建指定内容的文本节点</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myClick</span>(<span class="params">idStr, fun</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(idStr);</span><br><span class="line">    btn.onclick = fun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//创建一个"广州"节点,添加到#city下</span></span><br><span class="line">    myClick(<span class="string">"btn01"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">var</span> gz = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">        <span class="keyword">var</span> text = <span class="built_in">document</span>.createTextNode(<span class="string">"广州"</span>);</span><br><span class="line">        gz.appendChild(text);</span><br><span class="line">        city.appendChild(gz);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//读取#city内的HTML代码</span></span><br><span class="line">    myClick(<span class="string">"btn02"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        alert(city.innerHTML);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//设置#bj内的HTML代码</span></span><br><span class="line">    myClick(<span class="string">"btn06"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        bj.innerHTML = <span class="string">"日本"</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//向city中添加广州</span></span><br><span class="line">    myClick(<span class="string">"btn06"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">var</span> gz = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">        <span class="comment">//不再创建文本节点</span></span><br><span class="line">        gz.innerHTML = <span class="string">"广州"</span>;</span><br><span class="line">        city.appendChild(gz);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-插入替换删除节点">3.插入替换删除节点</h3><ul><li>insertBefore() 由父元素调用, 在第二个参数节点之前插入新节点(第一个参数)</li><li>replaceChild() 由父元素调用, 将第二个参数节点替换为新节点(第一个参数)</li><li>removeChild() 由父元素调用, 删除指定元素节点</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//将"广州"节点插入到#bj前面</span></span><br><span class="line">    myClick(<span class="string">"btn02"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        <span class="keyword">var</span> gz = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">        gz.innerHTML = <span class="string">"广州"</span>;</span><br><span class="line">        city.insertBefore(gz,bj);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//使用"广州"节点替换#bj节点</span></span><br><span class="line">    myClick(<span class="string">"btn03"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        <span class="keyword">var</span> gz = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">        gz.innerHTML = <span class="string">"广州"</span>;</span><br><span class="line">        city.replaceChild(gz,bj);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//删除#bj节点</span></span><br><span class="line">    myClick(<span class="string">"btn04"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        city.removeChild(bj);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM练习</title>
      <link href="/JSDOM1-2.html"/>
      <url>/JSDOM1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS DOM实现切换图片、多选框全选</p><a id="more"></a><h2 id="一-图片切换">一.图片切换</h2><h3 id="CSS样式">CSS样式:</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="html的body">html的body:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/1.jpg"</span> <span class="attr">alt</span>=<span class="string">"冰棍"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"prev"</span>&gt;</span>上一张<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"next"</span>&gt;</span>下一张<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>分析: 想要实现点击按钮时图片的切换, 只需给按钮添加一个点击事件, 点击时修改一下img标签的src就好了.</p><h3 id="图片">图片:</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/1.jpg" alt="1"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/2.jpg" alt="2"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/3.jpg" alt="3"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/4.jpg" alt="4"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/5.jpg" alt="5"></p><h3 id="JS实现图片切换">JS实现图片切换:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取相应元素</span></span><br><span class="line">    <span class="keyword">var</span> prev = <span class="built_in">document</span>.getElementById(<span class="string">"prev"</span>);</span><br><span class="line">    <span class="keyword">var</span> next = <span class="built_in">document</span>.getElementById(<span class="string">"next"</span>);</span><br><span class="line">    <span class="keyword">var</span> img = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> info = <span class="built_in">document</span>.getElementById(<span class="string">"info"</span>);</span><br><span class="line">    <span class="comment">//添加图片的src</span></span><br><span class="line">    <span class="keyword">var</span> imgSrcs = [<span class="string">"img/1.jpg"</span>,<span class="string">"img/2.jpg"</span>,<span class="string">"img/3.jpg"</span>,<span class="string">"img/4.jpg"</span>,<span class="string">"img/5.jpg"</span>];</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">"一共"</span>+imgSrcs.length+<span class="string">"张图片,当前第"</span>;</span><br><span class="line">    info.innerHTML = str + (index+<span class="number">1</span>) + <span class="string">"张"</span>;</span><br><span class="line">    <span class="comment">//点击上一张的事件</span></span><br><span class="line">    prev.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(--index==<span class="number">-1</span>)&#123;</span><br><span class="line">            index = imgSrcs.length<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        img.src = imgSrcs[index];</span><br><span class="line">        info.innerHTML = str + (index+<span class="number">1</span>) + <span class="string">"张"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//点击下一张的事件</span></span><br><span class="line">    next.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(++index==imgSrcs.length)&#123;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        img.src = imgSrcs[index];</span><br><span class="line">        info.innerHTML = str + (index+<span class="number">1</span>) + <span class="string">"张"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="二-全选练习">二.全选练习</h2><p>html的body:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        你爱好的运动是？<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"checkedAllBox"</span> /&gt;</span>全选/全不选 </span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"items"</span> <span class="attr">value</span>=<span class="string">"足球"</span> /&gt;</span>足球</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"items"</span> <span class="attr">value</span>=<span class="string">"篮球"</span> /&gt;</span>篮球</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"items"</span> <span class="attr">value</span>=<span class="string">"羽毛球"</span> /&gt;</span>羽毛球</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"items"</span> <span class="attr">value</span>=<span class="string">"乒乓球"</span> /&gt;</span>乒乓球</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"checkedAllBtn"</span> <span class="attr">value</span>=<span class="string">"全　选"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"checkedNoBtn"</span> <span class="attr">value</span>=<span class="string">"全不选"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"checkedRevBtn"</span> <span class="attr">value</span>=<span class="string">"反　选"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"sendBtn"</span> <span class="attr">value</span>=<span class="string">"提　交"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font style="color:red;font-size:1.2em;font-weight:bold;">注意: 网页中的checkedAllBox多选框, 当点击选中它时, 下面的所有多选框也选中, 当点击取消选中它时, 下面的所有多选框也取消选中; 还得保证, 如果下面的多选框全部选中, 则checkedAllBox也选中, 如果下面的多选框没有全部选中, 则它也不选中.</font></p><h3 id="1-全选按钮">1.全选按钮</h3><p>通过W3School离线手册查询JS对象里的HTML对象&lt;input&gt; checkbox, 可知它有属性checked表示现在多选框的选中状态.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取全选按钮</span></span><br><span class="line">    <span class="keyword">var</span> allBtn = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBtn"</span>);</span><br><span class="line">    <span class="comment">//获取所有多选框</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    <span class="comment">//获取checkedAllBox多选框</span></span><br><span class="line">    <span class="keyword">var</span> checkedAllBox = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBox"</span>);</span><br><span class="line">    allBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; items.length;i ++)&#123;</span><br><span class="line">            items[i].checked = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//选中checkedAllBox</span></span><br><span class="line">        checkedAllBox.checked = <span class="literal">true</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-全不选按钮">2.全不选按钮</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取全不选按钮</span></span><br><span class="line">    <span class="keyword">var</span> noBtn = <span class="built_in">document</span>.getElementById(<span class="string">"checkedNoBtn"</span>);</span><br><span class="line">    <span class="comment">//获取所有多选框与checkedAllBox,共用之前的代码</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    <span class="keyword">var</span> checkedAllBox = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBox"</span>);</span><br><span class="line">    noBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; items.length;i ++)&#123;</span><br><span class="line">            items[i].checked = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//取消选中checkedAllBox</span></span><br><span class="line">        checkedAllBox.checked = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-反选">3.反选</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取反选按钮</span></span><br><span class="line">    <span class="keyword">var</span> revBtn = <span class="built_in">document</span>.getElementById(<span class="string">"checkedRevBtn"</span>);</span><br><span class="line">    <span class="comment">//获取所有多选框与checkedAllBox,共用之前的代码</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    <span class="keyword">var</span> checkedAllBox = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBox"</span>);</span><br><span class="line">    revBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">            items[i].checked = !items[i].checked;</span><br><span class="line">            flag += items[i].checked;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果所有多选框选中,选中checkedAllBox</span></span><br><span class="line">        <span class="keyword">if</span>(flag==<span class="number">4</span>)checkedAllBox.checked = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span> checkedAllBox.checked = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-提交">4.提交</h3><p>点击提交按钮时, 弹出选中的value属性值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取提交按钮</span></span><br><span class="line">    <span class="keyword">var</span> submitBtn = <span class="built_in">document</span>.getElementById(<span class="string">"sendBtn"</span>);</span><br><span class="line">    <span class="comment">//获取所有多选框,共用之前的代码</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    submitBtn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(items[i].checked)&#123;</span><br><span class="line">                alert(items[i].value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-checkedAllBox">5.checkedAllBox</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取所有多选框与checkedAllBox,共用之前的代码</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    <span class="keyword">var</span> checkedAllBox = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBox"</span>);</span><br><span class="line">    checkedAllBox.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//同步所有多选框</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">            items[i].checked = <span class="keyword">this</span>.checked;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-点击多选框">6.点击多选框</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取所有多选框与checkedAllBox,共用之前的代码</span></span><br><span class="line">    <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByName(<span class="string">"items"</span>);</span><br><span class="line">    <span class="keyword">var</span> checkedAllBox = <span class="built_in">document</span>.getElementById(<span class="string">"checkedAllBox"</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">        <span class="comment">//给每个多选框绑定单击响应函数</span></span><br><span class="line">        items[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//点击多选框时,同步checkedAllBox</span></span><br><span class="line">            checkedAllBox.checked = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; items.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(!items[j].checked)&#123;</span><br><span class="line">                    checkedAllBox.checked = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM基础查询</title>
      <link href="/JSDOM1-1.html"/>
      <url>/JSDOM1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS的DOM基础查询</p><a id="more"></a><h2 id="一-获取元素节点">一.获取元素节点</h2><p>元素节点, 即HTML标签对象</p><p>DOM(document)对象的方法:</p><table><thead><tr><th>方法</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td>getElementById()</td><td style="text-align:left">返回对拥有指定 id 的第一个对象的引用</td></tr><tr><td>getElementsByName()</td><td style="text-align:left">返回带有指定name属性的对象集合</td></tr><tr><td>getElementsByTagName()</td><td style="text-align:left">返回带有指定标签名的对象集合</td></tr><tr><td>write()</td><td style="text-align:left">向文档写 HTML 表达式 或 JavaScript 代码</td></tr><tr><td>writeln()</td><td style="text-align:left">等同于 write() 方法, 不同的是在每个表达式之后写一个换行符</td></tr></tbody></table><p>通过例子, 看一下获取元素节点的三个DOM方法</p><p>样式表:</p><details><summary>One More Thing 👇</summary><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">CHARSET</span> <span class="string">"UTF-8"</span>;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">margin-right</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#btnList</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>:left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#total</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">    <span class="attribute">float</span>:left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#99ff99</span>;</span><br><span class="line">    <span class="attribute">float</span>:left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inner</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>html的body:</p><details><summary>One More Thing 👇</summary><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"total"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>你喜欢哪个城市?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"bj"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>东京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>首尔<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>你喜欢哪款单机游戏?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"game"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"rl"</span>&gt;</span>红警<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>实况<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>极品飞车<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>魔兽<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>你手机的操作系统是?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"phone"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>IOS<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">"android"</span>&gt;</span>Android<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>Windows Phone<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">            gender:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"hello"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"male"</span> /&gt;</span> Male</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"hello"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"female"</span> /&gt;</span> Female</span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span> name:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"abcde"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"btnList"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn01"</span>&gt;</span>查找#bj节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn02"</span>&gt;</span>查找所有li节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn03"</span>&gt;</span>查找name=gender的所有节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn04"</span>&gt;</span>查找#city下所有li节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn05"</span>&gt;</span>返回#city的所有子节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn06"</span>&gt;</span>返回#phone的第一个子节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn07"</span>&gt;</span>返回#bj的父节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn08"</span>&gt;</span>返回#android的前一个兄弟节点<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></details><h3 id="1-getElementById">1.getElementById</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn01的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn01 = <span class="built_in">document</span>.getElementById(<span class="string">"btn01"</span>);</span><br><span class="line">    btn01.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//查找id为bj的节点</span></span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        <span class="comment">//innerHTML 通过这个属性可以获取到元素内部的html代码</span></span><br><span class="line">        alert(bj.innerHTML);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-getElementsByTagName">2.getElementsByTagName</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn02的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn02 = <span class="built_in">document</span>.getElementById(<span class="string">"btn02"</span>);</span><br><span class="line">    btn02.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//查找所有li节点</span></span><br><span class="line">        <span class="comment">//getElementsByTagName()可以根据标签名来获取一组元素节点对象</span></span><br><span class="line">        <span class="comment">//这个方法会给我们返回一个类数组对象,所有查询到的元素都会封装到对象中</span></span><br><span class="line">        <span class="comment">//即使查询到的元素只有一个,也会封装到数组中返回</span></span><br><span class="line">        <span class="keyword">var</span> lis = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.length; i++) &#123;</span><br><span class="line">            alert(lis[i].innerHTML);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-getElementsByName">3.getElementsByName</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn03的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn03 = <span class="built_in">document</span>.getElementById(<span class="string">"btn03"</span>);</span><br><span class="line">    btn03.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//查找name属性,值为gender的所有节点</span></span><br><span class="line">        <span class="keyword">var</span> inputs = <span class="built_in">document</span>.getElementsByName(<span class="string">"gender"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; inputs.length; i++) &#123;</span><br><span class="line">            <span class="comment">/* innerHTML用于获取元素内部的HTML代码的</span></span><br><span class="line"><span class="comment"> * 对于自结束标签,这个属性没有意义</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">            <span class="comment">/* 如果需要读取自结束标签的属性</span></span><br><span class="line"><span class="comment"> * 直接使用 元素.属性名</span></span><br><span class="line"><span class="comment"> * 例: 元素.id 元素.name 元素.value</span></span><br><span class="line"><span class="comment"> * 注意: class属性不能采用这种方式</span></span><br><span class="line"><span class="comment"> * 读取class属性时需要使用 元素.className</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">            <span class="keyword">var</span> str = <span class="string">"class=\""</span>+inputs[i].className+</span><br><span class="line">                <span class="string">"\" type=\""</span>+inputs[i].type+<span class="string">"\" name=\""</span>+</span><br><span class="line">                inputs[i].name+<span class="string">"\" value=\""</span>+inputs[i].value+<span class="string">"\""</span>;</span><br><span class="line">            alert(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二-获取元素节点的子节点">二.获取元素节点的子节点</h2><p>通过具体的元素节点调用:</p><table><thead><tr><th>方法或属性</th><th>简介</th></tr></thead><tbody><tr><td>getElementsByTagName()</td><td>返回当前节点的指定标签名的所有后代节点</td></tr><tr><td>childNodes属性</td><td>表示当前节点的所有子节点(包括文本节点)</td></tr><tr><td>children属性</td><td>表示当前节点的所有子元素(即HTML标签)</td></tr><tr><td>firstChild属性</td><td>表示当前节点的第一个子节点</td></tr><tr><td>lastChild属性</td><td>表示当前节点的最后一个子节点</td></tr></tbody></table><h3 id="1-获取某个元素的所有指定节点">1.获取某个元素的所有指定节点</h3><p>接着上述的练习:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn04的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn04 = <span class="built_in">document</span>.getElementById(<span class="string">"btn04"</span>);</span><br><span class="line">    btn04.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//查找#city下所有li节点</span></span><br><span class="line">        <span class="comment">//获取id为city的元素</span></span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="comment">//获取city下的所有li元素</span></span><br><span class="line">        <span class="keyword">var</span> citys = city.getElementsByTagName(<span class="string">"li"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; citys.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> str = citys[i].innerHTML;</span><br><span class="line">            alert(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-childNodes属性">2.childNodes属性</h3><p>childNodes, 这个属性会返回节点的所有子节点, 包括文本节点(IE8+,空白文本也算)</p><p>children, 这个属性会返回节点的所有子元素(即HTML标签)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn05的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn05 = <span class="built_in">document</span>.getElementById(<span class="string">"btn05"</span>);</span><br><span class="line">    btn05.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//返回#city的所有子节点</span></span><br><span class="line">        <span class="comment">//获取id为city的元素</span></span><br><span class="line">        <span class="keyword">var</span> city = <span class="built_in">document</span>.getElementById(<span class="string">"city"</span>);</span><br><span class="line">        <span class="comment">/* 获取city下的所有节点:</span></span><br><span class="line"><span class="comment">         * 这其中包括文本节点</span></span><br><span class="line"><span class="comment">         * 空白字符(换行、空格等)也算文本节点</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">var</span> nodes = city.children;</span><br><span class="line">        <span class="comment">//若我们只是想获取所有子元素(即HTML标签)可以这样</span></span><br><span class="line">        nodes = city.childNodes;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span><br><span class="line">            alert(nodes[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-firstChild">3.firstChild</h3><p>firstChild属性, 获取当前元素的第一个子节点(包括空白文本节点)</p><p>firstElementChild属性(IE9+), 获取当前元素的第一个子元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为id为btn06的按钮绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn06 = <span class="built_in">document</span>.getElementById(<span class="string">"btn06"</span>);</span><br><span class="line">    btn06.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//返回#phone的第一个子节点</span></span><br><span class="line">        <span class="comment">//获取id为phone的元素</span></span><br><span class="line">        <span class="keyword">var</span> phone = <span class="built_in">document</span>.getElementById(<span class="string">"phone"</span>);</span><br><span class="line">        <span class="keyword">var</span> first = phone.firstChild;</span><br><span class="line">        alert(first);</span><br><span class="line">        <span class="comment">//若HTML代码被格式化了,上面输出为:object Text</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>lastChild和firstChild属性类似</p><h2 id="三-获取父节点和兄弟节点">三.获取父节点和兄弟节点</h2><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>parentNode</td><td>表示当前节点的父节点</td></tr><tr><td>previousSibling</td><td>表示当前节点的前一个兄弟节点</td></tr><tr><td>nextSibling</td><td>表示当前节点的后一个兄弟节点</td></tr></tbody></table><h3 id="1-parentNode">1.parentNode</h3><p>观察上述代码, 我们做了大量的重复性工作: 先获取到指定id的按钮, 再给该按钮添加一个单击响应函数. 可以考虑将这两个过程封装成一个函数.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myClick</span>(<span class="params">id,fun</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    btn.onclick = fun;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取id为btn07的按钮并为其绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn07 = myClick(<span class="string">"btn07"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//返回#bj的父节点,注意:父节点一定是元素即标签</span></span><br><span class="line">        <span class="keyword">var</span> bj = <span class="built_in">document</span>.getElementById(<span class="string">"bj"</span>);</span><br><span class="line">        <span class="keyword">var</span> bjParent = bj.parentNode;</span><br><span class="line">        <span class="comment">//alert(bjParent.innerHTML);//获取元素的HTML代码</span></span><br><span class="line">        <span class="comment">/* innerText属性:获取元素内部的文本内容</span></span><br><span class="line"><span class="comment">         * 它会自动将innerHTML中的HTML标签去掉</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        alert(bjParent.innerText);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-previousSibling">2.previousSibling</h3><p>previousSibling属性, 获取前一个兄弟节点(包括空白文本节点)</p><p>previousElementSibling属性(IE9+), 获取前一个兄弟元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取id为btn08的按钮并为其绑定一个单击响应函数</span></span><br><span class="line">    <span class="keyword">var</span> btn08 = myClick(<span class="string">"btn08"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//返回#android的前一个兄弟节点</span></span><br><span class="line">        <span class="keyword">var</span> android = <span class="built_in">document</span>.getElementById(<span class="string">"android"</span>);</span><br><span class="line">        <span class="keyword">var</span> ardPre = android.previousSibling;</span><br><span class="line">        alert(ardPre);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>nextSibling属性和previousSibling属性类似</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSDOM简介</title>
      <link href="/JSDOM1-0.html"/>
      <url>/JSDOM1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS中的宿主对象, JSDOM</p><a id="more"></a><h2 id="一-DOM简介">一.DOM简介</h2><h3 id="1-什么是DOM">1.什么是DOM</h3><blockquote><ul><li>DOM, 即Document Object Model 文档对象模型</li><li>JS中通过操作DOM来对HTML文档进行操作.只要了解DOM就可以随心所欲的操作WEB页面</li><li>文档: 表示的是整个HTML网页文档</li><li>对象: 表示将页面中的每一个部分(包括那些HTML标签)都转换为了对象.</li><li>模型: 表示对象(即HTML中的节点)之间的关系, 这样方便我们获取、操作对象.</li></ul></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/DOMTree.png" alt="DOMTree"></p><h3 id="2-节点">2.节点</h3><ul><li><p>节点(也即对象): Node——构成html文档最基本的单元, 网页中的每个部分都可以称为一个节点</p></li><li><p>常用节点分为四类:</p></li><li><p>------①文档节点: 整个HTML文档(即document对象)</p></li><li><p>------②元素节点: HTML文档中的html标签</p></li><li><p>------③属性节点: 元素的属性</p></li><li><p>------④文本节点: HTML标签中的文本内容</p></li><li><p>节点的类型不同, 它们的属性也可能不同</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/Node.png" alt="Node"></p><h4 id="节点的属性">节点的属性</h4><table><thead><tr><th></th><th>nodeName</th><th>nodeType</th><th>nodeValue</th></tr></thead><tbody><tr><td>文档节点</td><td>#document</td><td>9</td><td>null</td></tr><tr><td>元素节点</td><td>标签名</td><td>1</td><td>null</td></tr><tr><td>属性节点</td><td>属性名</td><td>2</td><td>属性值</td></tr><tr><td>文本节点</td><td>#text</td><td>3</td><td><font style='color:red;font-weight:bold;'>文本内容</font></td></tr></tbody></table><h4 id="练习-JS操纵网页中的按钮">练习: JS操纵网页中的按钮</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>);<span class="comment">//object HTMLDocument</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//获取button对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(btn);<span class="comment">//object HTMLButtonElement</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(btn.innerHTML);<span class="comment">//我是一个按钮</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//修改按钮的文字</span></span></span><br><span class="line"><span class="actionscript">        btn.innerHTML = <span class="string">"I'm a button"</span>;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="二-事件">二.事件</h2><ul><li>事件, 即文档或浏览器窗口发生的一些特定的交互瞬间, 用户和浏览器之间的交互行为</li><li>比如: 点击按钮、鼠标移动、关闭浏览器窗口…</li><li>我们往往比较关注对事件的处理, 即响应事件</li></ul><h3 id="1-事件句柄">1.事件句柄</h3><table><thead><tr><th>属性</th><th>此事件发生在何时</th></tr></thead><tbody><tr><td>onabort</td><td>图像的加载被中断</td></tr><tr><td>onblur</td><td>元素失去焦点</td></tr><tr><td>onchange</td><td>域的内容被改变</td></tr><tr><td>onclick</td><td>当用户点击某个对象时调用的事件句柄</td></tr><tr><td>ondblclick</td><td>当用户双击某个对象时调用的事件句柄</td></tr><tr><td>onerror</td><td>在加载文档或图像时发生错误</td></tr><tr><td>onfocus</td><td>元素获得焦点</td></tr><tr><td>onkeydown</td><td>某个键盘按键被按下</td></tr><tr><td>onkeypress</td><td>某个键盘按键被按下并松开</td></tr><tr><td>onkeyup</td><td>某个键盘按键被松开</td></tr><tr><td>onload</td><td>一张页面或一幅图像完成加载</td></tr><tr><td>onmousedown</td><td>鼠标按钮被按下</td></tr><tr><td>onmousemove</td><td>鼠标被移动</td></tr><tr><td>onmouseout</td><td>鼠标从某元素移开</td></tr><tr><td>onmouseover</td><td>鼠标移到某元素之上</td></tr><tr><td>onmouseup</td><td>鼠标按键被松开</td></tr><tr><td>onreset</td><td>重置按钮被点击</td></tr><tr><td>onresize</td><td>窗口或框架被重新调整大小</td></tr><tr><td>onselect</td><td>文本被选中</td></tr><tr><td>onsubmit</td><td>确认按钮被点击</td></tr><tr><td>onunload</td><td>用户退出页面</td></tr></tbody></table><h3 id="2-设置事件属性">2.设置事件属性</h3><p>我们可以在事件对应的属性中设置一些JS代码, 当该事件被触发时, 这些代码将会执行</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--鼠标被移动时触发--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onmousemove</span>=<span class="string">"alert('讨厌,移到我上面干嘛~~~')"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><font style='color:red;font-weight:bold;font-size:1.2em;'>注意: 这种响应方式, 结构与行为发生耦合, 不方便维护, 我们一般不这样使用.</font></p><h3 id="3-绑定响应函数">3.绑定响应函数</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--双击某个对象时触发--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn"</span>);</span></span><br><span class="line"><span class="actionscript">        btn.ondblclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">'讨厌,点我两下干嘛~~~'</span>);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--单击某个对象时触发--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"showMsg();"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> showMsg = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">'讨厌,点我干嘛~~~'</span>);</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三-文档的加载">三.文档的加载</h2><p>  注意到, 我们上面的代码中, script标签都写在button标签之后, 为什么呢?</p><p>这与页面的加载顺序有关, 页面是顺序加载(自上往下)的, 假如把script标签写在button标签之前, 这时在script里获取button对象时获取不到button对象, 因为它还没被加载, 再为一个null添加一个事件就会报错.</p><p>故我们需要在该DOM对象加载之后再获取它, 要么把script标签放到要获取的DOM对象之后, 要么将获取及操作该DOM对象的JS代码放在window.onload事件的响应函数中.</p><h3 id="1-onload事件">1.onload事件</h3><p>onload 事件会在页面或图像加载完成后立即发生, 该事件支持的JS对象: image, layer, window</p><p>先弹出消息对话框, 点击确定后, 再加载出按钮:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSDOM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"hello"</span>);</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>先加载出按钮, 再弹出消息对话框:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSDOM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">alert(<span class="string">"hello"</span>);</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>个人觉得script标签写在DOM对象加载之后更好一些, 这样的话, 加载性能好点, 用户体验好. 但是现在的网速和浏览器内核已经很好了, 其实写在哪里没什么太大的差别.</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS正则</title>
      <link href="/JS2-5.html"/>
      <url>/JS2-5.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS中的正则</p><a id="more"></a><h2 id="一-正则表达式简介">一.正则表达式简介</h2><blockquote><p>百度百科:正则表达式, 又称规则表达式. (英语: Regular Expression, 在代码中常简写为regex、regexp或RE), 计算机科学的一个概念. 正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本.</p><p>正则表达式用于定义一些字符串的规则, 计算机根据正则表达式, 来检查是否符合规则, 获取、提取字符串中符合规则的内容.</p></blockquote><h3 id="1-创建RegExp对象">1.创建RegExp对象</h3><p>正则表达式对象即RegExp对象, JS内置的对象.</p><p>RegExp对象的test()方法, 检索字符串中指定的值, 返回 true 或 false</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//语法:</span></span><br><span class="line"><span class="comment">//var 变量名 = new RegExp("正则表达式","匹配模式");</span></span><br><span class="line"><span class="comment">//匹配模式:i 忽略大小写;g 全局匹配;m 多行匹配;</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"a"</span>,<span class="string">"i"</span>);</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"ABCD"</span>;</span><br><span class="line"><span class="keyword">var</span> result = reg.test(str);<span class="comment">//检查字符串中是否含A</span></span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="2-字面量创建RegExp对象">2.字面量创建RegExp对象</h3><p>字面量的方式创建更加简单, 使用构造函数创建更加灵活(可以传参数).</p><p><font style = 'font-size:1.2em;'><center>语法: var 变量名 = /正则表达式/匹配模式;</center></font></p><p><font style = 'font-size:1.2em;color:red;'>注意: 语法中没有引号</font></p><table><thead><tr><th>表达式</th><th>描述</th></tr></thead><tbody><tr><td>[abc]</td><td>查找方括号之间的任何字符</td></tr><tr><td>[^abc]</td><td>查找任何不在方括号之间的字符</td></tr><tr><td>[0-9]</td><td>查找任何从 0 至 9 的数字</td></tr><tr><td>[a-z]</td><td>查找任何从小写 a 到小写 z 的字符</td></tr><tr><td>[A-Z]</td><td>查找任何从大写 A 到大写 Z 的字符</td></tr><tr><td>[A-z]</td><td>查找任何从大写 A 到小写 z 的字符</td></tr><tr><td>[adgk]</td><td>查找给定集合内的任何字符</td></tr><tr><td>[^adgk]</td><td>查找给定集合外的任何字符</td></tr><tr><td>(red blue green)</td><td>查找任何指定的选项</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a/i</span>;<span class="comment">//等价于:var reg = new RegExp("a","i");</span></span><br><span class="line"><span class="comment">//1.创建一个正则表达式检查一个字符串中是否含有a或b</span></span><br><span class="line">reg = <span class="regexp">/a|b/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.创建一个正则表达式检查一个字符串中是否含有字母</span></span><br><span class="line">reg = <span class="regexp">/[A-z]/</span>;<span class="comment">//中括号表示或的意思</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.检查一个字符串中是否含有abc或adc或aec</span></span><br><span class="line">reg = <span class="regexp">/a[bde]c/</span>;<span class="comment">//以a开头,c结尾,中间为b或d或e</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/[^0-9]/</span>;<span class="comment">//检查除了数字之外的内容</span></span><br><span class="line">reg = <span class="regexp">/(abc)/</span>;<span class="comment">//abc连续出现</span></span><br><span class="line">reg = <span class="regexp">/(a|b|c)/</span>;<span class="comment">//出现过a或b或c</span></span><br></pre></td></tr></table></figure><h2 id="二-字符串与正则相关的方法">二.字符串与正则相关的方法</h2><h3 id="1-split">1.split</h3><ul><li>根据参数将字符串拆分为字符数组</li><li>参数可以是正则表达式</li><li>正则不需要设置全局匹配, split默认将所有符合条件的拆分</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"1a2b3c4d5e6f7g8"</span>;</span><br><span class="line"><span class="keyword">var</span> arr = str.split(<span class="regexp">/[A-z]/</span>);<span class="comment">//根据任意字母拆分</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//1,2,3,4,5,6,7,8</span></span><br></pre></td></tr></table></figure><h3 id="2-search">2.search</h3><ul><li>检索与正则表达式相匹配的值</li><li>如果可以搜索到指定内容, 则返回第一次出现过的位置, 没搜索到返回-1</li><li>它能接受一个正则表达式作为参数, 然后根据正则表达式检索字符串</li><li>search正则查找时不能设置全局匹配</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//功能和indexOf()类似</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"hello abc hello adc hello aec"</span>;</span><br><span class="line"><span class="comment">//搜索字符串中是否含有abc或adc或aec</span></span><br><span class="line"><span class="keyword">var</span> result = str.search(<span class="regexp">/a[bde]c/</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//6</span></span><br></pre></td></tr></table></figure><h3 id="3-match">3.match</h3><ul><li>可以根据正则表达式, 从一个字符串中将符合条件的内容提取出来</li><li>默认情况下, match只会找第一个符合条件的内容, 找到后停止检索, 我们可以将正则表达式设置为全局匹配模式, 这样match会找到所有符合条件的内容</li><li>可以为正则表达式设置多个匹配模式, 且顺序无所谓</li><li>match会将匹配到的内容封装到一个数组中返回, 即使只查询到一个结果.</li><li>可以将一个没有规则的长串中, 有规则的内容提取出来, 很实用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"1A2B3C4d5e6f7g8"</span>;</span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/[a-z]/gi</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(result));<span class="comment">//true;</span></span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//A,B,C,d,e,f,g</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]);<span class="comment">//A</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//筛选出所有的QQ号</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"826720408abhfe826720407"</span>+</span><br><span class="line">    <span class="string">"freaf826720405C826720"</span>+</span><br><span class="line">    <span class="string">"404d826720405e8267204"</span>+</span><br><span class="line">    <span class="string">"00f826720409g826720401"</span>;</span><br><span class="line"><span class="keyword">var</span> result = str.match(<span class="regexp">/[0-9]&#123;8,10&#125;/g</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(result));<span class="comment">//true;</span></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure><h3 id="4-replace">4.replace</h3><ul><li>将字符串中指定的内容替换为新的内容, 不影响原字符串</li><li>参数:①被替换的内容, 可以接受一个正则表达式作为参数</li><li>②新的内容</li><li>默认只会替换一个,可以为正则表达式设置全局匹配模式替换所有内容</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"1A2B3C4d5e6f7g8"</span>;</span><br><span class="line"><span class="comment">//将所有字母替换为""</span></span><br><span class="line"><span class="keyword">var</span> result = str.replace(<span class="regexp">/[a-z]/gi</span>,<span class="string">""</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//12345678</span></span><br></pre></td></tr></table></figure><h2 id="三-正则表达式语法补充">三.正则表达式语法补充</h2><h3 id="1-量词">1.量词</h3><ul><li>量词: 可以设置一个内容出现的次数, 它只对它前面的一个内容起作用</li></ul><table><thead><tr><th style="text-align:left">量词</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:left">n+</td><td>匹配任何包含至少一个 n 的字符串, 相当于n{1, }</td></tr><tr><td style="text-align:left">n*</td><td>匹配任何包含零个或多个 n 的字符串, 相当于n{0, }</td></tr><tr><td style="text-align:left">n?</td><td>匹配任何包含零个或一个 n 的字符串, 相当于n{0,1}</td></tr><tr><td style="text-align:left">n{x}</td><td>匹配包含 x 个 n 的序列的字符串</td></tr><tr><td style="text-align:left">n{x,y}</td><td>匹配包含 x ~ y 个 n 的序列的字符串</td></tr><tr><td style="text-align:left">n{x, }</td><td>匹配包含至少 x 个 n 的序列的字符串</td></tr><tr><td style="text-align:left">n$</td><td>匹配任何结尾为 n 的字符串</td></tr><tr><td style="text-align:left">^n</td><td>匹配任何开头为 n 的字符串</td></tr><tr><td style="text-align:left">?=n</td><td>匹配任何其后紧接指定字符串 n 的字符串</td></tr><tr><td style="text-align:left">?!n</td><td>匹配任何其后没有紧接指定字符串 n 的字符串</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/a&#123;3&#125;/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"xaaax"</span>));<span class="comment">//只有字符串中连续出现3个a时为true</span></span><br><span class="line">reg = <span class="regexp">/(ab)&#123;3&#125;/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"xabababx"</span>));<span class="comment">//只有字符串中连续出现3个ab时为true</span></span><br><span class="line">reg = <span class="regexp">/ab&#123;3,5&#125;c/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"xabbbbcx"</span>));<span class="comment">//只有字符串中a和c之间有3~5个b时为true</span></span><br><span class="line">reg = <span class="regexp">/ab&#123;3,&#125;c/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"xabbbcx"</span>));<span class="comment">//只有字符串中a和c之间有2个以上b时为true</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">/^a$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"a"</span>));<span class="comment">//只有字符串为"a"时,结果为true</span></span><br><span class="line">reg = <span class="regexp">/^a|a$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"abc"</span>));<span class="comment">//字符串以a开头或以a结尾时为true</span></span><br></pre></td></tr></table></figure><p><font style='color:red;font-size:1.2em;font-weight:blod;'>注意: 在正则表达式中同时使用了 ^ 和 $ 量词, 则要求字符串必须完全符合正则表达式.</font></p><h3 id="练习-手机号的正则表达式">练习: 手机号的正则表达式</h3><p>匹配手机号的正则表达式: <font style='color:red;font-size:1.2em;font-weight:bold;'>/^1[3-9][0-9]{9}$/</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*手机号的规则:</span></span><br><span class="line"><span class="comment"> *1. 以1开头</span></span><br><span class="line"><span class="comment"> *2. 第二位为3-9任意数字</span></span><br><span class="line"><span class="comment"> *3. 第三位之后为任意数字9个</span></span><br><span class="line"><span class="comment"> * ^ 和 $ 量词是必须的</span></span><br><span class="line"><span class="comment"> * ^1 [3-9] [0-9]&#123;9&#125;$</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> phoneNumReg = <span class="regexp">/^1[3-9][0-9]&#123;9&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(phoneNumReg.test(<span class="string">"15555555555"</span>));<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="2-元字符">2.元字符</h3><table><thead><tr><th>元字符</th><th>描述</th></tr></thead><tbody><tr><td>.</td><td>查找单个字符, 除了换行和行结束符</td></tr><tr><td>\w</td><td>查找单词字符(字母、数字、下划线)</td></tr><tr><td>\W</td><td>查找非单词字符</td></tr><tr><td>\d</td><td>查找数字</td></tr><tr><td>\D</td><td>查找非数字字符</td></tr><tr><td>\s</td><td>查找空白字符</td></tr><tr><td>\S</td><td>查找非空白字符</td></tr><tr><td>\b</td><td>匹配单词边界</td></tr><tr><td>\B</td><td>匹配非单词边界</td></tr><tr><td>\0</td><td>查找 NULL 字符</td></tr><tr><td>\n</td><td>查找换行符</td></tr><tr><td>\f</td><td>查找换页符</td></tr><tr><td>\r</td><td>查找回车符</td></tr><tr><td>\t</td><td>查找制表符</td></tr><tr><td>\v</td><td>查找垂直制表符</td></tr><tr><td>\xxx</td><td>查找以八进制数 xxx 规定的字符</td></tr><tr><td>\xdd</td><td>查找以十六进制数 dd 规定的字符</td></tr><tr><td>\uxxxx</td><td>查找以十六进制数 xxxx 规定的 Unicode 字符</td></tr></tbody></table><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找字符串中是否有.</span></span><br><span class="line"><span class="comment">//正则字面量:</span></span><br><span class="line"><span class="comment">//由于.是元字符,我们要用\.来代替.</span></span><br><span class="line"><span class="comment">//而\表示转义,要用\\来代替\</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\./</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"adsC.dSf l"</span>));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//正则构造函数:</span></span><br><span class="line"><span class="comment">//由于函数的参数为字符串,而在字符串中\代表转义字符</span></span><br><span class="line"><span class="comment">//故在字面量中的一个\要用\\来代替</span></span><br><span class="line"><span class="keyword">var</span> reg1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\."</span>);<span class="comment">//等价于reg</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1);<span class="comment">//输出:/\./</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查找字符串是否含单词child</span></span><br><span class="line">reg = <span class="regexp">/\bchild\b/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"hello children"</span>));<span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">"hello child ren"</span>));<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="练习-A-去除字符串的前后空格">练习: A.去除字符串的前后空格</h3><p>匹配开头和结尾空格的正则表达式: <font style='color:red;font-size:1.2em;font-weight:bold;'> /^\s*|\s*$/g</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以考虑replace用空串替换空格</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"     Aaron Bob      "</span>;</span><br><span class="line"><span class="comment">//str = str.replace(/\s/g,"");//去除所有空格</span></span><br><span class="line"><span class="comment">//str = str.replace(/^\s*/,"");//去除开头的空格</span></span><br><span class="line"><span class="comment">//str = str.replace(/\s*$/,"");//去除结尾的空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//综合一下:</span></span><br><span class="line">str = str.replace(<span class="regexp">/^\s*|\s*$/g</span>,<span class="string">""</span>);</span><br><span class="line"><span class="comment">//因为是或的关系,若不加全局匹配,方法匹配完开头的空格就返回了</span></span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></figure><h3 id="练习-B-email的正则表达式">练习: B.email的正则表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*电子邮件格式:</span></span><br><span class="line"><span class="comment"> * hello           .hello           @ abc        .com           .cn</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 任意字母数字下划线 .任意字母数字下划线 @ 任意字母数字 .任意字母(2-5位) .任意字母(2-5位)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * \w&#123;3,&#125;          (\.\w+)*         @ [A-z0-9]+  (\.[A-z]&#123;2,5&#125;)&#123;1,2&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> emailReg = <span class="regexp">/^\w&#123;3,&#125;(\.\w+)*@[A-z0-9]+(\.[A-z]&#123;2,5&#125;)&#123;1,2&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> email = <span class="string">"crainyday@qq.com"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(emailReg.test(email));<span class="comment">//true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS内建对象</title>
      <link href="/JS2-4.html"/>
      <url>/JS2-4.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS中的一些其他内建对象</p><a id="more"></a><h2 id="一-Date">一.Date</h2><h3 id="1-Date对象的创建">1.Date对象的创建</h3><ul><li>在JS中用Date对象来表示一个时间</li><li>Date的无参构造函数会封装当前代码执行时的时间.</li><li>以字符串为参数的构造函数, 可以指定Date对象的时间.字符串格式: “月/日/年 时:分:秒”</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(date1);<span class="comment">//输出:计算机系统的当前时间</span></span><br><span class="line"><span class="keyword">var</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"01/01/2019 08:01:01"</span>);<span class="comment">//"01-01-2019"这样也行</span></span><br><span class="line"><span class="built_in">console</span>.log(date2);<span class="comment">//输出:Tue Jan 01 2019 08:01:01 GMT+0800 (中国标准时间)</span></span><br></pre></td></tr></table></figure><h3 id="2-Date的一些方法">2.Date的一些方法</h3><blockquote><p>getDate() 从 Date 对象返回一个月中的某一天 (1 ~ 31)<br>getDay() 从 Date 对象返回一周中的某一天 (0 ~ 6)<br>getMonth() 从 Date 对象返回月份 (0 ~ 11)<br>getFullYear() 从 Date 对象以四位数字返回年份<br>getHours() 返回 Date 对象的小时 (0 ~ 23)。<br>getMinutes() 返回 Date 对象的分钟 (0 ~ 59)<br>getSeconds() 返回 Date 对象的秒数 (0 ~ 59)<br>getMilliseconds() 返回 Date 对象的毫秒(0 ~ 999)<br>getTime() 返回(格林威治时间的)1970年1月1日 00:00:00至今的毫秒数, 即时间戳<br>setTime() 以毫秒设置 Date 对象</p><hr><p>Date.now() 返回当前的时间戳</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"01-27-2019 08:16:24.100"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(date1.getDate());<span class="comment">//输出:27</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getDay());<span class="comment">//输出:0</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getMonth());<span class="comment">//输出:0</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getFullYear());<span class="comment">//输出:2019</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getHours());<span class="comment">//输出:8</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getMinutes());<span class="comment">//输出:16</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getSeconds());<span class="comment">//输出:24</span></span><br><span class="line"><span class="built_in">console</span>.log(date1.getMilliseconds());<span class="comment">//输出:100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"01-01-1970"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(date2.getTime());<span class="comment">//中文系统下,我们与格林威治时间相差8h,输出:-28800000</span></span><br><span class="line"></span><br><span class="line">date2.setTime(date1.getTime());</span><br><span class="line"><span class="built_in">console</span>.log(date2);<span class="comment">//输出:Sun Jan 27 2019 08:16:24 GMT+0800 (中国标准时间)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.now());<span class="comment">//输出当前时间戳</span></span><br></pre></td></tr></table></figure><h2 id="二-Math">二.Math</h2><p>Math和其他内置对象不同, 它不能是一个构造函数, 不能创建对象, 它只是一个工具类, 里面封装了一些数学运算中常用的属性和函数.</p><h3 id="1-常用属性和函数">1.常用属性和函数</h3><blockquote><p>Math.PI 返回圆周率(约等于3.14159)<br>abs(x) 返回数的绝对值<br>ceil(x) 对数进行上舍入<br>floor(x) 对数进行下舍入<br>round(x) 把数四舍五入为最接近的整数<br>random() 返回0~1之间的随机数. 生成x~y之间的随机数: Math.round(Math.random()*(y-x)+x);<br>max(x,y) 返回 x 和 y 中的最高值<br>min(x,y) 返回 x 和 y 中的最低值<br>pow(x,y) 返回 x 的 y 次幂<br>sqrt(x) 返回数的平方根</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.PI);<span class="comment">//输出:3.141592653589793</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.abs(<span class="number">-10</span>));<span class="comment">//输出:10</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.ceil(<span class="number">1.001</span>));<span class="comment">//输出:2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.ceil(<span class="number">1.999</span>));<span class="comment">//输出:2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.floor(<span class="number">1.001</span>));<span class="comment">//输出:1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.floor(<span class="number">1.999</span>));<span class="comment">//输出:1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.round(<span class="number">1.499</span>));<span class="comment">//输出:1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.round(<span class="number">1.5</span>));<span class="comment">//输出:2</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i ++)&#123;</span><br><span class="line">    <span class="comment">//生成10个20-80间的随机数,包括20和100</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()*<span class="number">80</span>+<span class="number">20</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max(<span class="number">1</span>,<span class="number">10</span>,<span class="number">100</span>));<span class="comment">//输出:100</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.min(<span class="number">1</span>,<span class="number">10</span>,<span class="number">100</span>));<span class="comment">//输出:1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.pow(<span class="number">2</span>,<span class="number">10</span>));<span class="comment">//输出:1024</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.sqrt(<span class="number">100</span>));<span class="comment">//输出:10</span></span><br></pre></td></tr></table></figure><h2 id="三-包装类">三.包装类</h2><blockquote><p>回顾: 基本数据类型(Number String Boolean Null Undefined)VS引用数据类型(Object)</p><p>JS为我们提供了三个包装类(Number String Boolean):<br>  Number—&gt;可以将基本数据类型的Number转换为Number对象<br>  String —&gt;可以将基本数据类型的String转换为String对象<br>  Boolean—&gt;可以将基本数据类型的Boolean转换为Boolean对象</p></blockquote><p><font style='color:red;font-size:1.2em;font-weight:bold;'>但是, 注意: 实际应用时我们一般不会使用基本数据类型的对象, 若使用, 在做比较时可能会带来一些不可预期的结果</font></p><ul><li>方法和属性只能添加给对象, 不能添加给基本数据类型.</li><li>当我们调用基本数据类型的属性和方法时, 浏览器会<font style='color:red;'>临时</font>使用包装类将其转换为对象, 再调用对象的属性和方法.</li><li>包装类一般是浏览器底层自己调用的, 我们一般不会使用它们.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>);</span><br><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"hello"</span>);</span><br><span class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">console</span>.log(num == <span class="number">123</span>);<span class="comment">//输出:true</span></span><br><span class="line"><span class="built_in">console</span>.log(num === <span class="number">123</span>);<span class="comment">//输出:false</span></span><br><span class="line"><span class="keyword">if</span>(bool)&#123;<span class="comment">//bool是对象,对象转换为Boolean时都会转换为true,所以下述代码会执行</span></span><br><span class="line">    alert(<span class="string">"我执行了~~~"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">a.hello = <span class="string">"hello"</span>;<span class="comment">//这里会将a临时转换为对象,但执行完该对象便会被销毁,故后面调用会打印undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(a.hello);<span class="comment">//输出:undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a.toString(<span class="number">16</span>));<span class="comment">//输出:7b</span></span><br></pre></td></tr></table></figure><h3 id="1-数字进制间的转换">1.数字进制间的转换</h3><p>Number对象有个方法toString()我们常用它来转换进制, 参数为基数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num.toString(<span class="number">16</span>));<span class="comment">//输出:7d</span></span><br><span class="line"><span class="built_in">console</span>.log(num.toString(<span class="number">2</span>));<span class="comment">//输出:1111011</span></span><br></pre></td></tr></table></figure><h2 id="四-String对象的方法">四.String对象的方法</h2><blockquote><p>length 属性, 字符串的长度<br>charAt() 返回在指定位置的字符<br>charCodeAt() 返回在指定的位置的字符的 Unicode 编码<br>concat() 连接字符串<br>String.fromCharCode() 从字符编码创建一个字符串, 参数一个或多个Unicode值<br>indexOf() 检索字符串, 有则返回索引, 没有返回-1<br>--------参数:①要检索的字符串, 必需<br>--------②要从哪个位置开始检索, 不传从0开始检索<br>lastIndexOf() 和indexOf类似, 不过这个方法从后向前搜索字符串</p><hr><p>slice() 提取字符串的片断, 将指定的字符串封装到新字符串返回<br>--------两个参数:①截取开始位置的索引, 包括开始位置, 可以为负数(-1表示倒数第一个元素)<br>--------②结束位置的索引, 不包括结束位置(该参数可省略, 表示截取之后所有元素), 可以为负数<br>substring() 提取字符串中两个指定的索引号之间的字符<br>--------与splice类似, 但其参数不可为负值, 若传负值, 则默认使用0.<br>--------该方法还会自动调整参数位置, 若第二个参数小于第一个, 则交换两个参数<br>substr() 从起始索引号提取字符串中指定数目的字符<br>--------ECMAscript 没有对该方法进行标准化, 但现今大部分浏览器支持<br>--------两个参数:①截取开始位置索引(可为负数)②(可选参数)要截取字符的数量</p><hr><p>split() 把字符串分割为字符串数组<br>--------两个参数:①必需, 字符串或正则表达式, 从该参数指定的地方分割<br>--------②可选, 指定返回的数组的最大长度<br>toLowerCase() 把字符串转换为小写<br>toUpperCase() 把字符串转换为大写</p></blockquote><p><font style='color:red;font-size:1.2em;font-weight:bold;'>这些方法都不会改变原来的字符串</font></p><h3 id="1-连接检索字符串">1.连接检索字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello China,hello World!"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.length);<span class="comment">//24</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">23</span>));<span class="comment">//!</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charCodeAt(<span class="number">0</span>));;<span class="comment">//104即h的Unicode值</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">104</span>,<span class="number">101</span>,<span class="number">108</span>,<span class="number">108</span>,<span class="number">111</span>));<span class="comment">//hello</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">0x4e2d</span>,<span class="number">0x56fd</span>));<span class="comment">//中国</span></span><br><span class="line"><span class="built_in">console</span>.log(str.concat(<span class="string">"你好"</span>,<span class="string">"中国"</span>));<span class="comment">//hello China,hello World!你好中国</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"hello"</span>));<span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"hello"</span>,<span class="number">1</span>));<span class="comment">//12</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">"hello"</span>));<span class="comment">//12</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"p"</span>));<span class="comment">//-1</span></span><br></pre></td></tr></table></figure><h3 id="2-截取字符串">2.截取字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abcdefghijklmn"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-3</span>,<span class="number">-1</span>));<span class="comment">//lm</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">1</span>,<span class="number">-1</span>));<span class="comment">//负数会默认为0,然后交换参数为0,1;输出:a</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-4</span>,<span class="number">3</span>));<span class="comment">//-3开始的三个字符,即:klm</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">0</span>));<span class="comment">//abcdefghijklmn</span></span><br></pre></td></tr></table></figure><h3 id="3-分割转换字符串">3.分割转换字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Abc,def,ghi,jkL"</span>;</span><br><span class="line"><span class="keyword">var</span> result = str.split(<span class="string">","</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(result));<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(result.length);<span class="comment">//4</span></span><br><span class="line"></span><br><span class="line">result = str.split(<span class="string">","</span>,<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//"Abc","def"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.toUpperCase());<span class="comment">//"ABC,DEF,GHI,JKL"</span></span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//"abc,def,ghi,jkl"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS数组</title>
      <link href="/JS2-3.html"/>
      <url>/JS2-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS数组(内建对象), 之前都是说的自定义对象.</p><a id="more"></a><h2 id="一-数组简介">一.数组简介</h2><ul><li>数组也是一个对象</li><li>它和普通对象的功能类似, 也是用来存储一些值的</li><li>不同的是, 普通对象用字符串作为索引, 数组用数字(&gt;=0的整数)作为索引</li><li>数组的存储性能比普通对象好, 我们往往常用它来存储一些数据</li></ul><h3 id="1-操作数组">1.操作数组</h3><ul><li>①数组中添加元素, 语法: <font style="color:red;font-weight:bold;">变量名[数字索引] = 值;</font></li><li>②读取数组元素, 语法: <font style="color:red;font-weight:bold;">变量名[数字索引];</font> 若读取不存在的索引不会报错, 会返回undefined</li><li>③获取数组长度, <font style="color:red;font-weight:bold;">变量名.length;</font> 对于连续的数组, 这样可以得到数组长度, 对于不连续的数组这样使用length的值为当前数组的最大索引+1, 尽量不要用不连续的数组.</li><li>④人为的设置length, 若设置的length大于原长度, 则多余部分会空出来; 若设置的length小于原长度, 则多余的元素会被删除</li><li>⑤向数组最后一个位置添加索引, <font style="color:red;font-weight:bold;">变量名[变量名.length] = 某值;</font></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr);<span class="comment">//输出:object</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">0</span>] = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>]);<span class="comment">//输出:"hello"</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.length);<span class="comment">//输出:1</span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">5</span>] = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:hello,,,,,123</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.length);<span class="comment">//输出:6</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">1</span>]);<span class="comment">//输出:undefined</span></span><br><span class="line"></span><br><span class="line">arr.length = <span class="number">1</span>;</span><br><span class="line">arr[arr.length] = <span class="string">"China"</span>;</span><br><span class="line">arr[arr.length] = <span class="number">521</span>;</span><br><span class="line">arr[arr.length] = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:"hello","China",521,true</span></span><br></pre></td></tr></table></figure><h3 id="2-数组字面量">2.数组字面量</h3><blockquote><p>数组字面量创建数组, 语法: [];<br>例: var arr = [1,2,3,4,10];//允许在创建时指定要添加的数组元素</p></blockquote><blockquote><p>使用数组的构造函数创建数组的同时, 也可以添加元素, 此时将要添加的元素作为参数传递<br>例: var arr = new Array(1,5,6,2,3);</p></blockquote><blockquote><p>使用数组的构造函数创建数组, 也可以指定数组的初始长度<br>例: var arr = new Array(10);</p></blockquote><p><font style = 'color:red;font-size:1.2em;font-weight:bold;'>注意: 数组的元素可以是任意类型的数据</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">5</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>];<span class="comment">//字面量创建数组</span></span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">5</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr1);<span class="comment">//输出:5,9,8,4,3,1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2);<span class="comment">//输出:5,9,8,4,3,1</span></span><br><span class="line"><span class="keyword">var</span> arr3 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr3);<span class="comment">//输出:,,,,,,,,,</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的元素可以是任意类型的数据</span></span><br><span class="line"><span class="keyword">var</span> arr4 = [<span class="string">"hello"</span>,<span class="literal">true</span>,<span class="number">123</span>,<span class="literal">null</span>,<span class="literal">undefined</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr4);<span class="comment">//输出:"hello",true,123,null,undefined</span></span><br><span class="line"><span class="comment">//可以是对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"Bob"</span>&#125;;</span><br><span class="line">arr4[arr4.length] = obj;</span><br><span class="line"><span class="built_in">console</span>.log(arr4[<span class="number">5</span>].name);<span class="comment">//输出:Bob</span></span><br><span class="line"><span class="comment">//可以是函数</span></span><br><span class="line">arr4[arr4.length] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">"我是数组中的函数"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">arr4[<span class="number">6</span>]();<span class="comment">//调用函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//也可以放数组, 我们叫这种数组为: 二维数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]];</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:1,2,3,4,5,6,7,8,9</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.length);<span class="comment">//输出:3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>].length);<span class="comment">//输出:3</span></span><br></pre></td></tr></table></figure><h2 id="二-数组常用方法">二.数组常用方法</h2><blockquote><p>pop() 删除并返回数组的最后一个元素<br>push() 向数组的末尾添加一个或更多元素, 并返回新的长度<br>shift() 删除并返回数组的第一个元素<br>unshift() 向数组的开头添加一个或更多元素, 并返回新的长度</p><hr><p>slice() 从某个已有的数组返回选定的元素<br>--------该方法不会改变原数组, 而是将指定的数组元素封装到新数组中返回, 两个参数:<br>--------①截取开始位置的索引, 包括开始位置, 可以为负数(-1表示倒数第一个元素)<br>--------②截取结束位置的索引, 不包括结束位置(该参数可省略, 表示截取之后所有元素), 可以为负数<br>splice() 删除元素, 并向数组添加新元素<br>--------该方法会改变原数组, 会将指定元素从原数组中删除, 并将删除的元素作为返回值返回<br>--------参数(前两个必需):①开始位置的索引, 可以为负数(-1表示倒数第一个元素)<br>--------②要删除元素的数量<br>--------③第三个参数及以后, 可以传递新元素, 这些元素会自动插入到第一个参数索引的前边</p><hr><p>concat() 连接两个或更多的数组, 并返回结果.(不影响原数组)<br>join() 把数组的所有元素放入一个字符串, 元素通过指定的分隔符(默认为逗号)进行分隔.<br>reverse() 颠倒数组中元素的顺序.(影响原数组)<br>sort() 对数组的元素进行排序(影响原数组), 默认按Unicode编码排序</p></blockquote><h3 id="A-pop-push-shift-unshift">A.pop push shift unshift</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"孙悟空"</span>, <span class="string">"猪八戒"</span>, <span class="string">"唐僧"</span>, <span class="string">"沙和尚"</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.pop();</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">//输出:沙和尚</span></span><br><span class="line">result = arr.push(<span class="string">"白骨精"</span>, <span class="string">"玉帝"</span>, <span class="string">"蝎子精"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">//输出:6</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:孙悟空,猪八戒,唐僧,白骨精,玉帝,蝎子精</span></span><br><span class="line">result = arr.shift();</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:孙悟空</span></span><br><span class="line">result = arr.unshift(<span class="string">"牛魔王"</span>, <span class="string">"红孩儿"</span>, <span class="string">"铁扇公主"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:8</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:牛魔王,红孩儿,铁扇公主,猪八戒,唐僧,白骨精,玉帝,蝎子精</span></span><br></pre></td></tr></table></figure><h3 id="B-slice-splice">B.slice splice</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"孙悟空"</span>, <span class="string">"猪八戒"</span>, <span class="string">"唐僧"</span>, <span class="string">"沙和尚"</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.slice(<span class="number">-3</span>,<span class="number">-1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:猪八戒,唐僧</span></span><br><span class="line">result = arr.slice(<span class="number">-3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:猪八戒,唐僧,沙和尚</span></span><br><span class="line"></span><br><span class="line">result = arr.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="string">"玉帝"</span>,<span class="string">"佛祖"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:""</span></span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:孙悟空,玉帝,佛祖,猪八戒,唐僧,沙和尚</span></span><br></pre></td></tr></table></figure><p>例: 数组去重练习</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; arr.length;i ++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = i+<span class="number">1</span>;j &lt; arr.length;j ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] == arr[j])&#123;</span><br><span class="line">            arr.splice(j,<span class="number">1</span>);</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr);<span class="comment">//输出:1,2,3,5,4,6,8</span></span><br></pre></td></tr></table></figure><h3 id="C-concat-join">C.concat join</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">"孙悟空"</span>,<span class="string">"猪八戒"</span>,<span class="string">"沙和尚"</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="string">"白骨精"</span>,<span class="string">"高玉兰"</span>,<span class="string">"玉兔精"</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr1.concat(arr2,<span class="string">"牛魔王"</span>,<span class="string">"红孩儿"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);<span class="comment">//输出:"孙悟空","猪八戒","沙和尚","白骨精","高玉兰","玉兔精","牛魔王","红孩儿"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = result.join();</span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//输出:"孙悟空,猪八戒,沙和尚,白骨精,高玉兰,玉兔精,牛魔王,红孩儿"</span></span><br><span class="line">str = result.join(<span class="string">""</span>);<span class="comment">//分隔符为""</span></span><br><span class="line"><span class="built_in">console</span>.log(str);<span class="comment">//输出:"孙悟空猪八戒沙和尚白骨精高玉兰玉兔精牛魔王红孩儿"</span></span><br></pre></td></tr></table></figure><h3 id="D-reverse-sort">D.reverse sort</h3><blockquote><p>①sort方法, 默认按照Unicode编码排序, 对于数字的排序往往不是我们想要的结果, 这时我们就需要按照我们自己想要的排序方式, 编写一个回调函数传递给sort().<br>②sort的回调函数有两个形参, 代表要比较的数组中的两个元素, 第一个形参代表的元素相对于第二个靠前<br>③sort方法根据回调函数的返回值排序.<br>④参数为回调函数的函数, 我们一般用匿名方式传递参数</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">4</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//return a-b;//升序</span></span><br><span class="line">    <span class="keyword">return</span> b-a;<span class="comment">//逆序</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure><h2 id="三-遍历数组">三.遍历数组</h2><h3 id="1-for循环遍历">1.for循环遍历</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//遍历数组, 就是将数组的元素取出来使用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Person[name:"</span>+<span class="keyword">this</span>.name+<span class="string">",age:"</span>+<span class="keyword">this</span>.age+<span class="string">",sex:"</span>+<span class="keyword">this</span>.sex+<span class="string">"]"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nameArr = [<span class="string">"孙悟空"</span>,<span class="string">"沙悟净"</span>,<span class="string">"猪悟能"</span>,<span class="string">"唐玄奘"</span>,<span class="string">"白骨精"</span>,<span class="string">"玉兔精"</span>,<span class="string">"蜘蛛精"</span>];</span><br><span class="line"><span class="keyword">var</span> ageArr = [<span class="number">18</span>,<span class="number">28</span>,<span class="number">38</span>,<span class="number">17</span>,<span class="number">16</span>,<span class="number">15</span>,<span class="number">14</span>];</span><br><span class="line"><span class="keyword">var</span> sexArr = [<span class="string">"男"</span>,<span class="string">"男"</span>,<span class="string">"男"</span>,<span class="string">"男"</span>,<span class="string">"女"</span>,<span class="string">"女"</span>,<span class="string">"女"</span>];</span><br><span class="line"><span class="keyword">var</span> personArr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">7</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; personArr.length;i ++)&#123;</span><br><span class="line">    personArr[i] = <span class="keyword">new</span> Person(nameArr[i],ageArr[i],sexArr[i]);</span><br><span class="line">    <span class="built_in">console</span>.log(personArr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 输出:</span></span><br><span class="line"><span class="comment">Person[name:孙悟空,age:18,sex:男]</span></span><br><span class="line"><span class="comment">Person[name:沙悟净,age:28,sex:男]</span></span><br><span class="line"><span class="comment">Person[name:猪悟能,age:38,sex:男]</span></span><br><span class="line"><span class="comment">Person[name:唐玄奘,age:17,sex:男]</span></span><br><span class="line"><span class="comment">Person[name:白骨精,age:16,sex:女]</span></span><br><span class="line"><span class="comment">Person[name:玉兔精,age:15,sex:女]</span></span><br><span class="line"><span class="comment">Person[name:蜘蛛精,age:14,sex:女]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>练习: 自定义一个函数, 将上述对象数组中person对象age属性大于等于18的对象放入一个新数组, 并将该新数组作为函数的返回值返回.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAdult</span>(<span class="params">perArr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; perArr.length;i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(perArr[i].age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">            arr.push(perArr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-数组的for-Each-方法遍历">2.数组的for Each()方法遍历</h3><blockquote><p>①该方法适用于IE 8.0+<br>②该方法需要一个函数作为参数, 我们称此函数为回调函数, 这种函数由我们创建, 但是我们不负责调用<br>③我们写回调函数时一般都以匿名形式给出<br>④数组中有几个元素, 该方法会执行几次, 该方法的调用者会将在数组中遍历到的元素以实参形式传递进函数, 我们可以定义形参来接收它们<br>⑤该函数被调用时会传递三个参数: 第一个, 当前正在遍历的元素;第二个, 当前正在遍历元素的索引;第三个, 正在遍历的数组.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接上上述代码</span></span><br><span class="line">personArr.forEach(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">per,index,perArr</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(perArr[index] == per);<span class="comment">//全是true</span></span><br><span class="line">        <span class="built_in">console</span>.log(per);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">/* 结果:</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:孙悟空,age:18,sex:男]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:沙悟净,age:28,sex:男]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:猪悟能,age:38,sex:男]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:唐玄奘,age:17,sex:男]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:白骨精,age:16,sex:女]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:玉兔精,age:15,sex:女]</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">Person[name:蜘蛛精,age:14,sex:女]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="四-数组相关的常用方法">四.数组相关的常用方法</h2><blockquote><p>详见：<a href="./Vue3-1.html">数组常用方法</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS对象补充</title>
      <link href="/JS2-2.html"/>
      <url>/JS2-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS对象补充</p><a id="more"></a><h2 id="一-工厂方法创建对象">一.工厂方法创建对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:,</span><br><span class="line">    age:,</span><br><span class="line">    sex:,</span><br><span class="line">    showMes:</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>  我们想要创建大量的上面的obj对象, 它们的属性名都一样, 但是值可能不一样, 这时, 为了&quot;偷懒&quot;, 我们可以使用工厂方法创建对象. 批量生产对象.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">        name: name,</span><br><span class="line">        age: age,</span><br><span class="line">        sex: sex,</span><br><span class="line">        showMes: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> per1 = createPerson(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per1);<span class="comment">//Object &#123;name: "孙悟空", age: 500, sex: "男", showMes: ƒ&#125;</span></span><br><span class="line"><span class="keyword">var</span> per2 = createPerson(<span class="string">"猪八戒"</span>, <span class="number">300</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per2);<span class="comment">//Object &#123;name: "猪八戒", age: 300, sex: "男", showMes: ƒ&#125;</span></span><br><span class="line"><span class="keyword">var</span> per3 = createPerson(<span class="string">"白骨精"</span>, <span class="number">500</span>, <span class="string">"女"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per3);<span class="comment">//Object &#123;name: "白骨精", age: 500, sex: "女", showMes: ƒ&#125;</span></span><br><span class="line">per1.showMes();<span class="comment">//孙悟空</span></span><br><span class="line">per2.showMes();<span class="comment">//猪八戒</span></span><br><span class="line">per3.showMes();<span class="comment">//白骨精</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createDog</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    obj.name = name;</span><br><span class="line">    obj.age = age;</span><br><span class="line">    obj.showMes = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> dog = createDog(<span class="string">"哮天犬"</span>,<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(dog);<span class="comment">//Object &#123;name: "哮天犬", age: 3, showMes: ƒ&#125;</span></span><br><span class="line">dog.showMes();<span class="comment">//哮天犬</span></span><br></pre></td></tr></table></figure><h2 id="二-构造函数">二.构造函数</h2><ul><li>从上面代码的注释中, 可以看见我们用工厂方法创建的对象都是Object类型的, 不易区分不同的对象(到底是Dog还是Person), 这时, 我们可以创建一个构造函数来专门创建某一类对象.</li><li>构造函数是一类特殊的普通函数, 习惯上我们将构造函数的函数名首字母大写.</li><li>构造函数与普通函数相比, 调用方式不同, 普通的直接调用即可, <font style='color:red;font-weight:bold;'>构造函数需要在new关键字之后调用.</font></li><li>使用同一个构造函数创建的对象, 我们称为一类对象, 也将构造函数称为类, 将它创建的对象称为类的实例.</li></ul><p>构造函数的执行流程:</p><ol><li>被调用时, 首先创建一个新的对象</li><li>将函数中的this指向新建的对象(即在构造函数中, 可以用this来引用正在新建的对象)</li><li>逐行执行构造函数中的代码</li><li>将新建的对象作为构造函数的返回值返回.</li></ol><h3 id="A-instanceof">A.instanceof</h3><p>用法: 对象 instanceof 构造函数, 检查一个对象是否为一个构造函数的实例, 是返回true, 不是返回false.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    <span class="keyword">this</span>.showMes = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> per1 = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per1);<span class="comment">//Person &#123;name: "孙悟空", age: 500, sex: "男", showMes: ƒ&#125;</span></span><br><span class="line"><span class="keyword">var</span> per2 = <span class="keyword">new</span> Person(<span class="string">"猪八戒"</span>, <span class="number">300</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per1);<span class="comment">//Person &#123;name: "猪八戒", age: 300, sex: "男", showMes: ƒ&#125;</span></span><br><span class="line"><span class="keyword">var</span> per3 = <span class="keyword">new</span> Person(<span class="string">"白骨精"</span>, <span class="number">500</span>, <span class="string">"女"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per1);<span class="comment">//Person &#123;name: "白骨精", age: 500, sex: "女", showMes: ƒ&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(per1 <span class="keyword">instanceof</span> Person);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(per1.showMes == per2.showMes);<span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>上面的代码有一个弊端, 每一个由Person创建的对象都有一个自己的showMes()方法</p><blockquote><p>console.log(per1.showMes == per2.showMes);//false</p></blockquote><p>返回结果是false, 而这不是我们想要的, 这样的话会浪费很多的内存.故修改一下, 将该函数的声明放到外面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMes</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    <span class="keyword">this</span>.showMes = showMes;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> per1 = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="keyword">var</span> per2 = <span class="keyword">new</span> Person(<span class="string">"猪八戒"</span>, <span class="number">300</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="keyword">var</span> per3 = <span class="keyword">new</span> Person(<span class="string">"白骨精"</span>, <span class="number">500</span>, <span class="string">"女"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(per1.showMes == per2.showMes);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h2 id="三-原型对象">三.原型对象</h2><blockquote><p>注意: 上述改进, 将对象共有的方法showMes()直接声明在全局作用域中, 也是存在一些弊端, ①污染了全局作用域(在全局作用域中不能再添加同名函数)②不是很安全. 因此, 这次我们采用一个非常好的办法, 即解决多个同类对象创建多个公共的方法, 又不会对全局作用域造成污染.</p></blockquote><p>原型: prototype</p><ul><li>我们创建的每一个函数, 解析器都会向函数中添加一个属性prototype, 这个属性对应着一个对象即原型对象</li><li>如果函数作为普通函数调用prototype没有任何作用</li><li>如果函数以构造函数的形式调用时,它创建的对象中都会有一个隐含的属性, 指向该构造函数的原型对象, 我怕们可以用对象的__proto__属性来访问该对象</li><li>原型对象就相当于一个公共的区域, 所有同一个类的实例都能访问到这个对象, 我们可以将对象中共有的内容统一放到原型对象中.</li><li>当我们访问一个对象的属性或方法时, 它会先在对象自身寻找, 如果有则直接使用, 若没有则会去原型对象中寻找, 如果原型对象中有则直接使用</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/JS/prototype.png" alt="prototype"></p><p>改进如下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showMes = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> per1 = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="keyword">var</span> per2 = <span class="keyword">new</span> Person(<span class="string">"猪八戒"</span>, <span class="number">300</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="keyword">var</span> per3 = <span class="keyword">new</span> Person(<span class="string">"白骨精"</span>, <span class="number">500</span>, <span class="string">"女"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype == per1.__proto__);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(per1.showMes == per2.showMes);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="A-检查对象的属性">A.检查对象的属性</h3><blockquote><p>1.之前提到过用in运算符检查对象中是否包含某个属性, 但这样, 如果对象的原型对象中有这个属性, 也会返回true, 显然这不是我们想得到的结果.</p><p>2.我们只想在对象本身的属性中搜索. 这时候可以用对象的hasOwnProperty()方法检查. hasOwnProperty方法其实在原型对象的原型中</p><p>3.原型对象也是对象, 它也有原型. 我们调用一个对象的属性或方法时, 会先在对象自身寻找, 没有就去对象的原型中寻找, 还没有就去原型的原型中寻找, 直到找到Object对象的原型, 没有则返回undefined</p><p>4.Object对象的原型没有原型, 它的值为null</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showMes = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"a"</span> <span class="keyword">in</span> per);<span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(per.hasOwnProperty(<span class="string">"a"</span>));<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(per.__proto__.__proto__.hasOwnProperty(<span class="string">"hasOwnProperty"</span>));<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h2 id="四-toString">四.toString()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showMes = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per);<span class="comment">//输出:[object Object]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.__proto__.hasOwnProperty(<span class="string">"toString"</span>));<span class="comment">//输出:true</span></span><br></pre></td></tr></table></figure><ul><li>我们直接在页面打印对象的引用时, 实际上调用了对象的toString()方法, 打印的是toString()的返回值, 默认调用的是Object原型的toString()方法.</li><li>假如我们想打印对象时, 按照我们自己的想法控制输出的内容, 我们就需要显示的添加一个toString()方法, 不让当前的对象向原型中搜寻方法.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Person[name:"</span>+<span class="keyword">this</span>.name+<span class="string">",age:"</span>+<span class="keyword">this</span>.age+<span class="string">",sex:"</span>+<span class="keyword">this</span>.sex+<span class="string">"]"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Person(<span class="string">"孙悟空"</span>, <span class="number">500</span>, <span class="string">"男"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(per);<span class="comment">//Person[name:孙悟空,age:500,sex:男]</span></span><br></pre></td></tr></table></figure><h2 id="五-垃圾回收-GC">五.垃圾回收(GC)</h2><ol><li>程序运行过程中也会产生垃圾, 若垃圾过多, 会使程序运行过慢, 因此我们需要一个垃圾回收机制来处理程序运行过程中产生的垃圾.</li><li>当一个对象没有任何变量或属性对它进行引用, 我们将永远无法操作该对象, 这种对象就是垃圾.</li><li>在JS中拥有自动的垃圾回收机制, 会自动将垃圾对象从内存中销毁, 我们不需要也不能进行垃圾回收的操作.</li><li>假如我们不再使用某个对象的引用, 将它设置为null即可</li></ol>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS函数</title>
      <link href="/JS2-1.html"/>
      <url>/JS2-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS的函数function</p><a id="more"></a><h2 id="一-JS函数的简介">一.JS函数的简介</h2><p>函数(function):</p><ul><li>函数也是一个对象</li><li>函数中封装了一些功能(代码), 在需要时可以执行这些功能(代码)</li><li>封装到函数的代码不会立即执行, 只有调用时才会执行</li><li>调用函数时代码顺序执行, 调用语法: 函数对象()</li><li>使用typeof检查一个函数对象时, 会返回function</li></ul><h3 id="A-创建一个函数对象">A.创建一个函数对象</h3><ol><li>将要封装的代码以字符串形式传递给构造函数, 例:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"console.log('这是我的第一个函数~~~')"</span>);</span><br><span class="line">fun[<span class="string">'value'</span>] = <span class="string">"123"</span>;<span class="comment">//函数是对象, 也可以像对象那样用, 但我们一般不这样用</span></span><br><span class="line">fun();<span class="comment">//这样调用函数</span></span><br><span class="line"><span class="comment">//实际编程中我们很少用这种方式创建一个函数</span></span><br></pre></td></tr></table></figure><ol start="2"><li>使用函数声明来船舰一个函数(对象), 格式:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">[形参<span class="number">1</span>,形参<span class="number">2</span>,形参<span class="number">3</span>,...,形参n]</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>使用函数表达式创建一个函数, 格式:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 函数名 = <span class="function"><span class="keyword">function</span>(<span class="params">[形参<span class="number">1</span>,形参<span class="number">2</span>,形参<span class="number">3</span>,...,形参n]</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//代码...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-参数">B.参数</h3><ul><li>在函数的()中, 可以指定0个或多个形参</li><li>多个形参之间用逗号隔开, 声明了形参就相当于在函数内部声明了对应的变量</li><li>声明的形参并没有被赋值</li><li>调用函数时, 可以在()中指定实参, 实参的值会依次赋值给形参</li><li>调用函数时, 解析器不会检查形参与实参的数量是否匹配</li><li>函数的实参可以是任何类型的值, 包括基本类型、对象、函数(对象).</li></ul><p><font style='color:red;font-size:1.2em;font-weight:bold;'>特别注意: 调用函数时, 解析器也不会检查实参的类型, 所以要检查一下参数是否合法</font></p><p>例题: 定义一个能求两个数和的函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>((<span class="keyword">typeof</span> a) == <span class="string">"number"</span>&amp;&amp;(<span class="keyword">typeof</span> b) == <span class="string">"number"</span>)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">123</span>,<span class="number">456</span>);</span><br><span class="line">sum(<span class="number">123</span>,<span class="string">"456"</span>);<span class="comment">//不输出内容</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是"</span> + obj.name + <span class="string">",性别"</span> + obj.sex + <span class="string">",我今年"</span> + obj.age + <span class="string">"岁了"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name:<span class="string">"孙悟空"</span>,</span><br><span class="line">    sex:<span class="string">"男"</span>,</span><br><span class="line">    age:<span class="number">500</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//函数实参为对象</span></span><br><span class="line">show(person);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    a(person);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数实参为函数(对象),将max赋值给了a,故a(person);与show(person);等价</span></span><br><span class="line">fun(max);</span><br></pre></td></tr></table></figure><h3 id="C-返回值">C.返回值</h3><ul><li>在函数中, 可以用return关键字返回一个表达式的值</li><li>可以在调用函数处, 声明一个变量接收该函数的返回值</li><li>若函数中不写return或没有return一个值, 则会默认return undefined;</li><li>return语句之后的代码不会被执行</li><li>函数的返回值也可以是任意类型的值, 基本类型、对象、函数</li></ul><p>例: 定义一个能求两个数最大值的函数, 并将最大值返回.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>((<span class="keyword">typeof</span> a) == <span class="string">"number"</span>&amp;&amp;(<span class="keyword">typeof</span> b) == <span class="string">"number"</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> a&gt;b?a:b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> maxNum = max(<span class="number">123</span>,<span class="number">456</span>);</span><br><span class="line"><span class="built_in">console</span>.log(maxNum);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a = "</span> + a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数实参为函数(对象)</span></span><br><span class="line">fun(max);</span><br><span class="line"><span class="comment">//函数实参为函数的返回值</span></span><br><span class="line">fun(max(<span class="number">123</span>,<span class="number">456</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//return &#123;name:"孙悟空"&#125;;//返回一个对象</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fun3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">"我是fun3函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//return fun3();//这样是返回fun3函数的返回值</span></span><br><span class="line">    <span class="keyword">return</span> fun3;<span class="comment">//返回fun3这个函数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fun2();<span class="comment">//此时f为fun3</span></span><br><span class="line">f();<span class="comment">//调用fun3函数</span></span><br><span class="line">fun2()();<span class="comment">//和f();等价,也是调用fun3()函数</span></span><br></pre></td></tr></table></figure><h3 id="D-立即执行函数">D.立即执行函数</h3><ul><li>函数定义完, 立即就会被调用</li><li>这种函数往往是匿名函数, 只会执行一次.例:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先用一对小括号将匿名函数括起来,表示是一个整体,否则不允许这样声明函数</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a = "</span> + a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b = "</span> + b);</span><br><span class="line">&#125;)(<span class="number">123</span>, <span class="number">456</span>);</span><br></pre></td></tr></table></figure><h3 id="E-方法-method">E.方法(method)</h3><ul><li>一类特殊的函数, 这类函数是对象的属性</li><li>若一个函数成了对象的一个属性, 那这个函数就叫做对象的方法</li><li>调用函数就叫做调用的对象的某方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">"Hello"</span>);<span class="comment">//调用document对象的write方法</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Hello"</span>);<span class="comment">//调用console对象的log方法</span></span><br></pre></td></tr></table></figure><h2 id="二-作用域-Scope">二.作用域(Scope)</h2><h3 id="A-全局作用域">A.全局作用域</h3><ul><li>直接编写在script标签中的JS代码, 都在全局作用域中</li><li>全局作用域在页面打开时创建, 在页面关闭时销毁</li><li>全局作用域中有一个<font style="color:red;">全局对象window</font>, 它代表一个浏览器窗口, 由浏览器创建, 我们可以直接使用</li><li>全局作用域中我们创建的变量都会作为<font style="color:red;">window对象的属性保存</font>, 函数作为window的方法</li><li>全局作用域里的变量都是全局变量, 在页面的任何部分都能访问到</li></ul><blockquote><p>变量的声明提前: 使用var声明的变量, 会在所有的代码执行之前被声明(但不会被赋值)<br>但声明变量时不使用var, 则变量不会被提前声明<br>函数的声明提前: 使用函数声明的形式创建的函数 function 函数名(){}<br>会在所有代码执行前被创建, 所以我们可以在函数声明前调用它.<br>但是用函数表达式创建的函数 var fun = function(){};<br>不会被声明提前, 所以不能在声明前调用.</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">//输出:undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;<span class="comment">//去掉var之后, 第一行报错</span></span><br><span class="line">fun();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是fun"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fun1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是fun1"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">fun1();<span class="comment">//只能在这之后调用, 否则会报错.</span></span><br></pre></td></tr></table></figure><h3 id="B-函数作用域">B.函数作用域</h3><ul><li>函数被调用时, 创建自己的函数作用域, 函数执行完毕, 函数作用域销毁</li><li>每调用一次函数, 创建一个新的函数作用域, 作用域之间互相独立</li><li>函数作用域中可以访问到全局变量, 但全局作用域无法访问到局部变量</li><li>在函数中操作一个变量时, 首先在自身作用域中寻找, 没有的话向上一级寻找</li><li>函数中想使用全局变量, 可以使用window.变量名</li><li>函数的形参相当于在函数作用域中声明的.</li></ul><blockquote><p>也存在声明提前的问题, 但提前声明于当前作用域</p></blockquote><h2 id="三-debug">三.debug</h2><p>这种调试, 可以查看执行过程中内存的状态, 各变变量的情况.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">alert(d);<span class="comment">//声明提前</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">15</span>;</span><br><span class="line">c = <span class="number">20</span>;<span class="comment">//不要监视c可能会出错卡死</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我是fun"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> d = <span class="number">25</span>;</span><br></pre></td></tr></table></figure><p>先打开, 浏览器的开发者工具, 以chrome为例, 按F12, 选择sources, 之后如下图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5CJS%5Cdebug.png" alt="debug"></p><p>其他浏览器类似</p><h2 id="四-this">四.this</h2><p>你可以这样理解:</p><p>  解析器在调用函数时每次都会向函数内部传递一个隐含的参数this, this指向一个对象, 这个函数我们称为函数执行的上下文对象, 根据函数的调用方式不同, this会指向不同的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" "</span> + <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">fun();<span class="comment">//这时this指向window对象,this.name="全局的name";</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"全局的name"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:<span class="string">"孙悟空"</span>,</span><br><span class="line">    show:fun</span><br><span class="line">&#125;;</span><br><span class="line">obj.show();<span class="comment">//这时this指向obj, this.name="孙悟空";</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    name:<span class="string">"猪八戒"</span>,</span><br><span class="line">    show:fun</span><br><span class="line">&#125;;</span><br><span class="line">obj1.show();<span class="comment">//这时this指向obj1, this.name="猪八戒";</span></span><br></pre></td></tr></table></figure><h2 id="五-call-和apply">五.call()和apply()</h2><ul><li>这两个方法都是函数对象的方法, 需要通过函数对象来调用</li><li>当函数对象调用call()和apply()方法时, 函数中的代码也会执行.</li><li>可以将一个对象指定为call和apply的第一个参数, 这个对象将会成为函数执行时的this</li><li>call()方法, 将函数原本的实参在第一个参数(对象)以后依次传递给函数的形参</li><li>apply()方法, 将函数原本的实参封装到一个数组统一传递.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">"obj1"</span>,<span class="attr">show</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">name</span>:<span class="string">"obj2"</span>&#125;;</span><br><span class="line"></span><br><span class="line">fun();<span class="comment">//输出:window</span></span><br><span class="line">fun.call(obj1);<span class="comment">//输出:object</span></span><br><span class="line">fun.apply(obj2);<span class="comment">//输出:object</span></span><br><span class="line"></span><br><span class="line">obj1.show();<span class="comment">//输出:obj1</span></span><br><span class="line">obj1.show.call(obj2);<span class="comment">//输出:obj2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a = "</span>+a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b = "</span>+b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun2.call(obj1,<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//将参数依次传递</span></span><br><span class="line">fun2.apply(obj1,[<span class="number">1</span>,<span class="number">2</span>]);<span class="comment">//将参数封装成数组统一传递</span></span><br></pre></td></tr></table></figure><h3 id="this的情况">this的情况:</h3><ol><li>在函数中调用时, this永远指window</li><li>在方法中调用时, this是调用方法的对象</li><li>在构造函数中调用时, this是正在创建的对象</li><li>使用call和apply调用时, this是参数传递过来的对象</li></ol><h2 id="六-arguments">六.arguments</h2><blockquote><p>在调用函数时, 浏览器都会传递进两个隐含的参数:<br>①函数的上下文对象:this<br>②封装实参的对象: arguments, 我们传递的实参都保存在里面</p></blockquote><ul><li>arguments是一个类数组对象, 它不是数组, 但是它也可以通过数字索引来操作数据.</li><li>arguments.length可以获取实参的长度, 我们即使没定义形参, 也可以通过arguments来使用形参, 但这样比较麻烦</li><li>arguments[0]表示第一个实参, 以此类推.</li><li>arguments.callee属性, 表示当前的函数对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span> <span class="keyword">instanceof</span> <span class="built_in">Array</span>);<span class="comment">//判断arguments是不是数组,输出:false</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">Array</span>.isArray(<span class="built_in">arguments</span>));<span class="comment">//判断arguments是不是数组,输出:false</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);<span class="comment">//输出:4</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">3</span>]);<span class="comment">//输出:true</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee == fun);<span class="comment">//输出:true</span></span><br><span class="line">&#125;</span><br><span class="line">fun(<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="number">3</span>,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS对象简介</title>
      <link href="/JS2-0.html"/>
      <url>/JS2-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS的Object类型</p><a id="more"></a><h2 id="一-Object对象">一.Object对象</h2><p>Object类型, 我们也称为一个对象. 是JavaScript中的引用数据类型.</p><ul><li>它是一种复合值, 它将很多值聚合到一起, 可以通过名字访问这些值.</li><li>对象也可以看做是属性的无序集合, 每个属性都是一个名/值对.</li><li>对象除了可以创建自有属性, 还可以通过从一个名为原型的对象那里继承属性.</li><li>除了字符串、数字、true、false、null和undefined之外, JS中的值都是对象.</li><li>对象可以说是对一些名值对的封装</li></ul><h3 id="A-对象的分类">A.对象的分类:</h3><ol><li>内建对象: 由ES标准制定的对象, 在任何ES的实现中都能使用</li></ol><ul><li>比如: Math String Number Boolean Function Object…</li></ul><ol start="2"><li>宿主对象: 由JS的运行环境提供的对象, 目前主要指浏览器提供的对象</li></ol><ul><li>比如: BOM DOM</li></ul><ol start="3"><li>自定义对象(最难): 由开发人员自己创建的对象</li></ol><h2 id="二-创建自定义对象">二.创建自定义对象</h2><p>访问属性的两种方式:</p><ul><li>用 . 访问: 对象.属性名</li><li>用 [] 访问: 对象[‘属性名’], 这样操作属性更灵活, 常用于操作一些特殊的属性名</li></ul><p>属性名的命名方式, 建议按照标识符的规范去做; 属性值可以是任意类型的值, 甚至是一个对象.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一:先创建对象, 再添加属性</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.name = <span class="string">"孙悟空"</span>;<span class="comment">//添加name属性</span></span><br><span class="line">person.age = <span class="number">18</span>;<span class="comment">//添加age属性</span></span><br><span class="line">person.name = <span class="string">"牛魔王"</span>;<span class="comment">//修改属性</span></span><br><span class="line"><span class="keyword">delete</span> person.name;<span class="comment">//删除属性</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name);<span class="comment">//读取属性, 如果读取不到对象的属性会返回undefined</span></span><br><span class="line"><span class="comment">//方式二:创建对象的同时添加属性, 这种叫做对象字面量</span></span><br><span class="line"><span class="keyword">var</span> sex = <span class="string">"男"</span>;</span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">    name: <span class="string">"孙悟空"</span>,</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    <span class="string">"123"</span>: <span class="number">789</span><span class="comment">//最后一个属性后一定不能加逗号</span></span><br><span class="line">&#125;;</span><br><span class="line">person1[sex] = sex;</span><br><span class="line"><span class="built_in">console</span>.log(person1[sex]);</span><br><span class="line"><span class="keyword">var</span> index = <span class="string">'123'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(person1[<span class="string">'123'</span>]);<span class="comment">//person1.123是不允许的</span></span><br><span class="line"><span class="built_in">console</span>.log(person1[index]);<span class="comment">//与person1['123']等价</span></span><br></pre></td></tr></table></figure><h2 id="三-in运算符">三.in运算符</h2><p>通过该运算符检查对象是否有某个属性, 有则返回true, 没有返回false.</p><p>格式: “属性名” in object, 例:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"孙悟空"</span>,</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    <span class="string">"123"</span>: <span class="number">789</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"obj"</span> <span class="keyword">in</span> person);</span><br></pre></td></tr></table></figure><h2 id="四-数据类型">四.数据类型</h2><p>基本数据类型&amp;引用数据类型</p><p>基本数据类型: Number String Boolean Null Undefined</p><ul><li>基本数据类型的值是无法修改的, 是不可变的.</li><li>基本数据类型的比较是值的比较, 也就是只要两个变量的值相等, 我们就认为这两个变量相等.</li></ul><p>引用数据类型: Object</p><ul><li>当一个变量是一个对象时, 实际上变量中保存的并不是对象本身, 而是对象的引用(堆内存中对象的地址).</li><li>当从一个变量向另一个变量复制引用类型的值时, 会将对象的引用复制到变量中, 并不是创建一个新的对象.</li><li>这时, 两个变量指向的是同一个对象. 因此, 改变其中一个变量会影响另一个</li></ul><p>对比如下代码即结果, 有什么区别?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a ++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"a = "</span> + a + <span class="string">";b = "</span> + b);</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:<span class="string">"孙悟空"</span>,</span><br><span class="line">    birth:&#123;</span><br><span class="line">        year:<span class="number">1998</span>,</span><br><span class="line">        month:<span class="number">10</span>,</span><br><span class="line">        day:<span class="number">8</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj;</span><br><span class="line">obj2.name = <span class="string">"牛魔王"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"obj.name = "</span> + obj.name + <span class="string">"; obj2.name = "</span> + obj2.name);</span><br><span class="line"><span class="comment">//obj2 = null;//若执行obj2 = null;那obj2不再指向任何内容, 如下命令会出错</span></span><br><span class="line">obj2.name = <span class="string">"猪八戒"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj == obj2);<span class="comment">//引用数据类型比较的是地址</span></span><br></pre></td></tr></table></figure><ul><li>JS运行时, 基本类型的变量直接存在栈空间;</li><li>引用类型的实体(即对象)保存在堆空间, 变量中保存的实际上对象在堆内存中的地址.</li><li>以上代码在内存中的情况如下:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5CJS%5CMemory.png" alt="Memory"></p><h2 id="五-for…in语句">五.for…in语句</h2><ul><li>在开发过程中, 我们往往会使用别人给我们提供好的对象</li><li>但我们不知道对象里有什么属性</li><li>这时就用到了for…in语句来遍历对象的属性</li></ul><p>例:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name:<span class="string">"CRD"</span>,</span><br><span class="line">    sex:<span class="string">"男"</span>,</span><br><span class="line">    age:<span class="number">20</span>,</span><br><span class="line">    nation:<span class="string">"中国"</span>,</span><br><span class="line">    sayHello:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"你好"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> index <span class="keyword">in</span> obj)&#123;<span class="comment">//这里不能用obj.index来操作属性</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"名:"</span> + index + <span class="string">";值:"</span> + obj[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS流程控制</title>
      <link href="/JS1-2.html"/>
      <url>/JS1-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS的基本语法: 流程控制</p><a id="more"></a><ol><li>条件判断语句 if-else</li><li>条件分支语句 switch-case</li><li>循环语句 for while</li></ol><h2 id="一-if-else">一.if-else</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//①</span></span><br><span class="line"><span class="keyword">if</span>(条件表达式)&#123;   &#125;</span><br><span class="line"><span class="comment">//②</span></span><br><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">    <span class="comment">//执行的语句1;</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//执行的语句2;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//③</span></span><br><span class="line"><span class="keyword">if</span>(条件表达式<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句1;</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件表达式<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句2;</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>( 条件表达式<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句3;</span></span><br><span class="line">&#125;...&#123;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//执行的语句;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>[注意]</p><ol><li>一旦满足某个条件表达式, 则进入其执行语句块执行, 执行完毕, 跳出当前的条件判断结构, 不会执行剩下的条件结构语句.</li><li>如果多个条件表达式之间为“互斥”关系, 多个结构可以上下调换顺序.<br>如果多个条件表达式之间为“包含”关系, 要求条件表达式范围小的写在范围大的上面.</li></ol><h2 id="二-switch-case">二.switch-case</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(变量)&#123;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    <span class="comment">//break;</span></span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    <span class="comment">//break;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.case后只能填写变量的值, 不能写范围.<br>2.default是可以省略的, 并且其位置也是灵活的, 但通常将其放在case语句之后.<br>3.一旦满足某个case语句, 则进入执行其操作, 直至遇到break或者程序终止.<br>4.若要判断的语句的条件满足switch变量的数据类型, 且值不多的情况下, 建议选择switch-case .<br>除此之外, 选择if-else.</p><h2 id="三-循环语句">三.循环语句</h2><p>格式:①初始化条件②循环条件③迭代部分④循环体</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(①;②;③)&#123;</span><br><span class="line">    ④</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">①</span><br><span class="line"><span class="keyword">while</span>(②)&#123;</span><br><span class="line">    ④</span><br><span class="line">    ③</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">①</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    ④</span><br><span class="line">    ③</span><br><span class="line">&#125;<span class="keyword">while</span>(②);</span><br></pre></td></tr></table></figure><p>注意 1.不同的循环结构之间可以相互转换<br>   2.while和do-while的区别; do-while程序至少会执行一次</p><p>嵌套循环: 上述循环体嵌套循环体<br>若外层循环执行m次, 内层循环执行n次, 整个程序执行m*n次 .</p><p>无限循环结构: 我们往往会在无限循环结构内部提供循环的终止条件, 使用break关键字跳出循环.避免死循环.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">if</span>(  )&#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">if</span>(  )&#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="break-continue">break&amp;continue</h3><p>使用switch-case结构或者循环结构中<br>在循环结构中, 一旦执行到break, 就跳出当前循环 .</p><p>continue:<br>使用在循环结构中, 一旦执行到continue, 就跳出当次循环, 继续执行下一次循环.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>;i &lt;= <span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">4</span> == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//break; //程序执行结果:123</span></span><br><span class="line">        <span class="keyword">continue</span>;  <span class="comment">//程序执行结果:123567910</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在嵌套循环中, 使用带标签的break和continue.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">label:<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>;i &lt; <span class="number">5</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">1</span>;j &lt;= <span class="number">10</span>;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(j % <span class="number">4</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//break;</span></span><br><span class="line">            <span class="comment">//continue;</span></span><br><span class="line">            <span class="comment">//break label;</span></span><br><span class="line">            <span class="keyword">continue</span> label;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例题: 求100以内的素数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">2</span>;i &lt;= n;i ++)&#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.sqrt(i));</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">2</span>;j &lt;= m;j ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i % j == <span class="number">0</span>)&#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS基础语法</title>
      <link href="/JS1-1.html"/>
      <url>/JS1-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JS基础语法</p><a id="more"></a><h2 id="一-JS注释">一.JS注释</h2><ul><li>和其他高级语言差不多, 分为:</li><li>多行注释: /**/</li><li>单行注释: //</li><li>注释中的代码不会被执行, 只能在源码中看见注释的内容</li></ul><h2 id="二-JS的变量与字面量">二.JS的变量与字面量</h2><p>变量的作用是给某一个值或对象标注名称, 方便复用, 变量也用来保存字面量</p><p>字面量: 可以直接使用, 不能更改其值, 像: 123、“Hello”、1.23等</p><ul><li>变量的声明: 使用<font style='color:red;'>var关键字声明一个变量</font>, 例: var a;</li><li>变量的赋值: 使用=为变量赋值, 例: a=123;</li><li>声明和赋值同时进行, 例, var a = 123;</li></ul><h2 id="三-JS标识符">三.JS标识符</h2><p>所谓标识符, 就是指变量、函数、属性的名字, 或函数的参数.要求:</p><ul><li>第一个字符必须是一个字母、下划线_或一个美元符号$.</li><li>不能以数字开头, 不能是关键字或保留字</li><li>其他字符可以是字母、下划线、美元符号或数字.</li><li>标识符一般采用驼峰命名法(规范): 首字母小写, 每个单词首字母大写其他字母小写, 例: xxxYyyZzz</li></ul><p>JS底层保存标识符是用Unicode编码的</p><p>命名时, 尽量见名知意, 遵守它的规则和行业规范.</p><h2 id="四-数据类型">四.数据类型</h2><ul><li>String(字符串型), 例: &quot;Hello World&quot;或’Hello World’</li><li>Number(数值型), 例: 123、1.23</li><li>Boolean(布尔型), 只有 true false两个取值</li><li>Null(null型), 只有一个取值: null, 用来表示一个对象为空; 用 typeof null;会返回object</li><li>Undefined(undefined型), 未定义, 当声明了一个变量而没赋值时, 变量的值就是undefined</li><li>上述五种基本类型之外的类型: Object</li></ul><p>String: 使用单或双引号括起来的整体, 但是单双引号不能嵌套. 了解一些常见的转义字符</p><p>Number: 正无穷(Infinity), 负无穷(-Infinity); Nut a Number(NaN)</p><p><font style='color:red;font-weight:bold;'>尽量避免用JS做一些高精度的计算问题</font></p><p>用typeof运算符可以检查变量的类型, 例:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);<span class="comment">//输出结果为:number</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Number</span>.MAX_VALUE + <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">//输出结果为:Infinity</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="built_in">Number</span>.MIN_VALUE;<span class="comment">//JS能表示的大于零的最小值</span></span><br><span class="line"><span class="comment">//Number有它能表示的最大值, 为Number.MAX_VALUE;</span></span><br><span class="line"><span class="comment">//当计算结果超过它时, 输出结果为:Infinity(number型)即正无穷</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"123"</span> * <span class="string">"123"</span>;</span><br><span class="line"><span class="comment">//当计算结果非数字时, 会返回一个NaN(number型)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str);<span class="comment">//结果为:NaN</span></span><br></pre></td></tr></table></figure><h2 id="五-强制类型转换">五.强制类型转换</h2><ul><li>其他类型变量转换为String, 调用变量的toString()方法, 或调用String()函数</li><li>其他类型变量转换为Number, 调用Number()函数, 对于字符串还可调用parseInt()或parseFloat()函数</li><li>其他类型变量转换为Boolean, 调用Boolean()函数</li></ul><details><summary>One More Thing 👇</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//其他类型变量转换为String</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;<span class="comment">//注意:当a = null;或a = undefined;时, 不能调用a.toString()方法</span></span><br><span class="line">a = a.toString();<span class="comment">//toString()方法, 无参数, 将a的内容变为string后返回</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">null</span>;</span><br><span class="line">b = <span class="built_in">String</span>(b);<span class="comment">//String()函数, 将要转换的变量作为参数传递给函数, 后函数将结果返回</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"a = "</span> + a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);<span class="comment">//输出:string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"b = "</span> + b);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//其他类型变量转换为Number</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"123"</span>;<span class="comment">//若字符串内容有非数字和空格, Number()函数会将内容转换为NaN</span></span><br><span class="line">str = <span class="built_in">Number</span>(str);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"str = "</span> + str);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str);</span><br><span class="line"><span class="keyword">var</span> bool = <span class="literal">true</span>;<span class="comment">//true==&gt;1  false==&gt;0  null==&gt;0  undefined==&gt;NaN</span></span><br><span class="line">bool = <span class="built_in">Number</span>(bool);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"bool = "</span> + bool);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> bool);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> px = <span class="string">"123px"</span>;</span><br><span class="line">px = <span class="built_in">parseInt</span>(px);<span class="comment">//从第一个字符开始转换, 直到遇到非空和非数字.parseFolat()函数类似</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"px = "</span> + px);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> px);</span><br><span class="line"><span class="comment">//JS中数字的进制, 0x开头表示16进制, 0开头表示8进制</span></span><br><span class="line">px = <span class="string">"070"</span>;</span><br><span class="line">px = <span class="built_in">parseInt</span>(px,<span class="number">10</span>);<span class="comment">//第二个参数, 表示以几进制进行解析</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"px = "</span> + px);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> px);</span><br><span class="line"></span><br><span class="line"><span class="comment">//其他类型变量转换为Boolean</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;<span class="comment">//数字只有0和NaN转换为false, 字符串只有空串转换为false</span></span><br><span class="line">num = <span class="built_in">Boolean</span>(num);<span class="comment">//null和undefined转换为false, 对象都转换为true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"num = "</span> + num);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);</span><br><span class="line"></span><br><span class="line"><span class="comment">//这里说一个isNaN()函数, 判断一个数字是不是NaN, 若是返回true, 不是返回false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(num));</span><br></pre></td></tr></table></figure></details><h2 id="六-运算符">六.运算符</h2><ul><li>算术运算符  + - * / ++(前置和后置) --(前置和后置) +(符号不变) -(符合取反) %(取模)</li><li>逻辑运算符  &amp;&amp; || !  &amp; |</li><li>关系运算符  &gt;  &lt;  &gt;=  &lt;=  ==  !=  ===  !==</li><li>赋值运算符  = += -= *= /= %=</li><li>条件运算符  ?:, 格式: 条件表达式?表达式1:表达式2; 若条件表达式为true, 整个表达式值为表达式1的值, 否则为表达式2的值.</li><li>位运算符  ^ &amp; | ! (用于数值类型的操作)</li><li>typeof运算符  判断类型并以字符串形式返回</li></ul><h3 id="A-算术运算符">A.算术运算符:</h3><p>+的特殊性, 可以用来拼接字符串, 例:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> + <span class="number">2</span> + <span class="string">"3"</span>;<span class="comment">//33</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">"1"</span> + <span class="number">2</span> + <span class="number">3</span>;<span class="comment">//123</span></span><br></pre></td></tr></table></figure><p>其他算数运算符在进行运算时, 会将操作数先转换为Number类型, 再进行运算, 并将结果以数值类型返回</p><p>前++: 先对原变量加1, 在使用该变量的值;后++: 先使用给变量的值, 再给变量加1;–类似</p><h3 id="B-逻辑运算符">B.逻辑运算符</h3><p>与 或 非, 运算时将其他类型转换为Boolean型, 再运算;</p><p>注意短路与(&amp;&amp;)和短路或(||):</p><p>短路与: 若第一个值为true, 则返回第二个值; 若第一个值为false, 则返回第一个值;</p><p>短路或: 若第一个值为true, 则返回第一个值; 若第一个值为false, 则返回第二个值;</p><h3 id="C-关系元算符">C.关系元算符</h3><p>比较两个字符串时, 比较的是字符串的字符编码(按位比较); 其他类型转换为数值类型比较; 比较结果为true或false, 以字符串形式返回比较的结果.</p><p>注意==判等时会做隐式类型转换, ===表示全等; != 与 !==一样</p><h3 id="D-赋值运算符">D.赋值运算符</h3><p>将运算符左边的表达式的值做一个操作, 然后将操作后的值赋值给右边的变量.</p><h2 id="七-Unicode编码表">七.Unicode编码表</h2><p>在JS的字符串中, 使用转义字符\u+四位16进制的编码表示Unicode编码</p><p>在HTML中, 使用 “&amp;#10进制编码;” 表示Unicode编码.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS基础<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> str = <span class="string">"\u2620"</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(str);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&amp;#9760;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注意:</p><ul><li>JS中严格区分大小写(HTML中不区分)</li><li>JS中一个分号代表一条命令的结束</li><li>JS会忽略多个空格与换行符, 因此我们可以用来格式化自己的代码</li><li>JS代码是一条条以;结尾的语句, 可用{}将语句分组, 一个{}也叫一个代码块</li></ul>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS简介</title>
      <link href="/JS1-0.html"/>
      <url>/JS1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JavaScript简介</p><a id="more"></a><h2 id="一-起源">一.起源</h2><ul><li>JavaScript诞生于1995年, 它的出现主要是用于处理网页中的前端验证.</li><li>所谓的前端验证, 就是指检查用户输入的内容是否符合一定的规则.</li><li>比如: 用户名的长度，密码的长度，邮箱的格式等.</li></ul><h2 id="二-JavaScript构成">二.JavaScript构成</h2><ul><li>ECMAScript(JS的标准)</li><li>DOM(JS操作网页)</li><li>BOM(JS操作浏览器)</li></ul><h2 id="三-JS的特点">三.JS的特点</h2><ul><li>解释型语言</li><li>类似于 C 和 Java 的语法结构</li><li>动态语言</li><li>基于原型的面向对象</li><li>JavaScript是一门解释型语言, 所谓解释型值语言不需要被编译为机器码在执行, 而是直接执行.</li><li>JavaScript和与Java的关系也仅仅是看起来像而已</li><li>JavaScript是一门动态语言, 所谓的动态语言可以暂时理解为在语言中的一切内容都是不确定的. 比如一个变量, 这一时刻是个整型, 下一时刻可能会变成字符串了.</li><li>JS可能是运行速度最快的动态语言了</li><li>JavaScript是一门面向对象(基于原型的面向对象)的语言</li></ul><h2 id="四-JS的Hello-World">四.JS的Hello World</h2><h3 id="A-JS代码的位置">A.JS代码的位置</h3><ol><li>JS代码写在网页(.html文件)的script标签中</li><li>JS代码可以写在标签的onclick属性中, 点击时才会执行</li><li>JS代码写在超链接的href属性中, 点击时才会执行</li><li>JS代码写在外部.js文件中, 用script标签引入该文件到网页</li></ol><ul><li>虽然可以写在标签的属性中, 但是这样属于结构与行为耦合, 不方便维护, 不推荐使用</li><li>一般使用script引入外部js文件或将代码写在script标签中, 一旦script标签用于引入js文件, 那么就不能在里面编写js代码</li><li>JS代码按script标签先后顺序, 顺序执行</li></ul><p><font style='color:red;font-size:1.2em;font-weight:bold;'>注意: 本站所有的html代码, 均可直接复制, 然后粘贴到<font color="blue"><a href="http://www.w3school.com.cn/tiy/t.asp?f=html_intro" target="_blank" rel="noopener">W3School</a> </font>代码区, 点击提交代码在线执行.</font></p><p>例:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS基础<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript"><span class="comment">//弹出窗口</span></span></span><br><span class="line"><span class="actionscript">alert(<span class="string">"Hello Wrold!"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//输出在body标签中</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.write(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//输出在控制台</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">"Hello World!"</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/test.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"alert('讨厌, 点我干嘛~~~')"</span>&gt;</span>点我一下试试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:alert('让你点你就点?')"</span>&gt;</span>点我一下试试<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>点我一下试试<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="comment">&lt;!--点击时什么都不做--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">            <span class="comment">//弹出窗口</span></span></span><br><span class="line"><span class="actionscript">alert(<span class="string">"two"</span>);</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaInternet</title>
      <link href="/JavaSE14-Internet.html"/>
      <url>/JavaSE14-Internet.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Java网络编程</p><a id="more"></a><h2 id="一-网络编程概述">一.网络编程概述</h2><ul><li>Java是 Internet 上的语言, 它从语言级上提供了对网络应用程序的支持, 程序员能够很容易开发常见的网络应用程序.</li><li>Java提供的网络类库, 可以实现无痛的网络连接, 联网的底层细节被隐藏在 Java 的本机安装系统里, 由 JVM 进行控制, 并且 Java 实现了一个跨平台的网络库, 程序员面对的是一个统一的网络编程环境.</li></ul><blockquote><p>计算机网络:<br>把分布在不同地理区域的计算机与专门的外部设备用通信线路互连成一个规模大、功能强的网络系统, 从而使众多的计算机可以方便地互相传递信息、共享硬件、软件、数据信息等资源.<br>网络编程的目的:<br>直接或间接地通过网络协议与其它计算机进行通讯.<br>网络编程中有两个主要的问题:<br>①如何准确地定位网络上一台或多台主机<br>②找到主机后如何可靠高效地进行数据传输.<br>如何实现网络中的主机互相通信:<br>①通信双方地址<br>②一定的规则(有两套参考模型):<br>OSI参考模型: 模型过于理想化, 未能在因特网上进行广泛推广<br>TCP/IP参考模型(或TCP/IP协议): 事实上的国际标准.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/Protocol.png" alt="Protocol"></p><h2 id="二-通讯要素">二.通讯要素</h2><h3 id="1-IP和端口号">1.IP和端口号</h3><blockquote><p>IP 地址: InetAddress<br>①唯一的标识 Internet 上的计算机<br>②本地回环地址(hostAddress): 127.0.0.1 主机名(hostName)：localhost<br>③不易记忆<br>端口号标识正在计算机上运行的进程(程序)<br>①不同的进程有不同的端口号<br>②被规定为一个 16 位的整数 0~65535. 其中, 0~1023被预先定义的服务通信占用(如My Sql占用端口3306, http占用端口80等). 除非我们需要访问这些特定服务, 否则, 就应该使用 1024~65535 这些端口中的某一个进行通信, 以免发生端口冲突.</p></blockquote><p><font style="color:red;font-size:1.5em;font-weigth:bold;">端口号与IP地址的组合得出一个网络套接字(socket).</font></p><h3 id="2-网络通信协议">2.网络通信协议</h3><blockquote><p>​计算机网络中实现通信必须有一些约定, 即通信协议, 对速率、传输代码、代码结构、传输控制步骤、出错控制等制定标准.<br>​通信协议分层的思想</p></blockquote><h4 id="TCP-IP协议簇">TCP/IP协议簇</h4><blockquote><p>传输层协议中有两个非常重要的协议:<br>传输控制协议TCP(Transmission Control Protocol)<br>用户数据报协议UDP(User Datagram Protocol)<br>TCP/IP 以其两个主要协议: 传输控制协议(TCP)和网络互联协议(IP)而得名, 实际上是一组协议, 包括多个具有不同功能且互为关联的协议.<br>IP(Internet Protocol)协议是网络层的主要协议, 支持网间互连的数据通信.<br>TCP/IP协议模型从更实用的角度出发, 形成了高效的四层体系结构, 即物理链路层、IP层、传输层和应用层.</p></blockquote><ol><li>TCP协议:</li></ol><ul><li>使用TCP协议前, 须先建立TCP连接, 形成传输数据通道</li><li>传输前, 采用“三次握手”方式, 是可靠的</li><li>TCP协议进行通信的两个应用进程: 客户端、服务端</li><li>在连接中可进行大数据量的传输</li><li>传输完毕, 需释放已建立的连接, 效率低</li></ul><ol start="2"><li>UDP协议(视频传输一般用的此协议):</li></ol><ul><li>将数据、源、目的封装成数据包, 不需要建立连接</li><li>每个数据报的大小限制在64 K内</li><li>因无需连接, 故是不可靠的</li><li>发送数据结束时无需释放资源, 速度快</li></ul><h3 id="3-Socket">3.Socket</h3><ul><li>利用套接字(Socket)开发网络应用程序早已被广泛的采用, 以至于成为事实上的标准.</li><li>通信的两端都要有Socket, 是两台机器间通信的端点</li><li>网络通信其实就是Socket间的通信</li><li>Socket允许程序把网络连接当成一个流, 数据在两个Socket间通过IO传输</li><li>一般主动发起通信的应用程序属客户端, 等待通信请求的为服务端</li></ul><h3 id="4-InetAddress类">4.InetAddress类</h3><blockquote><p>Internet上的主机有两种方式表示地址:<br>域名(hostName): localhost<br>IP 地址(hostAddress): 127.0.0.1<br>InetAddress类主要表示IP地址, 两个子类: Inet4Address、Inet6Address.<br>InetAddress 类对象含有一个 Internet 主机地址的域名和IP地址: localhost 和 127.0.0.1<br>域名容易记忆, 当在连接网络时输入一个主机的域名后, 域名解析服务器(DNS)负责将域名转化成IP地址, 这样才能和主机建立连接. -------域名解析</p></blockquote><p>Windows系统中, 访问域名, 先找本机hosts(C:\Windows\System32\drivers\etc\hosts), 是否有输入的域名地址, 没有的话, 再通过DNS服务器, 找主机.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//创建一个InetAddress对象: getByName()</span></span><br><span class="line">    InetAddress inet = InetAddress.getByName(<span class="string">"localhost"</span>);</span><br><span class="line">    <span class="comment">//inet = InetAddress.getByName("127.0.0.1");</span></span><br><span class="line">    System.out.println(inet);</span><br><span class="line">    <span class="comment">//两个方法</span></span><br><span class="line">    System.out.println(inet.getHostName());</span><br><span class="line">    System.out.println(inet.getHostAddress());</span><br><span class="line">    <span class="comment">//获取本机的IP: getLocalHost()</span></span><br><span class="line">    InetAddress inet1 = InetAddress.getLocalHost();</span><br><span class="line">    System.out.println(inet1);</span><br><span class="line">    System.out.println(inet1.getHostName());</span><br><span class="line">    System.out.println(inet1.getHostAddress());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三-基于Socket的TCP编程">三.基于Socket的TCP编程</h2><p>Java语言的基于套接字编程分为服务端编程和客户端编程, 有两个类<font style='color:red;'>Socket类和ServerSocket类</font></p><h3 id="1-TCP编程示例一">1.TCP编程示例一</h3><p>客户端给服务端发送信息, 服务端将信息输出在控制台上.<br><font style='color:red;font-size:1.2em;font-weight:bold;'>注意: 测试时, 先开启服务端, 再开启客户端</font></p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建一个Socket的对象, 通过构造器指明服务端的IP地址, 以及其接收程序的端口号</span></span><br><span class="line">        socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"127.0.0.1"</span>), <span class="number">9999</span>);</span><br><span class="line">        <span class="comment">//2.getOutputStream(): 发送数据, 方法返回OutputStream的对象</span></span><br><span class="line">        os = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3.具体的输出过程</span></span><br><span class="line">        os.write(<span class="string">"我是客户端发送的信息"</span>.getBytes());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.关闭相应的流和Socket对象</span></span><br><span class="line">        <span class="keyword">if</span> (os != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ServerSocket ss = <span class="keyword">null</span>;</span><br><span class="line">    Socket s = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建一个ServerSocket的对象, 通过构造器指明自身的端口号</span></span><br><span class="line">        ss = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        <span class="comment">//2.调用其accept()方法, 返回一个Socket的对象</span></span><br><span class="line">        s = ss.accept();</span><br><span class="line">        <span class="comment">//3.调用Socket对象的getInputStream()获取一个从客户端发送过来的输入流</span></span><br><span class="line">        is = s.getInputStream();</span><br><span class="line">        <span class="comment">//4.对获取的输入流进行的操作</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(b)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            String str = <span class="keyword">new</span> String(b, <span class="number">0</span>, len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"收到来自于"</span> + s.getInetAddress().getHostAddress() + <span class="string">"的信息"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//5.关闭相应的流以及Socket、ServerSocket的对象</span></span><br><span class="line">        <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ss != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ss.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="2-TCP编程示例二">2.TCP编程示例二</h3><p>客户端给服务端发送信息, 服务端将信息打印到控制台上, 同时回馈&quot;成功接受&quot;给客户端</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"127.0.0.1"</span>),<span class="number">9999</span>);</span><br><span class="line">        os = socket.getOutputStream();</span><br><span class="line">        os.write(<span class="string">"我是客户端的信息"</span>.getBytes());</span><br><span class="line">        <span class="comment">//shutdownOutput():执行此方法, 显式的告诉服务端发送完毕!</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        is = socket.getInputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            String str = <span class="keyword">new</span> String(b,<span class="number">0</span>,len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(os != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ServerSocket ss = <span class="keyword">null</span>;</span><br><span class="line">    Socket s = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ss = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        s = ss.accept();</span><br><span class="line">        is = s.getInputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//下面的read()方法是阻塞式的, 需要客户端显示的告诉服务端, 发送数据完毕</span></span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            String str = <span class="keyword">new</span> String(b,<span class="number">0</span>,len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">        os = s.getOutputStream();</span><br><span class="line">        os.write(<span class="string">"服务端成功接收"</span>.getBytes());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(os != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ss != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ss.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="3-TCP编程示例三">3.TCP编程示例三</h3><p>从客户端发送文件给服务端, 服务端保存到本地. 并返回“成功接收”给客户端. 并关闭相应的连接.</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"localhost"</span>),<span class="number">9999</span>);</span><br><span class="line">        os = socket.getOutputStream();</span><br><span class="line">        fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"1.png"</span>));</span><br><span class="line">        <span class="keyword">int</span> length = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] a = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((length = fis.read(a))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            os.write(a, <span class="number">0</span>, length);</span><br><span class="line">        &#125;</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        is = socket.getInputStream();</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b))!= -<span class="number">1</span>) &#123;</span><br><span class="line">            String str = <span class="keyword">new</span> String(b, <span class="number">0</span>, len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(os !=<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ServerSocket ss = <span class="keyword">null</span>;</span><br><span class="line">    Socket s = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ss = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        s = ss.accept();</span><br><span class="line">        is = s.getInputStream();</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"2.png"</span>));</span><br><span class="line">        <span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            fos.write(b, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"收到来自于"</span> + s.getInetAddress().getHostAddress() + <span class="string">"的文件"</span>);</span><br><span class="line">        os = s.getOutputStream();</span><br><span class="line">        os.write(<span class="string">"成功接收"</span>.getBytes());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(os != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ss != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ss.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="四-基于Socket的TCP编程">四.基于Socket的TCP编程</h2><ul><li>类 DatagramSocket 和 DatagramPacket 实现了基于 UDP 协议网络程序.</li><li>UDP数据报通过数据报套接字 DatagramSocket 发送和接收, 系统不保证UDP数据报一定能够安全送到目的地, 也不能确定什么时候可以抵达.</li><li>DatagramPacket 对象封装了UDP数据报, 在数据报中包含了发送端的IP地址和端口号以及接收端的IP地址和端口号.</li><li>UDP协议中每个数据报都给出了完整的地址信息, 因此无须建立发送方和接收方的连接.</li></ul><h3 id="1-流-程">1.流  程:</h3><ol><li>DatagramSocket与DatagramPacket</li><li>建立发送端，接收端</li><li>建立数据包</li><li>调用Socket的发送、接收方法</li><li>关闭Socket</li></ol><p><font style = 'color:red;font-size:1.2em;font-weight:bold;'>发送端与接收端是两个独立的运行程序</font></p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DatagramSocket ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ds = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="string">"这是发送端发送过来的数据"</span>.getBytes();</span><br><span class="line">        DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(b, <span class="number">0</span>, b.length, InetAddress.getByName(<span class="string">"127.0.0.1"</span>), <span class="number">9999</span>);</span><br><span class="line">        ds.send(dp);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(ds != <span class="keyword">null</span>) &#123;</span><br><span class="line">            ds.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接收端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rceive</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DatagramSocket ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ds = <span class="keyword">new</span> DatagramSocket(<span class="number">9999</span>);</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(b, <span class="number">0</span>, b.length);</span><br><span class="line">        ds.receive(dp);</span><br><span class="line">        String str = <span class="keyword">new</span> String(dp.getData(),<span class="number">0</span>,dp.getLength());</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="五-URL编程">五.URL编程</h2><ul><li>URL(Uniform Resource Locator): 统一资源定位符, 它表示 Internet 上某一资源的地址. 通过 URL 我们可以访问 Internet 上的各种网络资源, 比如最常见的 www, ftp 站点. 浏览器通过解析给定的 URL 可以在网络上查找相应的文件或其他资源.</li><li>URL的基本结构由5部分组成:<br>&lt;传输协议&gt;://&lt;主机名&gt;:&lt;端口号&gt;/&lt;文件名&gt;<br>例如: <a href="http://127.0.0.1:8080/helloworld/index.jsp" target="_blank" rel="noopener">http://127.0.0.1:8080/helloworld/index.jsp</a></li></ul><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is2 = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">"https://papertome.com/hello.txt"</span>);</span><br><span class="line">        <span class="comment">//读取服务器上的资源法一:</span></span><br><span class="line">        is = url.openStream();</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            String str = <span class="keyword">new</span> String(b,<span class="number">0</span>,len,<span class="string">"utf-8"</span>);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//读取服务器上的资源法二:</span></span><br><span class="line">        URLConnection urlConn = url.openConnection();</span><br><span class="line">        is2 = urlConn.getInputStream();</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"hello.txt"</span>));</span><br><span class="line">        <span class="keyword">while</span>((len = is2.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            fos.write(b, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is2.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaReflection</title>
      <link href="/JavaSE13-Reflection.html"/>
      <url>/JavaSE13-Reflection.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><font style='color:black;font-size:1.2em;'>Java的反射机制</font></p><a id="more"></a><h2 id="一-Java-Reflection">一.Java Reflection</h2><p>Reflection(反射)是被视为<font style='color:red;'>动态语言</font>的关键, 反射机制允许程序在执行期借助于Reflection API取得任何类的内部信息, 并能直接操作任意对象的内部属性及方法</p><h3 id="1-Java反射机制提供的功能">1.Java反射机制提供的功能</h3><ul><li>在运行时判断任意一个对象所属的类</li><li>在运行时构造任意一个类的对象</li><li>在运行时判断任意一个类所具有的成员变量和方法</li><li>在运行时调用任意一个对象的成员变量和方法</li><li>生成动态代理(前边讲interface时有静态代理)</li></ul><h3 id="2-反射相关的主要API">2.反射相关的主要API:</h3><ul><li>java.lang.Class:代表一个类</li><li>java.lang.reflect.Method:代表类的方法</li><li>java.lang.reflect.Field:代表类的成员变量</li><li>java.lang.reflect.Constructor:代表类的构造方法</li></ul><h3 id="3-初识反射">3.初识反射</h3><p>通过反射在运行时构造一个类的对象, 调用方法和成员变量</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestReflection</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//class文件中运行时Person类即为Class类的实例(clazz)</span></span><br><span class="line">        Class&lt;Person&gt; clazz = Person.class;</span><br><span class="line">        <span class="comment">//1.创建clazz对应的运行时类(Person类)的对象</span></span><br><span class="line">        Person p = clazz.newInstance();</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        <span class="comment">//2.通过反射调用运行时类指定的成员变量</span></span><br><span class="line">        Field f1 = clazz.getField(<span class="string">"name"</span>);<span class="comment">//调用public变量</span></span><br><span class="line">        f1.set(p, <span class="string">"LiuDehua"</span>);</span><br><span class="line">        Field f2 = clazz.getDeclaredField(<span class="string">"age"</span>);<span class="comment">//调用private变量</span></span><br><span class="line">        f2.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        f2.set(p, <span class="number">21</span>);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        <span class="comment">//3.反射调用运行时类指定的方法</span></span><br><span class="line">        Method m1 = clazz.getMethod(<span class="string">"show"</span>);<span class="comment">//无参方法</span></span><br><span class="line">        m1.invoke(p);</span><br><span class="line">        Method m2 = clazz.getMethod(<span class="string">"display"</span>, String.class);<span class="comment">//带参方法</span></span><br><span class="line">        m2.invoke(p, <span class="string">"CHINA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我是一个人"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(String nation)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我的国籍是:"</span>+nation);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="二-反射的源头Class类">二.反射的源头Class类</h2><ul><li>源文件经过编译(javac.exe)以后, 得到一个或多个.class文件, .class文件经过运行(java.exe)这步, 就需要进行类的加载(通过JVM的类加载器), 加载到内存的缓存中. 每一个放入缓存中的.class文件就是一个Class的实例!</li><li>Class的一个对象, 对应着一个运行时类(每一个运行时类只加载一次). 相当于一个运行时类本身充当了Class的一个实例.</li><li>每一个对象, 都能通过它的getClass()方法, 得到它对应的运行时类</li><li>通过Class的实例得到一个运行时类中的完整结构(属性, 方法, 构造器, 内部类, 父类, 所在包, 异常, 注解, … )</li></ul><h3 id="1-创建Class类的对象">1.创建Class类的对象</h3><ol><li>通过运行时类本身的.class属性获取</li><li>通过运行时类对象的getClass()方法获取</li><li>通过Class类的静态方法Class.forName(String path)方法</li><li>(了解)通过类加载器(ClassLoader)的对象的loadClass(String path)方法</li></ol><p>ClassLoader的应用:</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="comment">//法一:</span></span><br><span class="line">    ClassLoader loader = <span class="keyword">this</span>.getClass().getClassLoader();</span><br><span class="line">    InputStream is = loader.getResourceAsStream(<span class="string">"com\\crd\\reflection\\jdbc.properties"</span>);</span><br><span class="line">    <span class="comment">//法二:</span></span><br><span class="line"><span class="comment">//    FileInputStream is = new FileInputStream(new File("jdbc1.properties"));</span></span><br><span class="line">    Properties pros = <span class="keyword">new</span> Properties();</span><br><span class="line">    pros.load(is);</span><br><span class="line">    String name = pros.getProperty(<span class="string">"user"</span>);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    String password = pros.getProperty(<span class="string">"password"</span>);</span><br><span class="line">    System.out.println(password);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h4 id="有了Class的实例后-可以做什么">有了Class的实例后, 可以做什么?</h4><ol><li>创建对应的运行时类的对象(重点)</li><li>获取对应运行时类完整的类的结构: 属性、方法、构造器、包、父类、接口、泛型、注解、异常、内部类…</li><li>调用对应的运行时类中指定的结构(某个指定的属性、方法、构造器)(重点)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取到对应的运行时类中声明的权限为public的方法(包含其父类中的声明的public)</span></span><br><span class="line">Method[] m1 = clazz.getMethods();</span><br><span class="line"><span class="comment">//获取到对应的运行时类中声明的所有的方法(①任何权限修饰符修饰的都能获取②不含父类中的)</span></span><br><span class="line">Method[] m2 = clazz.getDeclaredMethods();</span><br><span class="line"><span class="comment">//获取其他结构调用类似方法即可</span></span><br><span class="line"><span class="comment">//获取父类的泛型(以后会用到)</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line">    Type type = clazz.getGenericSuperclass();</span><br><span class="line">    ParameterizedType param = (ParameterizedType)type;</span><br><span class="line">    Type[] arr = param.getActualTypeArguments();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length;i ++)&#123;</span><br><span class="line">        System.out.println((Class)arr[i]);<span class="comment">//父类的泛型</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font style='color:red;font-size:1.2em;font-weight:bold;'>注意: 调用getDeclaredXxx()方法后, 建议要调用一下, setAccessible(true);</font></p><h3 id="2-创建运行时类的对象">2.创建运行时类的对象</h3><ul><li>使用Class实例的newInstance()方法创建, 该方法默认调用运行时类的空参构造器(该构造器需要足够的权限)</li><li>故, 创建类时建议创建一个空参的构造器</li><li>也能用指定的构造器创建运行时类的对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Class clazz = Person.class;</span><br><span class="line">    Constructor cons = clazz.getDeclaredConstructor(String.class,<span class="keyword">int</span>.class);<span class="comment">//指定构造器</span></span><br><span class="line">    cons.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    Person p = (Person)cons.newInstance(<span class="string">"Tom"</span>,<span class="number">10</span>);</span><br><span class="line">    System.out.println(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三-动态代理">三.动态代理</h2><ul><li>代理设计模式的原理: 使用一个代理将对象包装起来, 然后用该代理对象取代原始对象. 任何对原始对象的调用都要通过代理. 代理对象决定是否以及何时将方法调用转到原始对象上</li><li>之前提到过静态代理, 特征是代理类和被代理类都是在编译期间确定下来, 不利于程序的扩展. 同时, 每一个代理类只能为一个接口服务, 这样一来程序开发中必然产生过多的代理.</li><li>最好可以通过一个代理类完成全部的代理功能</li></ul><p>静态代理: 要求被代理类和代理类同时实现相应的一套接口; 通过代理类的对象调用重写接口的方法时, 实际上执行的是被代理类的同样的方法的调用.</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ClothFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">productCloth</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NikeClothFactory</span> <span class="keyword">implements</span> <span class="title">ClothFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">productCloth</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Nike工厂生产衣服"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span> <span class="keyword">implements</span> <span class="title">ClothFactory</span></span>&#123;</span><br><span class="line">    ClothFactory cf;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyFactory</span><span class="params">(ClothFactory cf)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cf = cf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">productCloth</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"代理类开始代理"</span>);</span><br><span class="line">        cf.productCloth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span>&#123;</span><br><span class="line">        NikeClothFactory nike = <span class="keyword">new</span> NikeClothFactory();<span class="comment">//创建被代理类</span></span><br><span class="line">        ProxyFactory proxy = <span class="keyword">new</span> ProxyFactory(nike);<span class="comment">//创建代理类</span></span><br><span class="line">        proxy.productCloth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>动态代理: 在程序运行时, 根据被代理类及其实现的接口, 动态的创建一个代理类. 当调用代理类的实现的抽象方法时, 就发起对被代理类同样方法的调用.</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态代理的使用, 反射是动态语言的关键</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">action</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我是被代理类, 记得要执行我哦!么么~~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    Object obj;<span class="comment">//实现了接口的被代理类的对象的声明</span></span><br><span class="line">    <span class="comment">//①给被代理的对象实例化②返回一个代理类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">blind</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(), obj</span><br><span class="line">                .getClass().getInterfaces(), <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//当通过代理类的对象发起对被重写的方法的调用时, 都会转换为对如下的invoke方法的调用</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">//method方法的返回值时returnVal</span></span><br><span class="line">        Object returnVal = method.invoke(obj, args);</span><br><span class="line">        <span class="keyword">return</span> returnVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestProxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.被代理类的对象</span></span><br><span class="line">        RealSubject real = <span class="keyword">new</span> RealSubject();</span><br><span class="line">        <span class="comment">//2.创建一个实现了InvacationHandler接口的类的对象</span></span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler();</span><br><span class="line">        <span class="comment">//3.调用blind()方法，动态的返回一个同样实现了real所在类实现的接口Subject的代理类的对象。</span></span><br><span class="line">        Object obj = handler.blind(real);</span><br><span class="line">        Subject sub = (Subject)obj;<span class="comment">//此时sub就是代理类的对象</span></span><br><span class="line">        sub.action();<span class="comment">//转到对InvacationHandler接口的实现类的invoke()方法的调用</span></span><br><span class="line">        <span class="comment">//再举一例</span></span><br><span class="line">        NikeClothFactory nike = <span class="keyword">new</span> NikeClothFactory();</span><br><span class="line">        ClothFactory proxyCloth = (ClothFactory)handler.blind(nike);<span class="comment">//proxyCloth即为代理类的对象</span></span><br><span class="line">        proxyCloth.productCloth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="1-动态代理与AOP">1.动态代理与AOP</h3><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperMan</span> <span class="keyword">implements</span> <span class="title">Human</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我是超人！我怕谁！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"I believe I can fly!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"=======方法一======="</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"=======方法二======="</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    Object obj;<span class="comment">// 被代理类对象的声明</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setObject</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        HumanUtil h = <span class="keyword">new</span> HumanUtil();</span><br><span class="line">        h.method1();</span><br><span class="line">        Object returnVal = method.invoke(obj, args);</span><br><span class="line">        h.method2();</span><br><span class="line">        <span class="keyword">return</span> returnVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyProxy</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 动态的创建一个代理类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getProxyInstance</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler();</span><br><span class="line">        handler.setObject(obj);</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(), obj</span><br><span class="line">                .getClass().getInterfaces(), handler);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAOP</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SuperMan man = <span class="keyword">new</span> SuperMan();<span class="comment">//创建一个被代理类的对象</span></span><br><span class="line">        Object obj = MyProxy.getProxyInstance(man);<span class="comment">//返回一个代理类的对象</span></span><br><span class="line">        Human hu = (Human)obj;</span><br><span class="line">        hu.info();<span class="comment">//通过代理类的对象调用重写的抽象方法</span></span><br><span class="line">        System.out.println();</span><br><span class="line">        hu.fly();</span><br><span class="line">        <span class="comment">//*********</span></span><br><span class="line">        NikeClothFactory nike = <span class="keyword">new</span> NikeClothFactory();</span><br><span class="line">        Object obj1 = MyProxy.getProxyInstance(nike);</span><br><span class="line">        ClothFactory cloth = (ClothFactory)obj1;</span><br><span class="line">        cloth.productCloth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaClass</title>
      <link href="/JavaSE12-Class.html"/>
      <url>/JavaSE12-Class.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><font style='font-size:1.2em;font-weight:bold;'>Java常用类</font></p><a id="more"></a><ul><li>String StringBuffer StringBuilder</li><li>System Date SimpleDateFormate Calendar</li><li>Math BigInteger BigDecimal</li></ul><h2 id="一-字符串">一.字符串</h2><p>String: 代表不可变的字符序列. 底层使用char[]存放. String 是final的.</p><p>StringBuffer: 代表可变序列的字符序列, 可以对字符串内容修改. 底层也是char[]存放</p><h3 id="1-String内存解析">1.String内存解析</h3><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    String str1 = <span class="string">"JavaEE"</span>;</span><br><span class="line">    String str2 = <span class="string">"JavaEE"</span>;</span><br><span class="line">    String str3 = <span class="keyword">new</span> String(<span class="string">"JavaEE"</span>);</span><br><span class="line">    String str4 = <span class="string">"JavaEE"</span> + <span class="string">"Android"</span>;</span><br><span class="line">    String str5 = <span class="string">"Android"</span>;</span><br><span class="line">    String str6 = str1 + str5;</span><br><span class="line">    str5 = str5 + <span class="string">"Handoop"</span>;</span><br><span class="line">    String str7 = str6.intern();</span><br><span class="line">    String str8 = <span class="string">"JavaEEAndroid"</span>;</span><br><span class="line">    System.out.println(str1 == str2);<span class="comment">//true</span></span><br><span class="line">    System.out.println(str1 == str3);<span class="comment">//false</span></span><br><span class="line">    System.out.println(str1.equals(str3));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">    System.out.println(str4 == str6);<span class="comment">//false</span></span><br><span class="line">    System.out.println(str4.equals(str6));<span class="comment">//true</span></span><br><span class="line">    System.out.println(str7 == str4);<span class="comment">//true</span></span><br><span class="line">    System.out.println(str4 == str8);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">    Person p1 = <span class="keyword">new</span> Person(<span class="string">"AA"</span>);</span><br><span class="line">    Person p2 = <span class="keyword">new</span> Person(<span class="string">"AA"</span>);</span><br><span class="line">    System.out.println(<span class="string">"^_^"</span>+ (p1.name == p2.name));<span class="comment">//true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/String%E5%86%85%E5%AD%98.png" alt="String内存"></p><h3 id="2-String常用方法">2.String常用方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> index)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object anObject)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String anotherString)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String s)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String s ,<span class="keyword">int</span> startpoint)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(String s)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(String s ,<span class="keyword">int</span> startpoint)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String prefix)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">endsWith</span><span class="params">(String suffix)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">regionMatches</span><span class="params">(<span class="keyword">int</span> firstStart,String other,<span class="keyword">int</span> otherStart ,<span class="keyword">int</span> length)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> startpoint)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replace</span><span class="params">(<span class="keyword">char</span> oldChar,<span class="keyword">char</span> newChar)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceAll</span><span class="params">(String oldStr,String newStr)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">trim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">concat</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String[] <span class="title">split</span><span class="params">(String regex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span>[] <span class="title">toCharArray</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(String str)</span></span></span><br></pre></td></tr></table></figure><h3 id="3-String与其他类型间的转换">3.String与其他类型间的转换</h3><ol><li>String、基本数据类型、包装类之间的转换</li></ol><ul><li>①String —&gt; 基本数据类型、包装类: 调用相应包装类的parseXxx(String str)方法</li><li>②基本数据类型、包装类 —&gt; String: 调用字符串重载的valueOf()方法</li></ul><ol start="2"><li>String与byte[]之间的转换</li></ol><ul><li>①String —&gt; byte[]: 调用字符串的getBytes()方法</li><li>②byte[] —&gt; String: 调用字符串的构造器</li></ul><ol start="3"><li>String与char[]之间的转换</li></ol><ul><li>①String —&gt; char[]: 调用字符串的toCharArray()方法</li><li>②char[] —&gt; String: 调用字符串的构造器</li></ul><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="comment">//1.String、基本数据类型、包装类</span></span><br><span class="line">    String str1 = <span class="string">"123"</span>;</span><br><span class="line">    <span class="keyword">int</span> i = Integer.parseInt(str1);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">    </span><br><span class="line">    String str2 = i + <span class="string">""</span>;</span><br><span class="line">    str2 = String.valueOf(i);</span><br><span class="line">    System.out.println(str2);</span><br><span class="line">    <span class="comment">//2.String与byte[]之间的转换</span></span><br><span class="line">    String str3 = <span class="string">"abcdefg"</span>;</span><br><span class="line">    <span class="keyword">byte</span>[] b = str.getBytes();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; b.length; j++)&#123;</span><br><span class="line">        System.out.println((<span class="keyword">char</span>)b[j]);<span class="comment">//不能正确打印出汉字</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    String str4 = <span class="keyword">new</span> String(b);</span><br><span class="line">    System.out.println(str4);</span><br><span class="line">    <span class="comment">//3.String与char[]之间的转换</span></span><br><span class="line">    String str5 = <span class="string">"love中国"</span>;</span><br><span class="line">    <span class="keyword">char</span>[] c = str5.toCharArray();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; c.length; c++)&#123;</span><br><span class="line">        System.out.println(c[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    String str6 = <span class="keyword">new</span> String(c);</span><br><span class="line">    System.out.println(str6);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="font-style-color-black-4-StringBuffer类-font"><font style='color:black;'>4.StringBuffer类</font></h3><p>StringBuffer(相当于一个容器)类有三个构造方法:</p><ol><li>StringBuffer()初始容量为16的字符串缓冲区</li><li>StringBuffer(int size)构造指定容量的字符串缓冲区</li><li>StringBuffer(String str)将内容初始化为指定字符串内容</li></ol><h3 id="5-StringBuffer常用方法">5.StringBuffer常用方法</h3><p>StringBuffer很多方法与String相同</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">StringBuffer <span class="title">append</span><span class="params">(String s)</span><span class="comment">//参数可以为:int n、Object o、char n、long n、boolean n</span></span></span><br><span class="line"><span class="function">StringBuffer <span class="title">insert</span><span class="params">(<span class="keyword">int</span> index, String str)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">reverse</span><span class="params">()</span><span class="comment">//调用此方法的StringBuffer也会反转</span></span></span><br><span class="line"><span class="function">StringBuffer <span class="title">delete</span><span class="params">(<span class="keyword">int</span> startIndex, <span class="keyword">int</span> endIndex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCharAt</span><span class="params">(<span class="keyword">int</span> n ,<span class="keyword">char</span> ch)</span></span></span><br><span class="line"><span class="function">StringBuffer <span class="title">replace</span><span class="params">( <span class="keyword">int</span> startIndex ,<span class="keyword">int</span> endIndex, String str)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure><h3 id="6-StringBuilder类">6.StringBuilder类</h3><p>也是可变的字符序列,而且方法也一样,  JDK5.0后加的, 线程不安全, 但效率高于StringBuffer</p><p><font style='color:red;font-size:1.5em;font-weight:bold;'>使用String的一个弊端</font></p><blockquote><p>string s=“a”; //创建了一个字符串<br>s=s+“b”; //实际上原来的&quot;a&quot;字符串对象已经丢弃了, 现在又产生了一个字符串s+“b”(也就是&quot;ab&quot;).如果多次执行这些改变串内容的操作, 会导致大量副本字符串对象存留在内存中, 降低效率. 如果这样的操作放到循环中, 会极大影响程序的性能.</p></blockquote><h3 id="7-String、StringBuffer、StringBuilder性能比较">7.String、StringBuffer、StringBuilder性能比较</h3><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    String text = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">long</span> startTime = <span class="number">0L</span>;</span><br><span class="line">    <span class="keyword">long</span> endTime = <span class="number">0L</span>;</span><br><span class="line">    StringBuffer buffer = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">20000</span>;i++)&#123;</span><br><span class="line">    buffer.append(String.valueOf(i));</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"StringBuffer的执行时间："</span>+(endTime-startTime));</span><br><span class="line">    </span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">20000</span>;i++)&#123;</span><br><span class="line">    builder.append(String.valueOf(i));</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"StringBuilder的执行时间："</span>+(endTime-startTime));</span><br><span class="line">    </span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">20000</span>;i++)&#123;</span><br><span class="line">    text = text + i;</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">"String的执行时间："</span>+(endTime-startTime));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="二-时间相关类">二.时间相关类</h2><h3 id="1-System类">1.System类</h3><p>currentTimeMillis(): 返回当前时间的long型值. 此long值是从1970年1月1日0点0分00秒开始到当前的毫秒数.此方法常用来计算时间差</p><p>计算世界时间的主要标准:</p><ul><li>UTC(Universal Time Coordinated)</li><li>GMT(Greenwich Mean Time)—格林威治时间</li><li>CST(Central Standard Time)—标准时间(四个国家)</li></ul><h3 id="2-Date类">2.Date类</h3><p>有两个: java.util.Date类及它的子类 java.sql.Date<br>表示特定的瞬间, 精确到毫秒</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDate</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();<span class="comment">//两个构造方法, 无参和long型参数</span></span><br><span class="line">    System.out.println(date);</span><br><span class="line">    System.out.println(System.currentTimeMillis());</span><br><span class="line">    System.out.println(date.getTime());</span><br><span class="line">    System.out.println(date.toString());</span><br><span class="line">    </span><br><span class="line">    java.sql.Date d = <span class="keyword">new</span> java.sql.Date(date.getTime());</span><br><span class="line">    System.out.println(d);<span class="comment">//格式:year-month-day</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Date类的API不易于国际化, 大部分方法被废弃了, java.text.SimpleDateFormat类是一个不与语言环境有关的方式来格式化和解析日期的具体类.</p><h3 id="3-SimpleDateFormat类">3.SimpleDateFormat类</h3><ul><li>格式化: 日期 —&gt; 文本 使用SimpleDateFormat 的format()方法</li><li>解析: 文本 —&gt; 日期 使用SimpleDateFormat的parse()方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="comment">//1.默认模式格式化</span></span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat();</span><br><span class="line">    String date = sdf.format(<span class="keyword">new</span> Date());</span><br><span class="line">    System.out.println(date);<span class="comment">//19-3-26 下午4:50</span></span><br><span class="line">    <span class="comment">//2.自定义模式格式化</span></span><br><span class="line">    SimpleDateFormat sdf1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"EEE, d MMM yyyy HH:mm:ss Z"</span>);</span><br><span class="line">    date = sdf1.format(<span class="keyword">new</span> Date());</span><br><span class="line">    System.out.println(date);<span class="comment">//星期二, 26 三月 2019 16:55:16 +0800</span></span><br><span class="line">    <span class="comment">//3.解析:</span></span><br><span class="line">    Date date1 = sdf.parse(<span class="string">"19-3-26 下午4:50"</span>);<span class="comment">//要和构造器的格式字符串对应</span></span><br><span class="line">    System.out.println(date1);</span><br><span class="line">    date1 = sdf1.parse(<span class="string">"星期二, 26 三月 2019 16:55:16 +0800"</span>);</span><br><span class="line"><span class="comment">//    date1 = sdf1.parse("19-3-26 下午4:50");//出异常</span></span><br><span class="line">    System.out.println(date1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-Calendar类">4.Calendar类</h3><p>Calendar是一个抽象基类, 主用用于完成日期字段之间相互操作的功能.</p><p>使用Calendar.getInstance()方法得到一个Calendar的实例, 一个Calendar的实例是系统时间的抽象表示</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//常用方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> field)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> field,<span class="keyword">int</span> value)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> field,<span class="keyword">int</span> amount)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Date <span class="title">getTime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setTime</span><span class="params">(Date date)</span></span></span><br></pre></td></tr></table></figure><h2 id="三-计算相关类">三.计算相关类</h2><h3 id="1-Math类">1.Math类</h3><p>java.lang.Math提供了一系列静态方法用于科学计算; 其方法的参数和返回值类型一般为double型.</p><blockquote><p>abs     绝对值<br>acos,asin,atan,cos,sin,tan  三角函数<br>sqrt     平方根<br>pow(double a,doble b)     a的b次幂<br>log    自然对数<br>exp    e为底指数<br>max(double a,double b)<br>min(double a,double b)<br>random()      返回0.0到1.0的随机数<br>long round(double a)     double型数据a转换为long型（四舍五入）<br>toDegrees(double angrad)     弧度—&gt;角度<br>toRadians(double angdeg)     角度—&gt;弧度</p></blockquote><h3 id="2-BigInteger类">2.BigInteger类</h3><p>Integer类作为int的包装类. 能存储的最大整型值为2^31−1, BigInteger类的数字范围较Integer类的数字范围要大得多, 可以支持任意精度的整数.</p><blockquote><p>构造器<br>BigInteger(String val)<br>常用方法<br>public BigInteger abs()<br>public BigInteger add(BigInteger val)<br>public BigInteger subtract(BigInteger val)<br>public BigInteger multiply(BigInteger val)<br>public BigInteger divide(BigInteger val)<br>public BigInteger remainder(BigInteger val)<br>public BigInteger pow(int exponent)<br>public BigInteger[] divideAndRemainder(BigInteger val)</p></blockquote><h3 id="3-BigDecimal类">3.BigDecimal类</h3><p>一般的Float类和Double类可以用来做科学计算或工程计算, 但在商业计算中, 要求数字精度比较高, 故用到java.math.BigDecimal类. BigDecimal类支持任何精度的定点数.</p><blockquote><p>构造器<br>public BigDecimal(double val)<br>public BigDecimal(String val)<br>常用方法<br>public BigDecimal add(BigDecimal augend)<br>public BigDecimal subtract(BigDecimal subtrahend)<br>public BigDecimal multiply(BigDecimal multiplicand)<br>public BigDecimal divide(BigDecimal divisor, int scale, int roundingMode)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Thread</title>
      <link href="/JavaSE11-Thread.html"/>
      <url>/JavaSE11-Thread.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Java多线程</strong></p><a id="more"></a><h2 id="一-基本概念">一.基本概念</h2><ol><li>程序、进程、线程</li></ol><ul><li>程序(program)可以理解为静态的代码</li><li>进程(process)可以理解为执行中的程序</li><li>线程(thread)可以理解为进程的进一步细分, 程序的一条执行路径</li></ul><ol start="2"><li>何时需要多线程</li></ol><ul><li>程序需要同时执行两个或多个任务</li><li>程序需要实现一些等待的任务时, 如: 用户输入、文件读写、网络操作顿、搜索等</li><li>需要一些后台运行的任务时</li></ul><h2 id="二-创建多线程">二.创建多线程</h2><p>通过java.lang.Thread类实现</p><h3 id="方式一-继承Thread类">方式一:继承Thread类</h3><ol><li>继承Thread类,并重写run()方法,run()方法内实现此子线程想要实现的功能</li><li>在主线程内, 创建一个子线程的对象.</li><li>调用子线程的start()方法, 启动此线程; 调用相应线程的run()方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrintNum</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//子线程要执行的代码</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= <span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PrintNum</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PrintNum p1 = <span class="keyword">new</span> PrintNum(<span class="string">"线程1"</span>);</span><br><span class="line">        PrintNum p2 = <span class="keyword">new</span> PrintNum(<span class="string">"线程2"</span>);</span><br><span class="line">        p1.setPriority(Thread.MAX_PRIORITY);<span class="comment">//10</span></span><br><span class="line">        p2.setPriority(Thread.MIN_PRIORITY);<span class="comment">//1</span></span><br><span class="line">        p1.start();<span class="comment">//start()会调用run()方法</span></span><br><span class="line">        p2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意: ①一个线程只能start()一次; ②不能用run()启动线程</p><p>Thread类的常用方法:</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Thread类的常用方法:</span></span><br><span class="line"><span class="comment"> * 1.start():启动线程并调用相应的run()方法</span></span><br><span class="line"><span class="comment"> * 2.run():子线程要执行的代码</span></span><br><span class="line"><span class="comment"> * 3.currentThread():静态方法, 调取当前线程</span></span><br><span class="line"><span class="comment"> * 4.getName():获取此线程的名字</span></span><br><span class="line"><span class="comment"> * 5.setName():设置此线程的名字</span></span><br><span class="line"><span class="comment"> * 6.yield():调用此方法的线程强制释放当前CPU的执行权</span></span><br><span class="line"><span class="comment"> * 7.join():在A线程中调用B线程的join()方法.表示当A线程执行到此方法时,停止</span></span><br><span class="line"><span class="comment"> * 执行A线程,直到B线程执行完毕,A线程再接着B.join()之后的代码执行</span></span><br><span class="line"><span class="comment"> * 8.isAlive()判断此线程是否存活</span></span><br><span class="line"><span class="comment"> * 9.sleep(long time)显示的让当前线程睡眠time毫秒</span></span><br><span class="line"><span class="comment"> * 10.线程通信有关的: wait() notify() notifyAll()//在Object类中</span></span><br><span class="line"><span class="comment"> * 设置线程的优先级MAX_PRIORITY=10;NORM_PRIORITY=5;MIN_PRIORITY=1</span></span><br><span class="line"><span class="comment"> * 改变抢占CPU资源的概率</span></span><br><span class="line"><span class="comment"> * setPriority(int newPriority)</span></span><br><span class="line"><span class="comment"> * getPriority()</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></details><p><font style='color:blue;font-size:1.5em;'>例子: 三个售票窗口售卖100张票(一共100张)</font></p><p>继承Thread类的方式实现:</p><p><font style='color:red;font-weight:bold'>注意: 此程序存在隐患(线程安全问题)</font></p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承Thread类的方式实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>) &#123;<span class="comment">//开启注释放大错误</span></span><br><span class="line"><span class="comment">//try &#123;</span></span><br><span class="line"><span class="comment">//Thread.currentThread().sleep(10);//阻塞10ms</span></span><br><span class="line"><span class="comment">//&#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//// TODO 自动生成的 catch 块</span></span><br><span class="line"><span class="comment">//e.printStackTrace();</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">"售票, 票号为:"</span>+ticket--);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWindow</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Window w1 = <span class="keyword">new</span> Window();</span><br><span class="line">        Window w2 = <span class="keyword">new</span> Window();</span><br><span class="line">        Window w3 = <span class="keyword">new</span> Window();</span><br><span class="line">        w1.setName(<span class="string">"窗口一:"</span>);</span><br><span class="line">        w2.setName(<span class="string">"窗口二:"</span>);</span><br><span class="line">        w3.setName(<span class="string">"窗口三:"</span>);</span><br><span class="line">        w1.start();</span><br><span class="line">        w2.start();</span><br><span class="line">        w3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="方式二-实现Runnable接口">方式二:实现Runnable接口</h3><ol><li>创建一个实现Runnable接口的类</li><li>实现接口的抽象run()方法</li><li>创建一个实现Runnable接口实现类的对象</li><li>将此对象作为形参传给Thread类的构造器, 创建Thread类的对象, 此对象即为一个线程</li><li>调用start()启动线程</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建一个实现Runnable接口的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="comment">//2.实现接口的抽象run()方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//子线程执行的代码</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= <span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="comment">//3.创建一个实现Runnable接口实现类的对象</span></span><br><span class="line">        SubThread s = <span class="keyword">new</span> SubThread();</span><br><span class="line">        <span class="comment">//想要启动一个线程必须调用start()方法</span></span><br><span class="line">        <span class="comment">//4.将此对象作为形参传给Thread类的构造器, 创建Thread类的对象, 此对象即为一个线程</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(s);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(s);</span><br><span class="line">        <span class="comment">//5.调用start()启动线程</span></span><br><span class="line">        t1.setName(<span class="string">"线程1"</span>);</span><br><span class="line">        t2.setName(<span class="string">"线程2"</span>);</span><br><span class="line">        t1.start();<span class="comment">//启动线程: 执行Thread对象生成时构造器形参的run()方法.</span></span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>两种方式的对比: 联系：class Thread implements Runnable, 两种方式实际上都与Runnable接口发生了关系</p><h3 id="哪个比较好">哪个比较好?</h3><ul><li>实现的方式(方式二)较好:</li><li>①解决了单继承的局限性</li><li><font style='color:red;font-weight:bold;'>②如果多个线程有共享数据的话, 建议使用实现方式, 同时, 共享数据所在的类可以作为Runnable接口的实现类.</font></li></ul><p>实现Runnable接口的方式实现(上述售票例题):</p><p><font style='color:red;font-weight:bold'>注意: 此程序存在隐患(线程安全问题)</font></p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有共享数据的问题(一共100张票)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window1</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>) &#123;<span class="comment">//开启注释放大错误</span></span><br><span class="line"><span class="comment">//try &#123;</span></span><br><span class="line"><span class="comment">//Thread.currentThread().sleep(10);//阻塞10ms</span></span><br><span class="line"><span class="comment">//&#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//// TODO 自动生成的 catch 块</span></span><br><span class="line"><span class="comment">//e.printStackTrace();</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">"售票, 票号为:"</span>+ticket--);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Window1 w = <span class="keyword">new</span> Window1();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        </span><br><span class="line">        t1.setName(<span class="string">"窗口1"</span>);</span><br><span class="line">        t2.setName(<span class="string">"窗口2"</span>);</span><br><span class="line">        t3.setName(<span class="string">"窗口3"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="三-Java的多线程">三.Java的多线程</h2><h3 id="1-多线程的优点">1.多线程的优点</h3><ul><li>提高应用程序的响应</li><li>提高计算机系统的CPU利用率</li><li>改善程序接口</li></ul><h3 id="2-Java线程的分类">2.Java线程的分类</h3><ul><li>守护线程VS用户线程</li><li>若JVM中都是守护线程, 当前JVM将退出</li></ul><h3 id="3-线程的生命周期">3.线程的生命周期</h3><p>新建、就绪、运行、阻塞、死亡</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="线程的生命周期"></p><h2 id="四-线程同步">四.线程同步</h2><p>上述售票的例子:</p><p>程序存在线程安全问题: 打印车票时, 会出现重票、错票</p><ol><li>线程安全问题存在的原因?</li></ol><p>由于一个线程在操作共享数据的过程中, 未执行完的情况下, 另外一个线程参与进来, 导致共享数据存在了安全问题.</p><ol start="2"><li>如何解决该问题?</li></ol><p>必须让一个线程操作共享数据完毕以后, 其他线程才有机会进入参与共享数据的操作.</p><ol start="3"><li>Java如何实现线程的安全: 线程的同步机制</li></ol><h3 id="方式一-同步代码块">方式一: 同步代码块:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(同步监视器)&#123;</span><br><span class="line">    <span class="comment">//操作共享数据的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>①同步监视器: 俗称锁, 任何一个类的对象都可以才充当锁. 要想保证线程的安全, 必须要求所有的线程共用同一把锁!<br>②共享数据: 多个线程需要共同操作的变量. 明确哪部分是操作共享数据的代码.</p><p>③使用实现Runnable接口的方式创建多线程的话, 同步代码块中的锁, 可以考虑是this. 如果使用继承Thread类的方式, <strong>慎用this!</strong></p><p>修改原来的售票代码:</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有共享数据的问题(一共100张票)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window1</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">    Object obj = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;<span class="comment">//同步锁可以由任何对象充当, 但是同步的线程要共用一把锁</span></span><br><span class="line">                <span class="comment">//this表示当前对象, 本程序中为w对象, this可以改为obj</span></span><br><span class="line">                <span class="comment">//具体问题具体分析, 有时候不能用this ,用继承Thread方式实现的多线程不能用this</span></span><br><span class="line">                <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"售票, 票号为:"</span>+ticket--);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Window1 w = <span class="keyword">new</span> Window1();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(w);</span><br><span class="line">        t1.setName(<span class="string">"窗口1"</span>);</span><br><span class="line">        t2.setName(<span class="string">"窗口2"</span>);</span><br><span class="line">        t3.setName(<span class="string">"窗口3"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="方式二-同步方法">方式二: 同步方法:</h3><ul><li>将需要共享的数据的操作放到一个方法里, 并给该方法添加 synchronized 修饰</li><li>同步方法也有锁, 即为当前对象 this</li><li><font style='color:red;font-weight:bold;'>如果使用在继承的方式实现多线程的话, 慎用同步方法!因为它们的this锁不一样</font></li></ul><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个类是用实现Runnable接口实现的多线程</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"售票, 票号为:"</span>+ticket--);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="懒汉式单例模式的线程安全">懒汉式单例模式的线程安全</h3><ul><li>使用线程同步机制解决问题</li><li>对于一般的方法内, 使用同步代码块的方式, 可以考虑用this当锁</li><li>对于静态方法而言, 使用当前类本身充当锁</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//懒汉式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;<span class="comment">//提高效率</span></span><br><span class="line">            <span class="keyword">synchronized</span>(Singleton.class)&#123;<span class="comment">//后面会说, Singleton.class对象</span></span><br><span class="line">            <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font style='color:red;font-size:1.5em;'>线程同步的弊端: 由于同一时间只能有一个线程访问共享数据, 效率变低了</font></p><h3 id="何时释放锁">何时释放锁?</h3><ol><li>当前线程的同步方法、同步代码块执行结束时</li><li>当前线程的同步方法、同步代码块中出现了未处理的Error或Exception, 导致异常结束</li><li>当前线程的同步方法、同步代码块中执行了线程对象的wait()方法, 当前线程暂停并释放锁</li></ol><h3 id="线程的死锁">线程的死锁:</h3><p>不同的线程分别占用对方需要的同步资源不放弃, 都在等待对方放弃自己需要的同步资源, 就形成了线程的死锁.<br>死锁是我们在使用同步时, 需要避免的问题!</p><h3 id="线程的通信">线程的通信</h3><p>涉及到三个方法 wait() notify() notifyAll() 在java.lang.Object类中</p><ul><li>wait(): 令当前线程挂起, 放弃CPU、同步资源…</li><li>notify(): 唤醒正在排队等待同步资源的线程中优先级最高的线程</li><li>notifyAll(): 唤醒正在排队等待同步资源的所有线程</li></ul><p>注意: <font style='color:red;font-weight:bold;'>这三个方法只能在同步方法或同步代码块中使用, 否则会报异常</font></p><p>例, 用两个线程交替打印1-100:</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrintNum</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">                notify();</span><br><span class="line">                <span class="keyword">if</span>(num&lt;<span class="number">100</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + num);</span><br><span class="line">                    num++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCommunication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PrintNum p = <span class="keyword">new</span> PrintNum();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(p);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(p);</span><br><span class="line">        t1.setName(<span class="string">"甲"</span>);</span><br><span class="line">        t2.setName(<span class="string">"乙"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h3 id="经典例题-生产者-消费者问题">经典例题: 生产者/消费者问题</h3><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 生产者(Productor)将产品交给店员(Clerk)，而消费者(Customer)从店员处取走产品，</span></span><br><span class="line"><span class="comment"> * 店员一次只能持有固定数量的产品(比如:20），如果生产者试图生产更多的产品，店员会叫</span></span><br><span class="line"><span class="comment"> * 生产者停一下，如果店中有空位放产品了再通知生产者继续生产；如果店中没有产品了，店员</span></span><br><span class="line"><span class="comment"> * 会告诉消费者等一下，如果店中有产品了再通知消费者来取走产品。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    Clerk clerk;</span><br><span class="line">    Producer(Clerk clerk) &#123;</span><br><span class="line">        <span class="keyword">this</span>.clerk = clerk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"生产者开始生产产品"</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.currentThread().sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            clerk.addProduct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    Clerk clerk;</span><br><span class="line">    Consumer(Clerk clerk) &#123;</span><br><span class="line">        <span class="keyword">this</span>.clerk = clerk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"消费者开始消费产品"</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.currentThread().sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            clerk.subProduct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clerk</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> product;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">addProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (product &gt;= <span class="number">20</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            product++;</span><br><span class="line">            notifyAll();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"生产了第"</span> + <span class="keyword">this</span>.product + <span class="string">"个产品"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">subProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (product &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">"消费了第"</span> + <span class="keyword">this</span>.product + <span class="string">"个产品"</span>);</span><br><span class="line">            product--;</span><br><span class="line">            notifyAll();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Clerk clerk = <span class="keyword">new</span> Clerk();</span><br><span class="line">        Producer p1 = <span class="keyword">new</span> Producer(clerk);</span><br><span class="line">        Consumer c1 = <span class="keyword">new</span> Consumer(clerk);</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(c1);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(p1);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(p1);</span><br><span class="line">        t1.setName(<span class="string">"消费者1"</span>);</span><br><span class="line">        t2.setName(<span class="string">"生产者1"</span>);</span><br><span class="line">        t3.setName(<span class="string">"生产者2"</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象总结</title>
      <link href="/JavaSE5OOP.html"/>
      <url>/JavaSE5OOP.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>面向对象的三条主线:<br>1.类及类的成分<br>2.面向对象的三大特性<br>3.其他的关键字: this super import package abstract static final interface等</p><a id="more"></a><h2 id="一-专注类的设计">一.专注类的设计</h2><p>类从代码的角度: 并列关系! 从执行、设计的角度: 关联关系、继承关系、聚合关系</p><h3 id="1-类的成分">1.类的成分</h3><p>属性 方法 构造器 代码块 内部类</p><ol><li><h3 id="属性">属性:</h3></li></ol><ul><li>①变量的分类: 成员变量(属性 Field) vs 局部变量(方法的形参、方法内部、代码块内部)<br>基本数据类型(8种, 不同的数据类型对应不同的默认初始化值) vs 引用数据类型(数组、类、接口默认初始化值为null)</li><li>②属性的声明格式: 修饰符  数据类型  变量名 = 初始化值; //java是强数据类型的语言</li><li>③对属性的赋值的操作: A.默认初始化 B.显式的初始化 C.代码块的初始化 D.构造器的初始化 E.调用方法、属性进行赋值</li></ul><ol start="2"><li><h3 id="方法">方法:</h3></li></ol><ul><li>①格式: 修饰符 (其它的关键字: static/final/abstract)返回值类型 方法名 (形参列表){//方法体 }</li><li>②方法的重载(overload) vs 方法的重写(override overwrite)</li><li>③方法的参数传递机制: 值传递</li></ul><ol start="3"><li><h3 id="构造器">构造器:</h3></li></ol><ul><li>①构造器的作用: A.创建类的对象 B.初始化对象的成员变量</li><li>②构造器也是可以重载的.</li></ul><ol start="4"><li><h3 id="代码块">代码块:</h3></li></ol><ul><li>主要作用: 用来初始化类的成员变量</li><li>分类: 静态的代码块 vs 非静态的代码块</li></ul><ol start="5"><li><h3 id="内部类">内部类:</h3></li></ol><ul><li>①分类: 成员内部类(static的成员 vs 非static的成员) vs 局部内部类(方法内部声明的类)</li><li>②掌握: A.如何创建成员内部类的对象 B.如何区分调用外部类、内部类的变量(尤其是变量重名时) C.局部内部类的使用</li></ul><h3 id="2-类的初始化">2.类的初始化</h3><ol><li>如何创建类的对象. 如: Person p = new Person(); Date d = new Date();</li><li>内存解析:</li></ol><ul><li>栈: 局部变量、对象的引用名、数组的引用名</li><li>堆: new 出来的“东西”</li><li>方法区: (字符串常量池)</li><li>静态域: 存放类中静态的变量</li><li>理解创建的对象在内存中加载的过程</li></ul><h2 id="二-面向对象的三大特性">二.面向对象的三大特性</h2><h3 id="1-封装性">1.封装性</h3><ul><li>① 通过私有化类的成员变量, 通过公共的getter和setter方法来调用和修改</li><li>② 还可以对类的其他结构进行“封装”</li><li>③ 权限修饰符: public protected 缺省 private</li></ul><h3 id="2-继承性">2.继承性</h3><p>通过让一个类A继承另一个类B, 就可以获取类B中的结构(主要的: 属性、方法、构造器). 子类: 类A; 父类: 类B</p><p>java中的类的继承性: 单继承的</p><h3 id="3-多态性">3.多态性</h3><ul><li>①体现: 方法的重载与重写; 子类对象的多态性 Person p = new Student();</li><li>②子类对象多态性的使用: 虚拟方法调用.</li><li>③向上转型 向下转型 Student s = (Student)p; //建议在向下转型之前: if(p instanceof Student)避免出现ClassCastException的异常</li></ul><h2 id="三-其他关键字">三.其他关键字</h2><ol><li>this: 修饰属性、方法、构造器. 表示: 当前对象或当前正在创建的对象</li><li>super: 修饰属性、方法、构造器. 显式的调用父类的相应的结构, 尤其是子父类有重名的方法、属性</li><li>static: 修饰属性、方法、代码块、内部类. 随着类的加载而加载!</li><li>final: 修饰类、属性、方法. 表示“最终的”</li><li>abstract: 修饰类、方法</li><li>interface: 表示是一个接口, (接口是与类并列的一个结构). 类与接口之间同时“implements”发生关系.</li><li>package import …</li></ol><p><font style='color:red;font-weight:bold;'>abstract不能修饰属性、构造器、不能与final static private共用.</font></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象3.2</title>
      <link href="/JavaSE5-2.html"/>
      <url>/JavaSE5-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>abstract<br>interface<br>内部类</p><a id="more"></a><h2 id="一-abstract">一.abstract</h2><p>abstract: 抽象的, 可以用来修饰类、方法</p><ol><li>abstract修饰类: 抽象类</li></ol><ul><li>不可被实例化</li><li>抽象类有构造器 (凡是类都有构造器)</li><li>抽象方法所在的类, 一定是抽象类.</li><li>抽象类中可以没有抽象方法.</li></ul><ol start="2"><li>abstract修饰方法: 抽象方法</li></ol><ul><li>格式: 没有方法体和{}.如: public abstract void eat();</li><li>抽象方法只保留方法的功能, 而具体的执行, 交给继承抽象类的子类, 由子类重写此抽象方法.</li><li>若子类继承抽象类, 并重写了所有的抽象方法, 则此类是一个&quot;实体类&quot;, 即可以实例化</li><li>若子类继承抽象类, 没有重写所有的抽象方法, 意味着此类中仍有抽象方法, 则此类必须声明为抽象的!</li></ul><p><font style="color:red;font-weight:bold;">abstract不能用来修饰属性、构造器、private、final、static</font></p><h3 id="A-模板方法设计模式">A.模板方法设计模式</h3><p>功能的内部一部分实现是确定的, 一部分实现是不确定的, 可以将不确定的暴露出去让子类去实现它</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模板方法设计模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTemplate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SubTemplate().spendTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line">    <span class="comment">//此部分功能不确定: 具体要执行什么代码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//此部分功能确定: 计算执行code()方法的时间</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">spendTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">this</span>.code();</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"花费的时间为："</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubTemplate</span> <span class="keyword">extends</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>;i &lt;= <span class="number">10000</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>;j &lt;= Math.sqrt(i);j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i % j == <span class="number">0</span>)&#123;</span><br><span class="line">                    flag = <span class="keyword">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">            &#125;</span><br><span class="line">            flag = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="二-interface">二.interface</h2><p>接口(interface)是与类并行的一个概念</p><ol><li>接口可以看做是一个特殊的抽象类, 是<font style="color:red;font-weight:bold;">常量与抽象方法的一个集合</font>, 不能包含变量、一般的方法.</li></ol><ul><li><font style="color:red;font-weight:bold;">常量默认有 public static final修饰, 方法默认有 public abstract修饰</font></li></ul><ol start="2"><li>接口是没有构造器的.</li><li>接口定义的就是一种功能. 此功能可以被类所实现(implements).</li></ol><ul><li>比如: class CC extends DD implements AA</li></ul><ol start="4"><li>实现接口的类, 必须要重写其中的所有的抽象方法, 方可实例化. 若没有重写所有的抽象方法, 则此类仍为一个抽象类</li><li>一个类可以实现多个接口.----java 中的类的继承是单继承的</li><li>接口与接口之间也是继承的关系, 而且可以实现多继承</li><li>接口与具体的实现类之间也存在多态性</li><li>面向接口编程的思想:</li></ol><h3 id="A-工厂方法的设计模式">A.工厂方法的设计模式</h3><p>定义一个用户创建对象的接口, 让子类决定实例化哪一个类. 工厂方法使一个类的实例化延迟到其子类.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口的应用: 工厂方法的设计模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFactoryMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IWorkFactory i = <span class="keyword">new</span> StudentWorkFactory();</span><br><span class="line">        i.getWork().doWork();</span><br><span class="line">        IWorkFactory i1 = <span class="keyword">new</span> TeacherWorkFactory();</span><br><span class="line">        i1.getWork().doWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//工厂接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IWorkFactory</span></span>&#123;</span><br><span class="line">    <span class="function">Work <span class="title">getWork</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建学生工作的工厂</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentWorkFactory</span> <span class="keyword">implements</span> <span class="title">IWorkFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Work <span class="title">getWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StudentWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建老师工作的工厂</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeacherWorkFactory</span> <span class="keyword">implements</span> <span class="title">IWorkFactory</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Work <span class="title">getWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TeacherWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Work</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentWork</span> <span class="keyword">implements</span> <span class="title">Work</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"学生写作业"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TeacherWork</span> <span class="keyword">implements</span> <span class="title">Work</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"老师批改作业"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-代理模式">B.代理模式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口的应用: 代理模式(静态代理), 后面会有动态代理</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestProxy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Object obj = <span class="keyword">new</span> ProxyObject();</span><br><span class="line">        obj.action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Object</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">action</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyObject</span> <span class="keyword">implements</span> <span class="title">Object</span></span>&#123;</span><br><span class="line">    Object obj;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyObject</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"代理类创建成功"</span>);</span><br><span class="line">        obj = <span class="keyword">new</span> ObjctImpl();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"代理类开始执行"</span>);</span><br><span class="line">        obj.action();</span><br><span class="line">        System.out.println(<span class="string">"代理类执行结束"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObjctImpl</span> <span class="keyword">implements</span> <span class="title">Object</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"=====被代理类开始执行======"</span>);</span><br><span class="line">        System.out.println(<span class="string">"=====具体的操作======"</span>);</span><br><span class="line">        System.out.println(<span class="string">"=====被代理类执行完毕======"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font style="color:red;font-weight:bold;">了解就好, 你可以将这两种设计模式当成算法记下来</font></p><h2 id="三-内部类">三.内部类</h2><p>类的第5个成员: 内部类(inner class) 例: Thread类内的State枚举类</p><ol><li>相当于说, 我们可以在类的内部再定义类. 外面的类: 外部类. 定义在类内的类: 内部类</li><li>内部类的分类: <strong>成员内部类</strong>(声明在类内部且方法外的) vs <strong>局部内部类</strong>(声明在类的方法里)</li><li>成员内部类:</li></ol><ul><li>是外部类的一个成员: ①可以有修饰符(4个) ②static final ③可以调用外部类的属性、方法</li><li>具体类的特点: ①abstract ②还可以在其内部定义属性、方法、构造器</li></ul><ol start="4"><li>局部内部类(知道有就好)</li><li>关于内部类, 掌握三点:</li></ol><ul><li>①如何创建成员内部类的对象(如: 创建Bird类和Dog类的对象)</li><li>②如何区分调用外部类、内部类的变量(尤其是变量重名时)</li><li>③局部内部类的使用</li></ul><h3 id="A-成员内部类">A.成员内部类:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInnerClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建静态内部类的对象: 可以直接通过外部类调用静态内部类的构造器</span></span><br><span class="line">        Person.Dog d = <span class="keyword">new</span> Person.Dog();<span class="comment">//区别Person.new Dog();</span></span><br><span class="line">        <span class="comment">//Person.Bird b = new Person.Bird();</span></span><br><span class="line">        <span class="comment">//创建非静态的内部类的对象: 必须先创建外部类的对象, 通过外部类的对象调用内部类的构造器</span></span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        Person.Bird b = p.new Bird();</span><br><span class="line">        b.info();</span><br><span class="line">        b.setName(<span class="string">"杜鹃"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    String name = <span class="string">"小明"</span>;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//成员内部类(非static的)</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Bird</span></span>&#123;</span><br><span class="line">        String name = <span class="string">"黄鹂"</span>;</span><br><span class="line">        <span class="keyword">int</span> id;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Bird</span><span class="params">()</span></span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;<span class="comment">//假设传过来的参数为"杜鹃"</span></span><br><span class="line">            System.out.println(name);<span class="comment">//杜鹃</span></span><br><span class="line">            System.out.println(<span class="keyword">this</span>.name);<span class="comment">//黄鹂</span></span><br><span class="line">            System.out.println(Person.<span class="keyword">this</span>.name);<span class="comment">//小明</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>&#123;</span><br><span class="line">            show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//成员内部类(静态内部类)</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"show()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="B-局部内部类">B.局部内部类:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OuterClass</span></span>&#123;</span><br><span class="line">    <span class="comment">//局部内部类</span></span><br><span class="line">    <span class="comment">//如下的使用方式较少</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">InnnerClass</span></span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//常常使用一个方法, 使其返回值为某个类或接口的对象. 而这个类或接口在方法内部创建</span></span><br><span class="line">    <span class="comment">//使用方式一</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Comparable <span class="title">getComparable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.创建一个实现Comparable接口的类:局部内部类</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">MyComparable</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(java.lang.Object o)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.返回一个实现类的对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyComparable();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//使用方式二</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Comparable <span class="title">getComparable1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//返回一个实现Comparable接口的匿名内部类的对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Comparable()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(java.lang.Object o)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象3.1</title>
      <link href="/JavaSE5-1.html"/>
      <url>/JavaSE5-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>static关键字<br>main()方法<br>代码块<br>final</p><a id="more"></a><h2 id="一-static">一.static</h2><p>static: 静态的, 可以用来修饰<font style='color:red;font-weight:bold;'>属性、方法、*代码块(或初始化块)、*内部类</font></p><h3 id="A-static修饰属性-类变量">A.static修饰属性(类变量):</h3><ol><li>由类创建的所有的对象，都共用这一个属性</li><li>当其中一个对象对此属性进行修改, 会导致其他对象对此属性调用时也会更改. vs 实例变量(非static修饰的属性, 各个对象各自拥有一套副本)</li><li>类变量随着类的加载而加载的, 而且独一份</li><li>静态的变量可以直接通过“类.类变量”的形式来调用</li><li>类变量的加载是要早于对象. 所以当有对象以后, 可以“对象.类变量”使用. 但是&quot;类.实例变量&quot;是不行的.</li><li>类变量存在于内存的静态域中.</li></ol><h3 id="B-static修饰方法-类方法">B.static修饰方法(类方法):</h3><ol><li>随着类的加载而加载, 在内存中也是独一份</li><li>可以直接通过“类.类方法”的方式调用</li><li><strong>方法内部可以调用静态的属性或静态的方法, 而不能调用非静态的属性或方法</strong>. 反之, 非静态的方法是可以调用静态的属性或静态的方法. <font style='color:red;font-weight:bold;'>静态的方法内是不可以有this或super关键字的!</font></li></ol><p><font style='color:red;font-weight:bold;'>注意: 静态的结构(static的属性、方法、代码块、内部类)的生命周期要早于非静态的结构，同时被回收也要晚于非静态的结构</font></p><p>示例, 静态属性及内存状态:</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Test&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span></span>&#123;</span><br><span class="line">        SportsMan s1 = <span class="keyword">new</span> SportsMan(<span class="string">"金龙"</span>,<span class="number">23</span>);</span><br><span class="line">        SportsMan s2 = <span class="keyword">new</span> SportsMan(<span class="string">"银龙"</span>,<span class="number">20</span>);</span><br><span class="line">        s1.setName(<span class="string">"花龙"</span>);</span><br><span class="line">        s1.nation = <span class="string">"China"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SportsMan</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String nation;</span><br><span class="line">    SportsMan()&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    SportsMan(String name,<span class="keyword">int</span> age)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/static.png" alt="static"></p><h3 id="C-单例模式">C.单例模式</h3><p>23种设计模式</p><ul><li>单例模式(Singleton): 即<font style='color:red;font-weight:bold;'>类只能创建一个对象</font>, Runtime类就是一个单例模式的应用</li><li>解决的问题: 如何只让设计的类只能创建一个对象</li><li>如何实现: 饿汉式  &amp;  懒汉式</li></ul><ol><li>私有化构造器</li><li>在类内部创建类的对象, 同时设置为private的, 通过公共的方法来调用, 体现封装性</li><li>一个public static的方法, 获得该(单例)对象</li><li>要求该对象也为static的</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//饿汉式1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span>&#123;</span><br><span class="line">    <span class="comment">//1.私有化构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Bank</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">//2.创建类的对象，同时设置为private的，通过公共的来调用，体现封装性</span></span><br><span class="line">    <span class="comment">//4.要求此对象也为static的</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Bank instance = <span class="keyword">new</span> Bank();</span><br><span class="line">    <span class="comment">//3.此公共的方法，必须为static </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//饿汉式2</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span>&#123;</span><br><span class="line">    <span class="comment">//1.私有化构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Bank</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">//2.创建类的对象，同时设置为private的，通过公共的来调用，体现封装性</span></span><br><span class="line">    <span class="comment">//4.要求此对象也为static的</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Bank instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        instance  = <span class="keyword">new</span> Bank();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.此公共的方法，必须为static </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//懒汉式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Bank</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Bank instance = <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;<span class="comment">//可能存在线程安全问题的!</span></span><br><span class="line">            instance = <span class="keyword">new</span> Bank();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二-main">二.main()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">     <span class="comment">//方法体     </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>main()是一个方法, 是主方法, 为程序的入口</li><li>权限修饰符: public protected 缺省 private —面向对象的封装性</li><li>对于方法来讲: static final abstract 可修饰</li><li>方法的返回值: void / 具体的返回值类型(基本的数据类型 &amp; 引用数据类型), 方法内部一定要有return</li><li>方法名: 命名的规则: xxxYyyZzz. 给方法命名时, 要见名知意</li><li>形参列表: 同一个方法名不同的形参列表的诸多个方法间构成重载. 形参 &amp; 实参—方法的参数传递机制: 值传递</li><li>抛出异常列表</li><li>方法体: 方法定义的是一种功能, 具体的实现由方法体操作.</li></ol><h2 id="三-代码块">三.代码块</h2><ul><li>代码块: 是类的第4个成员, 由一对大括号括起来</li><li>作用: 用来初始化类的属性</li><li>分类: 只能用static来修饰.</li></ul><h3 id="A-静态代码块">A.静态代码块</h3><ol><li>里面可以有输出语句</li><li>随着类的加载而加载，而且只被加载一次</li><li>多个静态代码块之间按照顺序结构执行</li><li>静态代码块的执行要早于非静态代码块的执行.</li><li>静态的代码块中只能执行静态的结构(类属性, 类方法)</li></ol><h3 id="B-非静态代码块">B.非静态代码块</h3><ol><li>可以对类的属性(静态的 &amp; 非静态的)进行初始化操作, 同时也可以调用本类声明的方法(静态的 &amp; 非静态的)</li><li>里面可以有输出语句</li><li>一个类中可以有多个非静态的代码块, 多个代码块之间按照顺序结构执行</li><li>每创建一个类的对象, 非静态代码块就加载一次.</li><li>非静态代码块的执行要早于构造器</li></ol><p><font style='color:red;font-weight:bold;'>关于属性赋值的操作:</font></p><p>①默认的初始化<br>②显式的初始化或代码块初始化(此处两个结构按照顺序执行)<br>③构造器中;<br>—————————以上是对象的属性初始化的过程—————————————<br>④通过方法对对象的相应属性进行修改</p><h2 id="四-final">四.final</h2><p>final:最终的, 可以用来修饰类、属性、方法</p><ol><li>final修饰类: 这个类就<font style='color:red;font-weight:bold;'>不能被继承.</font> 如: String类、StringBuffer类、System类</li><li>final修饰方法: <font style='color:red;font-weight:bold;'>不能被重写</font>. 如: Object类的getClass()</li><li>final修饰属性: 此属性就是一个常量, 一旦初始化后, <font style='color:red;font-weight:bold;'>不可再被赋值</font>. 习惯上, 常量用大写字符表示.<br>此常量在哪里赋值: ①此常量不能使用默认初始化 ②可以显式的赋值、代码块、构造器.<br>变量用static final修饰时: 全局常量. 比如: Math 类的PI</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多态性</title>
      <link href="/JavaSE4-2.html"/>
      <url>/JavaSE4-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>面向对象的特征三: 多态性<br>Object类<br>包装类</p><a id="more"></a><h2 id="一-多态性">一.多态性</h2><ol><li>多态性的表现: ①方法的重载与重写 ②子类对象的多态性</li><li>使用的前提: ①要有继承关系 ②要有方法的重写</li><li>格式:</li></ol><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"人吃饭"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"人走路"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">entertainment</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"男人娱乐"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Woman</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shopping</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"女人购物"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Man();<span class="comment">//向上转型</span></span><br><span class="line"><span class="comment">//虚拟方法调用：通过父类的引用指向子类的对象实体，当调用方法时，实际执行的是子类重写父类的方法</span></span><br><span class="line">p1.eat();</span><br><span class="line">p1.walk();</span><br><span class="line"><span class="comment">//p1.entertainment();//不能调用, Man类里没有这个函数</span></span><br></pre></td></tr></table></figure><ol start="4"><li>编译时, 认为p是Person类型的, 故只能执行Person里才有的结构, 即Man里特有的结构不能够调用<br>子类对象的多态性, 并不使用于属性.</li><li>关于向下转型:<br>①向下转型,使用强转符: ()<br>②为了保证不报ClassCastException, 最好在向下转型前, 进行判断: instanceof</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若a是A类的实例, 那么a也一定是A类的父类的实例。</span></span><br><span class="line"><span class="keyword">if</span> (p1 <span class="keyword">instanceof</span> Woman) &#123;</span><br><span class="line">    System.out.println(<span class="string">"hello!"</span>);</span><br><span class="line">    Woman w1 = (Woman) p1;</span><br><span class="line">    w1.shopping();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (p1 <span class="keyword">instanceof</span> Man) &#123;</span><br><span class="line">    Man m1 = (Man) p1;</span><br><span class="line">    m1.entertainment();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二-Object类">二.Object类</h2><ol><li><p>java.lang.Object 类, 是所有类的根父类!</p></li><li><p>Object类仅有一个空参的构造器  public Object(){  }</p><p>关于方法:</p></li></ol><h3 id="①-equals-Object-obj">① equals(Object obj)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>A.基本数据类型: 根据基本数据类型的值判断是否相等. 相等返回true, 反之返回false<br>  注意: 两端数据类型可以不同, 在不同的情况下, 也可以返回true.<br>B.引用数据类型: 比较引用类型变量的地址值是否相等.<br>  而我们希望比较的两个对象的属性值都相同的情况下返回true的话, 要<font style='color:red;font-weight:bold;'>重写Object类的equals(Object obj)方法</font><br>  像String类 File类 Date类…重写了Object类的equals()方法, 比较是两个对象的&quot;实体内容&quot;是否完全相同</p><h3 id="②-toString">② toString()</h3><ol><li>当我们输出一个对象的引用时, 会默认调用toString()方法.</li><li>当我们没有重写Object类的toString()方法时, 打印的就是对象所在的类, 以及对象实体在堆空间的位置</li><li>而我们一般需要重写Object类的toString()方法, 将此对象的各个属性值返回.</li><li>像String类、Date、File类、包装类都重写了toString()方法.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Object类的toString()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> getClass().getName() + <span class="string">"@"</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="String的内存结构">String的内存结构:</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/String.png" alt="String"></p><h2 id="三-包装类">三.包装类</h2><p>Wrapper Class, 包装类均位于java.lang包下</p><p>基本数据类型由于不是类, 不能够使用Java类库里提供的大量的方法. 所以在设计上, 我们让每一个基本数据类型都对应一个类, 同时数据存储的范围还不变. 此时, 相当于基本数据类型就具有了类的特点. 这些类即为包装(wrapper 或封装类)</p><ul><li>boolean ==&gt; Boolean</li><li>byte  ==&gt; Byte</li><li>short   ==&gt; Short</li><li>int     ==&gt; Integer</li><li>long  ==&gt; Long</li><li>char  ==&gt; Character</li><li>float  ==&gt; Float</li><li>double ==&gt; Double</li></ul><p>需要掌握的:<br><font style='color:red;font-weight:bold;'>基本数据类型、包装类、String类之间的转换!</font></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E5%8C%85%E8%A3%85%E7%B1%BB%E8%BD%AC%E6%8D%A2.png" alt="包装类转换"></p><p>简易理解:</p><ol><li>基本数据类型与对应的包装类有自动装箱、自动拆箱 (JDK5.0之后)</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如下:</span></span><br><span class="line"><span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">Integer i1 = i;<span class="comment">//自动装箱</span></span><br><span class="line"><span class="keyword">int</span> j = i1;<span class="comment">//自动拆箱</span></span><br></pre></td></tr></table></figure><ol start="2"><li>基本数据类型、包装类----&gt;String类: 调用String类的重载的<font style='color:red;font-weight:bold;'>valueOf(Xxx xx);</font></li><li>String类----&gt;基本数据类型、包装类: 调用相应的包装的<font style='color:red;font-weight:bold;'>parseXxx(String str);</font></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意:</span></span><br><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line"><span class="keyword">int</span> i = (<span class="keyword">int</span>)str;<span class="comment">//是错误的转换法.</span></span><br></pre></td></tr></table></figure><ol start="4"><li>特别的: <font style='color:red;font-weight:bold;'>Boolean的默认初始化值为null, 而boolean的默认初始化值为false;</font></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Boolean b = <span class="keyword">new</span> Boolean(<span class="string">"true"</span>);<span class="comment">//除了这样传参之外, 其他传参均为false</span></span><br><span class="line"><span class="comment">//不会报java.lang.NumberFormatException</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>继承性</title>
      <link href="/JavaSE4-1.html"/>
      <url>/JavaSE4-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>面向对象特征二:继承性<br>方法的<font style='color:red;font-weight:bold;'>重写</font><br>super关键字<br>子类对象的实例化过程</p><a id="more"></a><h2 id="一-继承性">一.继承性</h2><p>1.为什么要有继承性:<br>  有一些东西拥有某些公共的特性, 将他们相同的部分抽取出来放在一起, <font style='color:red;font-weight:bold;'>方便代码的复用与修改</font><br>2.通过&quot;<font style='color:red;font-weight:bold;'>class A extends B</font>&quot;类实现类的继承:<br>  子类: A; 父类(或基类SuperClass): B<br>3.子类继承父类以后, 父类中声明的属性、方法, 子类就可以获取到.<br>  明确: 当父类中有私有的属性或方法时, 子类同样可以获取得到, 只是由于封装性的设计, 使得<font style='color:red;font-weight:bold;'>子类不可以直接<br>调用</font>罢了.<br>  子类除了通过继承, 获取父类的结构之外, 还可以定义自己的特有的成分.<br>extends:子类是对父类功能的“扩展”, 明确子类不是父类的子集.<br>4.Java中类的继承性<font style='color:red;font-weight:bold;'>只支持单继承</font>: 一个类只能继承一个父类. 反之, 一个父类可以有多个子类.<br>5.子父类是相对的概念.</p><h2 id="二-orverwrite-or-override">二.orverwrite or override</h2><h3 id="font-style-color-red-font-weight-bold-方法的重载与重写的区别-font"><font style='color:red;font-weight:bold;'>方法的重载与重写的区别?</font></h3><p><strong>重载</strong>: “两同一不同”: 同一个类, 同一个方法名, 不同的参数列表. 注: 方法的重载与方法的返回值无关!<br>构造器也是可以重载的<br><strong>重写</strong>: (前提: 在继承的基础之上, 子类在获取了父类的结构以后, 可以对父类中同名的方法进行“重构”)</p><ul><li>方法的返回值, 方法名, 形参列表形同;</li><li><font style='color:red;font-weight:bold;'>权限修饰符不小于父类的同名方法;</font></li><li><font style='color:red;font-weight:bold;'>子类方法的异常类型不大于父类的;</font></li><li>两个方法要同为static或同为非static.</li></ul><h2 id="三-super">三.super</h2><p>1.super: 相较于关键字this, 可以修饰属性、方法、构造器<br>2.super修饰属性、方法: 在子类的方法、构造器中, 通过<font style='color:red;font-weight:bold;'>&quot;super.属性&quot;或者&quot;super.方法&quot;</font>的形式, 显式的调用父类的指定属性或方法. 尤其是, 当子类与父类有同名的属性、或方法时, 调用父类中的结构的话, 一定要用“super.”<br>3.通过“super(形参列表)”, 显式的在子类的构造器中, 调用父类指定的构造器!<br>  <strong>任何一个类(除Object类)的构造器的首行, 要么显式的调用本类中重载的其它的构造器“this(形参列表)”或显式的调用父类中指定的构造器“super(形参列表)”, 要么默认的调用父类空参的构造器&quot;super()&quot;</strong><br><font style='color:red;font-weight:bold;'>&quot;super(形参列表)&quot;或&quot;this(形参列表)&quot;只能出现一个</font><br>  建议在设计类时, <font style='color:red;font-weight:bold;'>提供一个空参的构造器!</font></p><h2 id="四-子类对象的实例化">四.子类对象的实例化</h2><p><font style='color:red;font-weight:bold;'>先构建(调用父类的构造器构建)父类的内容, 再构建子类的内容</font></p><p>为了直观的理解, 可以运行一下代码, 看输出的结果:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子类对象实例化的全过程</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDog</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Dog d = <span class="keyword">new</span> Dog();</span><br><span class="line">        d.setAge(<span class="number">10</span>);</span><br><span class="line">        d.setName(<span class="string">"小明"</span>);</span><br><span class="line">        d.setHostName(<span class="string">"花花"</span>);</span><br><span class="line">        System.out.println(<span class="string">"name:"</span> + d.getName() + <span class="string">" age:"</span> + d.getAge()</span><br><span class="line">                + <span class="string">" hostName:"</span> + d.getHostName());</span><br><span class="line">        System.out.println(d.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 生物</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Creator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        System.out.println(<span class="string">"this is Creator's constructor"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 动物类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">extends</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        System.out.println(<span class="string">"this is Animal's constructor"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 狗</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String hostName;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHostName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hostName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHostName</span><span class="params">(String hostName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hostName = hostName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        System.out.println(<span class="string">"this is Dog's constructor"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果为:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span> is Creator<span class="string">'s constructor</span></span><br><span class="line"><span class="string">this is Animal'</span>s constructor</span><br><span class="line"><span class="keyword">this</span> is Dog<span class="string">'s constructor</span></span><br><span class="line"><span class="string">name:小明 age:10 hostName:花花</span></span><br><span class="line"><span class="string">Dog类的对象dd在堆空间内的信息</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>封装性</title>
      <link href="/JavaSE3-3.html"/>
      <url>/JavaSE3-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>面向对象之封装性<br>构造器<br>this关键字<br>package与import</p><a id="more"></a><h2 id="一-封装性">一.封装性</h2><p>面向对象的特征一: 封装与隐藏</p><blockquote><p>问题: 当创建了类的对象以后, 如果直接通过&quot;对象.属性&quot;的方式对相应的对象属性赋值的话, 可能会出现不满足实际情况的意外, 我们考虑不让对象来直接作用属性, 而是通过&quot;对象.方法&quot;的形式, 来控制对象对属性的访问. 实际情况中, 对属性的要求就可以通过方法来体现.</p></blockquote><p><font style='color:red;font-weight:bold;'>封装性的思想: </font></p><ul><li><p>①将类的属性私有化;</p></li><li><p>②提供公共的方法(setter&amp;getter)来实现调用.</p></li></ul><h3 id="A-四种权限修饰符">A.四种权限修饰符</h3><blockquote><p><strong>1.权限从大到小为：public   protected   缺省   private</strong><br><strong>2.四种权限都可以用来修饰属性、方法、构造器</strong><br><strong>3.修饰类的话：public 缺省(default)类只能被同一个包中的类访问</strong></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E4%BF%AE%E9%A5%B0%E7%AC%A6.png" alt="修饰符"></p><h2 id="二-构造器">二.构造器</h2><p>类的第三个成员: 构造器(constructor 构造方法)</p><h3 id="A-构造器的作用">A.构造器的作用</h3><p>①创建对象 ②给创建的对象的属性赋值</p><h3 id="B-构造器的特征">B.构造器的特征</h3><p>①与类名一致②没有返回值类型③无return与语句</p><p>④不能被static|final|abstract|native本地的|synchronized同步的</p><blockquote><ul><li>1.设计类时, <font style='color:red;font-weight:bold;'>若不显式声明类的构造器的话, 程序会默认提供一个空参的构造器.</font>.</li><li>2.<font style='color:red;font-weight:bold;'>一旦显式的定义类的构造器, 那么默认的构造器就不再提供.</font></li><li>3.如何声明类的构造器. 格式: 权限修饰符  类名(形参){ }</li><li>4.类的多个构造器之间<font style='color:red;font-weight:bold;'>构成重载</font></li></ul></blockquote><p>类对象的属性赋值的先后顺序: ①属性的默认初始化 ②属性的显式初始化 ③通过构造器给属性初始化</p><p>④通过&quot;对象.方法&quot;的方式给属性赋值</p><h2 id="三-this">三.this</h2><p>this:</p><blockquote><p>1.使用在类中, 可以用来修饰属性、方法、构造器<br>2.表示当前对象或者是当前正在创建的对象<br>3.当形参与成员变量重名时, 如果在方法内部需要使用成员变量, 必须添加this来表明该变量时类成员<br>4.在任意方法内, 如果使用当前类的成员变量或成员方法可以在其前面添加this, 增强程序的阅读性<br>5.在构造器中使用<font style='color:red;font-weight:bold;'>“this(形参列表)”</font>显式的调用本类中重载的其它的构造器<br>  ①要求“this(形参列表)”要声明在构造器的首行!<br>  ②类中若存在n个构造器, 那么最多有n-1构造器中使用了this.<br>6.静态方法中不能使用this和super关键字</p></blockquote><p><font style='color:red;font-weight:bold;'>例子:</font></p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPerson</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">        System.out.println(p1.getName() + <span class="string">":"</span> + p1.getAge());</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"BB"</span>,<span class="number">23</span>);</span><br><span class="line">        <span class="keyword">int</span> temp = p2.compare(p1);</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">"AA"</span>;</span><br><span class="line">        <span class="keyword">this</span>.age = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(name);</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"eating"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"sleeping"</span>);</span><br><span class="line">        <span class="keyword">this</span>.eat();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//比较当前对象与形参的对象的age谁大。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Person p)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.age &gt; p.age)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.age &lt; p.age)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="四-package与import">四.package与import</h2><p>package: <font style='color:red;font-weight:bold;'>声明源文件(即当前文件)所在的包(即文件夹), 必须写在程序的第一行.</font></p><p>每“.”一次, 表示一层文件目录; 包名都要小写.</p><p>import:</p><blockquote><ul><li>1)显式导入指定包下的类或接口</li><li>2)写在包的声明和源文件之间</li><li>3)如果需要引入多个类或接口, 那么并列写出</li><li>4)如果导入的类是java.lang包下的, 如: System String Math等, 就不需要显式的声明.</li><li>5)理解.*的概念.比如java.util.*;</li><li>6)如何处理同名类的导入. 如: 在util包和sql包下同时存在Date类.</li><li>7)import static 表示导入指定类的static的属性或方法</li><li>8)导入java.lang.*只能导入lang包下的所有类或接口, 不能导入lang的子包下的类或接口</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象1.2</title>
      <link href="/JavaSE3-2.html"/>
      <url>/JavaSE3-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>方法的重载<br>可变个数的形参的方法<br>Java的值传递机制</p><a id="more"></a><h2 id="一-overload-重载">一.overload(重载)</h2><h3 id="1-重载要求">1.重载要求:</h3><blockquote><ol><li><strong>同一个类中</strong></li><li><strong>方法名必须相同</strong></li><li><strong>方法的参数列表不同(①参数的个数不同②参数类型不同)</strong><br><strong>注意: 方法的重载与<font style='color:red'>方法的返回值类型</font>没有关系!</strong></li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如下的四个方法构成重载</span></span><br><span class="line"><span class="comment">//定义两个int型变量的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i + j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义三个int型变量的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i + j + k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义两个double型数据的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSum</span><span class="params">(<span class="keyword">double</span> d1,<span class="keyword">double</span> d2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> d1 + d2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义三个double型数组的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSum</span><span class="params">(<span class="keyword">double</span> d1,<span class="keyword">double</span> d2,<span class="keyword">double</span> d3)</span></span>&#123;</span><br><span class="line">    System.out.println(d1 + d2 + d3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如下两个方法不能与如上的几个方法构成重载</span></span><br><span class="line"><span class="comment">//public int getSum1(int i,int j,int k)&#123;//方法名必须相同</span></span><br><span class="line"><span class="comment">//return i + j + k;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//public void getSum(int i,int j,int k)&#123;//与方法的返回值类型</span></span><br><span class="line"><span class="comment">//System.out.println(i + j + k);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure><h2 id="二-可变个数的形参的方法">二.可变个数的形参的方法</h2><p>可变个数的形参的方法(JDK5.0之后的特性):</p><blockquote><ul><li>1.格式: 对于方法的形参: 数据类型 … 形参名</li><li>2.可变个数的形参的方法与同名的方法之间构成重载</li><li>3.可变个数的形参在调用时, 个数从0开始, 到无穷多个都可以</li><li>4.使用可变多个形参的方法与方法的形参使用数组是一致的</li><li>5.若方法中存在可变个数的形参, 那么一定要声明在方法形参的最后</li><li>6.在一个方法中, 最多声明一个可变个数的形参</li></ul></blockquote><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如下四个方法构成重载</span></span><br><span class="line"><span class="comment">//在类中一旦定义了重载的可变个数的形参的方法以后, 下面的前两个方法可以省略</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello world!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String str1)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello "</span> + str1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//可变个数的形参的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String ... args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i++)&#123;</span><br><span class="line">            System.out.println(args[i] + <span class="string">"$"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(<span class="keyword">int</span> i,String ... args)</span></span>&#123;</span><br><span class="line">    <span class="comment">//public void sayHello(String ... args,int i)&#123;//这样不对</span></span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; args.length;j++)&#123;</span><br><span class="line">            System.out.println(args[j] + <span class="string">"$"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello1</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; args.length;i++)&#123;</span><br><span class="line">            System.out.println(args[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></details><h2 id="三-Java的值传递机制">三.Java的值传递机制</h2><h3 id="1-方法的参数传递">1.方法的参数传递</h3><ol><li><strong>形参</strong>: 方法声明时, 方法小括号内的参数;<strong>实参</strong>: 调用方法时, 实际传入的参数的值</li><li>规则: Java中的参数传递机制: <font style='color:red;font-weight:bold;'>值传递机制</font></li></ol><p>①形参是基本数据类型的: 将实参的值传递给形参的基本数据类型的变量<br>②形参是引用数据类型的: 将实参的引用类型变量的值(对应的堆空间的对象实体的首地址值)传递给形参的引用类型变量.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例1:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test1</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test1 tt = <span class="keyword">new</span> Test1();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i + <span class="string">" j:"</span> + j);<span class="comment">//i : 10  j : 5</span></span><br><span class="line"><span class="comment">/*//直接交换变量i与j的值</span></span><br><span class="line"><span class="comment">int temp = i;</span></span><br><span class="line"><span class="comment">i = j;</span></span><br><span class="line"><span class="comment">j = temp;</span></span><br><span class="line"><span class="comment">*/</span>tt.swap(i, j);<span class="comment">//通过方法交换, 将i的值传递给m，j的值传递给n, 实际上i与j的值根本没有交换</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i + <span class="string">" j:"</span> + j);<span class="comment">//i : 10  j : 5</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//定义一个方法，交换两个变量的值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = m;</span><br><span class="line">        m = n;</span><br><span class="line">        n = temp;</span><br><span class="line">        System.out.println(<span class="string">"m:"</span> + m + <span class="string">" n:"</span> + n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>若直接用注释部分的代码交换i与j可以交换, 使用swap方法以后: 实际上i与j本身的值根本没有交换</strong></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E5%80%BC%E4%BC%A0%E9%80%92.png" alt="值传递"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/swap.png" alt="swap"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例2:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test1 tt = <span class="keyword">new</span> Test1();</span><br><span class="line">        DataSwap ds = <span class="keyword">new</span> DataSwap();</span><br><span class="line">        System.out.println(<span class="string">"ds.i:"</span> + ds.i + <span class="string">" ds.j:"</span> + ds.j);</span><br><span class="line">        tt.swap(ds);</span><br><span class="line">        System.out.println(ds);</span><br><span class="line">        System.out.println(<span class="string">"ds.i:"</span> + ds.i + <span class="string">" ds.j:"</span> + ds.j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//交换元素的值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(DataSwap d)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = d.i;</span><br><span class="line">        d.i = d.j;</span><br><span class="line">        d.j = temp;</span><br><span class="line">        System.out.println(d);<span class="comment">//打印引用变量d的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataSwap</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象1.1</title>
      <link href="/JavaSE3-1.html"/>
      <url>/JavaSE3-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>面向对象的初步认识</p><p>什么是面向对象?</p><p>如何面向对象?</p><p>为什么是面向对象?还面向什么吗?</p><a id="more"></a><h2 id="一-面向对象的初步认识">一.面向对象的初步认识</h2><h3 id="1-了解-面向对象vs面向过程">1.(了解)面向对象vs面向过程</h3><p>例:实现人把大象装进冰箱</p><ul><li>面向对象:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 人</span>&#123;<span class="comment">//可以这么理解</span></span><br><span class="line">    open()&#123;<span class="comment">//打开冰箱</span></span><br><span class="line">    &#125;</span><br><span class="line">    put()&#123;<span class="comment">//将大象放进冰箱</span></span><br><span class="line">    &#125;</span><br><span class="line">    close()&#123;<span class="comment">//关闭冰箱</span></span><br><span class="line">    &#125;</span><br><span class="line">    main()&#123;</span><br><span class="line">        人 = <span class="keyword">new</span> 人();</span><br><span class="line">        人.open();</span><br><span class="line">        人.put();</span><br><span class="line">        人.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>面向过程:</li></ul><blockquote><p>①人打开冰箱;</p><p>②将大象放进冰箱;</p><p>③关闭冰箱</p></blockquote><h3 id="2-面向对象的编程专注于类的设计">2.面向对象的编程专注于类的设计!</h3><blockquote><p>1）一个项目或工程, 不管多庞大, 一定是有一个一个类构成的.<br>2）类是抽象的, 好比是制造汽车的图纸. 而具体的一辆一辆的车, 是根据图纸制造的, 实际上就是类的实例化(即对象)</p></blockquote><h3 id="3-完成一个项目-或功能-的思路">3.完成一个项目(或功能)的思路</h3><blockquote><p>1）所要完成的功能对应的类的对象是否存在.<br>2）若存在, 则通过对象直接调用对应的类中的属性或方法即可.<br>3）若不存在, 需要创建类的对象.甚至说, 类都不存在, 就需要设计类.</p></blockquote><h3 id="4-面向对象编程的三条主线">4.面向对象编程的三条主线</h3><blockquote><p>1）类及类的构成成分:<font style='color:red;font-weight:bold;'>属性  方法 构造器  代码块 内部类</font><br>2）面向对象编程的特征:<font style='color:red;font-weight:bold;'>封装性  继承性 多态性(抽象性)</font><br>3）其它的关键字:<font style='color:red;font-weight:bold;'>this super package import static final abstract interface …</font></p></blockquote><h2 id="二-类及对象">二.类及对象</h2><p>1.关于类的设计</p><h3 id="2-类的组成成分">2.类的组成成分:</h3><p>1)属性(成员变量, Field)<br>2)方法(成员方法, 函数, Method)</p><h4 id="2-1属性">2.1属性:</h4><h3 id="font-color-black-成员变量-vs-局部变量-font"><font color='black'>成员变量 vs 局部变量</font></h3><p>相同点: 1.遵循变量声明的格式: 数据类型 变量名 = 初始化值 2.都有作用域</p><p>不同点: 1.声明的位置的不同: 成员变量: 声明在类里, 方法外; 局部变量: 声明在方法内, 方法的形参部分, 代码块内</p><p>    2.成员变量的修饰符有四个:public private protected 缺省, 局部变量没有修饰符, 与所在的方法修饰符相同</p><p>    3.初始化值: 一定会有初始化值, 成员变量:如果在声明的时候, 不显式的赋值, 那么不同数据类型会有不同的默认初始化值.局部变量: 一定要显式的赋值.(局部变量没有默认初始化值)</p><blockquote><ul><li><strong>byte short int long ==&gt;0</strong></li><li><strong>float double ==&gt;0.0</strong></li><li><strong>char ==&gt;空格</strong></li><li><strong>boolean ==&gt;false</strong></li><li><strong>引用类型变量==&gt;null</strong></li></ul></blockquote><p>    4.二者在内存中存放的位置不同:成员变量存在于堆空间中; 局部变量: 栈空间中</p><p>总结: 关于变量的分类:</p><ul><li>1)按照数据类型的不同: 基本数据类型(8种)&amp;引用数据类型</li><li>2)按照声明的位置的不同: 成员变量 &amp; 局部变量</li></ul><h3 id="2-2-方法-提供某种功能的实现">2.2 方法: 提供某种功能的实现</h3><ul><li>1)实例:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;<span class="comment">//方法体&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String n)</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><font style='color:red;font-weight:bold;'>格式: 权限修饰符 返回值类型(void:无返回值/具体的返回值) 方法名(形参){}</font></p><ul><li>2)关于返回值类型: void: 表明此方法不需要返回值</li></ul><p>有返回值的方法: 在方法的最后一定有return + 返回值类型对应的变量</p><p>记忆: void 与return不可以同时出现一个方法内. 像一对“冤家”.</p><ul><li>3)方法内可以调用本类的其他方法或属性, 但是不能在方法内再定义方法!</li></ul><p>3.面向对象编程的思想的落地法则一:</p><blockquote><p>1)设计并创建类及类的成分<br>2)实例化类的对象<br>3)通过“对象.属性”或&quot;对象.方法&quot;的形式完成某项功能</p></blockquote><p>4.类的初始化的内存解析</p><h3 id="4-1-内存划分的结构">4.1 内存划分的结构:</h3><ul><li><strong>栈(stack):局部变量、对象的引用名、数组的引用名</strong></li><li><strong>堆(heap):new 出来的“东西”(如: 对象的实体, 数组的实体), 含成员变量</strong></li><li><strong>方法区: 含字符串常量</strong></li><li><strong>静态域: 声明为static的变量</strong></li></ul><p>4.2 理解的基础上, 学会基本的创建的类的对象在内存中的运行.</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java数组</title>
      <link href="/JavaSE2-3.html"/>
      <url>/JavaSE2-3.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Java基本语法续</p><p>Java数组</p><a id="more"></a><h2 id="font-color-black-一-一维数组-font"><font color='black'>一.一维数组</font></h2><p>数组: 相同数据类型的数据的组合.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如: 多个int</span></span><br><span class="line"><span class="keyword">int</span> score1 = <span class="number">72</span>;</span><br><span class="line"><span class="keyword">int</span> score2 = <span class="number">90</span>;</span><br><span class="line"><span class="keyword">int</span> score3 = <span class="number">59</span>;</span><br><span class="line"><span class="comment">//使用数组存储</span></span><br><span class="line"><span class="keyword">int</span>[] scores1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">72</span>,<span class="number">90</span>,<span class="number">59</span>&#125;;</span><br><span class="line"><span class="comment">//静态初始化:声明并初始化数组与给数组相应的元素赋值操作同时进行</span></span><br><span class="line"><span class="keyword">int</span> scores2[] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];<span class="comment">//动态初始化:声明并初始化数组与数组相应的元素赋值操作分开进行</span></span><br><span class="line">scores2[<span class="number">0</span>] = <span class="number">72</span>;</span><br><span class="line">scores2[<span class="number">1</span>] = <span class="number">90</span>;</span><br><span class="line">scores2[<span class="number">2</span>] = <span class="number">59</span>;</span><br><span class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">72</span>,<span class="number">90</span>,<span class="number">59</span>&#125;;<span class="comment">//这样可以</span></span><br><span class="line"><span class="comment">//声明数组的错误写法:</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">String[] names = new String[5]&#123;"AA","BB","CC"&#125;;//这样用时不能指定大小</span></span><br><span class="line"><span class="comment">int i[10];</span></span><br><span class="line"><span class="comment">int i = new int[];//i是int型</span></span><br><span class="line"><span class="comment">int[] arr;arr = &#123;10,11,12&#125;;//两句分开不行, 合并为一句可以</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">System.out.println(scores2.length);<span class="comment">//求数组长度</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; scores1.length;i++)&#123;<span class="comment">//遍历数组</span></span><br><span class="line">    System.out.println(scores1[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>注意</strong></em></p><blockquote><p>  1.不管是动态还是静态初始化数组, 一定在<strong>创建的时候, 就指明了数组的长度</strong><br>  2.如何引用数组元素: 通过数组的下角标的方式. 下角标从0开始, 到n-1结束.其中n为数组的长度</p><p>  3.关于数组元素的默认初始化值</p></blockquote><blockquote><ul><li>byte short int long 而言:0</li><li>float double 而言:0.0</li><li>char而言:空格</li><li>boolean而言:false</li><li>引用类型变量而言:null</li></ul></blockquote><h3 id="4-数组的内存结构">4.数组的内存结构</h3><p>内存结构图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="内存结构图"></p><p><font style='color:red;font-weight:bold'>在JAVA中, 凡是new出来的东西, 都会被默认初始化并赋值. new 出来的东西都存放在 <em>堆中</em></font></p><p>对于数组来讲:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E6%95%B0%E7%BB%84.png" alt="数组"></p><p>字符串: 面向对象之后再看</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/String.png" alt="String"></p><h2 id="font-color-black-二-二维数组-font"><font color='black'>二.二维数组</font></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.声明并初始化</span></span><br><span class="line"><span class="comment">//一维:类型后一个[]</span></span><br><span class="line"><span class="keyword">int</span>[] i = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">12</span>];</span><br><span class="line">i[<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">int</span>[] j = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">12</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="comment">//二维:类型后两个[]</span></span><br><span class="line">String[][] str = <span class="keyword">new</span> String[<span class="number">4</span>][<span class="number">3</span>];<span class="comment">//4行3列</span></span><br><span class="line">String[][] str1 = <span class="keyword">new</span> String[<span class="number">4</span>][];<span class="comment">//4行, 每行的列可能不一样</span></span><br><span class="line">str1[<span class="number">0</span>] = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">str1[<span class="number">3</span>] = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//2.如何引用二维数组的元素</span></span><br><span class="line">arr[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line"><span class="comment">//3.二维数组的长度:</span></span><br><span class="line">arr.length;<span class="comment">//3</span></span><br><span class="line">arr[<span class="number">1</span>].length;<span class="comment">//2</span></span><br><span class="line"><span class="comment">//4.遍历二维数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; arr[i].length;j++)&#123;</span><br><span class="line">        System.out.print(arr[i][j] + <span class="string">"\t"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="5-二维数组的结构">5.二维数组的结构:</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/String%5B%5D%5B%5D.png" alt="String[][]"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84.png" alt="二维数组"></p><h2 id="font-color-black-三-数组中常见的异常-font"><font color='black'>三.数组中常见的异常</font></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.数组下标越界的异常:java.lang.ArrayIndexOutOfBoundsException</span></span><br><span class="line"><span class="keyword">int</span>[] i = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line"><span class="comment">//i[0] = 90;</span></span><br><span class="line"><span class="comment">//i[10] = 99;//最大i[9]</span></span><br><span class="line"><span class="comment">//for(int m = 0;m &lt;= i.length;m++)&#123;</span></span><br><span class="line"><span class="comment">//    System.out.println(i[m]);//最大i[i.length-1]</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.空指针的异常:NullPointerException</span></span><br><span class="line"><span class="comment">//第一种:</span></span><br><span class="line"><span class="comment">//boolean[] b = new boolean[3];</span></span><br><span class="line"><span class="comment">//b = null;</span></span><br><span class="line"><span class="comment">//System.out.println(b[0]);//b已经为空</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种:</span></span><br><span class="line"><span class="comment">//String[] str = new String[4];</span></span><br><span class="line"><span class="comment">//System.out.println(str[3].toString());//没有初始化str[3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种:</span></span><br><span class="line"><span class="keyword">int</span>[][] j = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][];</span><br><span class="line"><span class="comment">//j[2][0] = 12;//j的第二维还未初始化</span></span><br></pre></td></tr></table></figure><h2 id="font-color-black-四-数组中常用的算法-font"><font color='black'>四.数组中常用的算法</font></h2><h3 id="求数组元素的最大值-最小值-和-平均数">求数组元素的最大值&amp;最小值&amp;和&amp;平均数</h3><h3 id="数组的复制和反转">数组的复制和反转</h3><p>情况1: 浅复制, 两个数组的引用指向同一片内存空间, 改变一个的内容另一个也会改变</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = arr1;</span><br></pre></td></tr></table></figure><p>情况2: 深复制, 将一片内存里的内容, 复制到另一片内存里(如何实现复制)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr1.length;i ++)&#123;</span><br><span class="line">    arr2[i] = arr1[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>数组的反转：<br>数组元素的反转</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//①</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length/<span class="number">2</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">    arr[i] = arr[arr.length-<span class="number">1</span> - i];</span><br><span class="line">    arr[arr.length - <span class="number">1</span> - i] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//②</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>, y = arr.length - <span class="number">1</span>; x &lt; y; x++, y--) &#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[x];</span><br><span class="line">    arr[x] = arr[y];</span><br><span class="line">    arr[y] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>拓展:String str = “abcdefg”;</p><h3 id="数组的排序">数组的排序</h3><blockquote><ul><li><p>插入排序: 直接插入排序、折半插入排序、Shell排序</p></li><li><p>交换排序: 冒泡排序、快速排序(或分区交换排序)</p></li><li><p>选择排序: 简单选择排序、堆排序</p></li><li><p>归并排序</p></li><li><p>基数排序</p></li></ul></blockquote><p>使用冒泡排序使数组元素从小到大排列</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = arr[j];</span><br><span class="line">            arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">            arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用直接选择排序使数组元素从小到大排列</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">int</span> t = i;<span class="comment">//默认i处是最小的</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i;j &lt; arr.length;j++)&#123;</span><br><span class="line">        <span class="comment">//一旦在i后发现存在比其小的元素，就记录那个元素的下角标</span></span><br><span class="line">        <span class="keyword">if</span>(arr[t] &gt; arr[j])&#123;</span><br><span class="line">            t = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(t != i)&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[t];</span><br><span class="line">        arr[t] = arr[i];</span><br><span class="line">        arr[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>还可以调用: <em><strong>Arrays工具类</strong></em>: <font style='color:red;font-weight:bold'>Arrays.sort(arr);</font></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java基本语法2</title>
      <link href="/JavaSE2-2.html"/>
      <url>/JavaSE2-2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Java的一些基本语法续</p><p>流程控制</p><p>（数组）后续</p><a id="more"></a><h2 id="font-color-black-4-流程控制-font"><font color='black'>4.流程控制</font></h2><h3 id="A-顺序结构">A.顺序结构</h3><p>程序从上往下的顺序执行</p><h3 id="B-分支结构">B.分支结构</h3><p>if-else &amp; switch-case</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">①<span class="keyword">if</span>(条件表达式)&#123;   &#125;</span><br><span class="line">②<span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">    <span class="comment">//执行的语句1;</span></span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//执行的语句2;</span></span><br><span class="line">   &#125;</span><br><span class="line">③<span class="keyword">if</span>(条件表达式<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句1;</span></span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件表达式<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句2;</span></span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span>( 条件表达式<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="comment">//执行的语句3;</span></span><br><span class="line">   &#125;...</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//执行的语句;</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>[注意]</p><blockquote><p>  1.一旦满足某个条件表达式, 则进入其执行语句块执行, 执行完毕, 跳出当前的条件判断结构, 不会执行剩下的条件结构语句.</p><p>  2.如果多个条件表达式之间为“互斥”关系, 多个结构可以上下调换顺序<br>如果多个条件表达式之间为“包含”关系, 要求条件表达式范围小的写在范围大的上面.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(变量)&#123;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">1</span>:</span><br><span class="line">    <span class="comment">//break;</span></span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">    <span class="comment">//break;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>[注意]</p><blockquote><p>1.变量可以为如下的数据类型:byte  short int char 枚举 String(jdk1.7)<br>2.case后只能填写变量的值, 不能写范围.<br>3.default是可以省略的, 并且其位置也是灵活的, 但通常将其放在case语句之后.<br>4.一旦满足某个case语句, 则进入执行其操作, 直至遇到break或者程序终止.<br>5.若要判断的语句的条件满足switch变量的数据类型, 且值不多的情况下, 建议选择switch-case .<br>除此之外, 选择if-else.</p></blockquote><p><strong>[例题]从键盘输入三个int类型的数存入三个int变量, 利用if-else实现对三个数的排序, 并输出.</strong><br><strong>[例题]输入一个年月日, 像: 2019/7/20, 输出该天是这一年中的哪一天.</strong></p><h3 id="C-循环结构">C.循环结构</h3><p>格式:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(①;②;③)&#123;</span><br><span class="line">    ④</span><br><span class="line">&#125;</span><br><span class="line">①</span><br><span class="line"><span class="keyword">while</span>(②)&#123;</span><br><span class="line">    ④</span><br><span class="line">    ③</span><br><span class="line">&#125;</span><br><span class="line">①</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    ④</span><br><span class="line">    ③</span><br><span class="line">&#125;<span class="keyword">while</span>(②);</span><br></pre></td></tr></table></figure><blockquote><p>①初始化条件<br>②循环条件<br>③迭代部分<br>④循环体</p></blockquote><p>注意 1.不同的循环结构之间可以相互转换<br>   2.while和do-while的区别; do-while程序至少会执行一次</p><p>嵌套循环: 上述循环体嵌套循环体<br>若外层循环执行m次, 内层循环执行n次, 整个程序执行m*n次 .</p><p><strong>[例题]输出九九乘法表</strong></p><p><strong>[例题]输出100内的质数.(两种)</strong></p><p>无限循环结构:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">if</span>(  )&#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">if</span>(  )&#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们往往会在无限循环结构内部提供循环的终止条件, 使用break关键字跳出循环.避免死循环.</p><h3 id="D-break-continue">D.break&amp;continue</h3><h4 id="break">break:</h4><p>使用switch-case结构或者循环结构中<br>在循环结构中, 一旦执行到break, 就跳出当前循环 .</p><h4 id="continue">continue:</h4><p>使用在循环结构中, 一旦执行到continue, 就跳出当次循环, 继续执行下一次循环.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= <span class="number">10</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">4</span> == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//break; //程序执行结果:123</span></span><br><span class="line">        <span class="keyword">continue</span>;  <span class="comment">//程序执行结果:123567910</span></span><br><span class="line">    &#125;</span><br><span class="line">    System.out.print(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在嵌套循环中, 使用带标签的break和continue.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">label:<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt; <span class="number">5</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j &lt;= <span class="number">10</span>;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(j % <span class="number">4</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//break;</span></span><br><span class="line">            <span class="comment">//continue;</span></span><br><span class="line">            <span class="comment">//break label;</span></span><br><span class="line">            <span class="keyword">continue</span> label;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(j);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java基本语法1</title>
      <link href="/JavaSE2-1.html"/>
      <url>/JavaSE2-1.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Java的一些基本语法</p><p>关键字、标识符、变量、运算符</p><p>（流程控制、数组)后续</p><a id="more"></a><h2 id="font-color-black-1-关键字＆标识符-font"><font color="black">1.关键字＆标识符</font></h2><blockquote><p>关键字: 被Java语言赋予了特殊含义, 用做专门用途的字符串(单词), <font color="red">关键字全是小写的</font></p><p>保留字: 以后可能用来作为关键字</p><p>标识符: 凡是自己可以起名字的地方都叫标识符</p></blockquote><h3 id="命名规则">命名规则:</h3><p>  <strong>一定要遵守, 不遵守就会报编译的错误</strong></p><blockquote><p>由26个<font style='color:red;font-weight:bold;'>英文字母大小写,0-9, _或 $ </font>组成  数字不可以开头.<br>不可以使用关键字和保留字, 但能包含关键字和保留字.<br>Java中严格区分大小写, 长度无限制.<br>标识符不能包含空格.</p></blockquote><h3 id="命名规范">命名规范:</h3><p>  <strong>不遵守, 也不会出现编译的错误</strong></p><blockquote><p>包名: 多单词组成时所有字母都小写: xxxyyyzzz<br>类名、接口名: 多单词组成时, 所有单词的首字母大写: XxxYyyZzz<br>变量名、方法名: 多单词组成时, 第一个单词首字母小写, 第二个单词开始每个单词首字母大写: xxxYyyZzz<br>常量名: 所有字母都大写, 多单词时每个单词用下划线连接: XXX_YYY_ZZZ</p></blockquote><h2 id="font-color-black-2-变量-font"><font color="black">2.变量</font></h2><ol><li>Java中变量按照数据类型来分类: <strong>基本数据类型</strong> vs  <strong>引用数据类型</strong>(数组 类 接口)</li></ol><h3 id="基本数据类型">基本数据类型</h3><blockquote><p>整型: byte(8 bit,-128~127)  short(-32768~32767)   int(默认类型,-2<sup>31~2</sup>31-1)   long</p><p>浮点型: float double(默认类型)</p><p><strong>字符型: char（‘ ’）16 bit</strong>    是以十六进制保存的字符,例:char ch = ‘\u0041’;为’A’</p><p>布尔类型:  boolean (只能取值为true 或false, 不能取null)</p></blockquote><h3 id="引用数据类型">引用数据类型</h3><blockquote><p>String类型: 值可以为null</p><p>数组、对象(类的实例)等，之后会一一说明.</p></blockquote><p>数据类型    变量名 = 初始化值;<br>​     补充: 按照在类中存在的位置的不同: 成员变量 vs 局部变量<br>​     成员变量在声明时会被默认初始化, 因此可以在声明后直接使用, 而局部变量在使用之前必须先初始化<br>​     声明: long型常量需后缀&quot;l&quot;或&quot;L&quot;,long lo = 123L;<br>​     float类型变量要后缀&quot;f&quot;或&quot;F&quot;,float f = 12.3F;</p><p>2.进制(了解)<br>十进制  二进制  八进制 十六进制</p><p>二进制: 计算机底层都是用二进制来存储、运算.</p><blockquote><p>二进制 与十进制之间的转换.<br>二进制在底层存储: 正数、负数都是以补码的形式存储的.(原码、反码、补码)<br>四种进制间的转换</p></blockquote><p>3.变量的运算:<br>①<strong>自动类型转换</strong>: 容量小的数据类型自动转换为容量大的数据类型转换.<br>short s = 12;<br>int i = s + 2;<br>注意: byte  short char之间做运算, 结果为int型!<br>②<strong>强制类型转换</strong>: 是①的逆过程.使用“()”实现强转.</p><h2 id="font-color-black-3-运算符-font"><font color="black">3.运算符</font></h2><p>运算符是一种特殊的符号, 用以表示数据的运算.</p><h3 id="A-算术运算符">A.算术运算符:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ - /  % ++ -- +</span><br></pre></td></tr></table></figure><p>注意:</p><blockquote><ol><li>/:  int i = 12; i = i / 5;地板除</li><li>%: 取模, 结果的符号与被模数相同</li><li>前++: 先+1, 后运算     后++: 先运算, 后+1</li><li>+: String字符串与其他数据类型只能做连接运算, 且结果为String类型.</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysout(<span class="string">"*"</span> + <span class="string">'\t'</span> + <span class="string">'*'</span>); <span class="function">vs <span class="title">sysout</span><span class="params">(<span class="string">'*'</span> + <span class="string">'\t'</span> + <span class="string">'*'</span>)</span></span>;结果为<span class="number">93</span></span><br><span class="line"><span class="comment">//sysout为Java的快捷键用法, 先输入sysout, 再按"Alt + /", 即可打出System.out.println();</span></span><br></pre></td></tr></table></figure><h3 id="B-赋值运算符">B.赋值运算符:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=    +=   -=  *=    /=   %=</span></span><br><span class="line"><span class="keyword">int</span> i = <span class="number">12</span>;</span><br><span class="line">i  = i * <span class="number">5</span>;</span><br><span class="line">i *= <span class="number">5</span>;<span class="comment">//与上一行代码同样的意思</span></span><br><span class="line"><span class="comment">//[特别地]</span></span><br><span class="line"><span class="keyword">short</span> s = <span class="number">10</span>;</span><br><span class="line">s = s + <span class="number">5</span>;<span class="comment">//报编译的异常，s+5会被默认转化为int类型，再赋值给short会出错</span></span><br><span class="line">s = (<span class="keyword">short</span>)(s + <span class="number">5</span>);<span class="comment">//强制类型转换便不会异常</span></span><br><span class="line">s += <span class="number">5</span>;<span class="comment">//相当于, s = s + 5, 但两者并不完全等价, 但是结果不会改变s的数据类型.</span></span><br></pre></td></tr></table></figure><h3 id="C-比较运算符-关系运算符">C.比较运算符(关系运算符)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">==  &gt;   &lt;  &gt;=   &lt;=    <span class="keyword">instanceof</span></span><br></pre></td></tr></table></figure><p>[注意]  区分 ==  与 =  区别.<br>进行比较运算操作以后,返回一个boolean类型的值(true或false)<br>4&gt;=3  表达的是4 &gt; 3或者 4 = 3.结果是true.</p><p>if(i &gt; 1 &amp;&amp; i &lt; 10){  }   不能写为: if(1 &lt; i &lt; 10){}</p><h3 id="D-逻辑运算符-运算符的两端是boolean值">D.逻辑运算符(运算符的两端是boolean值)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;  &amp;&amp;  |  ||  ^  !</span><br></pre></td></tr></table></figure><p>[注意]区分&amp;与&amp;&amp;的区别, 以及 | 与 || 的区别<br>我们使用的时候, 选择 &amp;&amp; , ||  <font color="red">短路与、短路或</font></p><h3 id="E-位运算符-两端是数值类型的数据">E.位运算符(两端是数值类型的数据)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;   &gt;&gt;    &gt;&gt;&gt;(无符号右移)  &amp;  |   ^(异或)  ~(按位取反)</span><br></pre></td></tr></table></figure><p>[例子] 1.如何交换m = 12和n = 5的值<br>2.将60转换为十六进制输出.</p><h3 id="F-三元运算符">F.三元运算符</h3><p><font color="red">(条件表达式) ? 表达式1 : 表达式2;</font></p><blockquote><ol><li>既然是运算符, 一定会返回一个结果, 并且结果的数据类型与表达式1, 2的类型一致</li><li><strong>表达式1与表达式2的数据类型一致</strong>.</li><li>使用三元运算符的, 一定可以转换为if-else. 反之不一定成立.</li><li>?: 可以嵌套使用</li></ol></blockquote><p>例子: 获取两个数的较大值; 获取三个数的最大值.</p><details><summary>One More Thing 👇</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> max = (i &gt; j) ? i : j;</span><br><span class="line"><span class="keyword">int</span> k = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> max2 = (i &gt; j) ? ((i &gt; k) ? i : k) : (( j &gt; k) ? j : k);</span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaSE概述</title>
      <link href="/JavaSE1-0.html"/>
      <url>/JavaSE1-0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>走进Java</p><p>Java是什么?</p><p>Java如何来的?</p><p>Java干什么的?</p><a id="more"></a><h2 id="font-color-black-一-关于Java-font"><font color="black">一.关于Java</font></h2><blockquote><ul><li>①关于Java语言, 其实它很简单, 就是我们人类与计算机交流的语言, 就像人类的语言: 英语、汉语…</li><li>②Java之父: 詹姆斯·高斯林, 他曾说过, C语言是撑起一切的基石, C语言之父: 丹尼斯·里奇</li><li>③Java语言由类C、C++等衍生出来, 属于完全面向对象的语言</li><li>④Java的技术体系平台: JavaSE、JavaEE、JavaME</li></ul></blockquote><p>  <strong>在这里, 我们一般先学 JavaSE, 因为这是 Java 基石.</strong></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JavaSE%E5%9B%BE%E8%A7%A3.png" alt="JavaSE图解"></p><h2 id="font-color-black-二-关于计算机-font"><font color="black">二.关于计算机</font></h2><blockquote><ul><li>1.计算机软件软件:  系统软件  and  应用软件</li><li>2.人与计算机做交互:  使用计算机语言.<br>图形化界面(GUI)  vs  命令行方式(CLI): dir  md rd  cd  cd…  cd/  del  exit  echo  content  &gt;temp.txt<br>- 3.语言的分类:  第一代: 机器语言;  第二代: 汇编语言;  第三代: 高级语言(面向过程 → 面向对象)</li><li><font style = 'color:red;font-weight:bold;'>4.java语言的特性: ①面向对象性 ②健壮性 ③跨平台性(write once,run anywhere)—JVM</font><br>不同的系统有不同的JVM(Java Virtual Machine即Java虚拟机), 所以要想编写Java程序, 就要在自己的系统上安装JVM等部件. 学习Java, 我们首先要做的, 就是安装JDK环境.</li></ul></blockquote><h3 id="5-安装JDK及配置系统的path环境变量">5.安装JDK及配置系统的path环境变量</h3><ul><li>1)傻瓜式安装<a href="https://pan.baidu.com/s/1tjiG7KHYKSfdcWDW5Rm9Xw" target="_blank" rel="noopener">JDK</a>(提取码: et1y).</li><li>2)配置path: window操作系统在执行cmd命令时所要搜寻的路径.</li></ul><p>右键单击此电脑, 之后点击属性, 再点击高级系统设置, 再点击环境变量, 如图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs04.png" alt="nodejs04"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs05.png" alt="nodejs05"></p><p>​<em><strong>我们需要将jdk中bin目录所在的路径: 例如: D:\Program Files\Java\jdk1.8.0_131\bin 保存在path环境变量下.</strong></em></p><h4 id="配置-JAVA-HOME">配置 JAVA_HOME</h4><blockquote><p>为了方便更换我们使用的 JDK 版本，我们一般会这样配置系统 path。</p><p>新建系统变量：JAVA_HOME，值为所安装的JDK的根路径，如：D:\Program Files\Java\jdk1.8.0_131。</p><p>注意：变量JAVA_HOME的值不要加 bin。</p><p>之后，将 JAVA_HOME 应用到 path 里，添加一项系统 path：%JAVA_HOME%\bin。</p><p>当然，若是 JAVA 程序的测试人员(不负责开发)，只需装 JRE 就OK了，配置 JRE_HOME 变量和配置 JAVA_HOME 类似。</p></blockquote><ul><li>3)测试: 在命令行窗口, 任意的文件目录下, 执行javac.exe 或者java.exe都可以调用成功.<br>​JDK(Java Development Kit, Java语言的软件开发工具包即Java的SDK, Software Development Kit)<br>​JDK包含JRE(Java Runtime Environment, Java运行时环境), JRE包含JVM和一些常用的Java库类<br>​    &gt;河床好比操作底层, jdk好比是河水, java应用程序好比是船.</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/Java/JDK.png" alt="JDK"></p><h3 id="6-如何编写并运行第一个java程序">6.如何编写并运行第一个java程序</h3><p>​[过程]编写----编译(javac.exe)----运行(java.exe)</p><ul><li>1)编写: 每一个java文件都是.java结尾的, 称为源文件[HelloWorld.java], java程序就存在于源文件中</li></ul><p>如下, 第一个Java程序:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span>&#123;</span><br><span class="line">    <span class="comment">//程序的主方法，是程序的入口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        <span class="comment">//要执行的代码</span></span><br><span class="line">        System.out.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="comment">//假设这是在桌面上的源文件HelloWorld.java中的源代码, 执行过程如下:</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>①win+R键, 再输入cmd进入命令行模式, 通过cd desktop命令进入桌面</li><li>②通过javac HelloWorld.java命令编译源文件生成字节码文件</li><li>③通过java HelloWorld命令解释运行字节码文件, 之后控制台会输出HelloWorld</li></ul></blockquote><blockquote><p>注意点：<br>①<strong>Java源文件以“java”为扩展名. 源文件的基本组成部分是类(class),</strong> 如本例中的HelloWorld类.<br>②<strong>一个源文件中最多只能有一个public类</strong>, 其它类的个数不限, 如果源文件包含一个<strong>public类, 则.java文件名必须与该类名一致.</strong><br>③Java应用程序的执行入口是<strong>main()方法</strong>, 它有固定的书写格式: <strong>public static void main(String[] args){}</strong><br>④Java语言严格区分大小写.<br>⑤Java方法由一条条语句构成, 每个语句以“;”结束.<br>⑥大括号都是成对出现的,缺一不可.</p></blockquote><ul><li>2)编译:  在源文件所在的目录下, 执行javac.exe 源文件名.java;生成一个或多个.class结尾的字节码文件</li><li>3)运行:  生成的字节码文件通过java.exe解释执行</li></ul><p>7.会调试程序中出现的问题</p><p>8.注释:  ①单行注释 //    ②多行注释  /*    <em>/   （多行注释不能够嵌套）<br>③文档注释 /</em>*    */        javadoc  -d 文件目录名 -author -version 源文件名.java;</p><p>​其中文档注释是JAVA特有的<br>9.JDK提供的关于旗下所有的包&amp;类的说明文档: <a href="https://pan.baidu.com/s/1gUIVUFY2yksd5_qDxV80uw" target="_blank" rel="noopener">API</a> ，提取码：7c39</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo代码一键复制</title>
      <link href="/copy-code.html"/>
      <url>/copy-code.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>有时候代码块是真的多啊, 添加一个一键复制功能吧</p><a id="more"></a><h2 id="1-需要的JS文件">1.需要的JS文件</h2><ul><li><a href="https://pan.baidu.com/s/1e9QsLHh2bV1SR-pDjs0lWA" target="_blank" rel="noopener">clipboard.min.js</a>(提取码: p3xj)</li><li><a href="https://pan.baidu.com/s/1SydF42fBbfXg3pk-rhO5Tw" target="_blank" rel="noopener">clipboard-use.js</a>(提取码: sbsk)</li></ul><p>将以上js文件放到主题的js文件目录下.</p><p>clipboard-use.js:</p><details><summary>One More Thing 👇</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/* code */</span></span><br><span class="line">    <span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> copyHtml = <span class="string">''</span>;</span><br><span class="line">        copyHtml += <span class="string">'&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'</span>;</span><br><span class="line">        copyHtml += <span class="string">'  &lt;i class="fa fa-copy"&gt;&lt;/i&gt;&lt;span&gt;Copy&lt;/span&gt;'</span>;</span><br><span class="line">        copyHtml += <span class="string">'&lt;/button&gt;'</span>;</span><br><span class="line">        $(<span class="string">".highlight .code pre"</span>).before(copyHtml);</span><br><span class="line">        <span class="keyword">var</span> clipboard = <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn-copy'</span>, &#123;</span><br><span class="line">            target: <span class="function"><span class="keyword">function</span>(<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        clipboard.on(<span class="string">'success'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//您可以加入成功提示</span></span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">'Action:'</span>, e.action);</span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">'Text:'</span>, e.text);</span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">'Trigger:'</span>, e.trigger);</span><br><span class="line">            success_prompt(COPY_SUCCESS);</span><br><span class="line">            e.clearSelection();</span><br><span class="line">        &#125;);</span><br><span class="line">        clipboard.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//您可以加入失败提示</span></span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Action:'</span>, e.action);</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">'Trigger:'</span>, e.trigger);</span><br><span class="line">            fail_prompt(COPY_FAILURE);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    initCopyCode();</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 弹出式提示框，默认1.5秒自动消失</span></span><br><span class="line"><span class="comment">   * @param message 提示信息</span></span><br><span class="line"><span class="comment">   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info</span></span><br><span class="line"><span class="comment">   * @param time 消失时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="keyword">var</span> prompt = <span class="function"><span class="keyword">function</span> (<span class="params">message, style, time</span>)</span>&#123;</span><br><span class="line">    style = (style === <span class="literal">undefined</span>) ? <span class="string">'alert-success'</span> : style;</span><br><span class="line">    time = (time === <span class="literal">undefined</span>) ? <span class="number">1500</span> : time*<span class="number">1000</span>;</span><br><span class="line">    $(<span class="string">'&lt;div&gt;'</span>)</span><br><span class="line">        .appendTo(<span class="string">'body'</span>)</span><br><span class="line">        .addClass(<span class="string">'alert '</span> + style)</span><br><span class="line">        .html(message)</span><br><span class="line">        .show()</span><br><span class="line">        .delay(time)</span><br><span class="line">        .fadeOut();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 成功提示</span></span><br><span class="line"><span class="keyword">var</span> success_prompt = <span class="function"><span class="keyword">function</span>(<span class="params">message, time</span>)</span>&#123;</span><br><span class="line">    prompt(message, <span class="string">'alert-success'</span>, time);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 失败提示</span></span><br><span class="line"><span class="keyword">var</span> fail_prompt = <span class="function"><span class="keyword">function</span>(<span class="params">message, time</span>)</span>&#123;</span><br><span class="line">    prompt(message, <span class="string">'alert-danger'</span>, time);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 提醒</span></span><br><span class="line"><span class="keyword">var</span> warning_prompt = <span class="function"><span class="keyword">function</span>(<span class="params">message, time</span>)</span>&#123;</span><br><span class="line">    prompt(message, <span class="string">'alert-warning'</span>, time);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 信息提示</span></span><br><span class="line"><span class="keyword">var</span> info_prompt = <span class="function"><span class="keyword">function</span>(<span class="params">message, time</span>)</span>&#123;</span><br><span class="line">    prompt(message, <span class="string">'alert-info'</span>, time);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><h2 id="2-引入JS文件">2.引入JS文件</h2><p>将以上两个JS文件引入到主题每个页面都用的文件里, 一定要输入对你自己的src路径</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/blog/js/clipboard.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/blog/js/clipboard-use.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-配置样式表">3.配置样式表</h2><p>将下列代码添加到主题的样式表里, 根据自己的div修改</p><details><summary>One More Thing 👇</summary><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">//代码块复制按钮</span><br><span class="line"><span class="selector-class">.highlight</span>&#123;</span><br><span class="line">    //方便copy代码按钮（btn-copy）的定位</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#fcfcfc,#eee);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">//复制提示, 成功or失败</span><br><span class="line"><span class="selector-class">.alert</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99999</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">24px</span> <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: @border_radius_code_block;</span><br><span class="line">    <span class="attribute">box-shadow</span>: @boxshadow_card_normal;</span><br><span class="line">    <span class="attribute">font-family</span>: @fontfamily_base;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: @fontsize_base;</span><br><span class="line">    &amp;.alert-success &#123;</span><br><span class="line">        <span class="selector-tag">color</span>: <span class="selector-id">#ffffff</span>;</span><br><span class="line">        <span class="selector-tag">background-color</span>: <span class="selector-id">#1BC3FB</span>;</span><br><span class="line">        <span class="selector-tag">border-color</span>: <span class="selector-id">#d6e9c6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.alert-info</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#31708f</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#d9edf7</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#bce8f1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.alert-warning</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#8a6d3b</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fcf8e3</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#faebcc</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-class">.alert-danger</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#a94442</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#f2dede</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#ebccd1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo为主题添加代码隐藏功能</title>
      <link href="/hide-code.html"/>
      <url>/hide-code.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>写博客有时候需要添加的代码真的很多, 而我们又不想让它显示在网页上.</p><p>添加一个代码隐藏功能吧!</p><a id="more"></a><p>  首先, 你要明白不论添加一些什么功能, 无非是添加一些js插件实现.</p><h2 id="1-自定义内置标签">1.自定义内置标签</h2><p>  通过查看自定义标签的<a href="https://hexo.io/api/" target="_blank" rel="noopener">API</a>, 发现主题自带标签脚本都会存放在<code>themes/xxx/scripts/tag/xxx.js</code>中</p><p>首先, 我们要注册一个自己的代码隐藏内置标签fold.</p><p>新建<a href="https://pan.baidu.com/s/1MPnkw17z_3uWIsEu0nfWPg" target="_blank" rel="noopener">fold.js</a>(提取码: 0khu)文件, 路径(没有相应目录的自建)如图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5Cfold.png" alt="fold"></p><p>内容：</p><details><summary>One More Thing 👇</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* global hexo */</span></span><br><span class="line"><span class="comment">// Usage: &#123;% fold ???? %&#125; Something &#123;% endfold %&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fold</span> (<span class="params">args, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text = args[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span>(!text) text = <span class="string">"点击显/隐"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;div&gt;&lt;div class="fold_hider"&gt;&lt;div class="close hider_title"&gt;'</span> + text + <span class="string">'&lt;/div&gt;&lt;/div&gt;&lt;div class="fold"&gt;\n'</span> + hexo.render.renderSync(&#123;<span class="attr">text</span>: content, <span class="attr">engine</span>: <span class="string">'markdown'</span>&#125;) + <span class="string">'\n&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.tag.register(<span class="string">'fold'</span>, fold, &#123;<span class="attr">ends</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure></details><h2 id="2-消除渲染undefined问题">2.消除渲染undefined问题</h2><p>在scripts目录下添加一个<a href="https://pan.baidu.com/s/1-S1YsOh7B0G-QpQDeZ4iOQ" target="_blank" rel="noopener">tags.js</a>(提取码: giom)文件, 内容:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">修复在 fold 标签里写 ```代码块```，最终会被渲染成 undefined 的问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> rEscapeContent = <span class="regexp">/&lt;escape(?:[^&gt;]*)&gt;([\s\S]*?)&lt;\/escape&gt;/g</span>;</span><br><span class="line"><span class="keyword">const</span> placeholder = <span class="string">'\uFFFD'</span>;</span><br><span class="line"><span class="keyword">const</span> rPlaceholder = <span class="regexp">/(?:&lt;|&amp;lt;)\!--\uFFFD(\d+)--(?:&gt;|&amp;gt;)/g</span>;</span><br><span class="line"><span class="keyword">const</span> cache = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeContent</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;!--'</span> + placeholder + (cache.push(str) - <span class="number">1</span>) + <span class="string">'--&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.filter.register(<span class="string">'before_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rEscapeContent, <span class="function"><span class="keyword">function</span>(<span class="params">match, content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> escapeContent(content);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rPlaceholder, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cache[<span class="built_in">arguments</span>[<span class="number">1</span>]];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="3-设置默认折叠代码">3.设置默认折叠代码</h2><p>将下列代码复制到你的主题的JS(每个页面都会加载的JS)文件中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">'click'</span>, <span class="string">'.fold_hider'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">'&gt;.fold'</span>, <span class="keyword">this</span>.parentNode).slideToggle();</span><br><span class="line">        $(<span class="string">'&gt;:first'</span>, <span class="keyword">this</span>).toggleClass(<span class="string">'open'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//默认情况下折叠</span></span><br><span class="line">    $(<span class="string">"div.fold"</span>).css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="4-配置fold显示样式">4.配置fold显示样式</h2><p>将下述代码复制到你的主题样式文件里:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hider_title</span>&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">"Microsoft Yahei"</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.close</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"▼"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.open</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"▲"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用Hexo和GitHub搭建一个静态博客</title>
      <link href="/Hexo2.html"/>
      <url>/Hexo2.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>没有服务器也可以哦</p><p>用github pages与Hexo搭建免费的个人博客</p><a id="more"></a><p>之前讲过了利用gitee搭建静态博客, 现在说一下利用GitHub搭建博客</p><h2 id="1-gitee与GitHub比较">1.gitee与GitHub比较</h2><blockquote><p>gitee是国内的仓库, 访问速度会比GitHub快点, 也比GitHub稳定一点. 但都可以利用CDN来加速访问, 之后会提到如何利用CDN加速.</p><p>GitHub可以使用自己的域名, 自定义自己的博客url, 这项服务是免费的. gitee也可以, 但是这项服务需要收费.</p></blockquote><h2 id="2-前期准备">2.前期准备</h2><ul><li>有一个<a href="https://github.com" target="_blank" rel="noopener">github</a>账号, 没有就先去注册一个</li><li>本地安装<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">node.js</a>,  <a href="NodeJS.html">配置教程</a></li><li>本地安装hexo，安装完NodeJS，用npm全局安装hexo，命令：npm install hexo-cli -g</li><li>本地安装<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">git for windows</a></li></ul><h2 id="3-创建Github仓库-开启pages服务">3.创建Github仓库, 开启pages服务</h2><blockquote><p>点击右上角的加号, 再点击 New repository 创建仓库，创建时先选上创建一个 README，方便测试; 之后进入仓库; 点击 setting，向下滚动滚轮找到Github Pages，在Source下面选择 master branch 开启服务.如图：</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github.png" alt="github"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github02.png" alt="github02"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github03.png" alt="github03"></p><h2 id="4-初始化博客并上传">4.初始化博客并上传</h2><h3 id="①新建空目录">①新建空目录</h3><p>如图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github04.png" alt="github04"></p><h3 id="②安装插件">②安装插件</h3><p>打开命令行, 依次执行下列命令(路径改为你自己的). 执行完hexo s后, 访问http://localhost:4000 便是本地博客.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f:</span><br><span class="line">cd test</span><br><span class="line">npm install hexo-cli -g #之前没安装hexo的执行此命令</span><br><span class="line">hexo init</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"><span class="meta">#</span><span class="bash">清理项目&amp;&amp;生成项目文件&amp;&amp;本地运行项目 hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span></span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br><span class="line"><span class="meta">#</span><span class="bash">修改完配置信息，再 hexo d 上传到远程仓库</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h3 id="③配置全局-config-yml文件">③配置全局_config.yml文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">CRainyDay's</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">CRainyDay</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="comment">#url</span></span><br><span class="line"><span class="attr">url:</span> <span class="attr">https://crainyday.github.io/test</span> <span class="comment">#这里填写GitHub Pages生成的url</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/test</span> <span class="comment">#博客根目录，若是url为：https://crainyday.github.io，即一个二级域名，root: /</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span> <span class="comment">#网站应用的主题名字,可以换为你喜欢的主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#与hexo d相关的配置</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="attr">https://github.com/用户名/仓库名.git</span> <span class="comment">#你的GitHub仓库地址</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><blockquote><p>这里是一些<a href="https://hexo.io/themes/" target="_blank" rel="noopener">Hexo 主题</a>，你可以选择一个自己喜欢的主题。下载后放在 themes 目录下即可。</p><p>有关其他的主题配置，请看各主题的 README 文档。</p></blockquote><h3 id="④上传到GitHub">④上传到GitHub</h3><p>接着上述命令执行hexo d命令. 第一次执行该命令, 期间第一次上传时，需要输入GitHub的账号密码. 上传之后, 更新一下Pages等一会访问给出的url, 便可以进入你的博客.</p><h2 id="5-自定义博客url">5.自定义博客url</h2><h3 id="①创建CNAME文件">①创建CNAME文件</h3><p>在本地博客根目录的source目录下, 新建CNAME文件(无后缀名). 内容为你的二级域名或其他域名</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github05.png" alt="github05"></p><h3 id="②解析域名">②解析域名</h3><p>选择CNAME解析, 添加二级域名, 记录值为GitHub Pages提供的. 其实就是 “<a href="http://xn--6qqv7i14ofosyrb.github.io" target="_blank" rel="noopener">你的用户名.github.io</a>”</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github07.png" alt="github07"></p><h3 id="③修改全局-config-yml文件">③修改全局_config.yml文件</h3><p>只需修改博客的url和网站根目录即可.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url: http:&#x2F;&#x2F;test.rainyday.top</span><br><span class="line">root: &#x2F;</span><br></pre></td></tr></table></figure><h3 id="④更新GitHub-Pages">④更新GitHub Pages</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/github06.png" alt="github06"></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VPS和shadowsocks搭建VPN</title>
      <link href="/VPN.html"/>
      <url>/VPN.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>想不想要自己动手搭建一个VPN呢?</p><p>在这里, 用VPS和shadowsocks搭建的 VPN , 手机端也能用</p><a id="more"></a><h2 id="1-前期准备">1.前期准备</h2><ul><li>购买一个国外的VPS, 建议CentOS7系统</li><li>安装<a href="https://xshell.en.softonic.com/download" target="_blank" rel="noopener">XShell</a>, 用来远程连接你的VPS</li><li>安装<a href="https://www.netsarang.com/zh/xftp/" target="_blank" rel="noopener">XFTP</a>, 用来向你的VPS传输文件. (用 XShell 连接, vim 编写文件也行.)</li></ul><h2 id="2-安装-配置shadowsocks">2.安装&amp;配置shadowsocks</h2><p>  启动XShell, 输入主机, 点击用户身份验证, 输入用户名: root, 和你的root密码</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5Cshell.png" alt="shell"></p><h3 id="A-先用shell命令安装pip">A.先用shell命令安装pip</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">有yum可以用yum安装pip</span></span><br><span class="line">yum install python-setuptools</span><br><span class="line">easy_install pip</span><br><span class="line"><span class="meta">#</span><span class="bash">没有的可以用用下面命令安装pip, 没有python需要先安装python</span></span><br><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line">python get-pip.py</span><br><span class="line"><span class="meta">#</span><span class="bash">安装完pip后, 用pip安装shadowsocks</span></span><br><span class="line">pip install shadowsocks</span><br></pre></td></tr></table></figure><h3 id="B-配置VPS上的shadowsocks">B.配置VPS上的shadowsocks</h3><p>  启动XFTP, 同XShell连接远程VPS, 将新建的shadowsocks.json文件, 上传到/etc目录下</p><p><strong><a href="https://pan.baidu.com/s/1O2Ay5j35HfugFqrkpjmPdw" target="_blank" rel="noopener">shadowsocks.json</a>(提取码: 4k4l,下载的话请重命名)文件要用UTF-8编码</strong>, 内容如下:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"server"</span>: <span class="string">"你的VPSIPv4地址"</span>,</span><br><span class="line">  <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">  <span class="attr">"local_port"</span>: <span class="number">1080</span>,</span><br><span class="line">  <span class="attr">"port_password"</span>: &#123;</span><br><span class="line">   <span class="attr">"443"</span>: <span class="string">"自己随便设置一个连接这个VPN的密码"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"timeout"</span>: <span class="number">300</span>,</span><br><span class="line">  <span class="attr">"method"</span>: <span class="string">"aes-256-cfb"</span>,</span><br><span class="line">  <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="C-开启shadowsocks服务">C.开启shadowsocks服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">用以下命令之一关闭防火墙</span></span><br><span class="line">service iptables stop</span><br><span class="line">service firewalld stop</span><br><span class="line"><span class="meta">#</span><span class="bash">禁止firewall开机启动</span></span><br><span class="line">systemctl disable firewalld.service</span><br><span class="line"><span class="meta">#</span><span class="bash">加载shadowsocks配置</span></span><br><span class="line">ssserver -c /etc/shadowsocks.json</span><br><span class="line"><span class="meta">#</span><span class="bash">开启shadowsocks服务</span></span><br><span class="line">ssserver -c /etc/shadowsocks.json -d start</span><br><span class="line"><span class="meta">#</span><span class="bash">关闭shadowsocks服务</span></span><br><span class="line">ssserver -c /etc/shadowsocks.json -d stop</span><br></pre></td></tr></table></figure><h2 id="3-本地配置shadowsocks">3.本地配置shadowsocks</h2><ul><li><a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener">Android</a> shadowsocks</li><li><a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener">Windows</a> shadowsocks</li><li>IPhone shadowsocks(<a href="https://pan.baidu.com/s/1-YNaEjIsVk8IKBsJ07YEOQ" target="_blank" rel="noopener">百度网盘</a>提取码: lagp, 链接失效请向博主索取)</li></ul><h3 id="A-Windows配置">A.Windows配置</h3><p>下载解压文件, 运行exe文件, 如图配置:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5Cconf1.png" alt="conf1"></p><p>右键点击状态栏中的本软件, 再点击&quot;启用系统代理&quot;即开启VPN</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5Cconf2.png" alt="conf2"></p><h3 id="B-Android配置-IPhone一样">B.Android配置(IPhone一样)</h3><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="imgs%5Cconf3.png" alt="conf3"></p>]]></content>
      
      
      
        <tags>
            
            <tag> VPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows上配置NodeJS和npm</title>
      <link href="/NodeJS.html"/>
      <url>/NodeJS.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>本文主要讲如何在windows上配置NodeJS和npm</p><p>用github pages或gitee pages(中国的github)与Hexo搭建免费的个人博客</p><a id="more"></a><h2 id="1-前期了解">1.前期了解</h2><blockquote><p>Node.js 是一个基于 Chrome v8 引擎的 JS 运行环境. Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型, 使其轻量又高效. Node.js 使用包管理器 npm来管理所有模块的安装、配置、删除等操作, 使用起来非常方便, 但想配置好npm的使用环境稍微有点复杂.</p></blockquote><h2 id="2-本地安装Node-js">2.本地安装Node.js</h2><blockquote><p>进入<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">NodeJS</a>官网下载, 我们这里选择下载LTS版本的, LTS代表长期支持版本, 新手建议使用这个版本, 因为这个版本使用的人最多, 出问题百度一般都能找到解决方案.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs01.png" alt="nodejs01"></p><blockquote><p>下载完后安装，不要急着点击 Next。</p><p>下载完成后傻瓜安装就好, 可以选择软件安装目录, 建议不要安在C盘.</p><p>安装到这一步(如下图)时注意, 这一步是选择安装哪些模块, 默认是全部安装, 对于新手来说建议全部安装.</p><p>点开那个add path选项前面的+号, 会看到, 把NodeJS和NPM这两个模块的命令路径添加到系统路径里, 这对我们来说就非常方便了. 之后点击next继续下一步, 然后确认信息, 点击Install开始安装.</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs02.png" alt="nodejs02"></p><h2 id="3-测试是否安装成功">3.测试是否安装成功</h2><blockquote><p>按下键盘的windows+R键, 输入cmd, 回车, 之后就打开了命令行, 依次输入下列命令.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><blockquote><p>如果正确输出版本号(如下图), 说明我们的NodeJS和NPM就安装好. 若没有成功, 需要手动配置系统path。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs03.png" alt="nodejs03"></p><h2 id="4-配置node和npm到系统path">4.配置node和npm到系统path</h2><blockquote><p>若步骤3测试失败, 请看此步骤, 否则跳过.</p></blockquote><ul><li>①右键单击此电脑, 之后点击属性(如图)</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs04.png" alt="nodejs04"></p><ul><li>②之后, 依次点击&quot;高级系统设置&quot;、“系统变量”, 将你的NodeJS的安装目录(例:D:\Program Files\nodejs)添加到系统path里面. 如图</li></ul><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs05.png" alt="nodejs05"></p><ul><li>③之后, 进行步骤3测试就能输出版本号了.</li></ul><h2 id="5-修改npm的缓存目录和全局目录路径">5.修改npm的缓存目录和全局目录路径</h2><blockquote><p>在你的NodeJS的安装目录下, 新建两个空目录node_cache和node_global, 如图:</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs06.png" alt="nodejs06"></p><blockquote><p>之后, 打开命令行, 执行以下两个命令(命令中的路径改为你的路径), 这就将npm的全局模块目录和缓存目录配置到我们刚才新建的那两个空目录.</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix "D:\Program Files\nodejs\node_global"</span><br><span class="line">npm config set cache "D:\Program Files\nodejs\node_cache"</span><br></pre></td></tr></table></figure><blockquote><p>由于之前修改了nodejs的默认模块安装路径, 必须修改nodejs默认的模块调用路径, 打开你的电脑的&quot;系统变量&quot;(和步骤4中一样), 在用户变量或系统变量的path中找到以&quot;npm&quot;结尾的字符串, 将其改为&quot;D:\Program Files\nodejs\node_global&quot;(路径改为你的), 若没找到, 直接在系统变量的path里添加一项, 内容为&quot;D:\Program Files\nodejs\node_global&quot;(路径改为你的).</p></blockquote><p>之后, 依次输入命令如下, 有输出结果如图(则配置正确).</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install cluster -g</span><br><span class="line">node</span><br><span class="line">require('cluster')</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/nodejs07.png" alt="nodejs07"></p><h2 id="6-修改npm模块镜像源">6.修改npm模块镜像源</h2><blockquote><p>将npm的模块下载仓库从默认的国外站点改为国内的站点, 这样下载模块的速度才能比较快, 只需要一个命令即可. 其中registry_url指的是国内提供的一些npm仓库地址, 常用的有:</p></blockquote><p><a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p><p><a href="http://r.cnpmjs.org/" target="_blank" rel="noopener">http://r.cnpmjs.org/</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=registry_url</span><br></pre></td></tr></table></figure><p>你也可以选择不改, 但建议改一下, 毕竟这样下载速度很快.</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NodeJS </tag>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用Hexo和Gitee搭建一个静态博客</title>
      <link href="/Hexo.html"/>
      <url>/Hexo.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>没有服务器也可以哦</p><p>用gitee pages与Hexo搭建免费的个人博客</p><a id="more"></a><p>本文主要讲解gitee上搭建, 之后会讲github上的搭建.</p><h2 id="1-前期准备">1.前期准备</h2><ul><li>有一个<a href="https://gitee.com/" target="_blank" rel="noopener">gitee</a>账号, 没有就先去注册一个</li><li>本地安装<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">node.js</a>,  <a href="NodeJS.html">配置教程</a></li><li>本地安装<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">git for windows</a>, 可根据系统选择, 本文按照windows讲解.</li></ul><h2 id="2-创建gitee仓库开启pages服务">2.创建gitee仓库开启pages服务</h2><blockquote><p>  先创建仓库, 点击右上角的加号; 再进入仓库, 开启pages服务.</p><p>这里建议，将你的仓库名设置为你的用户名，例如我的gitee用户名是 CRainyD</p><p>ay，就将仓库名设置为：crainyday，这样的话，后边开启的静态网站服务的 url为：<a href="https://crainyday.gitee.io">https://crainyday.gitee.io</a>，而不是 <a href="https://crainyday.gitee.io/%E4%BB%93%E5%BA%93%E5%90%8D%EF%BC%8C%E7%9C%8B%E7%9D%80%E6%9B%B4%E8%88%92%E6%9C%8D%E4%B8%80%E7%82%B9%E3%80%82">https://crainyday.gitee.io/仓库名，看着更舒服一点。</a></p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/gitee.png" alt="gitee"></p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/pages.png" alt="pages"></p><p><font style='color:red;font-weight:bold;font-size:1.5em;'>注意: !!!每次用hexo d提交代码后, 都需要更新一下pages服务, 然后过几秒再进入你的博客!!!其实不更新也行, 但可能不会出现你预期的效果</font></p><h2 id="3-Hexo的安装与使用">3.Hexo的安装与使用</h2><blockquote><p>  Hexo是一个很常用的博客发布工具, 支持markdown格式(推荐一款<a href="https://www.typora.io/#windows" target="_blank" rel="noopener">md编译器</a>), hexo有很多插件和主题.</p></blockquote><blockquote><p>  一定要配置好系统的环境变量, 才能用npm和hexo命令, 若不能用请看<a href="NodeJS.html">配置教程</a></p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#全程在博客目录下进行, 先新建一个空文件夹(例:F:/Hexo), 再<span class="built_in">cd</span>进入该目录</span><br><span class="line">#安装hexo</span><br><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">#用hexo新建项目, 生成站点</span><br><span class="line">hexo init</span><br><span class="line">#清理缓存&amp;&amp;生成项目文件&amp;&amp;本地运行项目</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s#需要先安装hexo-server插件,才能hexo s</span><br></pre></td></tr></table></figure><p>  执行到这里, 如果前面过程中没有错误, 就会在本地成功启用Hexo博客站点, 通过<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a>访问本地博客站点, 如图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/hexo.png" alt="hexo"></p><p>  执行完hexo init命令, 生成的Hexo的目录结构如图:</p><p><img src="https://cdn.jsdelivr.net/gh/crainyday/blog@master/lazyload.svg" data-original="https://cdn.jsdelivr.net/gh/crainyday/blog@master/imgs/%E7%9B%AE%E5%BD%95.png" alt="目录"></p><blockquote><p>  若想要将本地的博客文件push到gitee仓库, 需要先配置_config.yml全局配置文件, 再进行步骤4配置git相关信息, 最后才能执行下列命令将本地博客上传到远程仓库.</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#发布项目到远程</span><br><span class="line">hexo d#需要hexo-deployer-git插件,配置完一些git的相关配置才能上传</span><br><span class="line">#生成页面</span><br><span class="line">hexo new page "xxx"</span><br><span class="line">#生成新文章</span><br><span class="line">hexo new "xxx"</span><br><span class="line">#安装插件</span><br><span class="line">npm install xxx --save</span><br><span class="line">#卸载插件</span><br><span class="line">npm unstall xxx</span><br></pre></td></tr></table></figure><blockquote><p>  以上命令既可以用Windows的cmd来完成, 也可以用git bash来完成, 但有的命令cmd执行会有一些问题, 建议全部使用git bash来执行. 之后会提到git bash的使用</p></blockquote><blockquote><p>这里是一些<a href="https://hexo.io/themes/" target="_blank" rel="noopener">Hexo 主题</a>，你可以选择一个自己喜欢的主题。下载后放在 themes 目录下即可。</p><p>有关其他的主题配置，请看各主题的 README 文档。</p></blockquote><h3 id="font-color-black-根目录-config-yml全局配置文件-font"><font color="black">根目录_config.yml全局配置文件</font></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">title: CRainyDay&#39;s Blog</span><br><span class="line">author: CRainyDay</span><br><span class="line">language: zh-CN</span><br><span class="line">#url</span><br><span class="line">url: http:&#x2F;&#x2F;crainyday.gitee.io&#x2F;blog #这里填写gitee pages生成的url</span><br><span class="line">root: &#x2F;blog #博客根目录</span><br><span class="line">theme: landscape #网站应用的主题名字,可以换为你喜欢的主题</span><br><span class="line">#与hexo d相关的配置</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:&#x2F;&#x2F;gitee.com&#x2F;用户名&#x2F;仓库名.git #你的gitee仓库地址</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p><font style='color:red;font-weight:bold;font-size:1.5em;'>注意: 配置文件中每个 : 后要有一个英文的空格</font></p><p>每个主题相应的目录下也有主题的_config.yml配置文件</p><h2 id="4-git的使用">4.git的使用</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#需要在你的博客根目录下右键运行Git Bash Here</span><br><span class="line">git config --global user.name "你的gitee用户名"</span><br><span class="line">git config --global user.email "你的gitee绑定的邮箱地址"</span><br><span class="line">git init</span><br><span class="line">git remote add origin &lt;你的仓库地址&gt;</span><br><span class="line">#以下命令这里用不到, 可以了解一下</span><br><span class="line">git clone &lt;想要克隆的项目地址&gt;</span><br><span class="line">git pull origin master#拉取代码</span><br><span class="line">git add .</span><br><span class="line">git commit -m "提交信息"</span><br><span class="line">git push origin master#提交代码</span><br></pre></td></tr></table></figure><h2 id="5-上传到gitee仓库">5.上传到gitee仓库</h2><blockquote><p>在你的本地博客根目录下, 右键运行Git Bash Here, 输入hexo d命令上传, 第一次上传期间需要输入你的gitee账号密码</p></blockquote><blockquote><p>注意: hexo d命令必须安装hexo-deployer-git插件</p></blockquote><blockquote><p>上传之后别忘了更新一下pages服务, 其实不更新也可以, 但是有时会出一些错误.</p></blockquote><blockquote><p>之后访问你开启pages服务时给你的url就可以了, 那便是你的博客地址.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Gitee </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
